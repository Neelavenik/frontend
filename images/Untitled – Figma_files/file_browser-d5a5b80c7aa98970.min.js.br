"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="e6c839fb-c6cf-5afe-94ae-7d5055402c1a")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[7748],{569421:(e,t,a)=>{a.d(t,{$M:()=>j,$y:()=>R,BP:()=>L,Bb:()=>es,Ed:()=>q,Et:()=>l,F0:()=>r,Hl:()=>en,I1:()=>X,Jo:()=>Y,KZ:()=>x,LQ:()=>N,M7:()=>i,N5:()=>K,Nd:()=>s,Nv:()=>O,O:()=>z,O2:()=>er,OL:()=>d,Or:()=>H,Ov:()=>_,Ps:()=>D,Qv:()=>Q,S$:()=>P,SU:()=>B,Sv:()=>p,TB:()=>u,TK:()=>E,Uu:()=>h,V:()=>eo,W:()=>c,Xq:()=>J,Yn:()=>v,ZE:()=>W,ZM:()=>f,_h:()=>n,aK:()=>g,aQ:()=>A,bv:()=>b,cH:()=>k,cc:()=>et,er:()=>m,ex:()=>V,fI:()=>I,gn:()=>$,i9:()=>y,iv:()=>Z,jg:()=>el,lQ:()=>ee,li:()=>o,ll:()=>U,nm:()=>ea,nz:()=>M,o1:()=>F,rh:()=>T,sk:()=>w,tZ:()=>C,uC:()=>ei,uD:()=>G,xr:()=>S});let r="org_self_serve_figjam--selfServePage--xMlvz",n="org_self_serve_figjam--stepContainer--zohgH",i="org_self_serve_figjam--stepContent--sL7gc",l="org_self_serve_figjam--stepContentTeamCreation--aaY9V",o="org_self_serve_figjam--menuContainer--hPrPq",s="org_self_serve_figjam--cancelMenuItem--ZABKH",c="org_self_serve_figjam--pageTitle--Y69Xv",d="org_self_serve_figjam--pageSubTitle--jRWG-",m="org_self_serve_figjam--purchaseSummary--1jvAh",u="org_self_serve_figjam--sidebarScrollContainer--UycW4",_="org_self_serve_figjam--summaryHeader--X9DJV",p="org_self_serve_figjam--subText--Pqpby",g="org_self_serve_figjam--summaryDivider--Ijd9-",f="org_self_serve_figjam--summaryDividerFull--kuRTz org_self_serve_figjam--summaryDivider--Ijd9-",E="org_self_serve_figjam--headerText--2IfHu",h="org_self_serve_figjam--flex--0m89h",y="org_self_serve_figjam--svgText--d7FBP org_self_serve_figjam--flex--0m89h",v="org_self_serve_figjam--lineItem--TU69Z org_self_serve_figjam--flex--0m89h",b="org_self_serve_figjam--boldText--M7Bo1 org_self_serve_figjam--headerText--2IfHu",w="org_self_serve_figjam--nextStep--PqDbR",T="org_self_serve_figjam--nextStepContainer--66sFN",I="org_self_serve_figjam--paymentForm--ymx94",N="org_self_serve_figjam--teamLargeTileContainer--QmdT1",x="org_self_serve_figjam--teamSmallTileContainer--NjKIe org_self_serve_figjam--teamLargeTileContainer--QmdT1",C="org_self_serve_figjam--teamTileLarge--YhJVn text--fontPos14--OL9Hp text--_fontBase--QdLsd",S="org_self_serve_figjam--teamTileSmall--umUI5 org_self_serve_figjam--teamTileLarge--YhJVn text--fontPos14--OL9Hp text--_fontBase--QdLsd",k="org_self_serve_figjam--showMoreContainer--s6FDi visual_bell--messageContainer--fkhJH _overlayBase--_overlayBase--Rkj8l text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",A="org_self_serve_figjam--showMoreMessage--bU3eH visual_bell--message--lQw67 visual_bell--messageBase--Dg3ya ellipsis--ellipsis--Tjyfa",R="org_self_serve_figjam--helpIcon--VL26R",L="org_self_serve_figjam--teamText--9mEG6",D="org_self_serve_figjam--teamName--xKICF text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",P="org_self_serve_figjam--teamEditors--BIoT8 text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",F="org_self_serve_figjam--teamCheck--tAaSc",O="org_self_serve_figjam--detailsForm--ML86I stripe--stripeCardAndAddress--b42eG org_self_serve_figjam--paymentForm--ymx94",M="org_self_serve_figjam--stepRect--bhosM org_self_serve_figjam--boxBorder--IYrfM",B="org_self_serve_figjam--verticalDivider--55STw",U="org_self_serve_figjam--reviewSummary--a9zmQ",V="org_self_serve_figjam--reviewItem--nP8xV",H="org_self_serve_figjam--billingDetails--n7k3F",W="org_self_serve_figjam--billingSubText--tlSbP",j="org_self_serve_figjam--billingItem--ny6ji",G="org_self_serve_figjam--textLink--eCcAk org_self_serve_figjam--billingSubText--tlSbP",$="org_self_serve_figjam--confirmPaymentBox--2UmhL",z="org_self_serve_figjam--msaCheck--S57fu",Y="org_self_serve_figjam--confirmationBox--Z-OCC org_self_serve_figjam--stepRect--bhosM org_self_serve_figjam--boxBorder--IYrfM",K="org_self_serve_figjam--flexBox--3nRDc",Q="org_self_serve_figjam--confirmationPageText--WnNVw text--fontPos13--xW8hS text--_fontBase--QdLsd",X="org_self_serve_figjam--confirmationCharge--6L8US org_self_serve_figjam--confirmationPageText--WnNVw text--fontPos13--xW8hS text--_fontBase--QdLsd",q="org_self_serve_figjam--confirmationRow--qQLOY",J="org_self_serve_figjam--confirmationHomeButton--NMBxx text--fontNeg13--7Ebf5 text--_fontBase--QdLsd text--_negText--j9g-L",Z="org_self_serve_figjam--confirmationAmountDue--p0xPk",ee="org_self_serve_figjam--reviewSubTitle--GOFpF",et="org_self_serve_figjam--confirmationHeading--SQiqP",ea="org_self_serve_figjam--confirmationLoadingText--CTID2 org_self_serve_figjam--msaLabelText--r7LKd",er="org_self_serve_figjam--greenCheck--NXjmx",en="org_self_serve_figjam--plusSvg--ZHB1e",ei="org_self_serve_figjam--purchaseMinimumBanner--mM4gI",el="org_self_serve_figjam--confirmationPage--KGVNA",eo="org_self_serve_figjam--currencyText--CW0E- org_self_serve_figjam--boldText--M7Bo1 org_self_serve_figjam--headerText--2IfHu",es="org_self_serve_figjam--createTeamContainer--D3kS-"},474263:(e,t,a)=>{a.d(t,{B8:()=>p,IW:()=>_,J:()=>E,Ou:()=>y,R6:()=>f,Uu:()=>s,X5:()=>u,XX:()=>o,YK:()=>i,ay:()=>h,eK:()=>l,fI:()=>n,jD:()=>g,me:()=>m,nM:()=>c,wD:()=>d,yU:()=>r});let r="step_pay--addAnnualPlan--3YUVe",n="step_pay--paymentForm--gqjt-",i="step_pay--totalLabelText--FsxE-",l="step_pay--smallGrayText--C8Sfn",o="step_pay--bigButton--Gtz0E",s="step_pay--flex--ZZh0K",c="step_pay--row--DcuMl",d="step_pay--rowFlex--Mf5y8 step_pay--row--DcuMl",m="step_pay--separator--gTqAJ",u="step_pay--total--FgOpU",_="step_pay--totalText--VTLEG step_pay--jumboText--JE1wb",p="step_pay--plusTaxText--gSICq",g="step_pay--numEditorsInput--mTc8p",f="step_pay--subtotal--188gf",E="step_pay--changeLink--dSfAg blue_link--blueLink--9rlnd",h="step_pay--bigTerms--nC3J9",y="step_pay--flowActionsSingle--X0Hy-"},620268:(e,t,a)=>{a.d(t,{DD:()=>l,ME:()=>m,Nr:()=>n,Sl:()=>s,Ui:()=>r,h_:()=>o,pq:()=>i,qr:()=>d,t3:()=>c,uK:()=>_,vR:()=>u});let r="resource_cards--cardContainer--dagKQ",n="resource_cards--card--j2AeO",i="resource_cards--info--7v-s9",l="resource_cards--title--9uxRY text--fontPos16--oMC-G text--_fontBase--QdLsd ellipsis--ellipsisAfter2Lines--Qo-Xh ellipsis--_ellipsisAfterNLines--LzI7k",o="resource_cards--description--NQQ-r text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsisAfter2Lines--Qo-Xh ellipsis--_ellipsisAfterNLines--LzI7k",s="resource_cards--image--V7Y8-",c="resource_cards--pluginImage--NgYbh resource_cards--image--V7Y8-",d="resource_cards--footer--cRSOS text--fontPos13--xW8hS text--_fontBase--QdLsd",m="resource_cards--profile--YLut5",u="resource_cards--profileName--Uvden",_="resource_cards--attributes--9cUYC"},596049:(e,t,a)=>{a.d(t,{RZ:()=>r,_q:()=>i,zC:()=>n});let r="comment_confirm_modals--reportContentWrapper--Nseo6",n="comment_confirm_modals--reportContentText--QZrcs",i="comment_confirm_modals--blockContentText--6aU5U"},727475:(e,t,a)=>{a.d(t,{_M:()=>s,bv:()=>i,cI:()=>r,nf:()=>n,q3:()=>l,zc:()=>o});let r="community_hub_banner--bannerContainer--I7euo text--fontPos11--2LvXf text--_fontBase--QdLsd",n="community_hub_banner--link--tqByg",i="community_hub_banner--boldText--jhtS9",l="community_hub_banner--bannerIcon--GVQKO",o="community_hub_banner--iconContainer--Szb1y",s="community_hub_banner--bannerText--Mlrz- ellipsis--ellipsis--Tjyfa"},152462:(e,t,a)=>{a.d(t,{Vi:()=>r,hh:()=>n,jx:()=>c,nu:()=>s,tt:()=>i,uD:()=>o,uw:()=>l});let r="cta_button--duplicateButtonContainer--GU-rX cta_button--buttonBase--xMT0c text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",n="cta_button--figjam--ZRMcS",i="cta_button--duplicateButtonContainerNoIcon--t9Vxs cta_button--duplicateButtonContainer--GU-rX cta_button--buttonBase--xMT0c text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",l="cta_button--duplicateButtonContainerNoIconWide--KYJ2x",o="cta_button--textIconContainer--wV-ch",s="cta_button--duplicateButtonContainerNoIconDisabled--IPh2F cta_button--duplicateButtonContainerDisabled--IzZn7 cta_button--duplicateButtonContainer--GU-rX cta_button--buttonBase--xMT0c text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",c="cta_button--ctaButtonLink--5C3KX"},183846:(e,t,a)=>{a.d(t,{BE:()=>n,LL:()=>l,Xk:()=>i,_1:()=>o,iZ:()=>s,uu:()=>r});let r="detail_view--installButton--IloIX",n="detail_view--installButtonSubtext--iqsQz text--fontPos11--2LvXf text--_fontBase--QdLsd",i="detail_view--pendingInviteBanner--Jfy7s text--fontPos13--xW8hS text--_fontBase--QdLsd",l="detail_view--pendingInviteButton--XYgKx",o="detail_view--paidResourceSection--crSbo detail_view--metadataSectionText--jEK-6 metadata_section--metadataSectionText--7ruPx text--fontPos13--xW8hS text--_fontBase--QdLsd",s="detail_view--reportSection--qDu-P detail_view--metadataSectionText--jEK-6 metadata_section--metadataSectionText--7ruPx text--fontPos13--xW8hS text--_fontBase--QdLsd"},15344:(e,t,a)=>{a.d(t,{CU:()=>n,Yg:()=>l,lI:()=>r,yu:()=>i});let r="mfa_required--ctaButton--PSKI-",n="mfa_required--learnMoreLink--17Yuc",i="mfa_required--switchAccountLink--BAgB-",l="mfa_required--secondaryText--eCIsl"},821150:(e,t,a)=>{a.d(t,{$9:()=>s,BZ:()=>r,Gv:()=>u,Lq:()=>f,PE:()=>i,Pj:()=>_,SI:()=>p,Xm:()=>h,_Z:()=>l,hj:()=>g,ig:()=>c,mj:()=>d,ow:()=>n,s1:()=>E,uO:()=>o,vL:()=>m});let r="styles_properties_form--styleNameAndDescriptionContainer--L2pn-",n="styles_properties_form--styleDescriptionLabel--ErQ6b",i="styles_properties_form--styleDescriptionContainer--NtXrJ",l="styles_properties_form--textInput--rWj8- raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u",o="styles_properties_form--expandingTextInput--E7usn",s="styles_properties_form--textPreviewContainer---jjb4 styles_properties_form--previewContainer--SH1Yk",c="styles_properties_form--gridAndEffectPreviewContainer--9q2FM styles_properties_form--previewContainer--SH1Yk",d="styles_properties_form--loadedFillPreviewContainer--36WiC styles_properties_form--fillPreviewSize--GiUdz",m="styles_properties_form--loadingFillPreviewContainer--WPdS6 styles_properties_form--fillPreviewSize--GiUdz",u="styles_properties_form--stylePreview--tJF78",_="styles_properties_form--textStylePreview--Jp6WQ",p="styles_properties_form--textStylePreviewInverted--GeC3b",g="styles_properties_form--fillStylePreview--xOVAg styles_properties_form--fillPreviewSize--GiUdz",f="styles_properties_form--loading--0A0hy",E="styles_properties_form--isLoaded--2czdf",h="styles_properties_form--themeDropdown--RvF-0"},702701:(e,t,a)=>{a.d(t,{w:()=>w});var r=a(411855),n=a(188507),i=a(586459),l=a(946689),o=a(135876),s=a(48793),c=a(574176),d=a(939863),m=a(403491),u=a(66432),_=a(658386),p=a(805447),g=a(738269),f=a(995852),E=a(229403),h=a(672517),y=a(820113),v=a(630834);let b=e=>{let t=(0,n.d4)(t=>{let a=E.Xw.loadingKeyForPayload({teamId:e});return t.loadingState[a]}),a=(0,n.d4)(t=>t.teamUserByTeamId[e]||{}),l=(0,n.wA)();r.useEffect(()=>{l(E.Xw({teamId:e}))},[l,e]);let o=t!==i.r.SUCCESS;return r.useEffect(()=>{if(!o){let e=Object.keys(a).length;l(f.Az({numWhiteboardEditors:e})),l(f.js({numDesignEditors:e}))}},[l,o,a]),o};function w({selectedView:e}){let{teamId:t}=e,a=b(t),i=(0,n.wA)(),E=()=>{i(f.Nj({teamId:t,onCloseOrComplete:e.onCloseOrComplete}))};return r.createElement(h.fu,{name:"Edu Review",properties:{teamId:t}},r.createElement("div",null,r.createElement(_.O,{menu:r.createElement(u.X,{onClick:()=>{i(g.$T({view:"team",teamId:t})),e.onCloseOrComplete?.()}},r.createElement(c.B,{svg:v.default,className:"edu_review--modalCloseX--t3-Et",dataTestId:"close-button"}))},r.createElement("span",{className:e.showBreadcrumbs?void 0:"edu_review--hidden--IgK6O"},r.createElement(p.J,{index:3})),r.createElement(s.JR,null,(0,d.tx)("edu.almost_done_everything_look_good")),r.createElement(l.Kz,{multiple:4}),r.createElement(o.x,{isLoading:a},()=>r.createElement(m.d,{selectedView:e,onClickConfirm:E,currency:(0,y.LN)(),canSeeBillingAddressExp:!1})))))}},550594:(e,t,a)=>{a.d(t,{DK:()=>c,aZ:()=>s,yr:()=>o});var r=a(367253),n=a(582410),i=a(720647),l=a(227544);function o(e,t){let a={};for(let n of e.filter(e=>t.has(e.team.id))){let e=[{users:n.designEditors,propKey:"designEditor"},{users:n.figjamEditors,propKey:"figjamEditor"},{users:[],propKey:"devMode"}],t={};e.forEach(({users:e,propKey:i})=>{for(let l of e){if((0,r.nD)(l.email))return;a[l.id]||(a[l.id]={user:l,teamIds:[],designEditor:!1,figjamEditor:!1,devMode:!1,teams:[]}),l.id in t||(t[l.id]=new Set),a[l.id][i]=!0,t[l.id].has(n.team.id)||(a[l.id].teamIds.push(n.team.id),a[l.id].teams.push(n.team),t[l.id].add(n.team.id))}})}return a}function s(e,t){let a=n.H5.dict(a=>(t[a]??0)+(e[a]??0)),r=Object.values(a).reduce((e,t)=>e+t,0);return a[i.vu]+=Math.max(l.u3-r,0),a}function c(e,t,a){let r=s(e,t);return{...t,[i.vu]:Math.max(t[i.vu],l._h-e[i.vu],l.u3-a-e[i.vu]-r[i.tL]-(r[i.PE]??0))}}},708833:(e,t,a)=>{a.d(t,{GJ:()=>e_});var r=a(411855),n=a(188507),i=a(629019),l=a.n(i),o=a(776250),s=a(935283),c=a(367253),d=a(737947),m=a(966712),u=a(776621),_=a(304783),p=a(27087),g=a(192437),f=a(946689),E=a(455057),h=a(493323),y=a(827586),v=a(574176),b=a(881388),w=a(939863),T=a(898211),I=a(707570),N=a(41029),x=a(738269),C=a(662275),S=a(995852),k=a(931828),A=a(349410),R=a(672517),L=a(710667),D=a(988022),P=a(66957),F=a(584503),O=a(582410),M=a(720647),B=a(978779),U=a(195971),V=a(488983),H=a(99506),W=a(820113),j=a(227544),G=a(724838),$=a(596607),z=a(426197),Y=a(452353),K=a(802026),Q=a(622139),X=a(668860),q=a(637590),J=a(143678),Z=a(679892),ee=a(831429),et=a(962800),ea=a(550594),er=a(648841),en=a(321801),ei=a(27905),el=a(720818),eo=a(569421),es=a(733982),ec=a(54375);class ed extends r.Component{constructor(e){super(e),this.effectiveStep=()=>this.props.step===K.X1.Initial||this.props.step===K.X1.ChoosePlan?this.props.newTeamProps?.teamFlowType===q.SC.CREATE_AND_UPGRADE?K.X1.CreateTeam:this.state.eligibleUpgrades.length>0||this.props.newTeamProps?K.X1.TeamSelect:K.X1.Details:this.props.step,this.setStep=e=>{this.props.dispatch(x.$T({view:"orgSelfServe",step:e,orgMigrated:!1,newTeamProps:this.props.newTeamProps,upsellSource:this.props.upsellSource})),this.setState(e=>({payment:{...e.payment,card:null}}))},this.onSubmit=()=>{let e=this.effectiveStep();switch(e){case K.X1.CreateTeam:this.state.newTeamName?.trim()&&this.setStep(K.X1.TeamSelect);break;case K.X1.AddCollaborators:this.setStep(K.X1.Details);break;case K.X1.PseudoCreateTeam:this.setStep(K.X1.TeamSelect);break;case K.X1.TeamSelect:this.setStep(K.X1.Details);break;case K.X1.Details:this.setStep(K.X1.Payment);break;case K.X1.Payment:this.onSubmitPaymentAndAddress();break;case K.X1.Review:this.onSubmitPurchaseOrder();break;case K.X1.Confirmation:break;default:(0,s.xb)(e)}},this.ctaProperties=()=>{let e=this.getUpgradesByLicenseType(),t=(0,ea.aZ)(e,this.state.emptySeatsByLicenseType);return{numEditors:e[M.vu],numFigJamEditors:e[M.tL],numDisplayedTeams:this.state.eligibleUpgrades.length+(this.state.newTeamName?1:0),numMigratedTeams:this.state.selectedTeamIds.size+(this.state.newTeamName?1:0),numTotalDesignSeats:t[M.G_.DESIGN],totalFigJamSeats:t[M.G_.FIGJAM],totalDevModeSeats:t[M.G_.DEV_MODE],proposedSubtotal:O.H5.reduce((e,a)=>e+=(t[a]??0)*(j.UB[a]??0),0)/100,domain:(0,c.zN)(this.props.user.email),currency:this.state.currency,upsellSource:this.props.upsellSource}},this.renderNextButton=()=>{let e;let t=!1,a=this.effectiveStep();switch(a){case K.X1.CreateTeam:case K.X1.PseudoCreateTeam:e=(0,w.t)("org_self_serve.create_team_step.next_select_team"),t=!this.state.newTeamName;return;case K.X1.AddCollaborators:e=(0,w.t)("org_self_serve.create_team_step.next_select_team");return;case K.X1.TeamSelect:e=(0,w.t)("org_self_serve.details_step.next_organization_details");break;case K.X1.Details:e=(0,w.t)("org_self_serve.payment_step.next_payment");let n=this.state.orgDetails.legalOrgName?.length,i=this.state.orgDetails.actorName?.length;t=this.props.canSeeBillingAddressExp?t||!n||n<1:t||!n||!i||n<1||i<1;break;case K.X1.Payment:t=t||this.state.apiPending,e=(0,w.t)("org_self_serve.review_step.next_review");break;case K.X1.Review:case K.X1.Confirmation:return null;default:(0,s.xb)(a)}return r.createElement("div",{className:eo.rh},r.createElement(f.vd,{className:eo.sk,disabled:t,onClick:()=>this.onSubmit(),trackingProperties:this.ctaProperties(),dataTestId:"next-step-button"},e))},this.onTeamToggle=e=>{this.state.selectedTeamIds.has(e)?this.setState(t=>(t.selectedTeamIds.delete(e),{selectedTeamIds:t.selectedTeamIds,selectedEditors:(0,ea.yr)(this.state.eligibleUpgrades,t.selectedTeamIds)}),()=>this.computeAdditionalDesignSeats()):this.setState(t=>({selectedTeamIds:t.selectedTeamIds.add(e),selectedEditors:(0,ea.yr)(this.state.eligibleUpgrades,t.selectedTeamIds.add(e))}),()=>this.computeAdditionalDesignSeats())},this.onCardReady=e=>{let t={...this.state.payment,card:e};this.setState({payment:t})},this.onAddressChange=e=>{let t={...this.state.payment,address:e};this.setState({payment:t})},this.onShippingAddressChange=e=>{this.setState({shippingAddress:e})},this.onNameOnPaymentMethodChange=e=>{this.setState({nameOnPaymentMethod:e.trim()})},this.onClearToken=()=>{let e={...this.state.payment,token:null};this.setState({payment:e})},this.onVatIdChange=e=>{this.setState({vatId:e})},this.onRegionalVatIdChange=e=>{this.setState({regionalVatId:e})},this.onVatValidationFail=e=>{this.setState({apiPending:!1,paymentError:e})},this.onChangeNewTeamName=e=>{this.setState({newTeamName:e.trim()})},this.onChangeOrgDetails=e=>{let t=e.target.name,a=e.target.value;if(!t){e.preventDefault(),console.error("HTMLInputElement is missing name attribute:",e.target);return}let r=this.state.orgDetails;switch(t){case"actor_name":r.actorName=a.trim();break;case"legal_org_name":r.legalOrgName=a.trim();break;case"org_name":r.orgName=a.trim()}this.setState({orgDetails:r})},this.contactSales=()=>{this.props.dispatch((0,C.to)({type:T.lk,data:{source:T.B7.ORG_SELF_SERVE_UPGRADE_MODAL}}))},this.onFileBrowserClick=()=>{(0,m.kc)().ps_benchmark?(this.props.newTeamProps&&(0,U.Al)(this.props.user.id),d.Ay.redirect("/files/recent")):(this.props.dispatch(x.$T({view:"recentFiles"})),this.props.newTeamProps&&(0,U.Al)(this.props.user.id))},this.updateAdditionalSeats=e=>{let t=this.getUpgradesByLicenseType();this.setState({emptySeatsByLicenseType:O.H5.dict(a=>(e[a]??0)-(t[a]??0))})},this.addEditors=()=>{let e=new W.vr(this.state.currency),t=O.H5.dict(t=>(0,B._)(this.props.billingPricesResult.data,e.currency,t)),a=this.getUpgradesByLicenseType(),r=(0,ea.aZ)(a,this.state.emptySeatsByLicenseType);this.props.dispatch((0,C.to)({type:en.Bx,data:{seatDataByLicenseType:{[M.vu]:{minSeats:Math.max(a[M.vu],j._h),currentSeats:r[M.vu],seatUnitCostInCents:t.design},[M.tL]:{minSeats:a[M.tL],currentSeats:r[M.tL],seatUnitCostInCents:t.figjam},[M.PE]:{minSeats:a[M.PE]??0,currentSeats:r[M.PE]??0,seatUnitCostInCents:t.dev_mode}},minTotalSeats:j.u3,updateAdditionalSeats:this.updateAdditionalSeats,showAnnualPrice:!0,dispatch:this.props.dispatch,currency:this.state.currency}}))},this.updateAdditionalEmptySeats=e=>{this.setState({emptySeatsByLicenseType:O.H5.dict(t=>e[t])})},this.selectEditors=()=>{let e=this.state.selectedEditors;for(let t in e)e[t]={...e[t]};let t=new W.vr(this.state.currency),a=O.H5.dict(e=>(0,B._)(this.props.billingPricesResult.data,t.currency,e));this.props.dispatch((0,C.to)({type:en.ml,data:{users:e,updateSelectedEditors:this.updateSelectedEditors,updateAdditionalEmptySeats:this.updateAdditionalEmptySeats,dispatch:this.props.dispatch,currency:this.state.currency,minTotalSeats:j.u3,seatInfo:{design:{minCount:j._h,additionalSeatCount:this.state.emptySeatsByLicenseType[M.vu]},figjam:{minCount:0,additionalSeatCount:this.state.emptySeatsByLicenseType[M.tL]},dev_mode:{minCount:0,additionalSeatCount:this.state.emptySeatsByLicenseType[M.PE]??0}},monthlyPriceByLicenseType:a}}))},this.updateSelectedEditors=e=>{this.setState(t=>({...t,selectedEditors:e}))},this.renderBillingItems=()=>{let e=new W.vr(this.state.currency),t=O.H5.dict(t=>(0,B._)(this.props.billingPricesResult.data,e.currency,t)),a=(0,ea.aZ)(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),n={[M.vu]:{totalSeats:a[M.vu],price:t.design,headerString:(0,w.tx)("org_self_serve.billing_items.total_figma_design_editor_with_dev_mode_included.seat_rename",{totalDesignSeatsCount:a[M.vu]})},[M.tL]:{totalSeats:a[M.tL],price:t.figjam,headerString:(0,w.tx)("org_self_serve.headers.total_fig_jam_editor_seats_count.seat_rename",{totalFigJamEditorSeatsCount:a[M.tL]})},[M.PE]:{totalSeats:a[M.PE]??0,price:t.dev_mode,headerString:(0,w.tx)("org_self_serve.billing_items.total_seat_count.dev_mode",{totalSeatCount:a[M.PE]??0})}};return r.createElement("div",null,O.H5.sort(O.AG).map(t=>{let a=n[t];return null==a?r.createElement(r.Fragment,null):r.createElement("div",{key:t},r.createElement("div",{className:eo.Yn},r.createElement("div",{className:eo.TK},a.headerString),r.createElement("div",{className:eo.TK},e.formatMoney(a.price*a.totalSeats*12,{showCents:!1}))),r.createElement("div",{className:eo.Sv},(0,w.tx)("org_self_serve.billing_items.total_seat_cost_for_product",{annualMemberCost:e.formatMoney(a.price,{showCents:!1}),seatCount:a.totalSeats})),r.createElement(f.Kz,{direction:"y",value:16}))}))},this.renderPurchaseSummary=()=>{let e=this.getUpgradesByLicenseType(),t=e[M.vu],a=e[M.tL],n=e[M.PE]??0,i=(0,W._Z)(),l=t+a+n,o=l<j.u3,s=!o&&t<j._h&&(0,m.kc)().org_checkout_min_seat_info_copy,d=this.getSubtotal(this.state.currency),u=(0,G.Hw)(this.props.user)?(0,m.kc)().org_checkout_min_seat_info_copy?r.createElement(r.Fragment,null,(0,w.tx)("org_self_serve.purchase_summary.added_empty_seats",{minCount:j.u3}),"\xa0",(0,w.tx)("org_self_serve.purchase_summary.empty_seats_included",{numOfSeats:l,numOfEmptySeats:j.u3-l,seatsText:(0,w.tx)("checkout.seats_text",{numOfSeats:l})})):(0,w.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_seats_added_empty_seats.seat_rename",{minCount:j.u3}):(0,w.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_at_least_count_editor_seats.seat_rename",{minCount:j.u3}),_=r.createElement(r.Fragment,null,(0,w.tx)("org_self_serve.purchase_summary.added_empty_design_seats",{minCount:j._h}),"\xa0",(0,w.tx)("org_self_serve.purchase_summary.empty_design_seats_included",{numOfEmptySeats:j._h-t})),p=new W.vr(this.state.currency);return r.createElement("div",{className:eo.er},r.createElement("div",null,o&&r.createElement("div",{className:`${eo.uC} ${eo.i9}`},r.createElement(v.B,{className:eo.$y,svg:ec.A}),u),s&&r.createElement("div",{className:`${eo.uC} ${eo.i9}`},r.createElement(v.B,{className:eo.$y,svg:ec.A}),_),r.createElement(y.P,{className:eo.TB,scrollingDisabled:!1},r.createElement("div",null,r.createElement("div",{className:eo.Ov},(0,w.tx)("org_self_serve.purchase_summary.organization_plan")),r.createElement("div",{className:eo.Sv},(0,w.tx)("org_self_serve.purchase_summary.domain",{domain:(0,c.zN)(this.props.user.email)})),r.createElement(f.Kz,{direction:"y",value:16})),r.createElement(f.Kz,{direction:"y",value:8}),r.createElement(ei.O,{selectedEditors:this.state.selectedEditors,additionalDesignSeats:this.state.emptySeatsByLicenseType[M.vu],additionalWhiteboardSeats:this.state.emptySeatsByLicenseType[M.tL],additionalDevModeSeats:this.state.emptySeatsByLicenseType[M.PE]??0,onClick:this.selectEditors}),r.createElement(f.Kz,{direction:"y",value:20})),r.createElement("div",null,r.createElement("div",{className:eo.aK}),i&&r.createElement(r.Fragment,null,r.createElement(f.Kz,{direction:"y",value:16}),r.createElement("div",{className:eo.Yn},r.createElement("div",{className:eo.V},(0,w.tx)("org_self_serve.purchase_summary.currency_text")),r.createElement(N.D,{currency:this.state.currency,dropdownShown:this.props.dropdownShown,supportedCurrencies:(0,W.B9)(),changeCurrency:e=>{this.props.dispatch(S.MN({currency:e})),this.setState({currency:e})},shortFormDisplay:!0,paddingOverride:0})),r.createElement(f.Kz,{direction:"y",value:20}),r.createElement("div",{className:eo.aK})),this.state.paymentError&&this.effectiveStep()===K.X1.Payment&&r.createElement(r.Fragment,null,r.createElement(E._,{color:E.S.INFORMATION,text:this.state.paymentError})),r.createElement(f.Kz,{direction:"y",value:16}),this.renderBillingItems(),r.createElement("div",{className:eo.aK}),r.createElement(f.Kz,{direction:"y",value:24}),r.createElement(P.m,{formattedSubtotal:p.formatMoney(d,{showCents:!1})}),r.createElement(f.Kz,{direction:"y",value:24}),this.renderNextButton(),r.createElement(f.Kz,{direction:"y",value:24}))),r.createElement("div",null,r.createElement("div",{className:eo.ZM}),r.createElement(f.Kz,{direction:"y",value:16}),r.createElement("div",{className:eo.i9},r.createElement(v.B,{svg:es.A,className:eo.$y}),r.createElement("span",null,(0,w.tx)("org_self_serve.purchase_summary.have_questions",{contactSales:r.createElement("span",{className:eo.uD,onClick:this.contactSales},(0,w.tx)("org_self_serve.purchase_summary.contact_our_sales_team"))}))),r.createElement(f.Kz,{direction:"y",value:16})))},this.state={loading:!0,eligibleUpgrades:[],selectedEditors:{},initialEditors:{},selectedTeamIds:new Set,payment:{card:null,last4:null,address:(0,Q.EB)((0,W.aE)())},apiPending:!1,stripeCustomerId:null,taxRate:0,orgDetails:{actorName:"",actorEmail:this.props.user.email,legalOrgName:"",orgName:""},paymentError:null,emptySeatsByLicenseType:O.H5.dict(e=>0),currency:this.props.currency,shippingAddress:(0,Q.EB)((0,W.aE)()),nameOnPaymentMethod:"",vatId:null,regionalVatId:null,newTeamName:this.props.newTeamProps?.newTeamName||null,inviteEmails:this.props.newTeamProps?.inviteEmails||[]}}componentDidMount(){this.fetchTeamEligibleUpgradesFigjam()}fetchTeamEligibleUpgradesFigjam(){return Z.Eh.getEligibleUpgradesFigjam().catch(e=>{let t=e.data.message;return this.props.dispatch(x.$T({view:"recentFiles"})),this.props.dispatch(b.s.error(t||(0,w.t)("org_self_serve.confirmation_step.sorry_there_was_an_error_processing_your_request_refresh_and_try_again"))),this.setState({loading:!1}),Promise.reject()}).then(({data:e})=>{let t=e.meta.eligible_upgrades,a=new Set(t.map(e=>e.team.id)),r=(0,ea.yr)(t,a);this.setState({loading:!1,eligibleUpgrades:t,selectedTeamIds:a,selectedEditors:r,initialEditors:r},()=>this.computeAdditionalDesignSeats())})}componentDidUpdate(e,t){(0,c.zN)(e.user.email)!==(0,c.zN)(this.props.user.email)&&d.Ay.redirect("/purchase-organization")}computeAdditionalDesignSeats(){this.setState(e=>({emptySeatsByLicenseType:(0,ea.DK)(this.getUpgradesByLicenseType(),e.emptySeatsByLicenseType,this.props.initialDesignSeats)}))}getSubtotal(e){let t=O.H5.dict(t=>(0,B._)(this.props.billingPricesResult.data,e,t)),a=(0,ea.aZ)(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),r=O.H5.dict(e=>(a[e]??0)*t[e]*12),n=0;return O.H5.forEach(e=>{n+=r[e]??0}),n}async onSubmitPaymentAndAddress(){let e=this.state.payment.address,t=this.state.payment.card,a=this.state.vatId,r=this.state.regionalVatId;if(null===t){this.setState({paymentError:(0,w.t)("org_self_serve.payment_step.sorry_please_wait")});return}if(this.setState({apiPending:!0}),a&&!await (0,ee.V)(a,e.country,()=>{},this.onVatValidationFail))return;if(this.props.canSeeBillingAddressExp&&!this.state.nameOnPaymentMethod){let e=(0,w.t)("org_self_serve.payment_step.name_on_payment_method_is_required");this.setState({apiPending:!1,paymentError:e});return}if(r&&!await (0,ee.V)(r,e.country,()=>{},this.onVatValidationFail,e.region))return;let n=this.props.canSeeBillingAddressExp?{name:this.state.nameOnPaymentMethod,address_line1:e.line1,address_line2:e.line2,address_country:e.country,address_city:e.city,address_state:e.region,address_zip:e.postal_code}:void 0;(0,Y.Ey)(t,n).then(t=>{if(!t.error&&t.token)return(0,Y.To)(t.token.id,this.getSubtotal(this.state.currency),this.state.currency).then(t=>this.props.canSeeBillingAddressExp?p.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,billing_address:e,shipping_address:(0,Q.$V)(this.state.shippingAddress)?null:this.state.shippingAddress,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null}):p.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,address:e,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null})).catch(e=>(this.setState({apiPending:!1,paymentError:e.data?.message||e.message}),Promise.reject())).then(({data:e})=>{this.setState(a=>({payment:{...a.payment,last4:t.token?.card?.last4||null},stripeCustomerId:e.meta.stripe_customer_id,taxRate:e.meta.tax_percent,apiPending:!1}),()=>this.setStep(K.X1.Review))});{let e=t.error?.message||(0,w.t)("org_self_serve.payment_step.there_was_an_error_processing_your_payment_please_try_again");this.setState({apiPending:!1,paymentError:e})}})}getEditorStatusChanges(){let e={upgrade:{[H.G_.DESIGN]:[],[H.G_.WHITEBOARD]:[],[H.G_.DEV_MODE]:[]},downgrade:{[H.G_.DESIGN]:[],[H.G_.WHITEBOARD]:[],[H.G_.DEV_MODE]:[]}},{selectedEditors:t,initialEditors:a}=this.state;for(let r in t){let n=t[r];if(r in a){let t=a[r];n.designEditor?t.designEditor||e.upgrade[H.G_.DESIGN].push(r):(t.designEditor&&e.downgrade[H.G_.DESIGN].push(r),n.devMode&&e.upgrade[H.G_.DEV_MODE].push(r)),n.figjamEditor!==t.figjamEditor&&(n.figjamEditor?e.upgrade[H.G_.WHITEBOARD].push(r):e.downgrade[H.G_.WHITEBOARD].push(r))}else n.designEditor?e.upgrade[H.G_.DESIGN].push(r):n.devMode&&e.upgrade[H.G_.DEV_MODE].push(r),n.figjamEditor&&e.upgrade[H.G_.WHITEBOARD].push(r)}for(let r in a)if(!(r in t)){let t=a[r];t.designEditor&&e.downgrade[H.G_.DESIGN].push(r),t.figjamEditor&&e.downgrade[H.G_.WHITEBOARD].push(r)}return e}onSubmitPurchaseOrder(){this.props.dispatch(k.b({completed_org_cart_flow:!0}));let e=this.getEditorStatusChanges(),t=(0,ea.aZ)(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),a=O.H5.dict(e=>t[e]??0),r={legal_org_name:this.state.orgDetails.legalOrgName,org_name:this.state.orgDetails.orgName||this.state.orgDetails.legalOrgName,team_ids:Array.from(this.state.selectedTeamIds),requested_seats:a,editor_status_changes:e,stripe_customer_id:this.state.stripeCustomerId,selected_currency:this.state.currency,vat_gst_id:this.state.vatId||null,regional_vat_gst_id:this.state.regionalVatId||null};this.state.newTeamName&&(r={...r,new_team_options:{team_name:this.state.newTeamName,add_to_org:!0}}),r.design_editors=t[M.vu],r.whiteboard_editors=t[M.tL],this.setState({apiPending:!0}),p.Ay.post("/api/orgs",r).catch(e=>(this.props.dispatch(b.s.error((0,w.Jv)(e,e.data?.message||(0,w.t)("org_self_serve.review_step.sorry_there_was_an_error_please_try_again")))),(0,u.$D)(_.e.BILLING,Error(`[Billing] Org checkout API failed: ${e.data?.message}`),{extra:{numDesignEditors:t[M.vu],numWhiteboardEditors:t[M.tL],numDevModeSeats:t[M.PE]??0,eligibleUpgrades:JSON.stringify(this.state.eligibleUpgrades.map(e=>({team:e.team.id,figjamEditors:e.figjamEditors.map(e=>e.id),designEditors:e.designEditors.map(e=>e.id)}))),selectedEditors:JSON.stringify(Object.keys(this.state.selectedEditors).map(e=>({userId:e,teamIds:this.state.selectedEditors[e].teamIds}))),selectedTeamIds:JSON.stringify([...this.state.selectedTeamIds]),userId:this.props.user.id}}),this.setState({apiPending:!1}),Promise.reject())).then(e=>{this.setState({apiPending:!1},()=>this.setStep(K.X1.Confirmation)),this.state.inviteEmails.length&&e.data.meta.new_team&&this.props.dispatch((0,z.rq)({emails:this.state.inviteEmails,resourceType:H.vt.TEAM,resourceIdOrKey:e.data.meta.new_team.id,level:X.e6.EDITOR})),this.state.newTeamName&&e.data.meta.new_team&&(0,U.Al)(this.props.user.id),(0,o.sx)("Self Serve Org Purchased (GTM)"),(0,D.uE)("Self Serve Org Purchased",{user:this.props.user},{org_name:r.org_name,upsellSource:this.props.upsellSource})})}getUpgradesByLicenseType(){let{eligibleUpgrades:e,selectedTeamIds:t,selectedEditors:a}=this.state,r={},n={},i={};for(let[e,l]of Object.entries(a)){if(!l.teamIds.some(e=>t.has(e))){delete this.state.selectedEditors[e];continue}l.designEditor&&(r[e]=l),l.figjamEditor&&(n[e]=l),l.devMode&&(i[e]=l)}return e.filter(e=>t.has(e.team.id)).forEach(e=>{e.designEditors.forEach(t=>{!(0,c.nD)(t.email)&&a[t.id]?.designEditor&&(r[t.id]||(r[t.id]={user:t,teamIds:[]}),r[t.id].teamIds.includes(e.team.id)||r[t.id].teamIds.push(e.team.id))}),e.figjamEditors.forEach(t=>{!(0,c.nD)(t.email)&&a[t.id]?.figjamEditor&&(n[t.id]||(n[t.id]={user:t,teamIds:[]}),n[t.id].teamIds.includes(e.team.id)||n[t.id].teamIds.push(e.team.id))})}),{[M.vu]:Object.keys(r).length,[M.tL]:Object.keys(n).length,[M.PE]:Object.keys(i).length}}render(){let e;let t=this.effectiveStep();if("loading"===this.props.billingPricesResult.status||this.state.loading&&!this.props.newTeamProps)return r.createElement(h.kt,{testId:"loadingSpinner"});if("errors"===this.props.billingPricesResult.status)return(0,B.Ix)(this.props.billingPricesResult),r.createElement(F.t,null);let a=(0,ea.aZ)(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),n=new Date().getMonth(),i=new Date().setMonth(n+3),o=new Date().setMonth(n+12),s=this.getSubtotal(this.state.currency),d=s*this.state.taxRate/100,m=s+d,u=this.state.eligibleUpgrades.length>0,_=new Map;this.state.eligibleUpgrades.forEach(e=>_.set(e.team,e.designEditors.length+e.figjamEditors.length));let p=e=>{this.props.dispatch(x.$T({teamId:null,...this.props.newTeamProps?.previousView,view:"teamUpgrade",paymentStep:e,teamFlowType:this.props.newTeamProps?.teamFlowType||q.SC.CREATE_AND_UPGRADE}))};return e=t===K.X1.Review?r.createElement(r.Fragment,null,r.createElement(el.d,{currentStep:this.props.step,setStep:this.setStep,hasEligibleUpgrades:this.state.eligibleUpgrades.length>0,onFileBrowserClick:this.onFileBrowserClick,newTeamProps:this.props.newTeamProps,onSelectTeamUpgradeStep:p}),r.createElement(er.Vw,{onSubmit:this.onSubmit,orgPayment:this.state.payment,renewalDate:o,subTotalCents:s,taxDueCents:d,taxRate:this.state.taxRate,totalCents:m,totalSeats:a,showAdditionalEditorsModal:this.addEditors,trueUpDate:i,totalTeams:this.state.selectedTeamIds.size+(this.state.newTeamName?1:0),legalOrgName:this.state.orgDetails.legalOrgName,orgName:this.state.orgDetails.orgName,user:this.props.user,loading:this.state.apiPending,renderBillingItems:this.renderBillingItems,ctaProperties:this.ctaProperties(),currency:this.state.currency,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp,billingAddress:this.state.payment.address,shippingAddress:this.state.shippingAddress,navigateToEditPaymentDetails:()=>this.setStep(K.X1.Payment),navigateToEditOrganizationDetails:()=>this.setStep(K.X1.Details)})):t===K.X1.Confirmation?r.createElement(er._u,{totalCents:m,trueUpDate:i,orgMigrated:this.props.orgMigrated,onFileBrowserClick:this.onFileBrowserClick,orgPayment:this.state.payment,currency:this.state.currency}):r.createElement(r.Fragment,null,this.props.isOrgAdmin&&r.createElement(en.wW,{onContactSales:this.contactSales,onFileBrowserClick:this.onFileBrowserClick}),(0,c.qe)(this.props.user.email)&&r.createElement(en.VE,{onFileBrowserClick:this.onFileBrowserClick}),r.createElement(el.d,{currentStep:this.props.step,setStep:this.setStep,hasEligibleUpgrades:u,onFileBrowserClick:this.onFileBrowserClick,newTeamProps:this.props.newTeamProps,onSelectTeamUpgradeStep:p}),r.createElement("div",{className:eo._h},t===K.X1.CreateTeam&&r.createElement("div",{className:eo.Bb},r.createElement(I.y,{type:I.I.ORG,teamName:this.state.newTeamName||"",setTeamName:this.onChangeNewTeamName,onNext:this.onSubmit})),t===K.X1.TeamSelect&&(this.state.loading?r.createElement(h.kt,null):r.createElement(er.JG,{teamsToEditors:_,selectedTeamIds:this.state.selectedTeamIds,onToggle:this.onTeamToggle,newTeamName:this.state.newTeamName})),t===K.X1.Details&&(this.state.loading?r.createElement(h.kt,null):r.createElement(er.vj,{orgDetails:this.state.orgDetails,onChangeFormInput:this.onChangeOrgDetails,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp})),t===K.X1.Payment&&r.createElement(y.P,{className:l()(eo.M7,eo.Et),hideScrollbar:!0},r.createElement("div",{className:eo.W},(0,w.tx)("org_self_serve.payment_step.enter_your_payment_details")),r.createElement("form",{className:eo.fI},r.createElement(et.n,{id:"team-upgrade-page-form",cardId:"team-upgrade-page-card",billingAddress:this.state.payment.address,shippingAddress:this.state.shippingAddress,onCardReady:this.onCardReady,onBillingAddressChange:this.onAddressChange,onShippingAddressChange:this.onShippingAddressChange,nameOnPaymentMethod:this.state.nameOnPaymentMethod,setNameOnPaymentMethod:this.onNameOnPaymentMethodChange,onClearToken:this.onClearToken,onVatIdChange:this.onVatIdChange,vatId:this.state.vatId,onRegionalVatIdChange:this.onRegionalVatIdChange,regionalVatId:this.state.regionalVatId,isCommunityCheckout:!1,isCheckoutFlow:!0,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp}))),t!==K.X1.CreateTeam&&this.renderPurchaseSummary())),r.createElement(R.fu,{name:J.e0.ORG_CART,properties:{step:t,currency:this.state.currency,upsellSource:this.props.upsellSource}},r.createElement("div",{className:eo.F0},e))}}ed.displayName="OrgSelfServePage";let em=(0,n.Ng)(function(e){return{user:e.user,isOrgAdmin:(0,$.x9)(e.orgUsersByOrgId,e.user.id).some(e=>e.permission===H._D.ADMIN),currency:e.payment.currency||(0,W.LN)()}})(ed);function eu(e){let t=(0,A.Mh)(),a=(0,L.N1)(L.Fq.ORG_SELF_SERVE);return r.createElement(em,{...e,canSeeBillingAddressExp:t,billingPricesResult:a})}function e_(e){return(0,m.kc)().cart_error_boundaries?r.createElement(ep,{...e}):r.createElement(eu,{...e})}function ep(e){return r.createElement(g.tH,{sentryTags:{area:_.e.MONETIZATION_UPGRADES},boundaryKey:"OrgSelfServeBillingRemodelPage",fallback:g.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:V.y4},r.createElement(eu,{...e}))}},805785:(e,t,a)=>{a.d(t,{N7:()=>e_});var r=a(411855),n=a(188507),i=a(629019),l=a.n(i),o=a(776250),s=a(935283),c=a(367253),d=a(737947),m=a(966712),u=a(776621),_=a(304783),p=a(27087),g=a(192437),f=a(946689),E=a(455057),h=a(493323),y=a(827586),v=a(574176),b=a(881388),w=a(939863),T=a(898211),I=a(707570),N=a(41029),x=a(738269),C=a(662275),S=a(995852),k=a(931828),A=a(349410),R=a(672517),L=a(710667),D=a(988022),P=a(66957),F=a(584503),O=a(582410),M=a(720647),B=a(978779),U=a(195971),V=a(488983),H=a(99506),W=a(820113),j=a(227544),G=a(724838),$=a(596607),z=a(426197),Y=a(452353),K=a(802026),Q=a(622139),X=a(668860),q=a(637590),J=a(143678),Z=a(679892),ee=a(831429),et=a(962800),ea=a(550594),er=a(648841),en=a(321801),ei=a(27905),el=a(720818),eo=a(569421),es=a(733982),ec=a(54375);class ed extends r.Component{constructor(e){super(e),this.effectiveStep=()=>this.props.step===K.X1.Initial||this.props.step===K.X1.ChoosePlan?this.props.newTeamProps?.teamFlowType===q.SC.CREATE_AND_UPGRADE?K.X1.CreateTeam:this.state.eligibleUpgrades.length>0||this.props.newTeamProps?K.X1.TeamSelect:K.X1.Details:this.props.step,this.setStep=e=>{this.props.dispatch(x.$T({view:"orgSelfServe",step:e,orgMigrated:!1,newTeamProps:this.props.newTeamProps,upsellSource:this.props.upsellSource})),this.setState(e=>({payment:{...e.payment,card:null}}))},this.onSubmit=()=>{let e=this.effectiveStep();switch(e){case K.X1.CreateTeam:this.state.newTeamName?.trim()&&this.setStep(K.X1.TeamSelect);break;case K.X1.AddCollaborators:this.setStep(K.X1.Details);break;case K.X1.PseudoCreateTeam:this.setStep(K.X1.TeamSelect);break;case K.X1.TeamSelect:this.setStep(K.X1.Details);break;case K.X1.Details:this.setStep(K.X1.Payment);break;case K.X1.Payment:this.onSubmitPaymentAndAddress();break;case K.X1.Review:this.onSubmitPurchaseOrder();break;case K.X1.Confirmation:break;default:(0,s.xb)(e)}},this.ctaProperties=()=>{let e=this.getUpgradesByLicenseType(),t=(0,ea.aZ)(e,this.state.emptySeatsByLicenseType);return{numEditors:e[M.vu],numFigJamEditors:e[M.tL],numDisplayedTeams:this.state.eligibleUpgrades.length+(this.state.newTeamName?1:0),numMigratedTeams:this.state.selectedTeamIds.size+(this.state.newTeamName?1:0),numTotalDesignSeats:t[M.G_.DESIGN],totalFigJamSeats:t[M.G_.FIGJAM],totalDevModeSeats:t[M.G_.DEV_MODE],proposedSubtotal:O.H5.reduce((e,a)=>e+=(t[a]??0)*(j.UB[a]??0),0)/100,domain:(0,c.zN)(this.props.user.email),currency:this.state.currency,upsellSource:this.props.upsellSource}},this.renderNextButton=()=>{let e;let t=!1,a=this.effectiveStep();switch(a){case K.X1.CreateTeam:case K.X1.PseudoCreateTeam:e=(0,w.t)("org_self_serve.create_team_step.next_select_team"),t=!this.state.newTeamName;return;case K.X1.AddCollaborators:e=(0,w.t)("org_self_serve.create_team_step.next_select_team");return;case K.X1.TeamSelect:e=(0,w.t)("org_self_serve.details_step.next_organization_details");break;case K.X1.Details:e=(0,w.t)("org_self_serve.payment_step.next_payment");let n=this.state.orgDetails.legalOrgName?.length,i=this.state.orgDetails.actorName?.length;t=this.props.canSeeBillingAddressExp?t||!n||n<1:t||!n||!i||n<1||i<1;break;case K.X1.Payment:t=t||this.state.apiPending,e=(0,w.t)("org_self_serve.review_step.next_review");break;case K.X1.Review:case K.X1.Confirmation:return null;default:(0,s.xb)(a)}return r.createElement("div",{className:eo.rh},r.createElement(f.vd,{className:eo.sk,disabled:t,onClick:()=>this.onSubmit(),trackingProperties:this.ctaProperties(),dataTestId:"next-step-button"},e))},this.onTeamToggle=e=>{this.state.selectedTeamIds.has(e)?this.setState(t=>(t.selectedTeamIds.delete(e),{selectedTeamIds:t.selectedTeamIds,selectedEditors:(0,ea.yr)(this.state.eligibleUpgrades,t.selectedTeamIds)}),()=>this.computeAdditionalDesignSeats()):this.setState(t=>({selectedTeamIds:t.selectedTeamIds.add(e),selectedEditors:(0,ea.yr)(this.state.eligibleUpgrades,t.selectedTeamIds.add(e))}),()=>this.computeAdditionalDesignSeats())},this.onCardReady=e=>{let t={...this.state.payment,card:e};this.setState({payment:t})},this.onAddressChange=e=>{let t={...this.state.payment,address:e};this.setState({payment:t})},this.onShippingAddressChange=e=>{this.setState({shippingAddress:e})},this.onNameOnPaymentMethodChange=e=>{this.setState({nameOnPaymentMethod:e.trim()})},this.onClearToken=()=>{let e={...this.state.payment,token:null};this.setState({payment:e})},this.onVatIdChange=e=>{this.setState({vatId:e})},this.onRegionalVatIdChange=e=>{this.setState({regionalVatId:e})},this.onVatValidationFail=e=>{this.setState({apiPending:!1,paymentError:e})},this.onChangeNewTeamName=e=>{this.setState({newTeamName:e.trim()})},this.onChangeOrgDetails=e=>{let t=e.target.name,a=e.target.value;if(!t){e.preventDefault(),console.error("HTMLInputElement is missing name attribute:",e.target);return}let r=this.state.orgDetails;switch(t){case"actor_name":r.actorName=a.trim();break;case"legal_org_name":r.legalOrgName=a.trim();break;case"org_name":r.orgName=a.trim()}this.setState({orgDetails:r})},this.contactSales=()=>{this.props.dispatch((0,C.to)({type:T.lk,data:{source:T.B7.ORG_SELF_SERVE_UPGRADE_MODAL}}))},this.onFileBrowserClick=()=>{(0,m.kc)().ps_benchmark?(this.props.newTeamProps&&(0,U.Al)(this.props.user.id),d.Ay.redirect("/files/recent")):(this.props.dispatch(x.$T({view:"recentFiles"})),this.props.newTeamProps&&(0,U.Al)(this.props.user.id))},this.updateAdditionalSeats=e=>{let t=this.getUpgradesByLicenseType();this.setState({emptySeatsByLicenseType:O.H5.dict(a=>(e[a]??0)-(t[a]??0))})},this.addEditors=()=>{let e=new W.vr(this.state.currency),t=O.H5.dict(t=>(0,B._)(this.props.billingPricesResult.data,e.currency,t)),a=this.getUpgradesByLicenseType(),r=(0,ea.aZ)(a,this.state.emptySeatsByLicenseType);this.props.dispatch((0,C.to)({type:en.Bx,data:{seatDataByLicenseType:{[M.vu]:{minSeats:Math.max(a[M.vu],j._h),currentSeats:r[M.vu],seatUnitCostInCents:t.design},[M.tL]:{minSeats:a[M.tL],currentSeats:r[M.tL],seatUnitCostInCents:t.figjam},[M.PE]:{minSeats:a[M.PE]??0,currentSeats:r[M.PE]??0,seatUnitCostInCents:t.dev_mode}},minTotalSeats:j.u3,updateAdditionalSeats:this.updateAdditionalSeats,showAnnualPrice:!0,dispatch:this.props.dispatch,currency:this.state.currency}}))},this.updateAdditionalEmptySeats=e=>{this.setState({emptySeatsByLicenseType:O.H5.dict(t=>e[t])})},this.selectEditors=()=>{let e=this.state.selectedEditors;for(let t in e)e[t]={...e[t]};let t=new W.vr(this.state.currency),a=O.H5.dict(e=>(0,B._)(this.props.billingPricesResult.data,t.currency,e));this.props.dispatch((0,C.to)({type:en.ml,data:{users:e,updateSelectedEditors:this.updateSelectedEditors,updateAdditionalEmptySeats:this.updateAdditionalEmptySeats,dispatch:this.props.dispatch,currency:this.state.currency,minTotalSeats:j.u3,seatInfo:{design:{minCount:j._h,additionalSeatCount:this.state.emptySeatsByLicenseType[M.vu]},figjam:{minCount:0,additionalSeatCount:this.state.emptySeatsByLicenseType[M.tL]},dev_mode:{minCount:0,additionalSeatCount:this.state.emptySeatsByLicenseType[M.PE]??0}},monthlyPriceByLicenseType:a}}))},this.updateSelectedEditors=e=>{this.setState(t=>({...t,selectedEditors:e}))},this.renderBillingItems=()=>{let e=new W.vr(this.state.currency),t=O.H5.dict(t=>(0,B._)(this.props.billingPricesResult.data,e.currency,t)),a=(0,ea.aZ)(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),n={[M.vu]:{totalSeats:a[M.vu],price:t.design,headerString:(0,w.tx)("org_self_serve.billing_items.total_figma_design_editor_with_dev_mode_included.seat_rename",{totalDesignSeatsCount:a[M.vu]})},[M.tL]:{totalSeats:a[M.tL],price:t.figjam,headerString:(0,w.tx)("org_self_serve.headers.total_fig_jam_editor_seats_count.seat_rename",{totalFigJamEditorSeatsCount:a[M.tL]})},[M.PE]:{totalSeats:a[M.PE]??0,price:t.dev_mode,headerString:(0,w.tx)("org_self_serve.billing_items.total_seat_count.dev_mode",{totalSeatCount:a[M.PE]??0})}};return r.createElement("div",null,O.H5.sort(O.AG).map(t=>{let a=n[t];return null==a?r.createElement(r.Fragment,null):r.createElement("div",{key:t},r.createElement("div",{className:eo.Yn},r.createElement("div",{className:eo.TK},a.headerString),r.createElement("div",{className:eo.TK},e.formatMoney(a.price*a.totalSeats*12,{showCents:!1}))),r.createElement("div",{className:eo.Sv},(0,w.tx)("org_self_serve.billing_items.total_seat_cost_for_product",{annualMemberCost:e.formatMoney(a.price,{showCents:!1}),seatCount:a.totalSeats})),r.createElement(f.Kz,{direction:"y",value:16}))}))},this.renderPurchaseSummary=()=>{let e=this.getUpgradesByLicenseType(),t=e[M.vu],a=e[M.tL],n=e[M.PE]??0,i=(0,W._Z)(),l=t+a+n,o=l<j.u3,s=!o&&t<j._h&&(0,m.kc)().org_checkout_min_seat_info_copy,d=this.getSubtotal(this.state.currency),u=(0,G.Hw)(this.props.user)?(0,m.kc)().org_checkout_min_seat_info_copy?r.createElement(r.Fragment,null,(0,w.tx)("org_self_serve.purchase_summary.added_empty_seats",{minCount:j.u3}),"\xa0",(0,w.tx)("org_self_serve.purchase_summary.empty_seats_included",{numOfSeats:l,numOfEmptySeats:j.u3-l,seatsText:(0,w.tx)("checkout.seats_text",{numOfSeats:l})})):(0,w.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_seats_added_empty_seats.seat_rename",{minCount:j.u3}):(0,w.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_at_least_count_editor_seats.seat_rename",{minCount:j.u3}),_=r.createElement(r.Fragment,null,(0,w.tx)("org_self_serve.purchase_summary.added_empty_design_seats",{minCount:j._h}),"\xa0",(0,w.tx)("org_self_serve.purchase_summary.empty_design_seats_included",{numOfEmptySeats:j._h-t})),p=new W.vr(this.state.currency);return r.createElement("div",{className:eo.er},r.createElement("div",null,o&&r.createElement("div",{className:`${eo.uC} ${eo.i9}`},r.createElement(v.B,{className:eo.$y,svg:ec.A}),u),s&&r.createElement("div",{className:`${eo.uC} ${eo.i9}`},r.createElement(v.B,{className:eo.$y,svg:ec.A}),_),r.createElement(y.P,{className:eo.TB,scrollingDisabled:!1},r.createElement("div",null,r.createElement("div",{className:eo.Ov},(0,w.tx)("org_self_serve.purchase_summary.organization_plan")),r.createElement("div",{className:eo.Sv},(0,w.tx)("org_self_serve.purchase_summary.domain",{domain:(0,c.zN)(this.props.user.email)})),r.createElement(f.Kz,{direction:"y",value:16})),r.createElement(f.Kz,{direction:"y",value:8}),r.createElement(ei.O,{selectedEditors:this.state.selectedEditors,additionalDesignSeats:this.state.emptySeatsByLicenseType[M.vu],additionalWhiteboardSeats:this.state.emptySeatsByLicenseType[M.tL],additionalDevModeSeats:this.state.emptySeatsByLicenseType[M.PE]??0,onClick:this.selectEditors}),r.createElement(f.Kz,{direction:"y",value:20})),r.createElement("div",null,r.createElement("div",{className:eo.aK}),i&&r.createElement(r.Fragment,null,r.createElement(f.Kz,{direction:"y",value:16}),r.createElement("div",{className:eo.Yn},r.createElement("div",{className:eo.V},(0,w.tx)("org_self_serve.purchase_summary.currency_text")),r.createElement(N.D,{currency:this.state.currency,dropdownShown:this.props.dropdownShown,supportedCurrencies:(0,W.B9)(),changeCurrency:e=>{this.props.dispatch(S.MN({currency:e})),this.setState({currency:e})},shortFormDisplay:!0,paddingOverride:0})),r.createElement(f.Kz,{direction:"y",value:20}),r.createElement("div",{className:eo.aK})),this.state.paymentError&&this.effectiveStep()===K.X1.Payment&&r.createElement(r.Fragment,null,r.createElement(E._,{color:E.S.INFORMATION,text:this.state.paymentError})),r.createElement(f.Kz,{direction:"y",value:16}),this.renderBillingItems(),r.createElement("div",{className:eo.aK}),r.createElement(f.Kz,{direction:"y",value:24}),r.createElement(P.m,{formattedSubtotal:p.formatMoney(d,{showCents:!1})}),r.createElement(f.Kz,{direction:"y",value:24}),this.renderNextButton(),r.createElement(f.Kz,{direction:"y",value:24}))),r.createElement("div",null,r.createElement("div",{className:eo.ZM}),r.createElement(f.Kz,{direction:"y",value:16}),r.createElement("div",{className:eo.i9},r.createElement(v.B,{svg:es.A,className:eo.$y}),r.createElement("span",null,(0,w.tx)("org_self_serve.purchase_summary.have_questions",{contactSales:r.createElement("span",{className:eo.uD,onClick:this.contactSales},(0,w.tx)("org_self_serve.purchase_summary.contact_our_sales_team"))}))),r.createElement(f.Kz,{direction:"y",value:16})))},this.state={loading:!0,eligibleUpgrades:[],selectedEditors:{},initialEditors:{},selectedTeamIds:new Set,payment:{card:null,last4:null,address:(0,Q.EB)((0,W.aE)())},apiPending:!1,stripeCustomerId:null,taxRate:0,orgDetails:{actorName:"",actorEmail:this.props.user.email,legalOrgName:"",orgName:""},paymentError:null,emptySeatsByLicenseType:O.H5.dict(e=>0),currency:this.props.currency,shippingAddress:(0,Q.EB)((0,W.aE)()),nameOnPaymentMethod:"",vatId:null,regionalVatId:null,newTeamName:this.props.newTeamProps?.newTeamName||null,inviteEmails:this.props.newTeamProps?.inviteEmails||[]}}componentDidMount(){this.fetchTeamEligibleUpgradesFigjam()}fetchTeamEligibleUpgradesFigjam(){return Z.Eh.getEligibleUpgradesFigjam().catch(e=>{let t=e.data.message;return this.props.dispatch(x.$T({view:"recentFiles"})),this.props.dispatch(b.s.error(t||(0,w.t)("org_self_serve.confirmation_step.sorry_there_was_an_error_processing_your_request_refresh_and_try_again"))),this.setState({loading:!1}),Promise.reject()}).then(({data:e})=>{let t=e.meta.eligible_upgrades,a=new Set(t.map(e=>e.team.id)),r=(0,ea.yr)(t,a);this.setState({loading:!1,eligibleUpgrades:t,selectedTeamIds:a,selectedEditors:r,initialEditors:r},()=>this.computeAdditionalDesignSeats())})}componentDidUpdate(e,t){(0,c.zN)(e.user.email)!==(0,c.zN)(this.props.user.email)&&d.Ay.redirect("/purchase-organization")}computeAdditionalDesignSeats(){this.setState(e=>({emptySeatsByLicenseType:(0,ea.DK)(this.getUpgradesByLicenseType(),e.emptySeatsByLicenseType,this.props.initialDesignSeats)}))}getSubtotal(e){let t=O.H5.dict(t=>(0,B._)(this.props.billingPricesResult.data,e,t)),a=(0,ea.aZ)(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),r=O.H5.dict(e=>(a[e]??0)*t[e]*12),n=0;return O.H5.forEach(e=>{n+=r[e]??0}),n}async onSubmitPaymentAndAddress(){let e=this.state.payment.address,t=this.state.payment.card,a=this.state.vatId,r=this.state.regionalVatId;if(null===t){this.setState({paymentError:(0,w.t)("org_self_serve.payment_step.sorry_please_wait")});return}if(this.setState({apiPending:!0}),a&&!await (0,ee.V)(a,e.country,()=>{},this.onVatValidationFail))return;if(this.props.canSeeBillingAddressExp&&!this.state.nameOnPaymentMethod){let e=(0,w.t)("org_self_serve.payment_step.name_on_payment_method_is_required");this.setState({apiPending:!1,paymentError:e});return}if(r&&!await (0,ee.V)(r,e.country,()=>{},this.onVatValidationFail,e.region))return;let n=this.props.canSeeBillingAddressExp?{name:this.state.nameOnPaymentMethod,address_line1:e.line1,address_line2:e.line2,address_country:e.country,address_city:e.city,address_state:e.region,address_zip:e.postal_code}:void 0;(0,Y.Ey)(t,n).then(t=>{if(!t.error&&t.token)return(0,Y.To)(t.token.id,this.getSubtotal(this.state.currency),this.state.currency).then(t=>this.props.canSeeBillingAddressExp?p.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,billing_address:e,shipping_address:(0,Q.$V)(this.state.shippingAddress)?null:this.state.shippingAddress,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null}):p.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,address:e,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null})).catch(e=>(this.setState({apiPending:!1,paymentError:e.data?.message||e.message}),Promise.reject())).then(({data:e})=>{this.setState(a=>({payment:{...a.payment,last4:t.token?.card?.last4||null},stripeCustomerId:e.meta.stripe_customer_id,taxRate:e.meta.tax_percent,apiPending:!1}),()=>this.setStep(K.X1.Review))});{let e=t.error?.message||(0,w.t)("org_self_serve.payment_step.there_was_an_error_processing_your_payment_please_try_again");this.setState({apiPending:!1,paymentError:e})}})}getEditorStatusChanges(){let e={upgrade:{[H.G_.DESIGN]:[],[H.G_.WHITEBOARD]:[],[H.G_.DEV_MODE]:[]},downgrade:{[H.G_.DESIGN]:[],[H.G_.WHITEBOARD]:[],[H.G_.DEV_MODE]:[]}},{selectedEditors:t,initialEditors:a}=this.state;for(let r in t){let n=t[r];if(r in a){let t=a[r];n.designEditor?t.designEditor||e.upgrade[H.G_.DESIGN].push(r):(t.designEditor&&e.downgrade[H.G_.DESIGN].push(r),n.devMode&&e.upgrade[H.G_.DEV_MODE].push(r)),n.figjamEditor!==t.figjamEditor&&(n.figjamEditor?e.upgrade[H.G_.WHITEBOARD].push(r):e.downgrade[H.G_.WHITEBOARD].push(r))}else n.designEditor?e.upgrade[H.G_.DESIGN].push(r):n.devMode&&e.upgrade[H.G_.DEV_MODE].push(r),n.figjamEditor&&e.upgrade[H.G_.WHITEBOARD].push(r)}for(let r in a)if(!(r in t)){let t=a[r];t.designEditor&&e.downgrade[H.G_.DESIGN].push(r),t.figjamEditor&&e.downgrade[H.G_.WHITEBOARD].push(r)}return e}onSubmitPurchaseOrder(){this.props.dispatch(k.b({completed_org_cart_flow:!0}));let e=this.getEditorStatusChanges(),t=(0,ea.aZ)(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),a=O.H5.dict(e=>t[e]??0),r={legal_org_name:this.state.orgDetails.legalOrgName,org_name:this.state.orgDetails.orgName||this.state.orgDetails.legalOrgName,team_ids:Array.from(this.state.selectedTeamIds),requested_seats:a,editor_status_changes:e,stripe_customer_id:this.state.stripeCustomerId,selected_currency:this.state.currency,vat_gst_id:this.state.vatId||null,regional_vat_gst_id:this.state.regionalVatId||null};this.state.newTeamName&&(r={...r,new_team_options:{team_name:this.state.newTeamName,add_to_org:!0}}),r.design_editors=t[M.vu],r.whiteboard_editors=t[M.tL],this.setState({apiPending:!0}),p.Ay.post("/api/orgs",r).catch(e=>(this.props.dispatch(b.s.error((0,w.Jv)(e,e.data?.message||(0,w.t)("org_self_serve.review_step.sorry_there_was_an_error_please_try_again")))),(0,u.$D)(_.e.BILLING,Error(`[Billing] Org checkout API failed: ${e.data?.message}`),{extra:{numDesignEditors:t[M.vu],numWhiteboardEditors:t[M.tL],numDevModeSeats:t[M.PE]??0,eligibleUpgrades:JSON.stringify(this.state.eligibleUpgrades.map(e=>({team:e.team.id,figjamEditors:e.figjamEditors.map(e=>e.id),designEditors:e.designEditors.map(e=>e.id)}))),selectedEditors:JSON.stringify(Object.keys(this.state.selectedEditors).map(e=>({userId:e,teamIds:this.state.selectedEditors[e].teamIds}))),selectedTeamIds:JSON.stringify([...this.state.selectedTeamIds]),userId:this.props.user.id}}),this.setState({apiPending:!1}),Promise.reject())).then(e=>{this.setState({apiPending:!1},()=>this.setStep(K.X1.Confirmation)),this.state.inviteEmails.length&&e.data.meta.new_team&&this.props.dispatch((0,z.rq)({emails:this.state.inviteEmails,resourceType:H.vt.TEAM,resourceIdOrKey:e.data.meta.new_team.id,level:X.e6.EDITOR})),this.state.newTeamName&&e.data.meta.new_team&&(0,U.Al)(this.props.user.id),(0,o.sx)("Self Serve Org Purchased (GTM)"),(0,D.uE)("Self Serve Org Purchased",{user:this.props.user},{org_name:r.org_name,upsellSource:this.props.upsellSource})})}getUpgradesByLicenseType(){let{eligibleUpgrades:e,selectedTeamIds:t,selectedEditors:a}=this.state,r={},n={},i={};for(let[e,l]of Object.entries(a)){if(!l.teamIds.some(e=>t.has(e))){delete this.state.selectedEditors[e];continue}l.designEditor&&(r[e]=l),l.figjamEditor&&(n[e]=l),l.devMode&&(i[e]=l)}return e.filter(e=>t.has(e.team.id)).forEach(e=>{e.designEditors.forEach(t=>{!(0,c.nD)(t.email)&&a[t.id]?.designEditor&&(r[t.id]||(r[t.id]={user:t,teamIds:[]}),r[t.id].teamIds.includes(e.team.id)||r[t.id].teamIds.push(e.team.id))}),e.figjamEditors.forEach(t=>{!(0,c.nD)(t.email)&&a[t.id]?.figjamEditor&&(n[t.id]||(n[t.id]={user:t,teamIds:[]}),n[t.id].teamIds.includes(e.team.id)||n[t.id].teamIds.push(e.team.id))})}),{[M.vu]:Object.keys(r).length,[M.tL]:Object.keys(n).length,[M.PE]:Object.keys(i).length}}render(){let e;let t=this.effectiveStep();if("loading"===this.props.billingPricesResult.status||this.state.loading&&!this.props.newTeamProps)return r.createElement(h.kt,{testId:"loadingSpinner"});if("errors"===this.props.billingPricesResult.status)return(0,B.Ix)(this.props.billingPricesResult),r.createElement(F.t,null);let a=(0,ea.aZ)(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),n=new Date().getMonth(),i=new Date().setMonth(n+3),o=new Date().setMonth(n+12),s=this.getSubtotal(this.state.currency),d=s*this.state.taxRate/100,m=s+d,u=this.state.eligibleUpgrades.length>0,_=new Map;this.state.eligibleUpgrades.forEach(e=>_.set(e.team,e.designEditors.length+e.figjamEditors.length));let p=e=>{this.props.dispatch(x.$T({teamId:null,...this.props.newTeamProps?.previousView,view:"teamUpgrade",paymentStep:e,teamFlowType:this.props.newTeamProps?.teamFlowType||q.SC.CREATE_AND_UPGRADE}))};return e=t===K.X1.Review?r.createElement(r.Fragment,null,r.createElement(el.d,{currentStep:this.props.step,setStep:this.setStep,hasEligibleUpgrades:this.state.eligibleUpgrades.length>0,onFileBrowserClick:this.onFileBrowserClick,newTeamProps:this.props.newTeamProps,onSelectTeamUpgradeStep:p}),r.createElement(er.Vw,{onSubmit:this.onSubmit,orgPayment:this.state.payment,renewalDate:o,subTotalCents:s,taxDueCents:d,taxRate:this.state.taxRate,totalCents:m,totalSeats:a,showAdditionalEditorsModal:this.addEditors,trueUpDate:i,totalTeams:this.state.selectedTeamIds.size+(this.state.newTeamName?1:0),legalOrgName:this.state.orgDetails.legalOrgName,orgName:this.state.orgDetails.orgName,user:this.props.user,loading:this.state.apiPending,renderBillingItems:this.renderBillingItems,ctaProperties:this.ctaProperties(),currency:this.state.currency,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp,billingAddress:this.state.payment.address,shippingAddress:this.state.shippingAddress,navigateToEditPaymentDetails:()=>this.setStep(K.X1.Payment),navigateToEditOrganizationDetails:()=>this.setStep(K.X1.Details)})):t===K.X1.Confirmation?r.createElement(er._u,{totalCents:m,trueUpDate:i,orgMigrated:this.props.orgMigrated,onFileBrowserClick:this.onFileBrowserClick,orgPayment:this.state.payment,currency:this.state.currency}):r.createElement(r.Fragment,null,this.props.isOrgAdmin&&r.createElement(en.wW,{onContactSales:this.contactSales,onFileBrowserClick:this.onFileBrowserClick}),(0,c.qe)(this.props.user.email)&&r.createElement(en.VE,{onFileBrowserClick:this.onFileBrowserClick}),r.createElement(el.d,{currentStep:this.props.step,setStep:this.setStep,hasEligibleUpgrades:u,onFileBrowserClick:this.onFileBrowserClick,newTeamProps:this.props.newTeamProps,onSelectTeamUpgradeStep:p}),r.createElement("div",{className:eo._h},t===K.X1.CreateTeam&&r.createElement("div",{className:eo.Bb},r.createElement(I.y,{type:I.I.ORG,teamName:this.state.newTeamName||"",setTeamName:this.onChangeNewTeamName,onNext:this.onSubmit})),t===K.X1.TeamSelect&&(this.state.loading?r.createElement(h.kt,null):r.createElement(er.JG,{teamsToEditors:_,selectedTeamIds:this.state.selectedTeamIds,onToggle:this.onTeamToggle,newTeamName:this.state.newTeamName})),t===K.X1.Details&&(this.state.loading?r.createElement(h.kt,null):r.createElement(er.vj,{orgDetails:this.state.orgDetails,onChangeFormInput:this.onChangeOrgDetails,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp})),t===K.X1.Payment&&r.createElement(y.P,{className:l()(eo.M7,eo.Et),hideScrollbar:!0},r.createElement("div",{className:eo.W},(0,w.tx)("org_self_serve.payment_step.enter_your_payment_details")),r.createElement("form",{className:eo.fI},r.createElement(et.n,{id:"team-upgrade-page-form",cardId:"team-upgrade-page-card",billingAddress:this.state.payment.address,shippingAddress:this.state.shippingAddress,onCardReady:this.onCardReady,onBillingAddressChange:this.onAddressChange,onShippingAddressChange:this.onShippingAddressChange,nameOnPaymentMethod:this.state.nameOnPaymentMethod,setNameOnPaymentMethod:this.onNameOnPaymentMethodChange,onClearToken:this.onClearToken,onVatIdChange:this.onVatIdChange,vatId:this.state.vatId,onRegionalVatIdChange:this.onRegionalVatIdChange,regionalVatId:this.state.regionalVatId,isCommunityCheckout:!1,isCheckoutFlow:!0,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp}))),t!==K.X1.CreateTeam&&this.renderPurchaseSummary())),r.createElement(R.fu,{name:J.e0.ORG_CART,properties:{step:t,currency:this.state.currency,upsellSource:this.props.upsellSource}},r.createElement("div",{className:eo.F0},e))}}ed.displayName="OrgSelfServePage";let em=(0,n.Ng)(function(e){return{user:e.user,isOrgAdmin:(0,$.x9)(e.orgUsersByOrgId,e.user.id).some(e=>e.permission===H._D.ADMIN),currency:e.payment.currency||(0,W.LN)()}})(ed);function eu(e){let t=(0,A.Mh)(),a=(0,L.N1)(L.Fq.ORG_SELF_SERVE);return r.createElement(em,{...e,canSeeBillingAddressExp:t,billingPricesResult:a})}function e_(e){return(0,m.kc)().cart_error_boundaries?r.createElement(ep,{...e}):r.createElement(eu,{...e})}function ep(e){return r.createElement(g.tH,{sentryTags:{area:_.e.MONETIZATION_UPGRADES},boundaryKey:"OrgSelfServeFigJamPage",fallback:g.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:V.y4},r.createElement(eu,{...e}))}},648841:(e,t,a)=>{a.d(t,{JG:()=>N,Vw:()=>S,_u:()=>k,vj:()=>C});var r=a(411855),n=a(629019),i=a.n(n),l=a(935283),o=a(367253),s=a(966712);if(443==a.j)var c=a(860601);var d=a(946689),m=a(493323),u=a(827586),_=a(574176),p=a(939863),g=a(67294),f=a(865618),E=a(6988),h=a(820113),y=a(558867),v=a(321801),b=a(569421);if(443==a.j)var w=a(339290);if(443==a.j)var T=a(501191);function I(e){return r.createElement("div",{style:{height:e.height||12}})}function N(e){let[t,a]=(0,r.useState)(!1),n=r.createRef(),l=()=>{n?.current&&a(n.current.getBoundingClientRect().bottom>window.innerHeight+25)};r.useEffect(()=>(l(),window.addEventListener("scroll",l),function(){window.removeEventListener("scroll",l)}));let o=[...e.teamsToEditors.keys()],s=!!e.newTeamName,c=s?o.length+1:o.length,d=o[o.length-1]?.id,m=c<=5?b.tZ:b.xr,u=e.newTeamName?(0,p.tx)("org_self_serve.team_step.team_creation_header"):(0,p.tx)("org_self_serve.team_step.header"),_=e.newTeamName?(0,p.tx)("org_self_serve.team_step.team_creation_teams_shown_description"):(0,p.tx)("org_self_serve.team_step.teams_shown_description");return r.createElement("div",{className:i()(b.M7,b.Et)},r.createElement("div",{className:b.W},u),r.createElement(I,{height:4}),r.createElement("div",{className:b.OL},_),t&&r.createElement("div",{className:b.cH},r.createElement("div",{className:b.aQ},(0,p.tx)("org_self_serve.team_step.more_teams")," \u2193")),r.createElement("div",{className:c<=5?b.LQ:b.KZ},s&&r.createElement(x,{name:e.newTeamName||"",editors:0,team:null,checked:null!=e.newTeamName,tileClassName:m,tabIndex:0,disabled:!0}),o.map((t,a)=>r.createElement(x,{name:t.name,key:t.id,editors:e.teamsToEditors.get(t)||0,team:t,checked:e.selectedTeamIds.has(t.id),onClick:()=>e.onToggle(t.id),tileClassName:m,tabIndex:s?a+1:a,lastTeamRef:t.id===d?n:null}))))}function x(e){return null===e.team&&(0,l.vA)(0===e.editors),r.createElement("div",{onClick:e.onClick,key:e.team?.id||e.name,className:e.tileClassName,role:"checkbox","aria-checked":e.checked,tabIndex:e.tabIndex,"aria-disabled":e.disabled},r.createElement("div",{className:b.i9,ref:e.lastTeamRef},r.createElement(y.CH,{entity:e.team||{name:e.name},size:g.Pf.LARGE}),r.createElement("div",{className:b.BP},r.createElement("div",{className:b.Ps},e.name),r.createElement("div",{className:b.S$},(0,p.tx)("org_self_serve.team_step.editor.seat_rename",{editorCount:e.editors})))),r.createElement("label",null,r.createElement(f.S,{checked:e.checked,disabled:e.disabled})))}function C(e){return r.createElement("div",{className:i()(b.M7,b.Et)},r.createElement("div",{className:b.W},(0,p.tx)("org_self_serve.details_step.tell_us_about_your_organization")),r.createElement("div",{className:b.Nv},!e.canSeeBillingAddressExp&&r.createElement(d.Lf,{htmlName:"actor_name",label:(0,p.t)("org_self_serve.details_step.your_full_name"),value:e.orgDetails.actorName,onChange:e.onChangeFormInput}),!e.canSeeBillingAddressExp&&r.createElement(d.Lf,{htmlName:"actor_email",label:(0,p.t)("org_self_serve.details_step.email_address"),value:e.orgDetails.actorEmail||"",disabled:!0,onChange:c.lQ}),r.createElement(d.Lf,{htmlName:"legal_org_name",label:(0,p.t)("org_self_serve.details_step.legal_company_name"),value:e.orgDetails.legalOrgName,onChange:e.onChangeFormInput}),r.createElement(d.Lf,{htmlName:"org_name",label:(0,p.t)("org_self_serve.details_step.company_display_name"),placeholder:e.canSeeBillingAddressExp?(0,p.t)("org_self_serve.details_step.company_display_name__different_from_company_name_sub_text"):(0,p.t)("org_self_serve.details_step.company_display_name_sub_text"),value:e.orgDetails.orgName,onChange:e.onChangeFormInput}),e.canSeeBillingAddressExp&&r.createElement(d.Lf,{htmlName:"actor_email",label:(0,p.t)("org_self_serve.details_step.email_address"),value:e.orgDetails.actorEmail||"",disabled:!0,onChange:c.lQ})))}function S(e){let[t,a]=(0,r.useState)(!1),[n,l]=(0,r.useState)(!1),c=new h.vr(e.currency);return r.createElement(u.P,{className:i()(b.M7,b.Et),hideScrollbar:!0},r.createElement("div",{className:b.W},(0,p.tx)("org_self_serve.review_step.lets_make_sure_everythings_right")),r.createElement("div",{className:b.nz},r.createElement("div",{className:b.ll,"data-testid":"reviewSummary"},(()=>{let t=(0,o.zN)(e.user.email);return(0,s.kc)().pro_team_business_names?(0,E.x)({displayName:e.orgName||e.legalOrgName,legalName:e.legalOrgName,variant:"org",domain:t,totalTeams:e.totalTeams,canSeeBillingAddressExp:e.canSeeBillingAddressExp,billingAddress:e.billingAddress,shippingAddress:e.shippingAddress,userEmail:e.user.email,navigateToEditPaymentDetails:e.navigateToEditPaymentDetails,navigateToEditOrganizationDetails:e.navigateToEditOrganizationDetails}):r.createElement(r.Fragment,null,r.createElement("div",{className:b.lQ},(0,p.tx)("org_self_serve.review_step.organization_details")),r.createElement("div",{className:b.ex},r.createElement("div",null,(0,p.tx)("org_self_serve.review_step.company_name")),r.createElement("div",null,e.legalOrgName)),r.createElement("div",{className:b.ex},r.createElement("div",null,(0,p.tx)("org_self_serve.review_step.company_display_name")),r.createElement("div",null,e.orgName||e.legalOrgName)),r.createElement("div",{className:b.ex},r.createElement("div",null,(0,p.tx)("org_self_serve.review_step.domain")),r.createElement("div",null,t)),e.totalTeams>0&&r.createElement("div",{className:b.ex},r.createElement("div",null,(0,p.tx)("org_self_serve.review_step.teams")),r.createElement("div",null,e.totalTeams)))})()),r.createElement("div",{className:b.SU}),r.createElement("div",null,n&&r.createElement(v.LJ,{onClose:()=>l(!1)}),r.createElement("div",{className:b.Or},r.createElement("div",{className:b.lQ},(0,p.tx)("org_self_serve.review_step.next_quarterly_true_up_on_date",{trueUpDate:new Date(e.trueUpDate)})),r.createElement(I,{height:16}),r.createElement("div",{className:b.TK},(0,p.tx)("org_self_serve.review_step.what_is_a_true_up")),r.createElement("ul",null,r.createElement("li",null,(0,p.tx)("org_self_serve.review_step.true_up_description.seat_rename")),r.createElement("li",null,(0,p.tx)("org_self_serve.review_step.true_up_description_2.seat_rename")),r.createElement("li",null,(0,p.tx)("org_self_serve.review_step.true_up_description_3.seat_rename")),r.createElement("li",null,(0,p.tx)("org_self_serve.review_step.true_up_description_4.seat_rename"))),r.createElement(d.Ph,{onClick:()=>l(!0),className:b.uD,trusted:!0},(0,p.tx)("org_self_serve.review_step.learn_more_about_true_ups")),r.createElement(I,{height:20}),r.createElement("div",{className:b.aK}),r.createElement(I,{height:24}),r.createElement("div",{className:b.lQ},(0,p.tx)("org_self_serve.review_step.annual_renewal_on_date",{renewalDate:new Date(e.renewalDate)})),r.createElement(I,{height:16}),r.createElement("div",null,(0,p.tx)("org_self_serve.review_step.annual_renewal_description.seat_rename")),r.createElement(I,{height:20}),e.renderBillingItems(),r.createElement("button",{className:`${b.uD} ${b.i9}`,onClick:e.showAdditionalEditorsModal},r.createElement(_.B,{className:b.Hl,svg:T.A}),(0,p.tx)("org_self_serve.review_step.add_additional_editors.seat_rename")),r.createElement(I,{height:20}),r.createElement("div",{className:b.aK}),r.createElement(I,{height:16}),r.createElement("div",{className:b.$M},r.createElement("div",null,r.createElement("div",{className:b.TK},(0,p.tx)("org_self_serve.review_step.subtotal"))),r.createElement("div",{className:b.TK},r.createElement("div",{className:b.TK,"data-testid":"subtotal-summary-price-section"},c.formatMoney(e.subTotalCents,{showCents:!1})))),r.createElement("div",{className:b.$M},r.createElement("div",null,r.createElement("div",{className:b.TK},(0,p.tx)("org_self_serve.review_step.tax")),r.createElement("div",{className:b.ZE},(0,p.tx)("org_self_serve.review_step.tax_rate",{taxRate:e.taxRate}))),r.createElement("div",{className:b.TK,"data-testid":"tax-summary-price-text"},c.formatMoney(e.taxDueCents,{showCents:!1}))),r.createElement("div",{className:b.$M},r.createElement("div",null,r.createElement("div",{className:b.bv},(0,p.tx)("org_self_serve.review_step.total_due_today")),e.orgPayment.last4&&r.createElement("div",{className:b.ZE},(0,p.tx)("org_self_serve.review_step.card_ending_in_last4",{last4:e.orgPayment.last4}))),r.createElement("div",{className:b.lQ,"data-testid":"confirm-total-summary-price-text"},c.formatMoney(e.totalCents,{showCents:!1}))),r.createElement(I,{height:8}),r.createElement("div",{className:b.aK})),r.createElement(I,{height:24}),r.createElement("div",{className:b.gn},r.createElement("div",{className:b.O},r.createElement("input",{type:"checkbox",checked:t,className:b.o1,onChange:()=>{a(!t)},"data-testid":"msa-checkbox"}),r.createElement("span",null,(0,p.tx)("org_self_serve.review_step.i_agree_to_msa_and_renewal_links",{msaLink:r.createElement("a",{rel:"noopener noreferrer",className:b.uD,href:(0,p.dS)("/ssa"),target:"_blank"},(0,p.tx)("org_self_serve.review_step.software_services_agreement")),renewalLink:r.createElement("a",{rel:"noopener noreferrer",className:b.uD,href:(0,p.dS)("/renewal-and-cancellation"),target:"_blank"},(0,p.tx)("org_self_serve.review_step.renewal_and_cancellation_terms"))}))),r.createElement(d.vd,{className:b.sk,onClick:e.onSubmit,disabled:!t||e.loading,trackingProperties:e.ctaProperties,dataTestId:"confirm-purchase-button"},(0,p.tx)("org_self_serve.review_step.complete_purchase"))))))}function k(e){let t=new h.vr(e.currency);return r.createElement("div",{className:b.jg},r.createElement("div",{className:i()(b.M7,b.Et)},r.createElement("div",{className:b.cc},r.createElement(_.B,{svg:w.A,className:b.O2,useOriginalSrcFills_DEPRECATED:!0,autosize:!0,width:"32px",height:"32px"}),r.createElement("div",{className:b.W},(0,p.tx)("org_self_serve.confirmation_step.you_re_all_set"))),r.createElement("div",{className:b.Jo},r.createElement("div",{className:b.Qv},(0,p.tx)("org_self_serve.confirmation_step.order_confirmation_message")),r.createElement(I,{height:24}),r.createElement("div",{className:b.aK}),r.createElement(I,{height:24}),r.createElement("div",{className:b.N5},r.createElement("div",{className:b.I1},(0,p.tx)("org_self_serve.confirmation_step.total_amount_to_be_charged_to_card_ending_in_last4",{last4:e.orgPayment.last4}),r.createElement("span",{className:b.iv},t.formatMoney(e.totalCents,{showCents:!1}))),r.createElement(I,{height:24}),r.createElement("div",{className:b.aK}),r.createElement(I,{height:32}),r.createElement("div",{className:b.Ed},!e.orgMigrated&&r.createElement(r.Fragment,null,r.createElement(m.kt,null),r.createElement("div",{className:b.nm},(0,p.tx)("org_self_serve.confirmation_step.we_re_setting_up_your_organization"))),r.createElement(d.$$,{disabled:!e.orgMigrated,className:b.Xq,onClick:e.onFileBrowserClick,dataTestId:"go-to-file-browser-button"},(0,p.tx)("org_self_serve.confirmation_step.go_to_the_file_browser")))))))}},321801:(e,t,a)=>{a.d(t,{Bx:()=>G,wW:()=>W,VE:()=>H,ml:()=>q,LJ:()=>j});var r=a(411855),n=a(188507),i=a(966712),l=a(485727),o=a(658850),s=a(768137),c=a(799569),d=a(946689),m=a(827586),u=a(574176),_=a(762638),p=a(939863),g=a(278733),f=a(175290),E=a(865618),h=a(809840),y=a(237107),v=a(662275),b=a(801161),w=a(672517),T=a(988022),I=a(582410),N=a(720647),x=a(820113),C=a(498606),S=a(237870),k=a(558867),A=a(80332),R=a(585878),L=a(488578);let D=(0,a(422237).ex)("org_upgrade_user_info_extended",function({teamIds:e,teamNames:t}){return r.createElement("div",null,e.map((e,a)=>{let n=(0,A.$L)(e,A.us);return r.createElement("div",{key:e,className:"org_self_serve_modal_tooltip_content--tooltipRow--l59-b"},r.createElement("div",{style:g.sx.add({backgroundColor:n,minWidth:"10px",height:"10px",margin:"8px",borderRadius:"2px"}).$}),r.createElement("div",null,t[a]))}))},e=>{let t=e.getAttribute("data-tooltip-team-names"),a=e.getAttribute("data-tooltip-team-ids");return{teamNames:t.split(","),teamIds:a.split(",")}}),P="org_self_serve_modals--modalContainer--T0ehh",F="org_self_serve_modals--modalWrapperSmall--MoMir org_self_serve_modals--modalWrapper--wPVCU",O="org_self_serve_modals--modalHeader--xK0Vj",M="org_self_serve_modals--modalText---cdj9";var B=a(265871),U=a(950142);function V(e){return r.createElement("div",{style:{height:e.height||12}})}function H(e){return r.createElement(R.XV,{containerClassName:P,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349},r.createElement("div",{className:F},r.createElement("div",{className:O},(0,p.tx)("org_self_serve.modals.invalid_email.figma_organization_only_allows_work_emails")),r.createElement("div",{className:M},(0,p.tx)("org_self_serve.modals.invalid_email.change_email_address_to_proceed")),r.createElement(V,{height:12}),r.createElement("a",{onClick:e.onFileBrowserClick},(0,p.tx)("org_self_serve.modals.invalid_email.go_to_the_file_browser"))))}function W(e){return r.createElement(R.XV,{containerClassName:P,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349},r.createElement("div",{className:F},r.createElement("div",{className:O},(0,p.tx)("org_self_serve.modals.existing_org_admin.figma_organization_already_purchased")),r.createElement("div",{className:M},(0,p.tx)("org_self_serve.modals.existing_org_admin.if_you_need_another_organization",{contactSales:r.createElement("a",{onClick:e.onContactSales},(0,p.tx)("org_self_serve.modals.existing_org_admin.contact_sales"))})),r.createElement(V,{height:4}),r.createElement(V,{height:12}),r.createElement("a",{onClick:e.onFileBrowserClick},(0,p.tx)("org_self_serve.modals.existing_org_admin.go_to_the_file_browser"))))}function j(e){return r.createElement(R.XV,{containerClassName:P,headerSize:"hidden",onClose:e.onClose,title:"",minWidth:580,maxWidth:580},r.createElement("div",{className:"org_self_serve_modals--modalWrapper--wPVCU"},r.createElement(u.B,{className:"org_self_serve_modals--modalClose--vFM62",svg:U.A,onClick:e.onClose}),r.createElement("div",{className:O},(0,p.tx)("org_self_serve.modals.true_up_edu.figma_grows_with_your_team")),r.createElement("div",{className:M},(0,p.tx)("org_self_serve.modals.true_up_edu.members_can_add_new_editors.seat_rename")),r.createElement(V,{height:8}),r.createElement("div",{className:"org_self_serve_modals--modalSubHeader--e93TH"},(0,p.tx)("org_self_serve.modals.true_up_edu.what_to_expect_at_true_up")),r.createElement("div",{className:M},(0,p.tx)("org_self_serve.modals.true_up_edu.true_up_explanation.seat_rename",{seeFullDetails:r.createElement("a",{href:"https://help.figma.com/hc/articles/360040328293",target:"_blank"},(0,p.tx)("org_self_serve.modals.true_up_edu.see_full_details"))}))))}let G=(0,S.Ju)(function(e){let t=e.isProTeam?I.H5.exclude([N.PE]):I.H5,[a,n]=(0,r.useState)(t.dict(t=>e.seatDataByLicenseType[t]?.currentSeats||0)),[s,c]=(0,r.useState)(null),d=e=>{let t=a[e];void 0!==t&&t<99&&n({...a,[e]:t+1})},m=t=>{let r=e.seatDataByLicenseType[t],i=a[t];null!=r&&null!=i&&i>r.minSeats&&n({...a,[t]:i-1})},_=(e,t)=>{if(""===e.target.value){t(0);return}let a=parseInt(e.target.value);isNaN(a)||t(a)},g=new x.vr(e.currency),f=a[N.tL],E={[N.vu]:{headerString:(0,p.t)("all_carts.figma_design_editors.seat_rename"),totalSeatCount:a[N.vu],shouldShowDevModeIncludedText:!0},[N.tL]:{headerString:(0,p.t)("all_carts.figjam_editors.seat_rename"),totalSeatCount:f,shouldShowDevModeIncludedText:!1},[N.PE]:{headerString:(0,p.t)("all_carts.dev_mode_only_seats"),totalSeatCount:a[N.PE]??0,shouldShowDevModeIncludedText:!1}};return r.createElement(R.Eo,{onSubmit:()=>{let r=!1;if(t.forEach(t=>{let n=a[t],i=e.seatDataByLicenseType[t]?.minSeats||0;void 0!==n&&!1===r&&(n<i||n>99)&&(c(t),r=!0)}),r)return;let n=t.reduce((e,t)=>e+(a[t]||0),0);e.minTotalSeats&&n<e.minTotalSeats?c("total"):(e.dispatch(v.Ce()),e.updateAdditionalSeats(a))},confirmText:(0,p.t)("all_carts.save"),cancelText:(0,p.t)("all_carts.cancel"),title:(0,p.t)("all_carts.add_additional_editors.seat_rename")},r.createElement("div",{className:"org_self_serve_modals--bannerContainer--pW9ZX"},s&&r.createElement("div",{className:"org_self_serve_modals--errorBanner--QbvRM"},r.createElement(u.B,{className:"org_self_serve_modals--errorSvg--Lf9lD",svg:B.A}),r.createElement("div",{className:"org_self_serve_modals--errorBannerText--EV-xZ org_self_serve_modals--headerModalText--u9znR"},s===N.vu&&(0,p.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[N.vu].minSeats}),s===N.tL&&(0,p.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[N.tL].minSeats}),s===N.PE&&(0,p.tx)("all_carts.you_need_a_minimum_n_dev_mode_seats",{minSeatsCount:e.seatDataByLicenseType[N.PE]?.minSeats||0}),"total"===s&&!!e.minTotalSeats&&((0,i.kc)().org_checkout_min_seat_info_copy?(0,p.tx)("all_carts.minimum_seats",{minTotalSeats:e.minTotalSeats,minDesignSeats:e.seatDataByLicenseType[N.vu].minSeats,seatsText:(0,p.tx)("checkout.seats_text",{numOfSeats:e.minTotalSeats}),designSeatsText:(0,p.tx)("checkout.seats_text",{numOfSeats:e.seatDataByLicenseType[N.vu].minSeats})}):(0,p.tx)("all_carts.you_need_a_minimum_n_editors.seat_rename",{minSeatsCount:e.minTotalSeats}))))),t.sort(I.AG).map(t=>{let i=E[t],s=e.seatDataByLicenseType[t],c=a[t];return void 0===i||void 0===s||void 0===c?r.createElement(r.Fragment,null):r.createElement("div",{key:t},r.createElement(V,{height:16}),r.createElement("div",{className:"org_self_serve_modals--headerModalBoldText--Fk6Q7 org_self_serve_modals--headerModalText--u9znR"},i.headerString),i.shouldShowDevModeIncludedText&&r.createElement(r.Fragment,null,r.createElement(V,{height:4}),r.createElement(l.G,null)),r.createElement(V,{height:12}),r.createElement(o.o,{"data-testid":t+"-editor_counter",editorType:t,incrementSeats:()=>d(t),decrementSeats:()=>m(t),numEditors:c,minSeatsCount:s.minSeats,headerText:g.formatMoney(i.totalSeatCount*s.seatUnitCostInCents*(e.showAnnualPrice?12:1)),headerSubText:(0,y.mx)(e.showAnnualPrice,i.totalSeatCount,!0,s.seatUnitCostInCents,e.currency),updateAdditionalSeatsText:e=>_(e,e=>{n({...a,[t]:e})})}))}),r.createElement(V,{height:18}),r.createElement("div",{className:"org_self_serve_modals--divider--FjEW2"}))},"AdditionalEditorsModal");var $=(e=>(e[e.NONE=0]="NONE",e[e.DESIGN=1]="DESIGN",e[e.WHITEBOARD=2]="WHITEBOARD",e[e.TOTAL=3]="TOTAL",e))($||{});function z({userData:e,checkboxHandler:t}){let[a,i]=(0,r.useState)(0),l=(0,n.wA)(),o=({rect:e,designChecked:r,...n})=>{if(t(n),n.newVal&&a<3){i(e=>e+1);let t=r?(0,p.t)("checkout.switch_seat_from_design_to_devmode"):(0,p.t)("checkout.enabled_devmode");l(b.eB({target:{kind:C.Ui.TEXT,text:t},targetRect:{top:e.top,right:e.right+8,bottom:e.bottom,left:e.left+8,width:e.width,height:e.height},textAlign:"left",position:C.Zj.RIGHT,hideAfterDelay:1e3}))}};return r.createElement(r.Fragment,null,e.map((a,n)=>r.createElement("div",{"data-testid":"user-data-row",key:a.user.id},r.createElement(Y,{rowType:"data"},r.createElement(k.az,{entity:a.user,includeUserEmailAddress:!0,size:24}),r.createElement(X,{userInfo:a}),r.createElement(E.S,{checked:a.designEditor,onChange:e=>{t({userId:a.user.id,type:"designEditor",newVal:e.currentTarget.checked})}}),r.createElement(d.tB,{checked:a.devMode,className:"org_self_serve_modals--devModeCheckbox--nDoay",onChange:e=>{o({designChecked:a.designEditor,userId:a.user.id,type:"devMode",newVal:e.currentTarget.checked,rect:e.currentTarget.getBoundingClientRect()})}}),r.createElement(d.tB,{checked:a.figjamEditor,className:"org_self_serve_modals--figjamCheckbox--Cv6Bs",onChange:e=>{t({userId:a.user.id,type:"figjamEditor",newVal:e.currentTarget.checked})}})),n!==e.length-1&&r.createElement(K,null))))}function Y({rowType:e,children:t}){let a="footer"===e?["55%","15%","15%","15%"]:["35%","20%","15%","15%","15%"];return r.createElement(f.Y,{dataTestId:"seat-table-row",verticalAlignItems:"center",horizontalAlignItems:"start",padding:{top:"data"===e?14:16,right:16,bottom:"data"===e?14:16,left:16},backgroundColor:"header"===e?"hover":"default",spacing:0},t.map((e,t)=>r.createElement(f.Y,{key:t,width:a[t],horizontalAlignItems:"start",verticalAlignItems:"center",padding:{right:16}},e)))}function K(){return r.createElement("div",{className:_.cx.wFull.colorBgTertiary.h1.$})}function Q({teamId:e}){return r.createElement("div",{className:_.cx.w8.h8.bRadius2.minW8.$,style:g.sx.add({backgroundColor:(0,A.$L)(e,A.us)}).$})}function X({userInfo:e}){return e.teams.length>1?r.createElement("div",{"data-tooltip-show-immediately":!0,"data-tooltip-type":C.Ib.SPECIAL,"data-tooltip":D,"data-tooltip-team-names":e.teams.map(e=>e.name).join(","),"data-tooltip-team-ids":e.teams.map(e=>e.id).join(","),"data-tooltip-show-right":!0,"data-tooltip-light-mode":!0},r.createElement(h.E,{color:"default"},(0,p.tx)("all_carts.editor_table.multiple_teams"))):r.createElement(f.Y,{spacing:8,verticalAlignItems:"center",horizontalAlignItems:"start"},r.createElement(Q,{teamId:e.teamIds[0]}),r.createElement("div",{className:_.cx.noWrap.ellipsis.overflowHidden.$},r.createElement(h.E,{color:"default"},e.teams[0]?.name)))}let q=(0,S.Ju)(function({users:e,updateSelectedEditors:t,updateAdditionalEmptySeats:a,currency:n,minTotalSeats:i,dispatch:l,seatInfo:u,monthlyPriceByLicenseType:_}){let[g,E]=(0,r.useState)(e),[y,b]=(0,r.useState)({design:u.design.additionalSeatCount,figjam:u.figjam.additionalSeatCount,dev_mode:u.dev_mode.additionalSeatCount}),I=(0,r.useMemo)(()=>{let e=0,t=0,a=0;for(let r of Object.values(g))r.designEditor&&e++,r.devMode&&a++,r.figjamEditor&&t++;return(e+=y.design,a+=y.dev_mode,t+=y.figjam,i&&e+t+a<i)?3:e<u.design.minCount||e>99?1:t<u.figjam.minCount||t>99?2:0},[y,g,i,u]),C=e=>{y[e]>=99||b(t=>({...t,[e]:t[e]+1}))},S=e=>{y[e]<=0||b(t=>({...t,[e]:t[e]-1}))},k=(e,t)=>{let a=""===e.target.value?0:parseInt(e.target.value);isNaN(a)||b(e=>({...e,[t]:a}))},A=new x.vr(n),R=()=>{l(v.Ce())};return r.createElement(w.fu,{name:"Select Editors Modal"},r.createElement(L.Nb,{size:864,maxHeight:672,hide:()=>l(v.Ce()),className:"org_self_serve_modals--selectEditorsModal--Hxi5q"},r.createElement("div",{className:"org_self_serve_modals--selectEditorModalHeader--wsqXY org_self_serve_modals--headerModalText--u9znR"},(0,p.tx)("checkout.add_or_remove_editors"),r.createElement(c.s_,{customStyle:{position:"initial"},dispatch:l,onClose:R})),r.createElement(K,null),r.createElement(Y,{rowType:"header"},r.createElement(h.E,{color:"default",fontWeight:"medium"},(0,p.tx)("all_carts.editor_table.Name")),r.createElement(h.E,{color:"default",fontWeight:"medium"},(0,p.tx)("all_carts.editor_table.Teams")),r.createElement(f.Y,{direction:"vertical",spacing:0,horizontalAlignItems:"start",verticalAlignItems:"center"},r.createElement(h.E,{color:"default",fontWeight:"medium"},(0,p.tx)("general.figma_design")),r.createElement("div",null,r.createElement(h.E,{color:"handoff",fontWeight:"medium"},(0,p.tx)("general.dev_mode")),"\xa0",r.createElement(h.E,{color:"default",fontWeight:"medium"},(0,p.tx)("checkout.dev_mode_included_text_formatted.included")))),r.createElement(h.E,{color:"default",fontWeight:"medium"},(0,p.tx)("general.dev_mode")),r.createElement(h.E,{color:"default",fontWeight:"medium"},(0,p.tx)("general.figjam"))),r.createElement(K,null),r.createElement(m.P,{maxHeight:426},r.createElement(z,{userData:Object.values(g),checkboxHandler:({userId:e,type:t,newVal:a})=>{let r={...g[e],[t]:a};"devMode"===t&&a&&(r.designEditor=!1),"designEditor"===t&&a&&(r.devMode=!1),E(t=>({...t,[e]:r})),(0,T.Cu)({name:"org_checkout_select_editors_checkbox",licenseType:t,checked:a})}})),r.createElement(K,null),r.createElement(Y,{rowType:"footer"},r.createElement(f.Y,{spacing:0,direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"center"},r.createElement(h.E,{color:"default",fontWeight:"medium"},(0,p.tx)("all_carts.add_additional_editors.seat_rename")),r.createElement(h.E,{fontWeight:"regular",color:"secondary"},(0,p.tx)("all_carts.add_additional_editors_description.seat_rename"))),r.createElement(o.o,{editorType:N.vu,incrementSeats:()=>C(N.G_.DESIGN),decrementSeats:()=>S(N.G_.DESIGN),numEditors:y.design,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>k(e,N.G_.DESIGN)}),r.createElement(o.o,{editorType:N.PE,incrementSeats:()=>C(N.G_.DEV_MODE),decrementSeats:()=>S(N.G_.DEV_MODE),numEditors:y.dev_mode,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>k(e,N.G_.DEV_MODE)}),r.createElement(o.o,{editorType:N.tL,incrementSeats:()=>C(N.G_.FIGJAM),decrementSeats:()=>S(N.G_.FIGJAM),numEditors:y.figjam,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>k(e,N.G_.FIGJAM)})),r.createElement("div",{className:"org_self_serve_modals--selectEditorModalActions--SUzT9 org_self_serve_modals--selectEditorModalFooter--1hQ0p"},0!==I?(()=>{switch(I){case 0:default:return;case 1:return r.createElement(h.E,{color:"danger"},(0,p.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:u.design.minCount}));case 2:return r.createElement(h.E,{color:"danger"},(0,p.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:u.figjam.minCount}));case 3:return r.createElement(h.E,{color:"danger"},(0,p.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_at_least_count_editor_seats.seat_rename",{minCount:i}))}})():r.createElement(h.E,{fontWeight:"regular",color:"secondary"},(0,p.tx)("all_carts.new_total",{total:A.formatMoney(function(e,t,a){let r=t.design,n=t.figjam,i=t.dev_mode;for(let t in e)e[t].designEditor?r++:e[t].devMode&&i++,e[t].figjamEditor&&n++;return r*a[N.G_.DESIGN]*12+n*a[N.G_.FIGJAM]*12+i*a[N.G_.DEV_MODE]*12}(g,y,_),{showCents:!0})})),r.createElement("div",{className:"org_self_serve_modals--buttonGroup--sI5ub"},r.createElement(s.nR,{onClick:R},(0,p.t)("general.cancel")),r.createElement(d.$$,{onClick:()=>{0===I&&(a(y),t(g),l(v.Ce()))},disabled:0!==I},(0,p.t)("checkout.update_seats"))))))},"SelectEditorsModal")},27905:(e,t,a)=>{a.d(t,{O:()=>w});var r=a(411855),n=a(67833),i=a(574176),l=a(762638),o=a(939863),s=a(175290),c=a(809840),d=a(988022),m=a(720647),u=a(67294),_=a(558867),p=a(619031);function g({users:e,size:t=u.Pf.MEDIUM,maxShow:a=2}){let n=e.slice(0,a),i=Math.max(e.length-a,0);return r.createElement(s.Y,{verticalAlignItems:"center",spacing:"-8px",horizontalAlignItems:"start",width:"hug-contents"},n.map((e,a)=>r.createElement(_.Ro,{className:l.cx.borderBox.relative.b1.colorBorderBg.$,key:`${e.id}${a}`,entity:e,size:t})),i>0&&r.createElement(p.f,{className:l.cx.fontSemiBold.colorText.borderBox.relative.b1.colorBorderBg.$,text:`+${i}`,size:t}))}var f=a(569421),E=a(401761),h=a(501191);let y={[m.G_.DESIGN]:r.createElement(c.E,{fontSize:13},(0,o.tx)("checkout.design_with_dev_mode_included")),[m.G_.DEV_MODE]:r.createElement(c.E,{fontSize:13},(0,o.tx)("general.dev_mode")),[m.G_.FIGJAM]:r.createElement(c.E,{fontSize:13},(0,o.tx)("general.figjam"))},v={[m.G_.DESIGN]:n.y1.DESIGN_AND_DEV_MODE,[m.G_.DEV_MODE]:n.y1.DEV_MODE,[m.G_.FIGJAM]:n.y1.WHITEBOARD};function b({type:e,users:t,additionalSeats:a,onClick:d}){let[m,u]=(0,r.useState)(!1);return r.createElement("div",{className:`${l.cx.b1.colorBorder.bRadius6.wFull.borderBox.$} ${m?l.cx.colorBgHover.$:""}`,role:"button",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),onClick:d,tabIndex:0,"data-testid":`seat-summary-card-${e}`},r.createElement(s.Y,{padding:{top:10,right:16,bottom:10,left:16},direction:"horizontal",verticalAlignItems:"center",horizontalAlignItems:"space-between"},r.createElement(s.Y,{horizontalAlignItems:"start",verticalAlignItems:"center"},r.createElement(n.oS,{type:v[e],size:n.LE.LARGE}),r.createElement(s.Y,{direction:"vertical",horizontalAlignItems:"start",padding:{left:4},spacing:0},y[e],r.createElement("div",null,r.createElement(c.E,{color:"secondary",fontSize:11,fontWeight:"medium"},(0,o.tx)("checkout.seats",{numOfSeats:t.length+a})),a>0&&r.createElement("span",null,"\xa0",r.createElement(c.E,null,(0,o.tx)("checkout.paranthesis",{content:r.createElement(c.E,{color:"secondary",fontSize:11,fontWeight:"medium"},(0,o.tx)("checkout.empty_seats",{numOfEmptySeats:a}))}))),m&&r.createElement("span",null,r.createElement(c.E,{color:"secondary"},"\xa0\u2022\xa0"),r.createElement(c.E,{fontSize:11,color:"brand",fontWeight:"medium"},(0,o.tx)("general.edit")))))),r.createElement(g,{users:t}),a>0&&0===t.length&&r.createElement(i.B,{svg:E.A,useOriginalSrcFills_DEPRECATED:!0})))}function w({additionalDesignSeats:e,additionalDevModeSeats:t,additionalWhiteboardSeats:a,selectedEditors:n,onClick:u}){let _={[m.G_.DESIGN]:{users:[],additionalSeats:e},[m.G_.DEV_MODE]:{users:[],additionalSeats:t},[m.G_.FIGJAM]:{users:[],additionalSeats:a}};for(let e of Object.values(n))e.designEditor?_[m.G_.DESIGN].users.push(e.user):e.devMode&&_[m.G_.DEV_MODE].users.push(e.user),e.figjamEditor&&_[m.G_.FIGJAM].users.push(e.user);return r.createElement(r.Fragment,null,r.createElement(s.Y,{direction:"vertical",spacing:"12px",height:"hug-contents"},Object.entries(_).map(([e,{users:t,additionalSeats:a}])=>r.createElement(b,{key:e,type:e,users:t,additionalSeats:a,onClick:()=>{u(),(0,d.Cu)({name:"org_checkout_seat_summary_card"})}}))),r.createElement("div",{className:l.cx.mt24.$},r.createElement("button",{"data-testid":"seat-summary-add-seats-cta",className:`${f.uD} ${f.i9}`,onClick:()=>{u(),(0,d.Cu)({name:"org_checkout_add_more_seats"})}},r.createElement(i.B,{className:f.Hl,svg:h.A}),r.createElement(c.E,null,(0,o.tx)("checkout.add_additional_seats")))))}},720818:(e,t,a)=>{a.d(t,{d:()=>u});var r=a(411855),n=a(48793),i=a(939863),l=a(672517),o=a(802026),s=a(622139),c=a(637590),d=a(569421);let m=(0,l.tf)(function(e){return r.createElement("div",{className:d.Nd,onClick:e.onClick},(0,i.tx)("org_self_serve.headers.cancel"))});function u(e){if(e.currentStep===o.X1.Confirmation)return null;let t=[],a=null;if(e.newTeamProps){let r={step:o.X1.ChoosePlan,name:(0,i.t)("org_self_serve.headers.choose_plan")},n={step:o.X1.CreateTeam,name:(0,i.t)("org_self_serve.headers.create_team")};switch(e.newTeamProps?.teamFlowType){case c.SC.CREATE:t.push({step:o.X1.PseudoCreateTeam,name:(0,i.t)("org_self_serve.headers.create_team")}),t.push({step:o.X1.AddCollaborators,name:(0,i.t)("org_self_serve.headers.add_team_members")}),t.push(r);break;case c.SC.CREATE_AND_UPGRADE:t.push(r),t.push(n),a=o.X1.CreateTeam;break;case c.SC.UPGRADE_EXISTING_TEAM:t.push(r)}}(e.hasEligibleUpgrades||e.newTeamProps)&&(t.push({step:o.X1.TeamSelect,name:(0,i.t)("org_self_serve.headers.teams_to_upgrade")}),a=a??o.X1.TeamSelect),t.push({step:o.X1.Details,name:(0,i.t)("org_self_serve.headers.organization_details")}),t.push({step:o.X1.Payment,name:(0,i.t)("org_self_serve.headers.payment")}),t.push({step:o.X1.Review,name:(0,i.t)("org_self_serve.headers.review")}),a=a??o.X1.Details,t[t.findIndex(e=>e.step===a)].step=o.X1.Initial;let l=0;for(let a=0;a<t.length;a++)if(t[a].step===e.currentStep){l=a;break}return r.createElement("div",{className:d.li},r.createElement(m,{onClick:e.onFileBrowserClick}),r.createElement("div",{className:d.Uu,"data-testid":"stepBreadcrumbs"},t.map((t,a)=>r.createElement(n.On,{key:a+1,selected:e.currentStep===t.step,number:a+1,text:t.name,onClick:()=>{let r=function(e){switch(e){case o.X1.ChoosePlan:return s.tn.PLAN_COMPARISON;case o.X1.AddCollaborators:return s.tn.ADD_COLLABORATORS;case o.X1.PseudoCreateTeam:return s.tn.CREATE_TEAM;default:return null}}(t.step);r&&e.onSelectTeamUpgradeStep?e.onSelectTeamUpgradeStep(r):window.history.go(a-l)},canClick:a<l,lightText:!0}))))}},335986:(e,t,a)=>{a.d(t,{z:()=>g});var r=a(411855),n=a(188507),i=a(988261),l=a(135876),o=a(939863),s=a(403491),c=a(738269),d=a(995852),m=a(758259),u=a(672517),_=a(820113),p=a(257512);function g(e){let{selectedView:t,promo:a}=e,g=(0,n.wA)(),f=(0,p.Ud)({teamId:t.teamId}),E=()=>{(0,i._H)(),g(d.Ay({promo:null})),g(c.$T(e.selectedView.previousView||{view:"team",teamId:t.teamId}))},h=()=>{g(m.S_({teamId:t.teamId,teamName:t.teamName,promoCode:a?.code||"",onSuccess:E,onError:E}))};return a?r.createElement(u.fu,{name:"Redeem Promo Code > Confirm",properties:{teamId:t.teamId}},r.createElement("div",{className:"promo_modals--promoReviewInner---J-fs"},r.createElement("div",{className:"promo_modals--cancelRow--nBn1h"},r.createElement("button",{type:"button",className:"promo_modals--cancelButton--Rbgfe text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:E},(0,o.tx)("promo.promo_review.cancel"))),r.createElement("div",{className:"promo_modals--promoReviewTitle--e7s5s text--fontPos20--Bcz97 text--_fontBase--QdLsd"},(0,o.tx)("promo.promo_review.redeem_your_days_of_free_professional_plan",{days:a.promo_value})),r.createElement("div",{className:"promo_modals--promoReviewDescription--aLeG8 text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,o.tx)("promo.promo_review.any_additional_editors_invited_to_selected_view_team_name_will_also_be_free_of_charge_for_the_next_days.seat_rename",{teamName:t.teamName,days:a.promo_value})),r.createElement("div",null,r.createElement(l.x,{isLoading:f},()=>r.createElement(s.d,{selectedView:t,onClickConfirm:h,currency:(0,_.LN)(),canSeeBillingAddressExp:!1}))))):(E(),null)}},943083:(e,t,a)=>{a.d(t,{b:()=>s});var r=a(411855),n=a(946689),i=a(939863),l=a(278733),o=a(231522);function s({disableInvites:e,collaborators:t,setCollaborators:a,willSendInvites:s,skipInviteStep:c}){let d=(e,r)=>{if(r>=t.length)return;let n=[...t];n[r]=e,a(n)};return r.createElement(r.Fragment,null,r.createElement("div",{className:o.Fb},(0,i.tx)("pro_cart.add_collaborators.add_collaborators_to_your_team")),r.createElement(n.Kz,{multiple:.5}),r.createElement("div",{className:o.b0},(0,i.tx)("pro_cart.add_collaborators.well_add_them_to_your_team")),r.createElement(n.Kz,{multiple:4}),r.createElement("div",{style:l.sx.flex.flexColumn.add({maxWidth:"400px"}).mlAuto.mrAuto.gap12.$},t.map((e,t)=>r.createElement(n.il,{key:`collaborator-email-input-${t}`,value:e,onChange:e=>d(e.target.value,t),placeholder:(0,i.t)("pro_cart.add_collaborators.email")})),r.createElement(n.Us,{onClick:()=>{let e=[...t];e.push(""),a(e)},trusted:!0,style:l.sx.alignLeft.font14.fontMedium.$},(0,i.tx)("pro_cart.add_collaborators.add_another"))),r.createElement("div",{style:l.sx.flex.flexColumn.itemsCenter.mlAuto.mrAuto.mt24.gap24.fontMedium.font14.$},r.createElement(n.vd,{disabled:!!e,style:l.sx.font14.add({height:"44px",width:"110px"}).$,onClick:s},(0,i.tx)("pro_cart.add_collaborators.sent_invites")),r.createElement(n.Ph,{trusted:!0,onClick:c,style:l.sx.colorTextSecondary.alignCenter.$},(0,i.tx)("pro_cart.add_collaborators.skip_for_now"))))}},354272:(e,t,a)=>{a.d(t,{O:()=>P});var r=a(411855),n=a(188507),i=a(935283),l=a(297666),o=a(485727),s=a(946689),c=a(455057),d=a(135876),m=a(574176),u=a(939863),_=a(278733),p=a(392592),g=a(67294),f=a(321801),E=a(910741),h=a(662275),y=a(995852),v=a(720647),b=a(176824),w=a(99506),T=a(820113),I=a(243987),N=a(257512),x=a(622139),C=a(36816),S=a(498606),k=a(558867),A=a(231522);if(443==a.j)var R=a(501191);let L="564px",D=(0,l.s)((e,t)=>t(p.F.enqueue({message:e})));function P(e){let t=(0,n.d4)(t=>{let a=e.selectedView.teamId?t.teamUserByTeamId[e.selectedView.teamId]||{}:null;return(0,I.BR)(a,t.user)}),a=(0,n.d4)(e=>e.payment),l=(0,n.d4)(t=>e.selectedView.teamId?t.teams[e.selectedView.teamId]:null),p=a.editorStatusChanges,P=(0,n.wA)(),F=a.billingPeriod===x.tY.STUDENT,{increment:O,decrement:M}=(0,N.$7)(),[B,U]=(0,r.useState)(!0),{getDesignUnitCost:V,getWhiteboardUnitCost:H}=(0,b.Ql)(),W=new T.vr(e.currency),j=(0,r.useCallback)((e,t,a)=>{let r=[...p[t][e]];r.splice(a,1),P(y.Je({editorStatusChanges:{...p,[t]:{...p[t],[e]:r}}}))},[P,p]),G=(e,t,a)=>{switch(e){case w._Y.WHITEBOARD:switch(t){case"upgrade":return(0,u.t)("pro_cart.adjust_editors.will_become_figjam_editor.seat_rename",{email:a});case"downgrade":return(0,u.t)("pro_cart.adjust_editors.will_become_figjam_viewer",{email:a});default:(0,i.xb)(t)}case w._Y.DESIGN:case w._Y.SLIDES:case w._Y.COOPER:case w._Y.SITES:switch(t){case"upgrade":return(0,u.t)("pro_cart.adjust_editors.will_become_design_editor.seat_rename",{email:a});case"downgrade":return(0,u.t)("pro_cart.adjust_editors.will_become_design_viewer",{email:a});default:(0,i.xb)(t)}default:(0,i.xb)(e)}},$=(0,r.useCallback)((e,t)=>()=>{let a;if(U(!1),-1!==(a=p.upgrade[e].indexOf(t.id)))j(e,"upgrade",a),D(G(e,"downgrade",t.email),P),M(e,t.email);else if(-1!==(a=p.downgrade[e].indexOf(t.id)))j(e,"downgrade",a),D(G(e,"upgrade",t.email),P),O(e,t.email);else{let a=t["whiteboard"===e?"whiteboard_paid_status":"design_paid_status"]===C.Zf.FULL?"downgrade":"upgrade",r=[...p[a][e]];r.push(t.id),P(y.Je({editorStatusChanges:{...p,[a]:{...p[a],[e]:r}}})),D(G(e,a,t.email),P),("upgrade"===a?O:M)(e,t.email)}},[P,p,M,O,j,U]),z=(0,I.Ky)(t,p,w._Y.DESIGN),Y=(0,I.Ky)(t,p,w._Y.WHITEBOARD),K=a.numDesignEditors,Q=Math.max(K,z),X=Math.max(Y,a.numWhiteboardEditors);Q!==K&&P(y.js({numDesignEditors:Q})),X!==a.numWhiteboardEditors&&P(y.Az({numWhiteboardEditors:X}));let q=(0,I.O1)(K,z),J=(0,I.O1)(a.numWhiteboardEditors,Y),Z=()=>{P(h.to({type:f.Bx,data:{seatDataByLicenseType:{[v.vu]:{minSeats:z,currentSeats:Q,seatUnitCostInCents:V(a.billingPeriod,e.currency)},[v.tL]:{minSeats:Y,currentSeats:X,seatUnitCostInCents:H(a.billingPeriod,e.currency)}},showAnnualPrice:a.billingPeriod===x.tY.ANNUAL,updateAdditionalSeats:e=>{P(y.js({numDesignEditors:e[v.vu]})),P(y.Az({numWhiteboardEditors:e[v.tL]}))},dispatch:P,currency:e.currency,isProTeam:!0}}))},ee=r.useCallback((e,t)=>e["whiteboard"===t?"whiteboard_paid_status":"design_paid_status"]===C.Zf.FULL&&!p.downgrade[t].includes(e.id)||p.upgrade[t].includes(e.id),[p.downgrade,p.upgrade]),et=t.reduce((e,t)=>(e[t.id]={design:ee(t,w._Y.DESIGN),whiteboard:ee(t,w._Y.WHITEBOARD),slides:ee(t,w._Y.SLIDES),sites:ee(t,w._Y.SITES)},e),{}),ea=!1,er=0;for(let e of t)if(et[e.id].whiteboard&&er++,et[e.id].design&&er++,ea=1===er,er>1)break;let en=t[0];(0,r.useEffect)(()=>{0===er&&!e.isLoading&&en?.id&&(P(y.Je({editorStatusChanges:{...p,upgrade:{design:[en.id,...p?.upgrade?.design??[]],whiteboard:[en.id,...p?.upgrade?.whiteboard??[]],slides:[en.id,...p?.upgrade?.slides??[]],sites:[en.id,...p?.upgrade?.sites??[]],cooper:[en.id,...p?.upgrade?.cooper??[]]}}})),O(w._Y.DESIGN,en.email),O(w._Y.WHITEBOARD,en.email))},[P,p,er,e.isLoading,en.id,en.email,O,X,ee,en,B,M]);let ei=(0,E.lb)();return r.createElement(r.Fragment,null,r.createElement("div",{className:A.Fb},ei?(0,u.tx)("pro_cart.adjust_editors.choose_your_figma_design_and_figjam_editors.seat_rename_dev_mode"):(0,u.tx)("pro_cart.adjust_editors.choose_your_figma_design_and_figjam_editors.seat_rename")),r.createElement(s.Kz,{multiple:.5}),r.createElement("div",{className:A.b0,style:_.sx.add({width:L,margin:"auto"}).$},(0,u.tx)("pro_cart.adjust_editors.subtitle")),r.createElement(s.Kz,{multiple:3}),e.error&&r.createElement("div",{style:_.sx.add({width:L,margin:"auto"}).$},r.createElement(c._,{color:c.S.ERROR,text:e.error})),e.error&&r.createElement(s.Kz,{multiple:2}),r.createElement("div",{className:A.sD},r.createElement("div",{className:A.re},r.createElement(s.Kz,{multiple:2.5}),r.createElement("div",{className:A.Ks},r.createElement("div",{className:`${A.HY} ${A.ab} ${A.p7}`},r.createElement("div",{className:A.Ps},l?r.createElement(k.rE,{key:l.id,entity:l,size:24}):r.createElement(k.rE,{key:e.teamName,entity:{name:e.teamName},size:24}))),r.createElement("div",{className:`${A.HY} ${A.E0}`,"data-testid":"design-column-header"},r.createElement("div",null,(0,u.tx)("pro_cart.adjust_editors.figma_design_column_title")),r.createElement(s.Kz,{multiple:.75}),r.createElement("div",{className:A.EU},(0,u.tx)("pro_cart.design_billing_cost_per_month.seat_rename",{monthlyCostInDollars:W.formatMoney(V(a.billingPeriod,e.currency))})),r.createElement(r.Fragment,null,r.createElement(s.Kz,{multiple:.75}),r.createElement(o.G,null))),r.createElement("div",{className:`${A.HY} ${A.E0}`,"data-testid":"figjam-column-header"},r.createElement("div",null,(0,u.tx)("general.figjam")," "),r.createElement(s.Kz,{multiple:.75}),r.createElement("div",{className:A.EU},(0,u.tx)("pro_cart.whiteboard_billing_cost_per_month.seat_rename",{monthlyCostInDollars:W.formatMoney(H(a.billingPeriod,e.currency))})))),r.createElement(s.Kz,{multiple:2.5})),r.createElement("div",{className:A.re},e.isLoading&&r.createElement(s.Kz,{multiple:1.5}),r.createElement(d.x,{isLoading:e.isLoading},()=>r.createElement(r.Fragment,null,t.map((e,a)=>{let n=a===t.length-1;return r.createElement("div",{key:e.id},r.createElement(s.Kz,{multiple:1.5}),r.createElement("div",{className:A.Ks},r.createElement("div",{className:A.ab},r.createElement(g.H8,{user:e}),r.createElement("div",{className:A.QB},r.createElement("div",{className:A.ni},e.handle),r.createElement("div",{className:A.W},e.email))),r.createElement("div",{className:A.E0},r.createElement("span",{"data-tooltip-type":S.Ib.TEXT,"data-tooltip":et[e.id].design&&ea?(0,u.t)("pro_cart.adjust_editors.at_least_one_editor.seat_rename"):(0,u.t)("pro_cart.adjust_editors.checkbox_toggle_explanation.seat_rename")},r.createElement(s.tB,{id:`toggle-design-editor-${e.id}`,checked:et[e.id].design,disabled:F||ea&&et[e.id].design,onChange:$(w._Y.DESIGN,e),className:A.kv}))),r.createElement("div",{className:A.E0},r.createElement("span",{"data-tooltip-type":S.Ib.TEXT,"data-tooltip":et[e.id].whiteboard&&ea?(0,u.t)("pro_cart.adjust_editors.to_uncheck_first_check_another"):(0,u.t)("pro_cart.adjust_editors.checkbox_toggle_explanation.seat_rename")},r.createElement(s.tB,{id:`toggle-whiteboard-editor-${e.id}`,checked:et[e.id].whiteboard,disabled:F||ea&&et[e.id].whiteboard,onChange:$(w._Y.WHITEBOARD,e),className:A.kv})))),r.createElement(s.Kz,{multiple:1.5}),!(F&&n)&&r.createElement("div",{className:A.pV}))}),!F&&r.createElement(r.Fragment,null,r.createElement(s.Kz,{multiple:2.5}),r.createElement("div",{className:A.Su},r.createElement("div",{className:A.ab},r.createElement("div",{className:A.uD,onClick:Z},r.createElement(m.B,{className:A.Hl,svg:R.A}),r.createElement("span",null,(0,u.tx)("pro_cart.adjust_editors.add_additional_editors.seat_rename")))),r.createElement("div",{className:`${A.HY} ${A.E0}`},r.createElement("div",null,(0,u.tx)("all_carts.num_editors.seat_rename",{numEditors:Q})),r.createElement("div",{className:A.EU},q>0&&(0,u.tx)("pro_cart.adjust_editors.empty_seats",{numEmptySeats:q}))),r.createElement("div",{className:`${A.HY} ${A.E0}`},(0,u.tx)("all_carts.num_editors.seat_rename",{numEditors:X}),r.createElement("div",{className:A.EU},J>0&&(0,u.tx)("pro_cart.adjust_editors.empty_seats",{numEmptySeats:J})))),r.createElement(s.Kz,{multiple:2.5})))),e.isLoading&&r.createElement(s.Kz,{multiple:1.5}))))}},488491:(e,t,a)=>{a.d(t,{T:()=>u});var r=a(411855),n=a(188507),i=a(939863),l=a(444795),o=a(352876),s=a(349410),c=a(724838),d=a(206193),m=a(231522);function u({chooseStarterPlan:e,chooseProPlan:t,chooseOrgPlan:a,currency:u,updateCurrency:_,upgradeExistingTeam:p,parentRef:g}){let f=(0,n.d4)(e=>e.user),E=(0,s.WQ)({isInDevMode:!1,isProCurrent:!1,hasFeatureListOverride:!1})&&(0,c.Hw)(f);return r.createElement("div",{ref:g},r.createElement("div",{className:m.Fb},(0,i.tx)("pro_cart.choose_plan.choose_a_plan_for_your_new_team")),r.createElement("div",{className:m.dX},r.createElement(l.O,{currency:u,chooseStarterPlan:e,chooseProPlan:t,chooseOrgPlan:a,updateCurrency:_,upsellSource:d.b.CREATE_NEW_PAID_TEAM,withUpgradeExistingTeamOption:p,parentRef:g})),E&&r.createElement(o.V,null))}},403491:(e,t,a)=>{a.d(t,{d:()=>h});var r=a(411855),n=a(188507),i=a(737947),l=a(966712),o=a(946689),s=a(493323),c=a(939863),d=a(865618),m=a(349410),u=a(6988),_=a(176824),p=a(820113),g=a(622139),f=a(237107),E=a(231522);function h(e){let[t,a]=r.useState(!1),h=new p.vr(e.currency),[b,w]=r.useState(!1),T=(0,n.d4)(e=>e.payment),I=(0,n.d4)(e=>e.payment,(e,t)=>b||e===t),N=(0,n.d4)(t=>e.selectedView.teamId?t.teams[e.selectedView.teamId].name:e.teamName)??"",x=(0,m.Ik)(),C=T.displayName||N,S=T.legalName||N,k=T.billingPeriod===g.tY.STUDENT,A=!!(0,_.p1)(e.selectedView,T),R=A||k,L=T.submitPending||!A&&!t,D=T.numWhiteboardEditors,P=(0,_.Qo)(T.numDesignEditors,T.billingPeriod,e.currency),F=(0,_.PK)(D,T.billingPeriod,e.currency),O=R?0:T.taxes?.total||P+F,M=new URLSearchParams(i.Ay.location.search),B=M.get("onCompleteRedirectFileKey"),U=M.get("onCompleteRedirectNodeId"),{trackingDescriptor:V,buttonText:H,finePrint:W}=(0,f.V8)({isPromo:A,isEducationTeam:k,claimsEndAtDate:T.promo?.claims_end_at}),j=async t=>{t.preventDefault(),await w(!0),e.onClickConfirm()},G=(0,l.kc)().pro_team_business_names;return r.createElement("div",{className:G?E.HX:E.db},G&&r.createElement("div",{className:E.PT},r.createElement(u.x,{displayName:C??"",legalName:S??"",canSeeBillingAddressExp:e.canSeeBillingAddressExp,billingAddress:e.billingAddress,shippingAddress:e.shippingAddress,variant:"team"})),r.createElement("div",{className:G?E.Bo:void 0},r.createElement("div",{className:E.TV,"data-testid":"review-step-upgrade-title"},(0,c.tx)(k?"edu.checkout_team_name":x?T.billingPeriod===g.tY.ANNUAL?"pro_cart.review.exp_sticker_shock.upgrade_team_name_to_a_professional_team_yearly":"pro_cart.review.exp_sticker_shock.upgrade_team_name_to_a_professional_team_monthly":"pro_cart.review.upgrade_team_name_to_a_professional_team",{teamName:N})),r.createElement(f.$c,{payment:I,currency:e.currency,isPromo:A,isEducationTeam:k,hasCartStickerShock:x}),r.createElement("div",{className:E.pV}),r.createElement(o.Kz,{multiple:2}),I.taxes&&!!e.billingAddress&&r.createElement(r.Fragment,null,r.createElement(f.Wy,{mainText:(0,c.tx)("pro_cart.info.subtotal"),priceText:h.formatMoney(A?0:I.taxes.sub_total||0,{showCents:!0}),"data-testid":"subtotal-summary"}),r.createElement(o.Kz,{multiple:1.5}),r.createElement(f.Wy,{mainText:(0,c.tx)("pro_cart.review.tax"),priceText:h.formatMoney(I.taxes?.tax_total||0,{showCents:!0}),subText:(0,c.tx)("pro_cart.review.tax_percent",{taxPercent:I.taxes.lines[0]?.tax_percent||0}),"data-testid":"tax-summary"}),r.createElement(o.Kz,{multiple:1.5})),r.createElement(f.Wy,{"data-testid":"confirm-total-summary",mainText:k?(0,c.tx)("pro_cart.review.total"):(0,c.tx)("pro_cart.review.total_due_today"),priceText:h.formatMoney(O,{showCents:!0,showFullFormat:(0,p._Z)()}),subText:A?(0,c.tx)("pro_cart.review.you_will_not_be_charged_during_the_free_period",{days:I.promo.promo_value}):void 0}),r.createElement(o.Kz,{multiple:2}),r.createElement("div",null,W,!A&&r.createElement("div",{className:E.Gn},r.createElement(d.S,{checked:t,onChange:e=>{a(e.currentTarget.checked)}}),r.createElement("p",null," ",(0,c.tx)("pro_cart.review.agree_with_privacy_and_cancellation",{termsOfServiceLink:r.createElement(f.BO,null),privacyLink:r.createElement(y,null),cancellationLink:r.createElement(v,null)})))),r.createElement(o.Kz,{multiple:2.5}),r.createElement(o.Kz,{multiple:2.5}),r.createElement(o.vd,{className:E.fK,onClick:j,trackingProperties:{teamId:e.selectedView.teamId,inPublishDraftExp:!!(U&&B),trackingDescriptor:V},disabled:L,dataTestId:"confirm-purchase-button"},T.submitPending?r.createElement(s.kt,{className:E.S}):H)))}function y(){return r.createElement(o.Us,{href:"/privacy",target:"_blank",trusted:!0},(0,c.tx)("pro_cart.review.privacy_policy"))}function v(){return r.createElement(o.Us,{href:"/pricing-faq/#how-do-i-cancel-my-paid-plan",target:"_blank",trusted:!0},(0,c.tx)("pro_cart.review.cancellation_policy"))}},707570:(e,t,a)=>{a.d(t,{I:()=>m,y:()=>u});var r=a(411855),n=a(946689),i=a(659838),l=a(574176),o=a(939863),s=a(101505),c=a(231522);if(443==a.j)var d=a(489262);var m=(e=>(e.STARTER="starter",e.PRO="pro",e.ORG="org",e))(m||{});function u({type:e,teamName:t,setTeamName:a,onNext:m,upgradeExistingTeam:u,promo:_}){let p={starter:{title:(0,o.tx)("all_carts.create_team.create_a_new_team"),subtitle:(0,o.tx)("all_carts.create_team.after_creating_a_team"),placeholder:(0,o.t)("pro_cart.create_team.enter_a_name_for_your_working_group"),next:(0,o.tx)("all_carts.create_team.create_team"),trackingDescriptor:s.c.SEND_INVITES},pro:{title:(0,o.tx)("pro_cart.create_team.create_a_professional_team"),subtitle:(0,o.tx)("pro_cart.create_team.itll_have_unlimited_files_and_collaborative_features"),placeholder:(0,o.t)("pro_cart.create_team.enter_a_name_for_your_working_group"),next:_?(0,o.tx)("pro_cart.sidebar.next_review"):(0,o.tx)("pro_cart.create_team.next_set_editors.seat_rename"),trackingDescriptor:_?s.c.REVIEW:s.c.SET_EDITORS},org:{title:(0,o.tx)("org_self_serve.create_team_step.create_an_org_team"),subtitle:(0,o.tx)("org_self_serve.create_team_step.itll_have_unlimited_files_and_advanced_security"),placeholder:(0,o.t)("org_self_serve.create_team_step.enter_a_name_for_your_team"),next:(0,o.tx)("org_self_serve.create_team_step.next_select_team"),trackingDescriptor:s.c.SELECT_TEAM}}[e];return r.createElement(r.Fragment,null,r.createElement("div",{className:c.Fb},p.title),r.createElement(n.Kz,{multiple:.5}),r.createElement("div",{className:c.b0},p.subtitle),r.createElement("div",{className:c.F0},r.createElement(l.B,{svg:d.A,className:c.Pr}),r.createElement(i.L,{className:c.Zy,onChange:e=>a(e.target.value),value:t,placeholder:p.placeholder})),r.createElement(n.vd,{className:c.eA,onClick:m,trackingProperties:{trackingDescriptor:p.trackingDescriptor},disabled:!t.trim()},p.next),!!u&&r.createElement(n.Us,{className:c.x,onClick:u,trusted:!0,trackingProperties:{trackingDescriptor:s.c.UPGRADE_EXISTING_TEAM}},(0,o.tx)("pro_cart.create_team.upgrade_an_existing_team_instead")))}},140841:(e,t,a)=>{a.d(t,{y:()=>u});var r=a(411855),n=a(188507),i=a(848044),l=a(946689),o=a(939863),s=a(278733),c=a(843309),d=a(512077),m=a(231522);function u(e){let{error:t,errorCode:a}=(0,n.d4)(e=>e.payment),u=!!t&&null===a,_=!!e.error;return r.createElement(r.Fragment,null,r.createElement("div",{className:m.Fb},(0,o.tx)("pro_cart.payment.enter_payment_details_title")),r.createElement(l.Kz,{multiple:3}),r.createElement("div",{style:s.sx.add({width:"416px",margin:"auto"}).$},u&&r.createElement("div",null,r.createElement(i.I,{marginTop:0,message:t}),_&&r.createElement(l.Kz,{multiple:1.5})),u&&!_&&r.createElement(l.Kz,{multiple:2}),r.createElement("div",{className:m.P_},r.createElement("div",{style:s.sx.if(e.error?.code===c.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,s.sx.font14.add({marginTop:"92px"})).$},r.createElement(d.F,{createPaymentElement:e.createPaymentElement,unmountPaymentElement:e.unmountPaymentElement,billingAddress:e.billingAddress,updateBillingAddress:e.updateBillingAddress,legalCompanyName:e.legalCompanyName,updateLegalCompanyName:e.updateLegalCompanyName,nameOnPaymentMethod:e.nameOnPaymentMethod,updateNameOnPaymentMethod:e.updateNameOnPaymentMethod,shippingAddress:e.shippingAddress,updateShippingAddress:e.updateShippingAddress,error:e.error,vatGstId:e.vatGstId,onVatGstIdChange:e.onVatGstIdChange,regionalVatGstId:e.regionalVatGstId,onRegionalVatGstIdChange:e.onRegionalVatGstIdChange,paymentMethodType:e.paymentMethodType,isCommunityCheckout:!1,canSeeBillingAddressExp:e.canSeeBillingAddressExp,isCheckout:!0})))))}},394802:(e,t,a)=>{a.d(t,{q:()=>et});var r=a(411855),n=a(188507),i=a(367253),l=a(737947),o=a(966712);if(443==a.j)var s=a(988261);var c=a(776621),d=a(650322),m=a(304783),u=a(192437),_=a(946689),p=a(455057),g=a(135876),f=a(881388),E=a(939863),h=a(898211),y=a(738269),v=a(507877),b=a(662275),w=a(995852),T=a(758259),I=a(931828),N=a(349410),x=a(672517),C=a(843309),S=a(176824),k=a(195971),A=a(964258),R=a(488983),L=a(594901),D=a(860178),P=a(801387),F=a(99506),O=a(820113),M=a(243987),B=a(257512),U=a(428467),V=a(707465),H=a(206193),W=a(622139),j=a(637590),G=a(392340),$=a(943083),z=a(354272),Y=a(488491),K=a(403491),Q=a(707570),X=a(140841),q=a(55992),J=a(634038),Z=a(231522);function ee(e){let t;let a=(0,D.iZ)(),u=a?.id,R=(0,o.DC)(),ee=(0,n.d4)(e=>e.payment),et=(0,n.d4)(e=>e.dropdownShown),ea=(0,n.d4)(e=>e.teams),er=e.selectedView.paymentStep,en=r.useRef(null),[ei,el]=(0,r.useState)(R?.team_name??""),[eo,es]=(0,r.useState)(k.kt),ec=(0,M.PS)((0,L.FC)()),ed=!!(0,o.kc)().redirect_starter_team_loophole&&!(0,o.kc)().close_starter_team_loophole&&(null===e.selectedView.teamId||e.selectedView.teamFlowType!==j.SC.UPGRADE_EXISTING_TEAM),[em,eu]=(0,r.useState)(R?.currency||ee.currency||(0,O.LN)()),e_=e=>{eu(e),eG(w.MN({currency:e}))},ep=ed?W.tY.ANNUAL:ee.billingPeriod,{numDesignEditors:eg,numWhiteboardEditors:ef,editorStatusChanges:eE}=ee,{ignoreCurrentPlan:eh}=e.selectedView,ey=e.selectedView.teamId;(0,r.useEffect)(()=>{ed&&(l.Ay.redirect("/"),(0,c.$D)(m.e.MONETIZATION_UPGRADES,Error("Starter loophole pathway entered, redirecting back to default"),{extra:{...e.selectedView}}))},[e.selectedView,ed]);let ev=(0,n.d4)(t=>(0,V.Np)(t,{...e.selectedView,paymentStep:W.tn.CONFIRM_PAY})),eb=(0,n.d4)(t=>(0,V.Np)(t,{...e.selectedView,paymentStep:W.tn.PAYMENT_AND_ADDRESS})),ew=(0,N.Mh)(),{estimatedDesignCost:eT,estimatedWhiteboardCost:eI}=(0,S.Ql)(),eN=eT(eg,ep,em)+eI(ef,ep,em),{createPaymentElement:ex,unmountPaymentElement:eC,savePayment:eS,billingAddress:ek,updateBillingAddress:eA,shippingAddress:eR,updateShippingAddress:eL,customerLegalName:eD,setCustomerLegalName:eP,nameOnPaymentMethod:eF,setNameOnPaymentMethod:eO,vatGstId:eM,setVatGstId:eB,regionalVatGstId:eU,setRegionalVatGstId:eV,paymentMethodType:eH,error:eW}=(0,C.Op)({setupIntentParams:{redirect_url:ev,error_redirect_url:eb,subtotal_estimate:eN,currency:em},customerInfo:{teamId:ey},paymentFlowSource:C.wn.PRO_UPGRADE,currency:em,billingPeriod:ep,defaultCountry:(0,O.ub)(),initialBillingAddress:R?.billing_address,initialNameOnPaymentMethod:R?.name_on_payment_method,initialShippingAddress:R?.shipping_address,initialCustomerLegalName:R?.customer_legal_name,initialVatGstId:R?.vat_gst_id,initialRegionalVatGstId:R?.regional_vat_gst_id,teamName:R?.team_name||ei,canSeeBillingAddressExp:ew,isCheckout:!0}),ej=eW?.code===C.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,eG=(0,n.wA)(),e$=(0,B.Ud)({teamId:ey,canSeeBillingAddressExp:ew}),ez=()=>{eG(y.$T({...e.selectedView,paymentStep:W.tn.CHOOSE_PLAN,previousView:e.selectedView.previousView,ignoreCurrentPlan:eh}))};(0,k.pI)({loadingPaidEditors:e$,teamId:ey,teamName:ey?void 0:ei,setTeamName:ey?void 0:el,collaborators:ey||e.selectedView.teamFlowType!==j.SC.CREATE?void 0:eo,setCollaborators:ey||e.selectedView.teamFlowType!==j.SC.CREATE?void 0:es});let eY=(0,n.d4)(e=>e.currentUserOrgId),eK=eh?null:eY,eQ=(0,n.d4)(e=>eK?e.orgById[eK]:null),eX=(0,G.Q)({currentOrgId:eK,currentTeamId:null}),eq=eX.data?.currentUser,eJ=eq?.baseOrgUser?.workspaceUsers,eZ=eJ?.find(e=>e?.isMainWorkspace)?.workspaceId,{cannotCreateTeamReason:e0}=(0,P.l6)(eQ,eZ),e1=(0,n.d4)(e=>(0,U.isOrgUserExternallyRestrictedFromState)(e));(0,r.useEffect)(()=>{er===W.tn.PAYMENT_AND_ADDRESS&&ej&&ez()});let e2=(0,n.d4)(e=>!!e.user&&(0,d.cn)(e.user));(0,r.useEffect)(()=>{e2&&e.selectedView.isEduTeam?eG(w.Lo({billingPeriod:W.tY.STUDENT})):e.selectedView.isEduTeam&&eG(w.Lo({billingPeriod:W.tY.UNSPECIFIED}))},[eG,e.selectedView.isEduTeam,e2]),(0,r.useEffect)(()=>{e.selectedView.teamFlowType===j.SC.CREATE_AND_UPGRADE&&(e1||e0===P.z4.TEAM_CREATION_CONTROL)&&(l.Ay.redirect("/"),eG(f.s.error((0,E.t)("team_creation.missing_team_creation_controls"))))},[e.selectedView.teamFlowType,e1,e0,eG]);let e8=ee.currencyToSwitch;(0,r.useEffect)(()=>{e8&&eu(e8)},[eu,e8]);let e4=ep===W.tY.STUDENT,e3=eo.filter(e=>e&&e.trim()).map(e=>e.trim()),e5=e3.filter(e=>!(0,i.xf)(e)),e9=!!a&&e3.filter(e=>e===a.email).length>0,e6=async t=>{t.preventDefault();let a=new URL(window.location.href).searchParams,r=a.get("onCompleteRedirectFileKey"),n=a.get("onCompleteRedirectNodeId");t.currentTarget&&t.currentTarget.blur();let i=(0,q.kR)(e.selectedView.paymentStep,e.selectedView.teamFlowType,ep,ee.promo,e.selectedView.planType||j.Sc.UNDETERMINED);er===W.tn.CREATE_TEAM&&(el(ei.trim()),eG(y.$T({...e.selectedView,teamId:null,paymentStep:i,ignoreCurrentPlan:eh}))),er===W.tn.ADD_COLLABORATORS&&(e5.length?eG(f.s.error((0,E.t)("pro_cart.add_collaborators.error.email_is_invalid",{string:e5[0]}))):e9?eG(f.s.error((0,E.t)("team_view.team_permissions_modal.youre_not_able_to_send_an_invite_to_yourself"))):eG(y.$T({...e.selectedView,paymentStep:i,ignoreCurrentPlan:eh}))),er===W.tn.CHOOSE_PLAN?e4?eG(y.$T({...e.selectedView,paymentStep:i,billingPeriod:W.tY.STUDENT,ignoreCurrentPlan:eh})):(eG(w.Je({editorStatusChanges:eE})),eG(y.$T({...e.selectedView,paymentStep:i,billingPeriod:ee.billingPeriod,...r?{searchParams:{onCompleteRedirectFileKey:r,onCompleteRedirectNodeId:n}}:{},ignoreCurrentPlan:eh}))):er===W.tn.PAYMENT_AND_ADDRESS&&(eG(w.I2({submitPending:!0})),await eS(),eG(w.I2({submitPending:!1})))},e7=e.selectedView.teamFlowType===j.SC.CREATE?()=>{eG((0,A.KQ)({teamName:ei,orgAccess:F.bU.PUBLIC,inviteEmails:e3,teamFlowType:e.selectedView.teamFlowType,onSuccess:()=>{(0,k.Al)(a?.id)},ignoreCurrentPlan:eh}))}:void 0;(e.selectedView.teamFlowType===j.SC.CREATE_AND_UPGRADE||e.selectedView.teamFlowType===j.SC.UPGRADE_EXISTING_TEAM)&&(1===ec.length?t=t=>{t=t||e.selectedView.billingPeriod;let a=j.SC.UPGRADE_EXISTING_TEAM;eG(y.$T({...e.selectedView,teamFlowType:a,teamId:ec[0].id,paymentStep:(0,q.kR)(e.selectedView.paymentStep,a,t||null,ee.promo,j.Sc.TEAM,W.tn.CHOOSE_PLAN),planType:j.Sc.UNDETERMINED,billingPeriod:t,ignoreCurrentPlan:eh}))}:ec.length>1&&(t=e=>{e&&eG(w.Lo({billingPeriod:e})),eG((0,b.to)({type:h.dR,data:{plan:h.In.PRO,upsellSource:H.b.UPGRADE_EXISTING_FROM_TEAM_CREATION}}))}));let te=()=>{let t=()=>{(0,o.sj)(),(0,B.Mt)(eG),(0,j.h5)(e.selectedView.teamFlowType)&&null===ey&&(0,k.Al)(u)};if(e.selectedView.teamId&&e4)eG(w.Nj({teamId:e.selectedView.teamId}));else if(e.selectedView.teamId&&ee.promo){let a=e.selectedView.teamId,r=(0,o.kc)().ps_benchmark;eG(T.S_({teamId:a,teamName:ea[a].name,promoCode:ee.promo?.code||"",onSuccess:()=>{t(),(0,s._H)(),eG(w.Ay({promo:null})),r&&u?e.selectedView.previousView?y.$T(e.selectedView.previousView):v._l({workspace:{userId:u,orgId:null,teamId:a},view:{view:"allProjects"}}):eG(y.$T(e.selectedView.previousView||{view:"team",teamId:a}))},onError:()=>{(0,s._H)(),eG(w.Ay({promo:null})),eG(y.$T({...e.selectedView,paymentStep:W.tn.PLAN_COMPARISON,ignoreCurrentPlan:eh}))}}))}else eG(I.b({completed_pro_cart_flow:!0})),eG(w.I2({submitPending:!0})),eG((0,T.gk)({teamId:e.selectedView.teamId,selectedCurrency:em,teamName:ei,teamFlowType:e.selectedView.teamFlowType,invites:e3,hasSelectedStudentTeam:e4,onSuccess:t,promotionCodeId:null}))},tt=new URLSearchParams(l.Ay.location.search),ta=tt.get("onCompleteRedirectFileKey"),tr=tt.get("onCompleteRedirectNodeId"),tn=a&&k.lX({teamId:ey,userId:a.id})?.is3DS;return e.selectedView.teamFlowType===j.SC.CREATE_AND_UPGRADE&&(e1||e0===P.z4.TEAM_CREATION_CONTROL)?r.createElement(r.Fragment,null):r.createElement(x.fu,{name:"Upgrade Team",properties:{teamId:e.selectedView.teamId,teamFlowType:e.selectedView.teamFlowType,planType:e.selectedView.planType,step:er,currency:em,inPublishDraftExp:!!(ta&&tr)}},r.createElement("div",{className:Z.im,"data-testid":"team-upgrade-v2"},r.createElement(q.vU,{selectedView:e.selectedView}),r.createElement("div",{className:Z.Jr},r.createElement("div",{className:Z.uz,ref:en},r.createElement(_.Kz,{multiple:4}),er===W.tn.PLAN_COMPARISON&&r.createElement(Y.T,{chooseStarterPlan:e7,chooseProPlan:t=>{eG(w.Lo({billingPeriod:t}));let a=(0,j.h5)(e.selectedView.teamFlowType)?e.selectedView.teamFlowType:j.SC.CREATE_AND_UPGRADE;eG(y.$T({...e.selectedView,teamFlowType:a,paymentStep:(0,q.kR)(e.selectedView.paymentStep,a,t,ee.promo,j.Sc.TEAM),billingPeriod:t,planType:j.Sc.TEAM,openInNewTab:!1,ignoreCurrentPlan:eh}))},chooseOrgPlan:()=>{eG(w.Bq({currency:em,newTeamProps:{teamFlowType:e.selectedView.teamFlowType,newTeamName:ei,inviteEmails:e3,previousView:e.selectedView},upsellSource:H.b.UPGRADE_NEW_TEAM_V2}))},currency:em,updateCurrency:e=>e_(e),upgradeExistingTeam:t,parentRef:en}),er===W.tn.CREATE_TEAM&&r.createElement(Q.y,{type:e.selectedView.teamFlowType===j.SC.CREATE?Q.I.STARTER:Q.I.PRO,teamName:ei,setTeamName:el,onNext:e6,upgradeExistingTeam:t?()=>t?.(ep):void 0,promo:ee.promo}),er===W.tn.ADD_COLLABORATORS&&r.createElement($.b,{disableInvites:!e3.length,collaborators:eo,setCollaborators:es,willSendInvites:e6,skipInviteStep:()=>{if(es(k.kt),u){let e=(0,k.lX)({teamId:null,userId:u});e&&(0,k.dT)(u,{...e,newCollaborators:k.kt})}eG(y.$T({...e.selectedView,paymentStep:W.tn.PLAN_COMPARISON,ignoreCurrentPlan:eh}))}}),er===W.tn.CHOOSE_PLAN&&r.createElement(z.O,{selectedView:e.selectedView,isLoading:e$,currency:em,error:ej?eW?.message:null,teamName:ei}),er===W.tn.PAYMENT_AND_ADDRESS&&r.createElement(r.Fragment,null,r.createElement(X.y,{billingAddress:ek,updateBillingAddress:eA,shippingAddress:eR,updateShippingAddress:eL,legalCompanyName:eD,updateLegalCompanyName:eP,nameOnPaymentMethod:eF,updateNameOnPaymentMethod:eO,createPaymentElement:ex,unmountPaymentElement:eC,error:eW,vatGstId:eM,onVatGstIdChange:eB,regionalVatGstId:eU,onRegionalVatGstIdChange:eV,paymentMethodType:eH,isCommunityCheckout:!1,canSeeBillingAddressExp:ew,isCheckout:!0})),er===W.tn.CONFIRM_PAY&&r.createElement(r.Fragment,null,r.createElement("div",{className:Z.Fb},(0,E.tx)("pro_cart.review.lets_make_sure_everything_looks_right")),r.createElement(_.Kz,{multiple:3}),tn&&r.createElement("div",{className:Z.vK},r.createElement(p._,{color:p.S.INFORMATION,text:(0,E.t)("pro_cart.review.extra_validation")})),tn&&r.createElement(_.Kz,{multiple:2}),r.createElement(g.x,{isLoading:e$},()=>r.createElement(K.d,{selectedView:e.selectedView,teamName:ei,onClickConfirm:te,billingAddress:ek,shippingAddress:eR,canSeeBillingAddressExp:ew,currency:em}))),r.createElement(_.Kz,{multiple:9})),r.createElement(J.S,{selectedView:e.selectedView,onNext:e6,isLoading:e$,isButtonDisabled:ej,currency:em,updateCurrency:e=>e_(e),dropdownShown:et}))))}function et(e){return(0,o.kc)().cart_error_boundaries?r.createElement(ea,{...e}):r.createElement(ee,{...e})}function ea(e){return r.createElement(u.tH,{sentryTags:{area:m.e.MONETIZATION_UPGRADES},boundaryKey:"TeamUpgradeV2",fallback:u.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:R.y4},r.createElement(ee,{...e}))}},237107:(e,t,a)=>{a.d(t,{$c:()=>S,BO:()=>k,ME:()=>T,U1:()=>w,V8:()=>E,Wy:()=>N,X6:()=>I,d6:()=>y,mx:()=>h});var r=a(411855),n=a(188507),i=a(629019),l=a.n(i),o=a(498480),s=a(485727),c=a(946689),d=a(939863),m=a(101505),u=a(176824),_=a(99506),p=a(820113),g=a(622139),f=a(231522);function E({isPromo:e,isEducationTeam:t,claimsEndAtDate:a}){var n;return e?{trackingDescriptor:m.c.START_PRO_PLAN_FOR_FREE,buttonText:(0,d.tx)("pro_cart.review.start_professional_plan_for_free"),finePrint:r.createElement(r.Fragment,null,(0,d.tx)("pro_cart.review.offer_redeem_agree",{termsOfServiceLink:r.createElement(k,null)}),a&&r.createElement(r.Fragment,null," ",(0,d.tx)("pro_cart.review.redeem_offer_by",{date:(n=new Date(a),new Intl.DateTimeFormat("en-US",{month:"long",day:"numeric",year:"numeric"}).format(n))})))}:t?{trackingDescriptor:m.c.COMPLETE_UPGRADE,buttonText:(0,d.tx)("pro_cart.review.complete_upgrade"),finePrint:(0,d.tx)("pro_cart.review.all_editors_on_an_education_team_must_be_verified.seat_rename")}:{trackingDescriptor:m.c.COMPLETE_PURCHASE,buttonText:(0,d.tx)("pro_cart.review.complete_purchase"),finePrint:(0,d.tx)("pro_cart.review.your_subscription_will_automatically_renew_without_link.seat_rename")}}function h(e,t,a,r,n){let i=new p.vr(n).formatMoney(r,{showCents:!a}),l=(0,d.t)("all_carts.num_editors.seat_rename",{numEditors:t}),o=(0,d.t)("all_carts.plural_months",{months:e?12:1});return(0,d.t)("all_carts.cost_equation",{money:i,editors:l,billingTime:o})}function y({currentBillingPeriod:e,numEditors:t,noCents:a,shouldStrikethroughMonthlyUnitCostIfAnnual:n,currency:i}){return e===g.tY.STUDENT?null:r.createElement(v,{isAnnual:e===g.tY.ANNUAL,numEditors:t,noCents:a,unitCost:(0,u.ok)(e,i),currency:i,monthlyUnitCostForStrikethrough:n?(0,u.ok)(g.tY.MONTHLY,i):void 0})}function v({isAnnual:e,numEditors:t,noCents:a,unitCost:n,monthlyUnitCostForStrikethrough:i,currency:l}){let o=new p.vr(l),s=o.formatMoney(n,{showCents:!a}),c=(0,d.t)("all_carts.num_editors.seat_rename",{numEditors:t}),m=(0,d.t)("all_carts.plural_months",{months:e?12:1});return"number"==typeof i&&e?(0,d.tx)("all_carts.cost_equation_strikethrough_unit_price",{strikethroughUnitPrice:r.createElement("span",{className:f.of},o.formatMoney(i,{showCents:!a})),money:s,editors:c,billingTime:m}):(0,d.tx)("all_carts.cost_equation",{money:s,editors:c,billingTime:m})}function b({currentBillingPeriod:e,numEditors:t,noCents:a,shouldStrikethroughMonthlyUnitCostIfAnnual:n,currency:i}){return r.createElement(v,{isAnnual:e===g.tY.ANNUAL,numEditors:t,unitCost:(0,u.hH)(e,i),noCents:a,currency:i,monthlyUnitCostForStrikethrough:n?(0,u.hH)(g.tY.MONTHLY,i):void 0})}function w(e,t){return Math.ceil((1-12*e/(12*t))*100)}function T({noCents:e=!0,shouldStrikethroughMonthlyUnitCostIfAnnual:t,currency:a,numEditors:i}){let l=(0,n.d4)(e=>e.payment.billingPeriod),o=(0,n.d4)(e=>e.payment.numWhiteboardEditors);return l===g.tY.STUDENT?null:r.createElement(b,{currentBillingPeriod:l,numEditors:i||o,noCents:e,currency:a,shouldStrikethroughMonthlyUnitCostIfAnnual:t})}function I({editorType:e,numEditors:t,currency:a}){let r;r="design"===e?(0,u.Qo)(t,g.tY.MONTHLY,a):(0,u.PK)(t,g.tY.MONTHLY,a);let n=new p.vr(a);return(0,d.tx)("edu.cost_per_month",{cost:n.formatMoney(r)})}function N({"data-testid":e,discountPercentage:t,mainText:a,priceText:n,strikethroughPriceText:i,strikethroughPriceClassName:m,subText:u,showDevModeIncludedText:_}){let p=t=>void 0===e?void 0:`${e}-${t}`;return r.createElement("div",{"data-testid":e},r.createElement("div",{className:f.vg,"data-testid":p("cost-row")},r.createElement("span",{"data-testid":p("main-text")},a),r.createElement("span",{"data-testid":p("price-section")},i&&r.createElement(r.Fragment,null,r.createElement("span",{className:l()(m,f.hy,f.sH),"data-testid":p("strikethrough-price-text")},i),"\xa0"),r.createElement("span",{className:f.sH,"data-testid":p("price-text")},n))),_&&r.createElement(r.Fragment,null,r.createElement(c.Kz,{multiple:.2}),r.createElement(s.G,null),r.createElement(c.Kz,{multiple:.1})),r.createElement("div",{className:f.q9,"data-testid":p("sub-row")},r.createElement("span",{"data-testid":p("sub-text")},u),t&&r.createElement("span",{"data-testid":p("discount-percentage")},r.createElement(o.Ex,{className:f.qS,color:o.zE.SUCCESS,size:o.vj.LARGE,subtle:!0,text:(0,d.tx)("pro_cart.sidebar.annual_savings_percentage",{percentage:t})}))))}function x({payment:e,currency:t,isPromo:a,isEducationTeam:n,...i}){let l,o,s,c,m;let _=new p.vr(t),{editorType:f}=i;return"design"===f?(o=e.numDesignEditors,s=C(g.Ye,e.taxes?.lines)??(0,u.Qo)(o,e.billingPeriod,t),l=(0,d.tx)("pro_cart.info.figma_design_editors.seat_rename",{numEditors:o}),m=n?r.createElement(I,{editorType:f,currency:t,numEditors:e.numDesignEditors}):null,n||i.hasCartStickerShock||(c=r.createElement(y,{currentBillingPeriod:e.billingPeriod,numEditors:e.numDesignEditors,noCents:!1,currency:t}))):(o=i.numPaidFigjamEditors,s=C(g.MC,e.taxes?.lines)??(0,u.PK)(o,e.billingPeriod,t),c=!n&&!i.hasCartStickerShock&&r.createElement(T,{noCents:!1,currency:t,numEditors:o}),l=(0,d.tx)("pro_cart.info.figjam_editors.seat_rename",{numEditors:o}),m=n?r.createElement(I,{editorType:f,currency:t,numEditors:e.numWhiteboardEditors}):null),a&&(c=(0,d.tx)("pro_cart.review.free_for_days",{days:e.promo?.promo_value}),m=_.formatMoney(s,{showCents:!0})),r.createElement(N,{"data-testid":`confirm-${f}-summary`,mainText:l,strikethroughPriceText:m,priceText:_.formatMoney(a||n?0:s,{showCents:!0}),subText:c,showDevModeIncludedText:"design"===f})}function C(e,t){return t?.filter(t=>e.includes(t.product)).reduce((e,t)=>e+t.sub_total,0)}function S(e){return r.createElement(r.Fragment,null,r.createElement(x,{...e,editorType:_._Y.DESIGN}),r.createElement(c.Kz,{multiple:2}),r.createElement(x,{...e,editorType:_._Y.WHITEBOARD,numPaidFigjamEditors:e.payment.numWhiteboardEditors}),r.createElement(c.Kz,{multiple:2}))}function k(){return r.createElement(c.Us,{href:"/tos",target:"_blank",trusted:!0},(0,d.tx)("pro_cart.review.tos"))}},612670:(e,t,a)=>{a.d(t,{h:()=>et});var r=a(411855),n=a(188507),i=a(367253),l=a(737947),o=a(966712);if(443==a.j)var s=a(988261);var c=a(776621),d=a(650322),m=a(304783),u=a(192437),_=a(946689),p=a(455057),g=a(135876),f=a(881388),E=a(939863),h=a(898211),y=a(738269),v=a(507877),b=a(662275),w=a(995852),T=a(758259),I=a(931828),N=a(349410),x=a(672517),C=a(843309),S=a(176824),k=a(195971),A=a(964258),R=a(488983),L=a(594901),D=a(860178),P=a(801387),F=a(99506),O=a(820113),M=a(243987),B=a(257512),U=a(428467),V=a(707465),H=a(206193),W=a(622139),j=a(637590),G=a(392340),$=a(943083),z=a(354272),Y=a(488491),K=a(403491),Q=a(707570),X=a(140841),q=a(55992),J=a(634038),Z=a(231522);function ee(e){let t;let a=(0,D.iZ)(),u=a?.id,R=(0,o.DC)(),ee=(0,n.d4)(e=>e.payment),et=(0,n.d4)(e=>e.dropdownShown),ea=(0,n.d4)(e=>e.teams),er=e.selectedView.paymentStep,en=r.useRef(null),[ei,el]=(0,r.useState)(R?.team_name??""),[eo,es]=(0,r.useState)(k.kt),ec=(0,M.PS)((0,L.FC)()),ed=!!(0,o.kc)().redirect_starter_team_loophole&&!(0,o.kc)().close_starter_team_loophole&&(null===e.selectedView.teamId||e.selectedView.teamFlowType!==j.SC.UPGRADE_EXISTING_TEAM),[em,eu]=(0,r.useState)(R?.currency||ee.currency||(0,O.LN)()),e_=e=>{eu(e),eG(w.MN({currency:e}))},ep=ed?W.tY.ANNUAL:ee.billingPeriod,{numDesignEditors:eg,numWhiteboardEditors:ef,editorStatusChanges:eE}=ee,{ignoreCurrentPlan:eh}=e.selectedView,ey=e.selectedView.teamId;(0,r.useEffect)(()=>{ed&&(l.Ay.redirect("/"),(0,c.$D)(m.e.MONETIZATION_UPGRADES,Error("Starter loophole pathway entered, redirecting back to default"),{extra:{...e.selectedView}}))},[e.selectedView,ed]);let ev=(0,n.d4)(t=>(0,V.Np)(t,{...e.selectedView,paymentStep:W.tn.CONFIRM_PAY})),eb=(0,n.d4)(t=>(0,V.Np)(t,{...e.selectedView,paymentStep:W.tn.PAYMENT_AND_ADDRESS})),ew=(0,N.Mh)(),{estimatedDesignCost:eT,estimatedWhiteboardCost:eI}=(0,S.Ql)(),eN=eT(eg,ep,em)+eI(ef,ep,em),{createPaymentElement:ex,unmountPaymentElement:eC,savePayment:eS,billingAddress:ek,updateBillingAddress:eA,shippingAddress:eR,updateShippingAddress:eL,customerLegalName:eD,setCustomerLegalName:eP,nameOnPaymentMethod:eF,setNameOnPaymentMethod:eO,vatGstId:eM,setVatGstId:eB,regionalVatGstId:eU,setRegionalVatGstId:eV,paymentMethodType:eH,error:eW}=(0,C.Op)({setupIntentParams:{redirect_url:ev,error_redirect_url:eb,subtotal_estimate:eN,currency:em},customerInfo:{teamId:ey},paymentFlowSource:C.wn.PRO_UPGRADE,currency:em,billingPeriod:ep,defaultCountry:(0,O.ub)(),initialBillingAddress:R?.billing_address,initialNameOnPaymentMethod:R?.name_on_payment_method,initialShippingAddress:R?.shipping_address,initialCustomerLegalName:R?.customer_legal_name,initialVatGstId:R?.vat_gst_id,initialRegionalVatGstId:R?.regional_vat_gst_id,teamName:R?.team_name||ei,canSeeBillingAddressExp:ew,isCheckout:!0}),ej=eW?.code===C.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,eG=(0,n.wA)(),e$=(0,B.Ud)({teamId:ey,canSeeBillingAddressExp:ew}),ez=()=>{eG(y.$T({...e.selectedView,paymentStep:W.tn.CHOOSE_PLAN,previousView:e.selectedView.previousView,ignoreCurrentPlan:eh}))};(0,k.pI)({loadingPaidEditors:e$,teamId:ey,teamName:ey?void 0:ei,setTeamName:ey?void 0:el,collaborators:ey||e.selectedView.teamFlowType!==j.SC.CREATE?void 0:eo,setCollaborators:ey||e.selectedView.teamFlowType!==j.SC.CREATE?void 0:es});let eY=(0,n.d4)(e=>e.currentUserOrgId),eK=eh?null:eY,eQ=(0,n.d4)(e=>eK?e.orgById[eK]:null),eX=(0,G.Q)({currentOrgId:eK,currentTeamId:null}),eq=eX.data?.currentUser,eJ=eq?.baseOrgUser?.workspaceUsers,eZ=eJ?.find(e=>e?.isMainWorkspace)?.workspaceId,{cannotCreateTeamReason:e0}=(0,P.l6)(eQ,eZ),e1=(0,n.d4)(e=>(0,U.isOrgUserExternallyRestrictedFromState)(e));(0,r.useEffect)(()=>{er===W.tn.PAYMENT_AND_ADDRESS&&ej&&ez()});let e2=(0,n.d4)(e=>!!e.user&&(0,d.cn)(e.user));(0,r.useEffect)(()=>{e2&&e.selectedView.isEduTeam?eG(w.Lo({billingPeriod:W.tY.STUDENT})):e.selectedView.isEduTeam&&eG(w.Lo({billingPeriod:W.tY.UNSPECIFIED}))},[eG,e.selectedView.isEduTeam,e2]),(0,r.useEffect)(()=>{e.selectedView.teamFlowType===j.SC.CREATE_AND_UPGRADE&&(e1||e0===P.z4.TEAM_CREATION_CONTROL)&&(l.Ay.redirect("/"),eG(f.s.error((0,E.t)("team_creation.missing_team_creation_controls"))))},[e.selectedView.teamFlowType,e1,e0,eG]);let e8=ee.currencyToSwitch;(0,r.useEffect)(()=>{e8&&eu(e8)},[eu,e8]);let e4=ep===W.tY.STUDENT,e3=eo.filter(e=>e&&e.trim()).map(e=>e.trim()),e5=e3.filter(e=>!(0,i.xf)(e)),e9=!!a&&e3.filter(e=>e===a.email).length>0,e6=async t=>{t.preventDefault();let a=new URL(window.location.href).searchParams,r=a.get("onCompleteRedirectFileKey"),n=a.get("onCompleteRedirectNodeId");t.currentTarget&&t.currentTarget.blur();let i=(0,q.kR)(e.selectedView.paymentStep,e.selectedView.teamFlowType,ep,ee.promo,e.selectedView.planType||j.Sc.UNDETERMINED);er===W.tn.CREATE_TEAM&&(el(ei.trim()),eG(y.$T({...e.selectedView,teamId:null,paymentStep:i,ignoreCurrentPlan:eh}))),er===W.tn.ADD_COLLABORATORS&&(e5.length?eG(f.s.error((0,E.t)("pro_cart.add_collaborators.error.email_is_invalid",{string:e5[0]}))):e9?eG(f.s.error((0,E.t)("team_view.team_permissions_modal.youre_not_able_to_send_an_invite_to_yourself"))):eG(y.$T({...e.selectedView,paymentStep:i,ignoreCurrentPlan:eh}))),er===W.tn.CHOOSE_PLAN?e4?eG(y.$T({...e.selectedView,paymentStep:i,billingPeriod:W.tY.STUDENT,ignoreCurrentPlan:eh})):(eG(w.Je({editorStatusChanges:eE})),eG(y.$T({...e.selectedView,paymentStep:i,billingPeriod:ee.billingPeriod,...r?{searchParams:{onCompleteRedirectFileKey:r,onCompleteRedirectNodeId:n}}:{},ignoreCurrentPlan:eh}))):er===W.tn.PAYMENT_AND_ADDRESS&&(eG(w.I2({submitPending:!0})),await eS(),eG(w.I2({submitPending:!1})))},e7=e.selectedView.teamFlowType===j.SC.CREATE?()=>{eG((0,A.KQ)({teamName:ei,orgAccess:F.bU.PUBLIC,inviteEmails:e3,teamFlowType:e.selectedView.teamFlowType,onSuccess:()=>{(0,k.Al)(a?.id)},ignoreCurrentPlan:eh}))}:void 0;(e.selectedView.teamFlowType===j.SC.CREATE_AND_UPGRADE||e.selectedView.teamFlowType===j.SC.UPGRADE_EXISTING_TEAM)&&(1===ec.length?t=t=>{t=t||e.selectedView.billingPeriod;let a=j.SC.UPGRADE_EXISTING_TEAM;eG(y.$T({...e.selectedView,teamFlowType:a,teamId:ec[0].id,paymentStep:(0,q.kR)(e.selectedView.paymentStep,a,t||null,ee.promo,j.Sc.TEAM,W.tn.CHOOSE_PLAN),planType:j.Sc.UNDETERMINED,billingPeriod:t,ignoreCurrentPlan:eh}))}:ec.length>1&&(t=e=>{e&&eG(w.Lo({billingPeriod:e})),eG((0,b.to)({type:h.dR,data:{plan:h.In.PRO,upsellSource:H.b.UPGRADE_EXISTING_FROM_TEAM_CREATION}}))}));let te=()=>{let t=()=>{(0,o.sj)(),(0,B.Mt)(eG),(0,j.h5)(e.selectedView.teamFlowType)&&null===ey&&(0,k.Al)(u)};if(e.selectedView.teamId&&e4)eG(w.Nj({teamId:e.selectedView.teamId}));else if(e.selectedView.teamId&&ee.promo){let a=e.selectedView.teamId,r=(0,o.kc)().ps_benchmark;eG(T.S_({teamId:a,teamName:ea[a].name,promoCode:ee.promo?.code||"",onSuccess:()=>{t(),(0,s._H)(),eG(w.Ay({promo:null})),r&&u?e.selectedView.previousView?y.$T(e.selectedView.previousView):v._l({workspace:{userId:u,orgId:null,teamId:a},view:{view:"allProjects"}}):eG(y.$T(e.selectedView.previousView||{view:"team",teamId:a}))},onError:()=>{(0,s._H)(),eG(w.Ay({promo:null})),eG(y.$T({...e.selectedView,paymentStep:W.tn.PLAN_COMPARISON,ignoreCurrentPlan:eh}))}}))}else eG(I.b({completed_pro_cart_flow:!0})),eG(w.I2({submitPending:!0})),eG((0,T.gk)({teamId:e.selectedView.teamId,selectedCurrency:em,teamName:ei,teamFlowType:e.selectedView.teamFlowType,invites:e3,hasSelectedStudentTeam:e4,onSuccess:t,promotionCodeId:null}))},tt=new URLSearchParams(l.Ay.location.search),ta=tt.get("onCompleteRedirectFileKey"),tr=tt.get("onCompleteRedirectNodeId"),tn=a&&k.lX({teamId:ey,userId:a.id})?.is3DS;return e.selectedView.teamFlowType===j.SC.CREATE_AND_UPGRADE&&(e1||e0===P.z4.TEAM_CREATION_CONTROL)?r.createElement(r.Fragment,null):r.createElement(x.fu,{name:"Upgrade Team",properties:{teamId:e.selectedView.teamId,teamFlowType:e.selectedView.teamFlowType,planType:e.selectedView.planType,step:er,currency:em,inPublishDraftExp:!!(ta&&tr)}},r.createElement("div",{className:Z.im,"data-testid":"team-upgrade-v2"},r.createElement(q.vU,{selectedView:e.selectedView}),r.createElement("div",{className:Z.Jr},r.createElement("div",{className:Z.uz,ref:en},r.createElement(_.Kz,{multiple:4}),er===W.tn.PLAN_COMPARISON&&r.createElement(Y.T,{chooseStarterPlan:e7,chooseProPlan:t=>{eG(w.Lo({billingPeriod:t}));let a=(0,j.h5)(e.selectedView.teamFlowType)?e.selectedView.teamFlowType:j.SC.CREATE_AND_UPGRADE;eG(y.$T({...e.selectedView,teamFlowType:a,paymentStep:(0,q.kR)(e.selectedView.paymentStep,a,t,ee.promo,j.Sc.TEAM),billingPeriod:t,planType:j.Sc.TEAM,openInNewTab:!1,ignoreCurrentPlan:eh}))},chooseOrgPlan:()=>{eG(w.Bq({currency:em,newTeamProps:{teamFlowType:e.selectedView.teamFlowType,newTeamName:ei,inviteEmails:e3,previousView:e.selectedView},upsellSource:H.b.UPGRADE_NEW_TEAM_V2}))},currency:em,updateCurrency:e=>e_(e),upgradeExistingTeam:t,parentRef:en}),er===W.tn.CREATE_TEAM&&r.createElement(Q.y,{type:e.selectedView.teamFlowType===j.SC.CREATE?Q.I.STARTER:Q.I.PRO,teamName:ei,setTeamName:el,onNext:e6,upgradeExistingTeam:t?()=>t?.(ep):void 0,promo:ee.promo}),er===W.tn.ADD_COLLABORATORS&&r.createElement($.b,{disableInvites:!e3.length,collaborators:eo,setCollaborators:es,willSendInvites:e6,skipInviteStep:()=>{if(es(k.kt),u){let e=(0,k.lX)({teamId:null,userId:u});e&&(0,k.dT)(u,{...e,newCollaborators:k.kt})}eG(y.$T({...e.selectedView,paymentStep:W.tn.PLAN_COMPARISON,ignoreCurrentPlan:eh}))}}),er===W.tn.CHOOSE_PLAN&&r.createElement(z.O,{selectedView:e.selectedView,isLoading:e$,currency:em,error:ej?eW?.message:null,teamName:ei}),er===W.tn.PAYMENT_AND_ADDRESS&&r.createElement(r.Fragment,null,r.createElement(X.y,{billingAddress:ek,updateBillingAddress:eA,shippingAddress:eR,updateShippingAddress:eL,legalCompanyName:eD,updateLegalCompanyName:eP,nameOnPaymentMethod:eF,updateNameOnPaymentMethod:eO,createPaymentElement:ex,unmountPaymentElement:eC,error:eW,vatGstId:eM,onVatGstIdChange:eB,regionalVatGstId:eU,onRegionalVatGstIdChange:eV,paymentMethodType:eH,isCommunityCheckout:!1,canSeeBillingAddressExp:ew,isCheckout:!0})),er===W.tn.CONFIRM_PAY&&r.createElement(r.Fragment,null,r.createElement("div",{className:Z.Fb},(0,E.tx)("pro_cart.review.lets_make_sure_everything_looks_right")),r.createElement(_.Kz,{multiple:3}),tn&&r.createElement("div",{className:Z.vK},r.createElement(p._,{color:p.S.INFORMATION,text:(0,E.t)("pro_cart.review.extra_validation")})),tn&&r.createElement(_.Kz,{multiple:2}),r.createElement(g.x,{isLoading:e$},()=>r.createElement(K.d,{selectedView:e.selectedView,teamName:ei,onClickConfirm:te,billingAddress:ek,shippingAddress:eR,canSeeBillingAddressExp:ew,currency:em}))),r.createElement(_.Kz,{multiple:9})),r.createElement(J.S,{selectedView:e.selectedView,onNext:e6,isLoading:e$,isButtonDisabled:ej,currency:em,updateCurrency:e=>e_(e),dropdownShown:et}))))}function et(e){return(0,o.kc)().cart_error_boundaries?r.createElement(ea,{...e}):r.createElement(ee,{...e})}function ea(e){return r.createElement(u.tH,{sentryTags:{area:m.e.MONETIZATION_UPGRADES},boundaryKey:"TeamUpgradeV2",fallback:u.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:R.y4},r.createElement(ee,{...e}))}},634038:(e,t,a)=>{a.d(t,{S:()=>L});var r=a(411855),n=a(188507),i=a(629019),l=a.n(i),o=a(776621),s=a(650322),c=a(304783),d=a(498480),m=a(946689),u=a(773058),_=a(493323),p=a(135876),g=a(762638),f=a(939863),E=a(662275),h=a(995852),y=a(349410),v=a(101505),b=a(988022),w=a(66957),T=a(176824),I=a(99506),N=a(820113),x=a(622139),C=a(213100),S=a(5313),k=a(41029),A=a(237107),R=a(231522);let L=(0,n.Ng)(e=>({payment:e.payment,user:e.user}))(function(e){let t,a;let i=(0,n.wA)(),l=(0,y.Ik)(),d=e.payment.numDesignEditors,E=e.payment.billingPeriod===x.tY.STUDENT,{estimatedDesignCost:b,estimatedWhiteboardCost:C,getDesignUnitCost:S,getWhiteboardUnitCost:k}=(0,T.Ql)(),L=new N.vr(e.currency);if(e.selectedView.paymentStep!==x.tn.CHOOSE_PLAN&&e.selectedView.paymentStep!==x.tn.PAYMENT_AND_ADDRESS)return null;let B=e=>{e===x.tY[x.tY.ANNUAL]?i(h.Lo({billingPeriod:x.tY.ANNUAL})):e===x.tY[x.tY.MONTHLY]&&i(h.Lo({billingPeriod:x.tY.MONTHLY})),i(h.js({numDesignEditors:d}))},U=(0,s.cn)(e.user),V=(0,f.t)("pro_cart.sidebar.next_payment_information"),H=v.c.PAYMENT_INFORMATION;(E||e.selectedView.paymentStep===x.tn.PAYMENT_AND_ADDRESS)&&(V=(0,f.t)("pro_cart.sidebar.next_review"),H=v.c.REVIEW);let W=(0,N._Z)(),j=b(d,e.payment.billingPeriod,e.currency),G=12*b(d,x.tY.MONTHLY,e.currency),$=S(e.payment.billingPeriod,e.currency),z=S(x.tY.MONTHLY,e.currency),Y=C(e.payment.numWhiteboardEditors,e.payment.billingPeriod,e.currency),K=12*C(e.payment.numWhiteboardEditors,x.tY.MONTHLY,e.currency),Q=k(e.payment.billingPeriod,e.currency),X=k(x.tY.MONTHLY,e.currency),q=l?r.createElement(F,{price:$,localizeCurrency:L}):L.formatMoney(j),J=l?r.createElement(F,{price:Q,localizeCurrency:L}):L.formatMoney(Y),Z=G+K-b(d,x.tY.ANNUAL,e.currency)-C(e.payment.numWhiteboardEditors,x.tY.ANNUAL,e.currency);e.payment.billingPeriod===x.tY.ANNUAL?(j>0&&(t=L.formatMoney(G)),Y>0&&(a=L.formatMoney(K)),l&&(t=L.formatMoney(z),a=L.formatMoney(X))):e.payment.billingPeriod===x.tY.STUDENT&&(t=l?L.formatMoney(z):r.createElement(A.X6,{editorType:I._Y.DESIGN,numEditors:e.payment.numDesignEditors,currency:e.currency}),a=l?L.formatMoney(X):r.createElement(A.X6,{editorType:I._Y.WHITEBOARD,numEditors:e.payment.numWhiteboardEditors,currency:e.currency}));let ee=j+Y,et=L.getPrices(),ea=(0,A.U1)(et.annualFigjam,et.monthlyFigjam),er=(0,A.U1)(et.annualFigma,et.monthlyFigma);return ee<0&&(0,o.$D)(c.e.BILLING,Error("[Billing] Estimated total is a negative amount."),{extra:{numDesignEditors:d,numWhiteboardEditors:e.payment.numWhiteboardEditors,upgrades:JSON.stringify(e.payment.editorStatusChanges),userId:e.user.id,subtotal:ee,currency:e.currency}}),r.createElement("div",{className:R.Ie},l?r.createElement(r.Fragment,null,r.createElement(D,{teamId:e.selectedView.teamId}),W&&r.createElement(r.Fragment,null,r.createElement(m.Kz,{multiple:3}),r.createElement(P,{currency:e.currency,supportedCurrencies:(0,N.B9)(),dropdownShown:e.dropdownShown,changeCurrency:e.updateCurrency,hasCartStickerShock:l})),r.createElement(m.Kz,{multiple:2}),r.createElement("div",{className:R.pV}),r.createElement(m.Kz,{multiple:2})):r.createElement(r.Fragment,null,r.createElement("div",{className:R.LC},(0,f.tx)("pro_cart.sidebar.professional_plan")),W&&r.createElement(r.Fragment,null,r.createElement(m.Kz,{multiple:3}),r.createElement(P,{currency:e.currency,supportedCurrencies:(0,N.B9)(),dropdownShown:e.dropdownShown,changeCurrency:e.updateCurrency}),r.createElement(m.Kz,{multiple:2}),r.createElement("div",{className:R.pV}),r.createElement(m.Kz,{multiple:2}))),U&&e.selectedView.paymentStep===x.tn.CHOOSE_PLAN&&r.createElement(r.Fragment,null,r.createElement("div",{className:R.ZD},(0,f.tx)("pro_cart.sidebar.is_this_an_education_team")),r.createElement(m.Kz,{multiple:1.5}),r.createElement(u.z,{className:R.aq,onChange:e=>{"true"===e?i(h.Lo({billingPeriod:x.tY.STUDENT})):E&&(i(h.Lo({billingPeriod:x.tY.ANNUAL})),i(h.js({numDesignEditors:d})))},value:E.toString()},r.createElement(u.Z,{value:"false",className:R.Ac},(0,f.tx)("pro_cart.sidebar.no")),r.createElement(u.Z,{value:"true",className:R.Ac},(0,f.tx)("pro_cart.sidebar.yes"))),r.createElement(m.Kz,{multiple:1.5}),r.createElement("div",{className:R.pV}),r.createElement(m.Kz,{multiple:2})),!l&&r.createElement(r.Fragment,null,r.createElement(M,{billingPeriod:e.payment.billingPeriod,onBillingCycleChange:B,currency:e.currency}),r.createElement(m.Kz,{multiple:2})),r.createElement(p.x,{isLoading:e.isLoading,className:R.F},()=>r.createElement(r.Fragment,null,r.createElement(A.Wy,{"data-testid":"sidebar-design-summary",mainText:l?r.createElement("span",{className:g.cx.fontMedium.$},(0,f.tx)("pro_cart.sidebar.exp_sticker_shock.design")):(0,f.tx)("pro_cart.info.figma_design_editors.seat_rename",{numEditors:d}),strikethroughPriceText:t,strikethroughPriceClassName:l?g.cx.font18.fpl__textHeadingLargeLetterSpacing.$:void 0,priceText:q,subText:l?void 0:r.createElement(A.d6,{currentBillingPeriod:e.payment.billingPeriod,numEditors:d,currency:e.currency,noCents:!0,shouldStrikethroughMonthlyUnitCostIfAnnual:!0}),discountPercentage:l?void 0:j>0&&e.payment.billingPeriod===x.tY.ANNUAL?er:void 0,showDevModeIncludedText:!0}),r.createElement(m.Kz,{multiple:2}),r.createElement(A.Wy,{"data-testid":"sidebar-whiteboard-summary",mainText:l?r.createElement("div",{className:g.cx.fontMedium.$},(0,f.tx)("pro_cart.sidebar.exp_sticker_shock.figjam")):(0,f.tx)("pro_cart.info.figjam_editors.seat_rename",{numEditors:e.payment.numWhiteboardEditors}),strikethroughPriceText:a,strikethroughPriceClassName:l?g.cx.font18.fpl__textHeadingLargeLetterSpacing.$:void 0,priceText:J,subText:l?void 0:r.createElement(A.ME,{shouldStrikethroughMonthlyUnitCostIfAnnual:!0,currency:e.currency}),discountPercentage:l?void 0:Y>0&&e.payment.billingPeriod===x.tY.ANNUAL?ea:void 0}),r.createElement(m.Kz,{multiple:2}),l&&!E&&r.createElement(r.Fragment,null,r.createElement(O,{billingPeriod:e.payment.billingPeriod,onBillingCycleChange:B,localizeCurrency:L,savingsWithAnnualPlan:Z}),r.createElement(m.Kz,{multiple:2})))),r.createElement("div",{className:R.pV}),r.createElement(m.Kz,{multiple:3}),l?r.createElement(w.i,{numberOfDesignEditors:d,designSubtotal:L.formatMoney(j),numberOfFigjamEditors:e.payment.numWhiteboardEditors,figjamSubtotal:L.formatMoney(Y),formattedSubtotal:L.formatMoney(ee,{showFullFormat:(0,N._Z)()}),billingPeriod:e.payment.billingPeriod}):r.createElement(w.m,{formattedSubtotal:L.formatMoney(ee,{showFullFormat:(0,N._Z)()})}),r.createElement(m.Kz,{multiple:3}),E&&r.createElement(r.Fragment,null,r.createElement("div",{className:R.iY},(0,f.tx)("edu.education_teams_get_all_the_professional_plan_features_for_free")),r.createElement(m.Kz,{multiple:2})),r.createElement(m.vd,{className:R.fK,disabled:e.isLoading||e.isButtonDisabled||e.payment.submitPending,onClick:e.onNext,trackingProperties:{trackingDescriptor:H},dataTestId:"upgrade-next-button"},e.payment.submitPending?r.createElement(_.kt,{className:R.S}):V))});function D({teamId:e}){let t=(0,n.wA)();return r.createElement(r.Fragment,null,r.createElement("div",{className:g.cx.font20.fontMedium.$},(0,f.tx)("pro_cart.sidebar.professional_plan")),r.createElement(m.Kz,{multiple:1}),r.createElement("p",{className:g.cx.font13.fontNormal.lh24.maxW250.$},(0,f.tx)("pro_cart.sidebar.exp_sticker_shock.unlimited_files_and_projects",{learnMoreLink:r.createElement(m.Us,{className:g.cx.colorTextBrand.cursorPointer.$,onClick:()=>{t(E.to({type:S.q,data:{teamId:e??void 0,trackingProperties:{productArea:"upgrade_sidebar"},hasSecondaryBtn:!1}}))},trusted:!0},(0,f.tx)("pro_cart.sidebar.exp_sticker_shock.so_much_more"))})))}function P({currency:e,dropdownShown:t,supportedCurrencies:a,changeCurrency:n,hasCartStickerShock:i}){let l=g.cx.flex.justifyBetween.itemsCenter.font13.$,o=i?g.cx.fontMedium.$:g.cx.fontSemiBold.$;return r.createElement("div",{className:i?l:R.h7},r.createElement("span",{className:o},(0,f.tx)("pro_cart.sidebar.currency")),r.createElement(k.D,{currency:e,dropdownShown:t,supportedCurrencies:a,changeCurrency:n,shortFormDisplay:!0}))}function F({price:e,localizeCurrency:t}){let a=g.cx.font18.fpl__textHeadingLargeLetterSpacing.fontMedium.$;return r.createElement("span",null,(0,f.tx)("pro_cart.sidebar.exp_sticker_shock.cost_per_editor_per_month",{cost:r.createElement("span",{className:a},t.formatMoney(e))}))}function O({billingPeriod:e,onBillingCycleChange:t,localizeCurrency:a,savingsWithAnnualPlan:n}){let i=g.cx.flex.alignCenter.$,l=g.cx.colorTextSuccess.font13.$,o=g.cx.colorText.font13.pl8.$;return r.createElement("div",{className:i},r.createElement(C.l,{dataTestId:"billing-period-toggle",on:e===x.tY.ANNUAL,onChange:()=>{t(e===x.tY.ANNUAL?x.tY[x.tY.MONTHLY]:x.tY[x.tY.ANNUAL]),(0,b.Cu)({name:"Upgrade sidebar billing period toggle"})}}),r.createElement("span",{className:o},(0,f.tx)("pro_cart.sidebar.exp_sticker_shock.by_paying_annually",{saveAmountText:r.createElement("span",{className:l},(0,f.tx)("pro_cart.sidebar.exp_sticker_shock.save_amount_per_year",{saveAmount:a.formatMoney(n)}))})))}function M({billingPeriod:e,onBillingCycleChange:t,currency:a}){if(e===x.tY.STUDENT)return null;{let n=new N.vr(a).getPrices(),i=(0,A.U1)(n.annualFigjam,n.monthlyFigjam);return r.createElement(r.Fragment,null,r.createElement("div",{className:R.ZD},(0,f.tx)("pro_cart.sidebar.billing_cycle")),r.createElement(m.Kz,{multiple:2}),r.createElement(u.z,{className:R.aq,onChange:t,value:x.tY[e]},r.createElement(u.Z,{value:x.tY[x.tY.ANNUAL],className:R.Ac},r.createElement("div",{className:l()(R.Wu,R.Yw)},r.createElement("span",null,(0,f.tx)("pro_cart.sidebar.annual")),r.createElement(d.Ex,{className:R.qS,color:d.zE.SUCCESS,size:d.vj.LARGE,subtle:!0,text:(0,f.tx)("pro_cart.sidebar.save_up_to_discount",{discountAmount:i})}))),r.createElement(u.Z,{value:x.tY[x.tY.MONTHLY],className:R.Ac},r.createElement("div",{className:g.cx.flex.justifyEnd.$},(0,f.tx)("pro_cart.sidebar.monthly")))),r.createElement(m.Kz,{multiple:2}),r.createElement("div",{className:R.pV}))}}},426887:(e,t,a)=>{let r;a.d(t,{y:()=>l});var n=a(193647),i=a(237870);function l(){return r??=(0,i.Ju)(n.A.createLazyComponent(()=>Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(76),a.e(1011),a.e(9012)]).then(a.bind(a,408422)).then(e=>e.FolderRenameModal),(0,i.Ij)("FolderRenameModal")))}},190093:(e,t,a)=>{a.r(t),a.d(t,{ConfirmDowngradeEditorsModal:()=>s});var r=a(411855),n=a(96328),i=a(939863),l=a(672517),o=a(585878);function s(e){let{team:t,editors:a}=e,{id:s}=t,c=a.length,d=a.filter(e=>e.id).map(e=>e.id).join(),m=(0,i.t)("team_view.downgrade_editor_modal.downgrade_user_team_permissions",{username:(0,n.EJ)(e.editors[0].name||e.editors[0].email,20)}),u=(0,i.t)("team_view.downgrade_editor_modal.downgrade_multiple_users_team_permissions",{numSelectedUsers:c});return r.createElement(l.fu,{name:"Team Admin Downgrade Editors Modal",properties:{editorCount:c,editorIds:d,teamId:s}},r.createElement(o.Eo,{title:c>1?u:m,confirmText:(0,i.t)("team_view.downgrade_editor_modal.downgrade"),onConfirm:e.onConfirm},r.createElement("p",null,c>1&&(0,i.t)("team_view.downgrade_editor_modal.are_you_sure_you_want_to_downgrade",{numSelectedUsers:c}),(0,i.tx)("team_view.downgrade_editor_modal.downgrading_their_team_permission_will_change_all_permissions_to_can_view"))))}},989024:(e,t,a)=>{a.r(t),a.d(t,{ConfirmTeamUserPaidStatusUpdateModal:()=>c});var r=a(411855),n=a(946689),i=a(939863),l=a(672517),o=a(36816),s=a(585878);function c(e){let{team:t,members:a,paidStatus:c}=e,{id:d}=t;if(![o.Zf.FULL,o.Zf.RESTRICTED].includes(c))return r.createElement(r.Fragment,null);let m=a.length,u=a.filter(e=>e.id).map(e=>e.id).join(),_=c===o.Zf.RESTRICTED,p=e.paidStatusType===o.j4.WHITEBOARD,g=p?a.every(e=>!e.whiteboard_editor_upgrade):a.every(e=>!e.design_editor_upgrade),f=c===o.Zf.RESTRICTED&&g,E=a[0].name||a[0].email;return r.createElement(l.fu,{name:"Team Admin Restrict TeamUser Modal",properties:{memberCount:m,memberIds:u,teamId:d}},r.createElement(s.Eo,{title:_?f?p?(0,i.tx)("team_view.downgrade_figjam_access_from_viewer_to_viewer_restricted"):(0,i.tx)("team_view.downgrade_design_access_from_viewer_to_viewer_restricted"):p?(0,i.tx)("team_view.remove_figjam_edit_status.seat_rename"):(0,i.tx)("team_view.remove_design_edit_status.seat_rename"):p?(0,i.tx)("team_view.grant_figjam_edit_status.seat_rename"):(0,i.tx)("team_view.grant_design_edit_status.seat_rename"),confirmText:_?f?(0,i.t)("team_view.change"):(0,i.t)("team_view.remove.seat_rename"):(0,i.t)("team_view.grant.seat_rename"),onConfirm:e.onConfirm},c===o.Zf.RESTRICTED&&(f?p?(0,i.tx)("team_view.downgrade_figjam_from_viewer_to_viewer_restricted_description.seat_rename",{memberNameOrEmail:E,numMembers:m}):(0,i.tx)("team_view.downgrade_design_from_viewer_to_viewer_restricted_description.seat_rename",{memberNameOrEmail:E,numMembers:m}):p?(0,i.tx)("team_view.downgrade_figjam_description.seat_rename",{memberNameOrEmail:E,numMembers:m}):(0,i.tx)("team_view.downgrade_design_description.seat_rename",{memberNameOrEmail:E,numMembers:m})),c===o.Zf.FULL&&r.createElement(r.Fragment,null,p?(0,i.tx)("team_view.change_to_editor_figjam_description.seat_rename",{numMembers:m,memberNameOrEmail:E}):(0,i.tx)("team_view.change_to_editor_design_description.seat_rename",{numMembers:m,memberNameOrEmail:E}),r.createElement("p",{className:"confirm_team_user_paid_status_update_modal--spacing--D5LgW"},r.createElement(n.N_,{target:"_blank",className:"confirm_team_user_paid_status_update_modal--link--cb35L",href:"https://help.figma.com/hc/articles/360039960434#Account_Types",trusted:!0},(0,i.tx)("team_view.learn_more.seat_rename"))))))}},309267:(e,t,a)=>{a.r(t),a.d(t,{MemberEditAccessModal:()=>N});var r=a(411855),n=a(188507),i=a(459401),l=a(391388),o=a(886653),s=a(827586),c=a(939863),d=a(662275),m=a(672517),u=a(99506),_=a(147206),p=a(668860),g=a(36816),f=a(585878);let E="edit_access_modal--column--MYvAz",h="edit_access_modal--resource--qhm-x",y="edit_access_modal--resourceTitle--79DdK edit_access_modal--resource--qhm-x",v="edit_access_modal--greyResource--pdVfB edit_access_modal--resource--qhm-x",b=(e,t)=>{if("file"===e.resource_type){let a=t[e.resource_id_or_key];if(a)return{name:a.name,id_or_key:a.key}}else{let a=t[e.resource_id_or_key];if(a)return{name:a.name,id_or_key:a.id}}},w=(0,o.xx)((e,t)=>{let a={privateResourceCount:0,editableResources:[]};return e&&0!==e.length&&(e.forEach(e=>{let r=b(e,t);r?a.editableResources.push(r):a.privateResourceCount++}),(0,i.sortAlphabeticallyByFn)(a.editableResources,e=>e.name)),a}),T=e=>{let t=e.team_user,a=e.edit_roles,r=a?.whiteboard_files||[],n=a?.design_files||[],i=(0,_.qR)(t,u._Y.DESIGN);return{whiteboardRoles:(0,_.qR)(t,u._Y.WHITEBOARD)?[]:r,designRoles:i?[]:n}},I=(e,t)=>{let{whiteboardRoles:a,designRoles:r}=T(e);return w(a.concat(r),t)};function N(e){let t=(0,n.wA)(),a=function(e,t){let a=(0,n.d4)(a=>a.teamMembersByTeamId[e][t]);return l.Qw.loaded(a)}(e.teamId,e.memberEmail),i=(0,n.d4)(e=>e.folders),o=r.useMemo(()=>a.transform(e=>w(e?.edit_roles?.folders,i)),[i,a]),u=(0,n.d4)(e=>e.folders),_=r.useMemo(()=>a.transform(e=>I(e,u)),[u,a]),h=(0,n.d4)(t=>t.teams[e.teamId]),v=l.Qw.all([a,o,_]);if("loaded"!==v.status)return null;let[b,T,N]=v.data,x=!!b.team_role&&b.team_role?.level>=p.e6.EDITOR,S=T.editableResources.length+T.privateResourceCount,k=N.editableResources.length+N.privateResourceCount;return r.createElement(m.fu,{name:"Member Edit Access Modal",properties:{teamId:h.id,userId:b.id,folderCount:S,fileCount:k}},r.createElement(f.XV,{title:(0,c.t)("team_view.member_edit_access_modal.title",{memberName:b.name??""}),maxWidth:432,minWidth:432,containerClassName:"edit_access_modal--modalStyle--20dSp",onClose:()=>{t(d.Ce())}},r.createElement("div",{className:"edit_access_modal--headerContainer--ZoKpu edit_access_modal--resourceContainer--vZA5E"},r.createElement("div",{className:E},r.createElement("div",{className:y},(0,c.tx)("team_view.member_edit_access_modal.projects_title"))),r.createElement("div",{className:E},r.createElement("div",{className:y},(0,c.tx)("team_view.member_edit_access_modal.files_title")))),r.createElement(s.P,{className:"edit_access_modal--scrollContainer--WzCWr",hideScrollbar:!0},r.createElement("div",{className:"edit_access_modal--resourceContainer--vZA5E"},r.createElement("div",{className:E},r.createElement(C,{hasTeamEditPermissions:x,isWhiteboardEditor:b.team_user?.whiteboard_paid_status===g.Zf.FULL,isDesignEditor:b.team_user?.design_paid_status===g.Zf.FULL,resources:T,resourceType:"project"})),r.createElement("div",{className:E},r.createElement(C,{hasTeamEditPermissions:x,isWhiteboardEditor:b.team_user?.whiteboard_paid_status===g.Zf.FULL,isDesignEditor:b.team_user?.design_paid_status===g.Zf.FULL,resources:N,resourceType:"file"}))))))}let x=e=>"file"===e?(0,c.tx)("team_view.member_edit_access_modal.none_files"):(0,c.tx)("team_view.member_edit_access_modal.none_projects");function C(e){let t;let{hasTeamEditPermissions:a,isDesignEditor:n,isWhiteboardEditor:i,resourceType:l}=e;if(a)return"project"===l?r.createElement("div",{className:v},(0,c.tx)("team_view.member_edit_access_modal.all_projects")):n&&i?r.createElement("div",{className:v},(0,c.tx)("team_view.member_edit_access_modal.all_files")):n&&!i?r.createElement("div",{className:v},(0,c.tx)("team_view.member_edit_access_modal.all_design_files")):!n&&i?r.createElement("div",{className:v},(0,c.tx)("team_view.member_edit_access_modal.all_figjam_files")):r.createElement("div",{className:v},x(l));let o=e.resources;if(0===o.privateResourceCount&&0===o.editableResources.length)return r.createElement("div",{className:v},x(l));if(o.privateResourceCount>0){let e=r.createElement("span",null);0===o.editableResources.length&&"project"===l?e=(0,c.tx)("team_view.member_edit_access_modal.invite_only_projects",{numProjects:o.privateResourceCount}):0===o.editableResources.length&&"file"===l?e=(0,c.tx)("team_view.member_edit_access_modal.invite_only_files",{numFiles:o.privateResourceCount}):o.editableResources.length>0&&"project"===l?e=(0,c.tx)("team_view.member_edit_access_modal.invite_only_projects_list_end",{numProjects:o.privateResourceCount}):o.editableResources.length>0&&"file"===l&&(e=(0,c.tx)("team_view.member_edit_access_modal.invite_only_files_list_end",{numFiles:o.privateResourceCount})),t=r.createElement("div",{className:h},e)}return r.createElement(r.Fragment,null,o.editableResources.map(e=>r.createElement("div",{key:e.id_or_key,className:h},e.name)),t)}},243058:(e,t,a)=>{a.d(t,{JC:()=>m,Oe:()=>c,VY:()=>l,dZ:()=>d,vW:()=>o,wu:()=>i,y$:()=>s});var r=a(503457),n=a(193647);let i=n.A.createLazyComponent(()=>Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(76),a.e(1011),a.e(9012)]).then(a.bind(a,978758)).then(e=>e.BillingGroupDashboardSettingsPageView),{loading:()=>null,error:r.H4.NONE,componentName:"BillingGroupDashboardSettingsPageView"}),l=n.A.createLazyComponent(()=>Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(76),a.e(1011),a.e(9012)]).then(a.bind(a,92114)).then(e=>e.LicenseGroupAdminSettingsPageView),{loading:()=>null,error:r.H4.NONE,componentName:"LicenseGroupAdminSettingsPageView"}),o=n.A.createLazyComponent(()=>Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(76),a.e(1011),a.e(9012)]).then(a.bind(a,761644)).then(e=>e.OrgAdminSettingsPageView),{loading:()=>null,error:r.H4.NONE,componentName:"OrgAdminSettingsPageView"}),s=n.A.createLazyComponent(()=>Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(76),a.e(1011),a.e(9012)]).then(a.bind(a,822796)).then(e=>e.WorkspaceAdminSettingsPageView),{loading:()=>null,error:r.H4.NONE,componentName:"WorkspaceAdminSettingsPageView"}),c=n.A.createLazyComponent(()=>Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(76),a.e(1011),a.e(9012)]).then(a.bind(a,722299)).then(e=>e.OrgDomainManagementPageView),{loading:()=>null,error:r.H4.NONE,componentName:"OrgDomainManagementPageView"}),d=n.A.createLazyComponent(()=>Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(76),a.e(1011),a.e(9012)]).then(a.bind(a,132257)).then(e=>e.AbandonedDraftFilesPageView),{loading:()=>null,error:r.H4.NONE,componentName:"AbandonedDraftFilesPageView"}),m=n.A.createLazyComponent(()=>Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(76),a.e(1011),a.e(9012)]).then(a.bind(a,835828)).then(e=>e.TeamAdminConsoleView),{loading:()=>null,error:r.H4.NONE,componentName:"TeamAdminConsoleView"})},486109:(e,t,a)=>{a.r(t),a.d(t,{FileMoveDropdown:()=>tr,FileMoveHiddenDiv:()=>tn,FileMoveModal:()=>e9,FileMoveModalComponent:()=>e3,FileMoveSearch:()=>e6,TeamSection:()=>e7,TeamsDisplay:()=>tt,getCurrentFolderId:()=>e4,getTargetAttribute:()=>e2,isSubscribedLG:()=>e8});var r=a(411855),n=a(109388),i=a(188507),l=a(889012),o=a.n(l),s=a(776250),c=a(935283),d=a(91408),m=a(966712),u=a(498750),_=a(915440),p=a(711525),g=a(752553),f=a(742808),E=a(268537),h=a(946689),y=a(413695),v=a(659838),b=a(493323),w=a(827586),T=a(574176),I=a(762638),N=a(939863),x=a(365879),C=a(738269),S=a(694764),k=a(198123),A=a(662275),R=a(672517),L=a(688083),D=a(99506),P=a(623746),F=a(66037),O=a(668860),M=a(875847),B=a(660950),U=a(279453),V=a(707465),H=a(984968),W=a(454351),j=a(451e3),G=a(945020),$=a(489291),z=a(567088),Y=a(498606),K=a(143678),Q=a(547807);let X=new class{constructor(){this.TeamRestrictionsListsSchemaValidator=(0,Q.vh)()}getTeamRestrictionsLists(e){return this.TeamRestrictionsListsSchemaValidator.validate(async({xr:t})=>await t.get("/api/team_restrictions_lists",{team_ids:e.teamIds}))}};var q=a(233890),J=a(585878),Z=a(776621),ee=a(27087),et=a(67833);function ea(e){return r.createElement("div",{className:"page_move--fileCreateNameContainer--JBcti"},r.createElement("div",{className:"page_move--fileCreateNameSvgContainer--nm5eH"},r.createElement(et.oS,{type:et.y1.DESIGN})),r.createElement(h.ks,{value:e.newFileName,onChange:e.onChange,maxLength:255,autoFocus:!0,placeholder:(0,N.t)("page_move.add_new_file_name"),className:"page_move--fileCreateNameInput--0yBR8"}))}var er=a(730935),en=a(249963),ei=a(511243),el=a(138020),eo=a(297666),es=a(130097),ec=a(980820),ed=a(243987),em=a(147206),eu=a(463592),e_=a(472503),ep=a(173454);let eg="32px",ef=(0,d.hG)(eg),eE=e=>e?.id||S.iK,eh=new eu.KH({keys:["folder.path","team.name"],threshold:.3,tokenize:!0}),ey=(e,t,a,r,n,i)=>{if(e.orgId!==n&&t?.orgId!==n)return!1;if(!(0,m.kc)().ps_benchmark){if((0,M.VA)(e))return e.id===i;if((0,M.B_)(e))return!1}return!(!e.canEdit||t&&(0,ed.S$)(e,t,a)&&!(0,M.VA)(e))&&(!r||!!(0,ed.XX)(t))},ev=(e,t,a)=>!(!(0,m.kc)().ps_benchmark&&(0,ed.dX)(e,t))&&(!a||!!(0,ed.XX)(e)),eb=(e,t=!1)=>{let a=[],r=(0,M.gj)(e.user&&e.user.id,e.folders,e.roles.byFolderId,e.user&&e.orgId?e.orgUsers[e.orgId][e.user.id]:null);Object.keys(e.folders).forEach(n=>{let i=e.folders[n],l=i.teamId?e.teams[i.teamId]:null;ey(i,l,e.user,t,e.orgId,r?.id)&&((0,M.VA)(i)&&(i={...i,path:(0,ep.Tb)()}),a.push(i))}),eh.set(a.map(t=>{let a=t.teamId&&e.teams[t.teamId]&&{name:e.teams[t.teamId].name},r={path:t.path,teamId:t.teamId,id:t.id,subscription:!!t.subscription};return a?{folder:r,team:a}:{folder:r}}))},ew=({folders:e,roles:t,user:a,orgUsers:r,teams:n,orgId:i,implicitTeamRolesTeamIds:l},o,s,c)=>{let d=Object.create(null),u=0,_=0,p=(0,M.gj)(a&&a.id,e,t.byFolderId,a&&i?r[i][a.id]:null);for(let e in d[S.HK]=[],d[S.iK]=[],t.byTeamId)ev(n[e],a,o)&&(_++,d[e]=[]);l&&l.forEach(e=>{ev(n[e],a,o)&&(_++,d[e]=[])}),Object.keys(e).forEach(t=>{let r={...e[t]},l=ey(r,r.teamId?n[r.teamId]:null,a,o,i,p?.id);if((0,m.kc)().file_move_show_all_resources){if(l&&(!s||r.subscription||(0,M.VA)(r))){let e=r.teamId?n[r.teamId]:null;d[p&&r.id===p.id?S.HK:eE(e)].push(r),u++}}else if(l&&(r.subscription||(0,M.VA)(r))){let e=r.teamId?n[r.teamId]:null;d[p&&r.id===p.id?S.HK:eE(e)].push(r),u++}});let g=u+_;return c(S.CU({indexCount:g})),c(S.xH()),d},eT=(e,t,a,r,n)=>{let i=Object.create(null),l=Object.create(null),o=[],s=0,c=0;if(n){let t=e.indexOf(n);t>-1&&(e.splice(t,1),e.splice(1,0,n))}return e.forEach(e=>{if(l[e]=s,c+=8,e!==S.iK&&e!==S.HK){let t={type:W.b.NEW_FOLDER_TEAM,id:e,positionTop:c};o.push(t),c+=ef,s+=1}let a=t[e];s+=a.length,a.sort((e,t)=>""===e.path?-1:""===t.path?1:e.path.toLowerCase()<t.path.toLowerCase()?-1:1);let d=Array.from(a);r&&n&&e===n&&d.forEach((e,t)=>{e.id===r&&(a.splice(t,1),a.unshift(e))}),a.forEach(e=>{let t={type:W.b.FOLDER_ROW,id:e.id,positionTop:c};c+=ef,o.push(t)}),i[e]=a,c+=9}),[i,l,o]},eI=(e,t,a)=>{let r=Object.create(null),n=Object.create(null),i=0,l=0,o=t.orgId&&t.user?t.orgUsers[t.orgId][t.user.id]:null,s=(0,M.gj)(t.user?t.user.id:null,t.folders,t.roles.byFolderId,o);for(let a of e){let e=a.item.folder,o=s&&e.id===s.id?0:a.score,c=e.teamId?t.teams[e.teamId]:null,d=s&&e.id===s.id?S.HK:eE(c);!(d in r)&&(r[d]=[],d!==S.iK&&d!==S.HK&&l++),r[d].push(e),null==n[d]?n[d]=o:n[d]=Math.min(n[d],o),i++}let c=i+l;return a(S.CU({indexCount:c})),[n,r]},eN=e=>(t,a)=>{if(t===S.iK)return 1;let r=e[t],n=e[a];return r?n&&r.name.toLowerCase()<n.name.toLowerCase()?-1:1:-1},ex=e=>(t,a)=>e[t]-e[a],eC=async(e,t,a,r,n=!1,i=!1,l,o,s,d)=>{var u,_;let p;let g=e.getState(),f=null,E=null;t.type===W.A.FILE?(f=t.file.parent_org_id||null,E=t.file.team_id):t.type===W.A.REPO?(f=t.repo.parent_org_id||null,E=t.repo.team_id):t.type===W.A.FILE_IMPORT&&(f=t.orgId);let h=[];if(a){let e=eI(await eh.search(a),r,l);_=e[0],(h=Object.keys(u=e[1])).length&&h.sort(ex(_))}else u=ew(r,n,!!d,e.dispatch),r.user?(h.push(S.HK),h=h.concat((0,H.n$)(Object.values(r.teams),r.fileBrowserPreferences?.orderedTeamIds||[])),u[S.iK].length>0&&h.push(S.iK)):(h=Object.keys(u)).sort(eN(r.teams));switch(t.type){case W.A.FILE:p=t.file.editor_type;break;case W.A.REPO:p=D._Y.DESIGN;break;case W.A.FILE_IMPORT:p=t.files.every(e=>".jam"===(0,e_.dv)(e.name).toLowerCase())?D._Y.WHITEBOARD:D._Y.DESIGN;break;default:(0,c.xb)(t)}let y=new Set,v=Object.values(u).flatMap(e=>e.map(e=>({id:e.id}))),b=p===D._Y.WHITEBOARD?U.JkW:U.RmP;(await (0,es.S8)(b,v)).forEach(e=>{let t=e.result;"loaded"===t.status&&el.oA(t.data?.project)?.hasPermission&&y.add(e.args.id)});let w=h.filter(e=>{if(e===S.iK)return null===u||u[e].length>0;let t=r.teams;if(e!==S.HK){let a=t[e]?.orgId||null;if(f||a){if(a!==f)return!1}else if(E&&e===S.iK)return!1}return!(t[e]?.deletedAt||!(0,m.kc)().ps_benchmark&&(0,em.XG)(t[e]?.currentTeamUser,p))&&!!u[e]?.some(e=>y.has(e.id))}),[T,I,N]=eT(w,u,i,o,s);e.dispatch(S.OT({rows:N})),e.dispatch(S.t3({indexOffsets:I})),e.dispatch(S.Pb({foldersByTeamId:T})),e.dispatch(S.Mi({teamIds:w})),a||e.dispatch(S.w3({userTeamCount:w.length})),g.fileMove.isSearchResult!==i&&e.dispatch(S.EN({isSearchResult:i}));let x=S.HK in I&&N[0].type===W.b.FOLDER_ROW;a&&x?e.dispatch(S.Dp({indexAt:0})):a&&!x&&e.dispatch(S.Dp({indexAt:1}))},eS=(e,t,a,r=!1,n,i,l)=>{eC(e,t,"",a,r,!1,e.dispatch,i,l,n)},ek=(0,eo.s)((e,t,a,r,n=!1)=>{eC(e,t,a,r,n,!!a,e.dispatch)},200),eA=(0,ec.nF)((e,t)=>{eb(t.userResources,t.modalData.isPublishing),eS(e,t.modalData,t.userResources,t.modalData.isPublishing,!1,t.currentFolderId,t.currentFolderTeamId)}),eR=(0,ec.nF)((e,t)=>{ek(e,t.modalData,t.query,t.userResources),e.dispatch(S.hq(t))});var eL=a(517333),eD=a(218881),eP=a(881388),eF=a(507877),eO=a(349410),eM=a(964258),eB=a(558867),eU=a(858212);let eV="file_move--main--RCzls",eH="file_move--iconContainer--SWek6",eW="file_move--folderRowWrapper--Qw-C4",ej="file_move--folderRow--DapA5",eG="file_move--horizontalDivider--wRv3N";var e$=a(444173);function ez(e){let t=(0,eU.S)(),a=(0,i.d4)(e=>e.user),[n,l]=(0,r.useState)(""),o=e.dispatch,[c,d]=(0,r.useState)(!0),m=(0,eD.I7)("starter_team_loophole_experiment_m0"),u=(0,eD.I7)("starter_team_loophole_experiment_m1");return r.createElement("form",{onSubmit:t=>{t.preventDefault(),(0,s.sx)("Create Team Inline",{trackingContext:e.trackingContextName}),n?(o((0,eM.KQ)({teamName:n,orgAccess:D.bU.PUBLIC,dontRedirect:!0})),d(!0),l("")):o(eP.s.error((0,N.t)("flash.team_name_cannot_be_empty")))}},r.createElement("div",{className:"file_move--teamCreateRow--o7dzW file_move--folderRow--DapA5"},c?r.createElement("button",{type:"button",className:"file_move--rowButton--6ASbR",onClick:()=>{null!=a&&!e.orgId&&(0,eO.e5)({userId:a.id,teams:Object.values(e.teams),rolesByTeamId:e.rolesByTeamId,getM0Config:m.getConfig,getM1Config:u.getConfig})?(o(A.Ce()),o(eF.Dw({openInNewTab:!eL.eD}))):(d(!1),o(S.xH()))}},r.createElement(T.B,{className:"file_move--newProjectIconFileMove--Pp8qn sidebar--icon--wMzUY",svg:e$.A}),r.createElement("span",{className:t?"file_move--newFolderNameCustomSections--4BQqs sidebar--sectionNameCustomSections--9e7LZ sidebar--sectionTextCustomSections---1KFn sidebar--sectionContentCustomSections--wI9mZ ellipsis--ellipsis--Tjyfa":"file_move--newFolderName--HNEBp sidebar--sectionName--4N7hT sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa"},(0,N.tx)("file_browser.inline_team_creation.button_text"))):r.createElement(r.Fragment,null,r.createElement("div",{className:eH},r.createElement(eB.pw,{size:16,shape:"SQUARE",color:"#E5E5E5"})),r.createElement("div",{className:"file_move--newTeamTitleText--VUp4S file_move--teamTitleText--NhNEM ellipsis--ellipsis--Tjyfa"},r.createElement(h.ks,{value:n||"",onChange:e=>{l(e.target.value)},onBlur:()=>{d(!0)},className:"file_move--newTeamInput--rHUdq",maxLength:e.teamNameMaxWidth,placeholder:(0,N.t)("file_browser.inline_team_creation.placeholder"),autoFocus:!0})))))}var eY=a(450147),eK=a(702595),eQ=a(853705),eX=a(130715),eq=a(720955),eJ=a(797804),eZ=a(258485);let e0=(0,d.hG)(eg),e1="FileMoveModalContent";function e2(e){return"folder"===e.view||(0,V.K)(e)?"_self":"_blank"}function e8(e){return!!e.subscription||(0,M.VA)(e)}function e4(e){switch(e.type){case W.A.FILE:let t=e.file;return t?.folder_id||null;case W.A.REPO:let a=e.repo;return a?.folder_id||null;case W.A.FILE_IMPORT:return null;default:(0,c.xb)(e)}}function e3(e){let t=null;e.type===W.A.FILE?t=e.file.parent_org_id||null:e.type===W.A.REPO?t=e.repo.parent_org_id||null:e.type===W.A.FILE_IMPORT&&(t=e.orgId);let a=(0,i.d4)(e=>e.orgById),n=t?a[t]:null,l=(0,i.d4)(e=>e.fileMove),o=(0,i.d4)(e=>!!e.creatingNewFolder),c=(0,i.d4)(e=>e.dropdownShown),d=(0,i.d4)(e=>e.selectedView),u=e4(e),g=(0,_.Rs)(U.Y9I,{projectId:u},{enabled:!!u}),E=(0,_.Rs)(U.G0Y,{orgId:t});"errors"===E.status&&(console.error("Loading AccessibleFolders from LiveGraph: "),console.error(E.errors));let h="loaded"===E.status&&("loaded"===g.status||e.type===W.A.FILE_IMPORT)?{fetched:E,transformed:function(e,t,a){let r={id:e.currentUser.id,student_validated_at:e.currentUser.studentValidatedAt&&e.currentUser.studentValidatedAt.toString()},n={},i={},l={},o={byFolderId:{},byTeamId:{}},s=(0,P.Um)(e.currentUser),c=[],d=e=>{i[e.id]={...e,canEdit:!0,canRename:!!e.path}};e.currentUser.allOrgUsers&&e.currentUser.allOrgUsers.forEach(e=>{l[e.orgId]={[e.userId]:{...e,type:F.Wd.ORG_USER,account_type:e.accountType,design_paid_status:e.accountType,id:e.id,org_id:e.orgId,user_id:e.userId,user:{id:e.user.id,email:e.user.email||void 0,img_url:e.user.imgUrl,name:e.user.name||void 0,handle:e.user.handle},permission:e.permission,drafts_folder_id:e.draftsFolderId,created_at:e.createdAt.toString(),updated_at:e.updatedAt?.toString()||"",disabled_at:e.disabledAt&&e.disabledAt.toString(),whiteboard_paid_status:e.whiteboardPaidStatus||D.El.STARTER,show_figjam_user_onboarding:null,has_shown_figjam_admin_launch_onboarding:null,has_shown_figjam_admin_onboarding:null,ecc_upgrading_locked:null,dev_mode_paid_status:e.devModePaidStatus||D.El.RESTRICTED}},e.draftsProject&&(d(e.draftsProject),e.draftsProject.ownerRole&&(o.byFolderId[e.draftsProject.id]={[r.id]:(0,P.aU)(e.draftsProject.ownerRole,s,null,null)}))}),e.currentUser.teamEditRoles&&e.currentUser.teamEditRoles.forEach(e=>{if(!e.team)return;let{id:t,projects:a}=e.team;n[t]={...e.team,canEdit:e.level>=O.e6.EDITOR,canAdmin:e.level>=O.e6.ADMIN,currentTeamUser:e.team.currentTeamUser,licenseGroup:null},o.byTeamId[t]={[r.id]:(0,P.aU)(e,s,null,null)},a&&a.forEach(e=>d(e))});let u=e&&e.org?e.org:null;if(u){if(t){let e=(0,p.oA)(t.project);e&&e.canEdit&&d(e)}u.teams&&u.teams.forEach(e=>{let{id:t,orgEditProjects:a}=e;if(!n[t]){let a=e.canEdit,r=e.canAdmin,i=e.licenseGroup;n[t]={...e,canEdit:a??!1,canAdmin:r??!1,licenseGroup:i||null},c.push(t)}let r=(0,p.oA)(a);r&&r.forEach(e=>{d(e)})})}return(0,m.kc)().ps_benchmark&&e.currentUser.teamRoles?.forEach(e=>{if(!e.team)return;let{id:t}=e.team;n[t]||(n[t]={...e.team,canEdit:!1,canAdmin:!1,currentTeamUser:e.team.currentTeamUser,licenseGroup:null},o.byTeamId[t]={[r.id]:P.aU(e,s,null,null)})}),e.currentUser.projectEditRoles&&e.currentUser.projectEditRoles.forEach(e=>{e.project&&(d(e.project),o.byFolderId[e.project.id]={[r.id]:(0,P.aU)(e,s,null,null)})}),e.currentUser.draftsProject&&(d(e.currentUser.draftsProject),e.currentUser.draftsProject.ownerRole&&(o.byFolderId[e.currentUser.draftsProject.id]={[r.id]:(0,P.aU)(e.currentUser.draftsProject.ownerRole,s,null,null)})),{org:u,user:r,teams:n,folders:i,roles:o,orgUsers:l,orgId:a,fileBrowserPreferences:e.currentUser.fileBrowserPreferences,implicitTeamRolesTeamIds:c}}(E.data,e.type!==W.A.FILE_IMPORT?g.data:null,t)}:null,y=null===h?{loaded:!1}:{loaded:!0,userResources:h.transformed},v=null==u||null===h?null:h.transformed.folders[u],b=v?v.teamId:null,w=(0,i.wA)();r.useEffect(()=>{y.loaded&&w(eA({modalData:e,userResources:y.userResources,currentFolderId:u,currentFolderTeamId:b}))},[h&&h.fetched]);let T=[];if(y.loaded&&!t)for(let e in y.userResources.teams){let t=y.userResources.teams[e];"ok"!==t.subscription&&T.push(t.id)}let I=function(e){let[t,a]=r.useState((0,p.Xm)()),n=e.join(",");return r.useEffect(()=>{if(0===n.length){a((0,p.gB)({}));return}a((0,p.Xm)());let e=!1;return(async()=>{let t=await X.getTeamRestrictionsLists({teamIds:n});e||a((0,p.gB)(t.data.meta))})(),()=>{e=!0}},[n]),t}(T);if("loaded"===I.status&&y.loaded)for(let e in y.userResources.teams){let t=y.userResources.teams[e];I.data[e]&&(t.restrictionsList=I.data[e])}return(0,f.I)("loaded"===E.status,e=>{(0,s.sx)("file_move_modal_latency",{latency_ms:e},{forwardToDatadog:!0})}),r.createElement(e9,{modalId:e._modalId,fileMove:l,fileMoveData:e,creatingNewFolder:o,dropdownShown:c,selectedView:d,dispatch:w,userResources:y,currentOrg:n})}function e5(e){let t=null!=e.orgId,a=e.subscription===D.Qh.INCOMPLETE||e.subscription===D.Qh.OK;return{id:e.id,subscription:e.subscription,starter_team:!t&&!a,pro_team:a,org_team:t,student_team:!!e.studentTeamAt,deleted_at:e.deletedAt?.toString()||null}}class e9 extends r.PureComponent{constructor(){super(...arguments),this.state={newFileName:""},this.FILE_MOVE_DROPDOWN="file-move-dropdown",this.scrollContainerRef=e=>{this.scrollContainer=e,this.scrollContainerElm=n.findDOMNode(e)},this.isMovePageToNewFile=(0,m.kc)().move_page_to_new_file&&this.props.fileMoveData.isMovePageToNewFile,this.onScroll=()=>{clearTimeout(this.previousTimeOutKey),this.props.fileMove.upDownKeyPressed&&this.props.dispatch(S.Ww({canFocus:!1})),this.previousTimeOutKey=setTimeout(()=>{this.props.fileMove.canMouseFocus||this.props.dispatch(S.Ww({canFocus:!0}))},200)},this.onkeydown=e=>{if(!this.props.userResources.loaded||this.props.creatingNewFolder||this.props.fileMove.folderRenaming||this.props.fileMove.isSearchFocused)return;let t=document.getElementById(e1);if((0,q.NB)(t))return;let{userResources:a}=this.props.userResources;switch(e.keyCode){case u.Uz.ESCAPE:this.onClose();break;case u.Uz.UP_ARROW:this.props.dispatch(S.zv());break;case u.Uz.DOWN_ARROW:this.props.fileMove.indexCount&&this.props.dispatch(S.TL({upperBound:this.props.fileMove.indexCount}));break;case u.Uz.ENTER:{if(-1===this.props.fileMove.focusedIndex)return;let e=this.props.fileMove.folderRows[this.props.fileMove.focusedIndex];if(e.type===W.b.NEW_FOLDER_TEAM){let t=e.id,r=a.teams[t];this.props.dispatch((0,L.SX)({where:this.props.modalId.type,team:{...(0,G.Ws)(r),canEdit:!0,canEditTeamContents:!0,canAdmin:r.canAdmin}}))}else if(e.type===W.b.FOLDER_ROW){let t=a.folders[e.id];if(!t)break;this.move(t)}}}},this.onClose=()=>{this.props.fileMoveData.displayBanner?this.props.dispatch(A.Lo()):this.props.dispatch(A.Ce())},this.openOrgView=e=>{this.props.dispatch(C.$T({view:"org",orgId:e,orgViewTab:$.X.HOME}))},this.onOrgViewLinkClick=()=>{this.props.dispatch(A.Ce()),this.props.currentOrg&&this.openOrgView(this.props.currentOrg.id)},this.moveToSelectedFolder=()=>{let e=this.getFocusedFolder();if(!e)return;let t=()=>{this.move(e)};if(this.isMovePageToNewFile&&this.props.fileMoveData.type!==W.A.FILE_IMPORT){var a,r,n;this.onClose();let t=this.props.fileMoveData.type===W.A.FILE?this.props.fileMoveData.fileKey:this.props.fileMoveData.repoId;a=this.props.fileMoveData.page_id,r=e.id,n=this.state.newFileName,(0,Z.ED)("startMovePagesJob","Send request to start move pages job."),ee.Ay.post(`/api/files/${t}/move_pages`,{folder_id:r,page_ids:a,file_name:n}).catch(e=>{(0,Z.x1)("startMovePagesJob","Error with starting move pages job.",{err:e})}).then(()=>{(0,Z.ED)("startMovePagesJob","Move pages job successfully started.")});return}let i=this.props.fileMoveData;if(i.type===W.A.FILE&&i.file.is_team_template&&(0,M.VA)(e)){this.props.dispatch(A.to({type:ei.X0,data:{title:(0,N.tx)("templates.confirmation.move_to_drafts.title",{count:1}),content:(0,N.tx)("templates.confirmation.move_to_drafts.description"),confirmText:(0,N.tx)("templates.confirmation.move_to_drafts.button_v2"),destructive:!1,onConfirm:t}}));return}t()},this.move=o()(e=>{let t=this.props.fileMoveData;switch(t.type){case W.A.FILE:this.moveFile(e,t.file);break;case W.A.REPO:this.moveRepo(e,t.repo);break;case W.A.FILE_IMPORT:for(let a of t.files)this.props.dispatch((0,B.zh)({name:a.name,blob:new Blob([a.contents]),folderId:e.id}));break;default:(0,c.xb)(t)}},2e3,{leading:!0,trailing:!1}),this.closeModal=()=>{this.props.dispatch(A.ES(this.props.modalId))},this.moveFile=(e,t)=>{if(e&&e.id!==t.folder_id){if(this.props.userResources.loaded){let a=this.props.userResources.userResources.teams[e.teamId||""]||null;this.closeModal(),this.props.dispatch(k.z({files:[t],folder:e,team:a,fromFileModal:!0,onFinishCallback:this.props.fileMoveData.afterFileMove?.callback}))}}else this.onClose()},this.moveRepo=(e,t)=>{if(e&&e.id!==t.folder_id){if(this.props.userResources.loaded){let a=this.props.userResources.userResources.teams[e.teamId||""]||null;this.closeModal(),this.props.dispatch(k.z({files:[],repos:[t],folder:e,team:a,fromFileModal:!0}))}}else this.onClose()},this.getModalTitle=()=>{let e=this.props.fileMoveData;if(this.isMovePageToNewFile)return(0,N.t)("file_browser.file_move.move_pages_to_new_file");if(e.type===W.A.FILE_IMPORT)return 1===e.files.length?(0,N.t)("file_browser.file_move.modal_header_import_file",{fileName:e.files[0].name}):(0,N.t)("file_browser.file_move.modal_header_import_files");{let t=e.type===W.A.FILE?e.file.name:e.repo.name;return(0,N.t)("file_browser.file_move.modal_header_move_file",{fileName:t})}},this.getFocusedFolder=()=>{if(!this.props.userResources.loaded)return null;let{userResources:e}=this.props.userResources,t=this.props.fileMove.folderRows[this.props.fileMove.focusedIndex];return t&&t.type===W.b.FOLDER_ROW?e.folders[t.id]:null},this.onFileMoveContextMenu=(e,t)=>{e.stopPropagation(),e.preventDefault(),this.props.fileMove.folderRenaming||this.props.dispatch(C.j7({type:this.FILE_MOVE_DROPDOWN,data:{folderId:t.id,position:{top:e.clientY,left:e.clientX,right:"auto",bottom:"auto"}}}))},this.handleInputChange=e=>{this.setState({newFileName:e.currentTarget.value})},this.renderViewerUpgradeAwarenessBanner=(e,t,a)=>{if(!this.props.userResources.loaded)return null;let{userResources:n}=this.props.userResources;if(!(0,M.VA)(t)||(0,M.VA)(a))return null;let i=this.props.fileMoveData.type===W.A.FILE?this.props.fileMoveData.fileKey:"";if(n.orgId){if(n.org?.k12GoogleOrg)return null;let t=n.orgUsers[n.orgId],a=t&&n.user?t[n.user.id]:null,l=!1;if(e===D._Y.DESIGN?l=a?.design_paid_status===D.El.STARTER:e===D._Y.WHITEBOARD&&(l=a?.whiteboard_paid_status===D.El.STARTER),l)return r.createElement(er.n,{planName:this.props.currentOrg?.name,planType:z.O.ORG,planId:n.orgId,fileKey:i,upgradeReason:en.X.MOVE_DRAFT})}else{let t=a?.teamId,l=t?n.teams[t]:null;if(l&&e5(l).pro_team){let t=!1;if(e===D._Y.DESIGN?t=l.currentTeamUser?.designPaidStatus===D.Zf.STARTER:e===D._Y.WHITEBOARD&&(t=l.currentTeamUser?.whiteboardPaidStatus===D.Zf.STARTER),t)return r.createElement(er.n,{planName:l.name,planType:z.O.TEAM,planId:l.id,fileKey:i,upgradeReason:en.X.MOVE_DRAFT})}}return null}}componentDidMount(){document.addEventListener("keydown",this.onkeydown),this.componentMountedAt=new Date}componentWillUnmount(){document.removeEventListener("keydown",this.onkeydown)}componentDidUpdate(e,t){!e.userResources.loaded&&this.props.userResources.loaded&&(this.props.fileMoveData.autoSelect&&this.props.dispatch(S.qb({fileMove:this.props.fileMove})),this.props.dispatch(S.YG({isSearchFocused:!0})));let a=this.props.fileMove.focusedIndex;if(this.props.fileMove.upDownKeyPressed&&e.fileMove.focusedIndex!==a){if(!this.scrollContainerElm||-1===a)return;let e=this.props.fileMove.folderRows[a].positionTop,t=this.scrollContainer.getScrollTop(),r=this.scrollContainerElm.clientHeight;e<t?0===a?this.scrollContainer.scrollToTop():this.scrollContainer.scrollTo(e):e+e0>t+r&&(null!=this.props.fileMove.indexCount&&a===this.props.fileMove.indexCount-1?this.scrollContainer.scrollToBottom():this.scrollContainer.scrollTo(e-r+e0))}this.props.fileMove.upDownKeyPressed&&this.props.dispatch(S.qM())}renderDropdown(){if(!this.props.userResources.loaded)return;let{userResources:e}=this.props.userResources,t=this.props.dropdownShown;if(!(t&&t.type===this.FILE_MOVE_DROPDOWN&&t.data&&t.data.folderId))return null;let a=e.folders[t.data.folderId];return a?r.createElement(tr,{folder:a,dropdownShown:this.props.dropdownShown,selectedView:this.props.selectedView,dispatch:this.props.dispatch}):null}render(){let e,t,a;let n=this.props.fileMoveData.modalWidth||288,i=this.getModalTitle();if(!this.props.userResources.loaded)return r.createElement(J.XV,{title:i,fixedTop:!0,minWidth:n,maxWidth:n,onClose:this.onClose,truncateTitleText:!0},r.createElement("div",{className:eV},r.createElement(b.a_,{className:"file_move--spinner--fdTRn"})));let{userResources:l}=this.props.userResources,o=e4(this.props.fileMoveData),s=null==o?null:l.folders[o],d=this.getFocusedFolder();e=this.isMovePageToNewFile?null!=d&&0!==this.state.newFileName.length:this.props.fileMoveData.type===W.A.FILE_IMPORT?null!=d:null!=d&&null!=s&&d.id!==s.id;let u=0===this.props.fileMove.teamOrder.length,_=!this.props.fileMove.folderSearchQuery&&this.props.fileMove.userTeamCount&&!(0,m.kc)().ps_benchmark&&this.props.fileMove.userTeamCount<=1&&this.props.fileMoveData.type!==W.A.FILE_IMPORT,p=!this.props.fileMove.folderSearchQuery&&this.props.fileMove.userTeamCount&&(0,m.kc)().ps_benchmark&&this.props.fileMove.userTeamCount<=1&&this.props.fileMoveData.type!==W.A.FILE_IMPORT,g=this.props.fileMoveData;switch(g.type){case W.A.FILE:t={fileKey:g.fileKey,fileTeamId:g.file&&g.file?.team_id,fileMoveModalEmptyState:_||p,orgId:this.props.currentOrg&&this.props.currentOrg?.id},a=g.file.editor_type??D._Y.DESIGN;break;case W.A.REPO:t={repoId:g.repoId,fileMoveModalEmptyState:_||p,orgId:this.props.currentOrg&&this.props.currentOrg?.id},a=D._Y.DESIGN;break;case W.A.FILE_IMPORT:t={},a=null;break;default:(0,c.xb)(g)}return r.createElement(R.fu,{name:K.e0.FILE_MOVE_MODAL,properties:t},r.createElement(J.XV,{title:i,fixedTop:!0,minWidth:n,maxWidth:n,onClose:this.onClose,truncateTitleText:!0},_?r.createElement("div",{className:"file_move--mainZeroState--LuJk0 file_move--main--RCzls",id:e1},r.createElement("div",{className:"file_move--zeroStateModal--0wxWh"},r.createElement("div",{style:{paddingTop:"100px"}},(0,N.tx)("file_browser.file_move.zero_state")),this.props.currentOrg&&r.createElement("div",{className:I.cx.pt20.$},r.createElement(h.$$,{onClick:this.onOrgViewLinkClick},this.props.currentOrg.bigma_enabled?(0,N.t)("file_browser.file_move.view_workspaces"):(0,N.t)("file_browser.file_move.view_teams"))))):r.createElement("div",{className:eV,id:e1},this.isMovePageToNewFile?r.createElement(ea,{newFileName:this.state.newFileName,onChange:this.handleInputChange}):r.createElement(r.Fragment,null,a&&s&&d&&this.renderViewerUpgradeAwarenessBanner(a,s,d),r.createElement("div",{className:"file_move--searchWrapperNew--PXm8m"},r.createElement(e6,{fileMoveData:this.props.fileMoveData,folderCount:this.props.fileMove.indexCount,focusedIndex:this.props.fileMove.focusedIndex,getFocusedFolder:this.getFocusedFolder,searchQuery:this.props.fileMove.folderSearchQuery,moveFolder:this.move,dispatch:this.props.dispatch,userResources:l}))),r.createElement("div",{className:eG}),this.props.fileMoveData.displayBanner&&!this.isMovePageToNewFile&&r.createElement(r.Fragment,null,this.props.fileMoveData.displayBanner,r.createElement("div",{className:eG})),this.props.fileMove.folderSearchQuery&&!this.isMovePageToNewFile&&u?r.createElement("div",{className:"file_move--emptyModal--MPz-z"},(0,N.tx)("search.file_move.no_results_found",{folderSearchQuery:this.props.fileMove.folderSearchQuery})):r.createElement(w.P,{width:n,className:"file_move--teamSectionBody--YR9Lj",ref:this.scrollContainerRef,onScroll:this.onScroll},r.createElement(tt,{currentFolderId:o,fileMove:this.props.fileMove,fileEditorType:a,creatingNewFolder:this.props.creatingNewFolder,onFileMoveContextMenu:this.onFileMoveContextMenu,indexOffsets:this.props.fileMove.indexOffsets,teams:l.teams,folders:l.folders,teamNameMaxWidth:n-88,componentMountedAt:this.componentMountedAt,orgId:l.orgId,onDoubleClick:this.moveToSelectedFolder,selectedView:this.props.selectedView,rolesByTeamId:l.roles.byTeamId,dispatch:this.props.dispatch})),r.createElement("div",{className:"file_move--footer--Pt8L1"},r.createElement(h.nR,{onClick:this.onClose},(0,N.tx)("modal.cancel")),r.createElement(h.vd,{disabled:!e,onClick:this.moveToSelectedFolder},this.props.fileMoveData.moveText||(0,N.t)("file_browser.file_move.move")))),this.renderDropdown(),r.createElement(tn,{fileMove:this.props.fileMove,creatingNewFolder:this.props.creatingNewFolder})))}}e9.displayName="FileMoveModal";class e6 extends r.PureComponent{constructor(e){super(e),this.onFocus=()=>{this.props.dispatch(S.xH()),this.props.dispatch(S.YG({isSearchFocused:!0}))},this.onBlur=()=>{this.props.dispatch(S.YG({isSearchFocused:!1}))},this.onChange=e=>{e.stopPropagation(),this.props.dispatch(eR({modalData:this.props.fileMoveData,query:e.currentTarget.value,userResources:this.props.userResources}))},this.onSearchKeyDown=e=>{e.stopPropagation();let t=this.searchInputRef.current;switch(e.keyCode){case u.Uz.DOWN_ARROW:t&&t.blur(),null!=this.props.folderCount&&this.props.dispatch(S.TL({upperBound:this.props.folderCount}));break;case u.Uz.UP_ARROW:t&&t.blur(),this.props.dispatch(S.zv());break;case u.Uz.ESCAPE:if(!t)break;t.value?(t.value="",this.props.dispatch(eR({modalData:this.props.fileMoveData,query:"",userResources:this.props.userResources}))):this.props.dispatch(A.Ce()),this.props.dispatch(S.xH());break;case u.Uz.TAB:t&&t.blur(),this.props.dispatch(S.xH());break;case u.Uz.ENTER:{t&&t.blur();let e=this.props.getFocusedFolder();e&&this.props.moveFolder(e)}}},this.searchInputRef=r.createRef()}componentDidMount(){let e=this.searchInputRef.current;e&&e.focus()}render(){return r.createElement("div",{className:"file_move--searchContainer--0qezA"},r.createElement("div",{className:eH},r.createElement(T.B,{svg:eX.A})),r.createElement(v.L,{ref:this.searchInputRef,placeholder:(0,N.t)("file_browser.file_move.search_placeholder"),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onSearchKeyDown,className:this.props.searchQuery?"file_move--searchInputNew--k79Z1":"file_move--searchInputEmptyNew--Qc-2U file_move--searchInputNew--k79Z1",value:this.props.searchQuery,onChange:this.onChange}))}}function e7(e){let{team:t,teamId:a}=e,[n,{onMouseOver:i,onMouseOut:l}]=(()=>{let[e,t]=(0,r.useState)(!1),a=(0,r.useCallback)(()=>t(!0),[t]),n=(0,r.useCallback)(()=>t(!1),[t]);return(0,r.useMemo)(()=>[e,{onMouseOver:a,onMouseOut:n}],[e,a,n])})(),o=(0,_.Rs)(U.bel,{teamId:t?.id??""},{enabled:!!t?.id}),s=o.data?.team?.teamFileCounts?.designFileCount??0,c=o.data?.team?.teamFileCounts?.whiteboardFileCount??0,d=null==e.fileEditorType?null:"whiteboard"===e.fileEditorType?{type:H.sK.ADD_FIGJAM_FILE,nCurrentWhiteboardFiles:c}:"slides"===e.fileEditorType?{type:H.sK.ADD_SLIDES_FILE}:{type:H.sK.ADD_DESIGN_FILE,nCurrentDesignFiles:s},m=e.fileNotInTeam&&t&&d&&!(0,H.rR)((0,G.Ws)(t),d);return r.createElement(r.Fragment,null,e.showTitle&&r.createElement("div",{className:"file_move--teamTitleNew--2ojZ4 text--fontPos12--YsUAh text--_fontBase--QdLsd",onMouseOver:i,onMouseLeave:l},(a===S.iK||a===S.HK)&&r.createElement("div",{className:eH},r.createElement(T.B,{svg:eJ.A})),r.createElement("div",{className:"file_move--teamTitleRow--0tzGB"},r.createElement("div",{className:"file_move--teamName--9fqeI"},r.createElement("div",{className:"file_move--teamTitleText--NhNEM ellipsis--ellipsis--Tjyfa",style:{maxWidth:e.teamNameMaxWidth}},a===S.iK||a===S.HK?(0,N.t)("file_browser.shared_projects"):t.name),m&&r.createElement("div",{className:"file_move--warningIcon--Dsp3N"},r.createElement(T.B,{svg:eK.A,"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":(0,N.t)("file_browser.file_move.paywall_team_tooltip")}))),n&&t&&!m&&r.createElement("div",{className:"file_move--newProjButton--L5YiY"},r.createElement(x.I,{team:t,isBackgroundTransparent:!0,trackingContextName:K.e0.FILE_MOVE_MODAL})))))}function te(e){let t=(0,r.useRef)(null),[a,n]=(0,r.useState)(!1),l=(0,i.wA)();return(0,r.useEffect)(()=>{!a&&e.isTeamNew&&t.current&&e.hasFolderSection&&(l(S.Dp({indexAt:e.firstFolderFocusedIndex})),t.current.scrollIntoView(),n(!0))},[e.isTeamNew,e.hasFolderSection,e.firstFolderFocusedIndex,a,t,l]),r.createElement("div",{className:e.className,ref:t},e.children)}function tt(e){let{fileMove:t,teams:a,selectedView:n}=e,i=Object.values(a).map(e=>e5(e));return r.createElement("div",null,null!=t.teamOrder&&t.teamOrder.map(n=>{let i=n!==S.HK,l=n!==S.iK&&n!==S.HK,o=(t.foldersByTeamId?.[n]||[]).length>0;if(!(i||l||o))return null;let s=a[n];if(!s&&!(n===S.iK||n===S.HK)||(0,m.kc)().ps_benchmark&&n===S.HK&&!e.orgId)return null;let c=s?new Date(a[n].createdAt):void 0,d=c&&c>e.componentMountedAt,u=t.indexOffsets[n]+1,_=!!e.currentFolderId&&n!==e.folders[e.currentFolderId]?.teamId;return r.createElement(te,{className:"file_move--teamSection--JHso7",isTeamNew:d,firstFolderFocusedIndex:u,hasFolderSection:o,key:`Team Section ${n}`},r.createElement(e7,{team:s,teamId:n,showTitle:i,isACustomTeam:l,fileNotInTeam:_,teamNameMaxWidth:e.teamNameMaxWidth,indexOffsets:e.indexOffsets,fileEditorType:e.fileEditorType}),o&&(t.foldersByTeamId[n]||[]).map((a,i)=>{let o=i+e.indexOffsets[n];return l&&(o+=1),r.createElement(ta,{key:`${a.teamId} ${a.id}`,folderBeingRenamed:t.folderRenaming,folders:e.folders,index:o,focusedFolderIndex:t.focusedIndex,folder:a,isSearchingFolders:!!t.isSearchResult,currentFolderId:e.currentFolderId,onFileMoveContextMenu:e.onFileMoveContextMenu,trackingContextName:K.e0.FILE_MOVE_MODAL,onDoubleClick:e.onDoubleClick})}))}),!e.orgId&&r.createElement(ez,{teamNameMaxWidth:e.teamNameMaxWidth,trackingContextName:K.e0.FILE_MOVE_MODAL,orgId:e.orgId,selectedView:n,teams:i,rolesByTeamId:e.rolesByTeamId,dispatch:e.dispatch}))}function ta(e){let t=(0,i.wA)(),a=(0,g.n_)(L.mq),n=(r,n)=>{(0,s.sx)("Rename Folder",{trackingContext:e.trackingContextName}),a({folderId:r.id,folderName:n}),t(S.Mn())},l=(t,a)=>{e.onFileMoveContextMenu(a,t)},o=e.folderBeingRenamed===e.folder.id,c=e.focusedFolderIndex===e.index,d=e.folderBeingRenamed?eW:c?"file_move--folderRowWrapperFocusedNew--egTh6 file_move--folderRowWrapper--Qw-C4":eW,{folder:u}=e;return r.createElement("div",{className:d,onMouseDown:()=>{t(S.Dp({indexAt:e.index}))},key:`${u.teamId} ${u.id}`,onContextMenu:e=>l(u,e),onDoubleClick:()=>{o||e.onDoubleClick()}},o?r.createElement("div",{className:ej},r.createElement(y.p,{key:`input ${u.id}`,className:"file_move--renameInput--RBlJ-",placeholderValue:(0,M.CI)(u),submit:e=>n(u,e),cancel:()=>{t(S.Mn())}})):((t,a)=>{let n=e8(t)&&e.isSearchingFolders,i=e.focusedFolderIndex&&e.focusedFolderIndex>-1?a:e.currentFolderId===t.id,l=(0,m.kc)().ps_benchmark&&(0,M.jd)(t)?eZ.A:eQ.A;return r.createElement("div",{className:ej},r.createElement("div",{className:eH},r.createElement(T.B,{svg:i?eY.A:l})),r.createElement("span",{className:"file_move--folderName--ouEY3 ellipsis--ellipsis--Tjyfa"},(0,M.CI)(t)),r.createElement("div",{className:eH},n&&r.createElement(T.B,{svg:eq.A})))})(u,c))}e6.displayName="FileMoveSearch";class tr extends r.PureComponent{constructor(){super(...arguments),this.renameFolder=()=>{this.props.dispatch(S.JG({folderId:this.props.folder.id}))}}render(){let e=this.props.folder,t=e.canRename,a=e2(this.props.selectedView);return r.createElement(E.ms,{className:"file_move--fileMoveContextMenu--xs-xb",style:this.props.dropdownShown.data.position},r.createElement(E.c$,{disabled:!t,onClick:this.renameFolder},(0,N.tx)("file_browser.file_move.context_menu_rename")),r.createElement(E.wv,null),r.createElement(E.c$,{href:(0,j.EE)(e.id,e.orgId),target:a},(0,N.tx)("file_browser.file_move.context_menu_show_in_files")))}}tr.displayName="FileMoveDropdown";class tn extends r.PureComponent{constructor(){super(...arguments),this.hiddenDivRef=e=>{this.hiddenDiv=e}}componentDidUpdate(){!this.props.fileMove||this.props.fileMove.folderRenaming||this.props.fileMove.isSearchFocused||this.props.creatingNewFolder||null==this.hiddenDiv||this.hiddenDiv.focus()}render(){return r.createElement("div",{ref:this.hiddenDivRef,tabIndex:0})}}tn.displayName="FileMoveHiddenDiv"},404558:(e,t,a)=>{a.r(t),a.d(t,{MoveDraftToProjectInterstitialModal:()=>h});var r=a(411855),n=a(188507),i=a(629019),l=a.n(i),o=a(966712),s=a(799569),c=a(946689),d=a(939863),m=a(822998),u=a(662275),_=a(931828),p=a(672517),g=a(488578),f=a(209590),E=a(954797);function h(e){let t=(0,n.wA)(),a=(0,o.kc)().ps_benchmark,i=()=>{t(_.b({dismissed_move_draft_to_project_interstitial_modal:!0})),t(u.Lo())};return r.createElement(p.fu,{name:"MoveDraftToProjectInterstitialModal"},r.createElement(g.aF,{title:a?(0,d.t)("file_browser.draft_to_project.title.plan_spaces"):(0,d.t)("file_browser.draft_to_project.title.seat_rename"),titleClassName:f.wN,className:f.KP,size:320,popStack:!0,disableClickOutsideToHide:!0},r.createElement(s.Jn,{className:l()(E.J_,E.BQ),onClick:i}),r.createElement("span",null,a?(0,d.tx)("file_browser.draft_to_project.body.plan_spaces"):(0,d.tx)("file_browser.draft_to_project.body.seat_rename"),r.createElement("br",null)),r.createElement("div",{className:l()(f.v0,f.hF)},r.createElement("a",{target:"_blank",href:"https://help.figma.com/hc/articles/13838684089751-Starter-plan-permissions#drafts"},r.createElement(c.tM,null,(0,d.tx)("general.learn_more"))),r.createElement(c.vd,{className:f.pL,onClick:()=>{i(),(0,m.hd)(e.file,e.repo,t,e.afterFileMove,e.moveFileModalData,e.bannerToDisplay)}},(0,d.tx)("file_browser.draft_to_project.move")))))}},43325:(e,t,a)=>{a.d(t,{cx:()=>i});var r=a(503457),n=a(898719);a(616705);let i=n.A.createLazyComponent(()=>Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(7481),a.e(76),a.e(2801),a.e(3630),a.e(944),a.e(1011),a.e(9082),a.e(1841),a.e(7748)]).then(a.bind(a,616705)).then(e=>e.default),{loading:()=>null,error:r.H4.NONE,componentName:"FileBrowserOverlays"})},179861:(e,t,a)=>{a.r(t),a.d(t,{EduUpgradeModal:()=>g});var r=a(411855),n=a(188507),i=a(946689),l=a(939863),o=a(702954),s=a(507877),c=a(662275),d=a(995852),m=a(672517),u=a(594901),_=a(243987),p=a(585878);function g(){let e=(0,u.FC)(),t=(0,n.wA)(),a=r.useCallback(()=>{t(c.Ce())},[t]),g=r.useCallback(e=>{a(),t(d.Vm({teamId:e.id}))},[t,a]),f=r.useCallback(()=>{a(),t(s.Dw({isEduTeam:!0}))},[t,a]),E=r.useMemo(()=>(0,_.Kg)(e),[e]);return r.useLayoutEffect(()=>{0===E.length&&f()},[t,E.length,f]),r.createElement(m.fu,{name:"Edu Team Upgrade Modal"},r.createElement(p.XV,{title:(0,l.t)("edu.upgrade_teams.headline"),onClose:a},r.createElement("div",{className:"edu_upgrade_modal--container--i-0VV"},r.createElement("p",{className:"edu_upgrade_modal--bodyText--BXu7I"},(0,l.tx)("edu.upgrade_teams.body",{link:r.createElement(i.Ph,{className:"edu_upgrade_modal--link--Toy9f",href:"/pricing",target:"_blank",trusted:!0},(0,l.tx)("edu.upgrade_teams.body_link_text"))}),E.length>1&&r.createElement(r.Fragment,null," ",(0,l.tx)("edu.upgrade_teams.body_multiple_teams"))),r.createElement(o.I,{eligibleTeams:E,selectTeam:g,showEditorCount:!1,customUpgradeText:(0,l.t)("general.next")}),r.createElement(i.Ph,{className:"edu_upgrade_modal--createTeamLink--CbJUX edu_upgrade_modal--link--Toy9f",onClick:f,trusted:!0},(0,l.tx)("edu.or_create_a_new_team")))))}},913369:(e,t,a)=>{a.r(t),a.d(t,{DowngradeSurveyModal:()=>F,DowngradeSurveyModalAdmin:()=>O,DowngradeSurveyModalLeaveTeam:()=>M});var r=a(411855),n=a(939863),i=a(898719),l=a(237870);let o="team-admin-confirm-downgrade",s=i.A.createLazyComponent(()=>Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(7481),a.e(76),a.e(2801),a.e(3630),a.e(944),a.e(1011),a.e(9082),a.e(1841),a.e(7748)]).then(a.bind(a,815622)).then(e=>e.ConfirmDowngradeModal),(0,l.Ij)("ConfirmDowngradeModal"));(0,l.qK)(o,s);var c=a(662275),d=a(902957),m=a(188507),u=a(946689),_=a(611978),p=a(585878);function g({id:e,label:t,children:a,onChange:n}){let[i,l]=r.useState(!1);return r.createElement("fieldset",{name:e},r.createElement("div",{className:"survey_option--inputContainer---R-Fh"},r.createElement(u.tB,{id:e,checked:i,onChange:e=>{l(!i),n&&n(e)}}),r.createElement("label",{className:"survey_option--label--NqXEk",htmlFor:e},t)),i&&a&&r.createElement("div",{className:"survey_option--subContainer--Omjmy"},a))}var f=a(459401),E=a(629019),h=a.n(E),y=a(268537),v=a(773058),b=a(91271);function w(e){let[t,a]=r.useState(""),n=e=>{a(e.target.value)};return e.textarea?r.createElement(b.v,{value:t,onChange:n,...e}):r.createElement(u.ks,{id:e.id,className:"survey_text_input--input--Q1W-9",placeholder:e.placeholder,maxLength:100,value:t,onChange:n})}let T="downgrade_survey_modal_component_v2--surveyQuestions--E5X6t",I="downgrade_survey_modal_component_v2--researchContact--qGc3V",N="downgrade_survey_modal_component_v2--hiddenInput--04h5p",x="downgrade_survey_modal_component_v2--radio--xvUsz",C=[{id:"brl",shorthand:"BRL"},{id:"cad",shorthand:"CAD"},{id:"eur",shorthand:"EUR"},{id:"gbp",shorthand:"GBP"},{id:"jpy",shorthand:"JPY"}];function S({id:e,shorthand:t}){return r.createElement("div",{className:"downgrade_survey_modal_component_v2--currencyContainer--CoFln"},r.createElement("p",null,(0,n.tx)(`downgrade_survey.survey_option.too_expensive.${e}`)),r.createElement("p",{className:"downgrade_survey_modal_component_v2--currencyShorthand--xhQpy"},t))}let k=[{id:"too_expensive",value:"Too expensive",children:r.createElement(function(){let e="other_currency",[t,a]=r.useState(""),i=e=>{a(e.currentTarget.id)},l=[...C.map(({id:e,shorthand:t})=>r.createElement(y.c$,{id:e,key:e,onClick:i},r.createElement(S,{id:e,shorthand:t}))),r.createElement(y.wv,{key:"separator"}),r.createElement(y.c$,{id:e,onClick:i,key:e},(0,n.tx)("downgrade_survey.survey_option.too_expensive.other_currency"))];return r.createElement("fieldset",null,r.createElement(g,{id:"currency_conversion",label:(0,n.t)("downgrade_survey.survey_option.too_expensive.currency_conversion")},r.createElement("fieldset",{className:h()({"downgrade_survey_modal_component_v2--currencySelector__other--khpqx":t===e})},r.createElement(y.Ve,{label:t.length?(0,n.t)(`downgrade_survey.survey_option.too_expensive.${t}`):(0,n.t)("downgrade_survey.survey_option.too_expensive.currency_selector"),options:l}),r.createElement("input",{id:"currency",className:N,readOnly:!0,value:t}),t===e&&r.createElement(w,{id:"currency_input",placeholder:(0,n.t)("downgrade_survey.survey_option.too_expensive.specify_currency")}))))},null),getSubOptions:e=>{let t=Array.from(e.getElementsByTagName("input")),a=t.find(e=>"currency_conversion"===e.id),r=t.find(e=>"currency"===e.id),n=r?.value,i=t.find(e=>"currency_input"===e.id),l=i?.value||n||void 0;return{currencyConversion:a?.checked,currency:l}}},{id:"billing_structure_unclear",value:"Billing structure is unclear"},{id:"no_longer_using_figma_products",value:"No longer using Figma's products",children:r.createElement(function(){return r.createElement("fieldset",null,r.createElement("legend",{className:"downgrade_survey_modal_component_v2--additionalQuestion--HfKNO"},(0,n.tx)("downgrade_survey.survey_option.no_longer_using_figma_products.other_products")),r.createElement(w,{id:"other_products",placeholder:(0,n.t)("downgrade_survey.survey_option.no_longer_using_figma_products.text_area")}))},null),getSubOptions:e=>{let t=Array.from(e.getElementsByTagName("input")).find(e=>"other_products"===e.id);return{products:t?.value||void 0}}},{id:"project_inactive",value:"Project is over or no longer active"},{id:"accidental_upgrade",value:"Did not mean to upgrade"},{id:"switching_plans",value:"Switching to a different plan",children:r.createElement(function(){let[e,t]=r.useState("");return r.createElement(r.Fragment,null,r.createElement(v.z,{value:e,onChange:e=>t(e)},r.createElement(v.Z,{className:x,value:"Starter plan"},(0,n.tx)("downgrade_survey.survey_option.switching_plans.starter_plan")),r.createElement(v.Z,{className:x,value:"Organization plan"},(0,n.tx)("downgrade_survey.survey_option.switching_plans.organization_plan")),r.createElement(v.Z,{className:x,value:"Enterprise plan"},(0,n.tx)("downgrade_survey.survey_option.switching_plans.enterprise_plan")),r.createElement(v.Z,{className:x,value:"Education plan"},(0,n.tx)("downgrade_survey.survey_option.switching_plans.education_plan"))),r.createElement("input",{id:"new_plan",className:N,readOnly:!0,value:e}))},null),getSubOptions:e=>{let t=Array.from(e.getElementsByTagName("input")).find(e=>"new_plan"===e.id);return{newPlan:t?.value||void 0}}}],A={id:"other",value:"Other",children:r.createElement(function(){return r.createElement(w,{className:"downgrade_survey_modal_component_v2--otherTextArea--pS5MZ",placeholder:(0,n.t)("downgrade_survey.survey_option.other.text_area"),textarea:!0})},null),getSubOptions:e=>({explanation:e.getElementsByTagName("textarea")[0].value||void 0})},R=(0,f.shuffle)(k).concat(A);var L=a(321112),D=a(538411);function P({cancelText:e,onSubmit:t}){let[a,i]=r.useState([]),l=e=>{let{id:t}=e.currentTarget;a.includes(t)?i(a.filter(e=>e!==t)):i([...a,t])},o=(0,m.wA)(),s=(0,_._6)().teamId,d=()=>{o(c.Ce())};return r.createElement(p.XV,{title:(0,n.t)("downgrade_survey.header"),fixedTop:!0,minWidth:370,maxWidth:370,onClose:d,dataTestId:"downgrade-survey-modal"},r.createElement("form",{className:"downgrade_survey_modal_component_v2--modalBody--tYceI",onSubmit:e=>{e.preventDefault();let r=Array.from(e.currentTarget.getElementsByClassName(T)[0].getElementsByTagName("fieldset")),n=a.map(e=>{let t=r.find(t=>t.name===e),{value:a,getSubOptions:n}=R.find(t=>t.id===e);return{reason:a,...n&&n(t)}});t({teamId:s,canContact:e.currentTarget.getElementsByClassName(I)[0].getElementsByTagName("input")[0].checked,selectedOptions:n})}},r.createElement("div",{className:"downgrade_survey_modal_component_v2--exitSurvey--9HRcF"},r.createElement("fieldset",{className:T},r.createElement("legend",null,(0,n.tx)("downgrade_survey.what_made_you_cancel_your_plan")),!a.length&&r.createElement("p",{className:D.Q},(0,n.tx)("downgrade_survey.select_one")),R.map(({id:e,children:t})=>r.createElement(g,{id:e,label:(0,n.t)(`downgrade_survey.survey_option.${e}`),key:e,onChange:l},t))),r.createElement("fieldset",{className:I},r.createElement("legend",null,(0,n.tx)("downgrade_survey.research_contact")),r.createElement(g,{id:"research",label:(0,n.t)("downgrade_survey.allow_research_contact")}))),r.createElement("div",{className:"downgrade_survey_modal_component_v2--buttonRow--Y15LH"},r.createElement(u.tM,{className:L.Lu,type:"button",onClick:d},e),r.createElement(u.vd,{type:"submit",disabled:!a.length,className:L.pL,autoFocus:!1},(0,n.tx)("downgrade_survey.continue")))))}function F(e){let t="admin"===e.context?(0,n.t)("downgrade_survey.go_back"):(0,n.t)("downgrade_survey.do_not_leave_team");return r.createElement(P,{onSubmit:t=>{let a=e.modalShown?.data.teamId,r=e.modalShown?.data.billingEndDate;if("admin"===e.context)e.dispatch(c.to({type:o,data:{teamId:a,billingEndDate:r,exitSurveyData:t}}));else if("leave-team"===e.context){let t=e.teams[a];e.dispatch(d.yH({team:t,userInitiated:!0})),e.dispatch(c.Ce())}},cancelText:t})}function O(e){return r.createElement(F,{...e,context:"admin"})}function M(e){return r.createElement(F,{...e,context:"leave-team"})}},464920:(e,t,a)=>{a.r(t),a.d(t,{FOLDER_DELETE_CONFIRM_MODAL:()=>u,FolderBatchDeleteConfirmModal:()=>_});var r=a(411855),n=a(188507),i=a(776250),l=a(966712),o=a(752553),s=a(881388),c=a(939863),d=a(688083),m=a(488578);let u="folder-delete-confirm-modal";function _({folders:e}){let t=(0,n.wA)(),a=(0,o.n_)(d.U),u=e=>{e.forEach(e=>{(0,i.sx)("Folder Delete Confirmation Click",{folderId:e.id,teamId:e.teamId,orgId:e.orgId})}),a({folderIds:e.map(e=>e.id)}).catch(()=>{t(s.s.error((0,c.t)("file_browser.api_folder.error_when_deleting")))})};return r.createElement(m.Rw,{confirmationTitle:(0,c.t)("file_browser.delete_project.title"),destructive:!0,confirmText:(0,c.t)("file_browser.delete_project.generic_confirm_label"),onConfirm:()=>{u(e)}},(0,l.kc)().pdr_trashed_section?(0,c.tx)("file_browser.batch_delete_projects.confirm_text_trash_section",{numProjects:e.length}):(0,c.tx)("file_browser.batch_delete_projects.confirm_text",{numProjects:e.length}))}},295543:(e,t,a)=>{a.r(t),a.d(t,{FOLDER_DELETE_CONFIRM_MODAL:()=>f,FolderDeleteConfirmModal:()=>E});var r=a(411855),n=a(188507),i=a(776250),l=a(966712),o=a(752553),s=a(762638),c=a(881388),d=a(939863),m=a(485911),u=a(688083),_=a(875847),p=a(850134),g=a(488578);let f="folder-delete-confirm-modal";function E({folder:e}){let t=(0,n.wA)(),a=(0,o.n_)(u.tO),f=e=>{(0,i.sx)("Folder Delete Confirmation Click",{folderId:e.id,teamId:e.teamId,orgId:e.orgId}),a({folderId:e.id}).catch(()=>{t(c.s.error((0,d.t)("file_browser.api_folder.error_when_deleting")))})},E=(0,p.x)(e.id),h=r.createElement("span",{className:s.cx.fontBold.$},(0,_.CI)(e));return r.createElement(g.Rw,{confirmationTitle:(0,d.t)("file_browser.delete_project.title"),destructive:!0,confirmText:"loaded"!==E.status?(0,d.t)("file_browser.delete_project.generic_confirm_label"):1===E.data?(0,d.t)("file_browser.delete_project.one_file_confirm_label"):(0,d.t)("file_browser.delete_project.plural_files_confirm_label",{numFiles:(0,m.t)(E.data)}),onConfirm:()=>{f(e)}},(0,l.kc)().pdr_trashed_section?"loaded"!==E.status?(0,d.tx)("file_browser.delete_project.generic_confirm_text_trash",{folderName:h}):1===E.data?(0,d.tx)("file_browser.delete_project.one_file_confirm_text_trash",{folderName:h}):(0,d.tx)("file_browser.delete_project.plural_files_confirm_text_trash",{folderName:h,numFiles:(0,m.t)(E.data)}):"loaded"!==E.status?(0,d.tx)("file_browser.delete_project.generic_confirm_text",{folderName:h}):1===E.data?(0,d.tx)("file_browser.delete_project.one_file_confirm_text",{folderName:h}):(0,d.tx)("file_browser.delete_project.plural_files_confirm_text",{folderName:h,numFiles:(0,m.t)(E.data)}))}},580294:(e,t,a)=>{a.r(t),a.d(t,{FolderMoveModal:()=>L});var r=a(411855),n=a(188507),i=a(629019),l=a.n(i),o=a(737947),s=a(946689),c=a(827586),d=a(574176),m=a(939863),u=a(732813),_=a(662275),p=a(672517),g=a(385111),f=a(688083),E=a(594901),h=a(623746),y=a(428467),v=a(206193),b=a(851363),w=a(231959),T=a(143678),I=a(392340),N=a(585878),x=a(566067);let C="folder_move--iconContainer--nXjIY file_move--iconContainer--SWek6";var S=a(613557),k=a(450147),A=a(126815),R=a(575675);function L(e){let t,a;let i=(0,n.wA)(),l=(0,n.d4)(e=>e.currentUserOrgId),u=(0,n.d4)(e=>null!=l?e.orgById[l]:null),y=(0,I.Q)({currentOrgId:l,currentTeamId:null}),C=(0,n.d4)(t=>t.folders[e.folderId]),[k,R]=(0,r.useState)(void 0),[L,F]=(0,r.useState)(void 0),O="loaded"===y.status?{...y.data.currentUser}:null,M=g.h.useTrackingContext({trigger:v.b.FOLDER_MOVE_MODAL}),B={},U=[],V=(0,E.FC)();if(O){let e=[];(O.teamRoles??[]).forEach(t=>{if(t.team?.orgId===l&&!t.team?.deletedAt&&!t.pending){if(t.team?.id===C?.team_id){a=t;return}e.push(t),t.team?.workspace?.id?(B[t.team.workspace?.id]=B[t.team.workspace?.id]??[],B[t.team.workspace?.id].push(t)):t.team&&U.push(t)}});let r=O.baseOrgUser?.workspaceUsers;t=r?.find(e=>e?.isMainWorkspace)?.workspaceId}let H=()=>{i(_.Ce())},W=(e,t)=>{R(e),F(t)},j=(0,r.useCallback)(()=>{if(k&&!L){let e=(0,b.bL)(k?.id,k.orgId);o.Ay.redirect(e,"_blank")}},[k,L]),G=(0,r.useCallback)(e=>{if(!u)return;let t={workspaceId:e??w.O,onSubmitReturnToPrevView:!1};i(_.to({type:x.Uc,data:t}))},[u,i]),$=e=>r.createElement(r.Fragment,null,e.map(e=>r.createElement(P,{team:e.team,key:e.id,selectedTeamId:k?.id,onSelectTeam:W,permissionsState:V}))),z=e=>r.createElement(P,{team:e.team,key:e.id,selectedTeamId:k?.id,isCurrentTeam:!0,permissionsState:V,onSelectTeam:W});if(!C)return null;let Y=Object.keys(B).length>0,K=k&&a&&a.team.id===k.id;return r.createElement(p.fu,{name:T.e0.FILE_MOVE_MODAL,properties:M},r.createElement(N.XV,{title:(0,m.t)("file_browser.folder_move.modal_header",{folderName:C.name}),fixedTop:!0,minWidth:288,maxWidth:288,onClose:H,truncateTitleText:!0},r.createElement("div",{className:"folder_move--main--TkW9w file_move--main--RCzls"},r.createElement(c.P,{className:"folder_move--teamSectionBody--LACBL file_move--teamSectionBody--YR9Lj"},r.createElement("div",{className:"folder_move--teamSection---S02k file_move--teamSection--JHso7"},Y?(function(e,t,a){let r=t?.team?.workspace?.id??null,n=[r];return a&&a!==r&&e[a]&&n.push(a),Object.keys(e).filter(e=>e!==r&&e!==a).sort((t,a)=>{let r=e[t][0]?.team?.workspace?.name?.toLocaleUpperCase()??"",n=e[a][0]?.team?.workspace?.name?.toLocaleUpperCase()??"";return r<n?-1:r>n?1:0}).forEach(e=>{n.push(e)}),null!==r&&n.push(null),n})(B,a,t).map(e=>{if(null===e){if(U.length>0)return r.createElement(r.Fragment,{key:"other_teams_key"},r.createElement(D,{headerName:(0,m.t)("sidebar.workspaces.other_teams"),onCreateNewTeamClick:G,workspaceId:null}),null!=a&&a.team?.workspace?.id==null&&z(a),$(U))}else if(B[e]){let t=B[e],n=t?t[0].team?.workspace??null:null;return r.createElement(r.Fragment,{key:e},r.createElement(D,{headerName:n?.name??"",onCreateNewTeamClick:G,workspaceId:n?.id??null}),null!=a&&a.team?.workspace?.id===e&&z(a),$(t))}}):r.createElement(r.Fragment,null,u&&r.createElement(D,{key:"org_teams_header",headerName:u.name,onCreateNewTeamClick:G,workspaceId:null}),null!=a&&z(a),$(U))),k&&!L&&r.createElement("div",{className:"folder_move--warningContainer--MXpOB"},r.createElement("div",{className:"folder_move--warningSectionIcon--gOcDL"},r.createElement(d.B,{svg:A.A})),r.createElement("div",null,(0,m.tx)("file_browser.folder_move.move_project_no_edit_access_warning"),r.createElement("div",{className:"folder_move--warningCTALink--f74xo",onClick:j,role:"link",tabIndex:0},(0,m.tx)("file_browser.folder_move.view_team"),r.createElement("div",{className:"folder_move--arrowRightIcon--xIk7X"},r.createElement(d.B,{svg:S.A})))))),r.createElement("div",{className:"folder_move--footer--jcEsZ file_move--footer--Pt8L1"},r.createElement(s.nR,{onClick:H},(0,m.tx)("modal.cancel")),r.createElement(s.vd,{onClick:()=>{null!=k&&C&&i((0,f.Nr)({folder:(0,h.Bp)(C),team:k})),H()},disabled:void 0===k||!L||!!K},(0,m.tx)("file_browser.folder_move.move_project"))))))}function D(e){let[t,a]=(0,r.useState)(!1);return r.createElement("div",{className:"folder_move--teamsHeaderRow--qZfbl text--fontPos12--YsUAh text--_fontBase--QdLsd",onMouseMove:()=>a(!0),onMouseLeave:()=>a(!1)},r.createElement("div",null,e.headerName),t&&r.createElement(u.f,{data_tooltip:(0,m.t)("file_browser.inline_team_creation.button_text"),data_onboarding_key:"new-team-button",innerText:(0,m.t)("file_browser.inline_team_creation.button_text"),onClick:()=>{e.onCreateNewTeamClick(e.workspaceId)}}))}function P(e){let{team:t}=e;if(null==t)return r.createElement(r.Fragment,null);let a=l()(["folder_move--teamTitle--PwZow file_move--teamTitle--ZKSP9 text--fontPos12--YsUAh text--_fontBase--QdLsd",e.isCurrentTeam&&!e.selectedTeamId||e.selectedTeamId===e.team?.id?"folder_move--selectedTeamTitle---C1u4":""]),n=(0,y.canEditTeam)(t.id,e.permissionsState);return r.createElement("div",{className:a,onClick:()=>{e.onSelectTeam&&e.onSelectTeam(t,n)},role:"button",tabIndex:0},r.createElement("div",{className:C},r.createElement(d.B,{svg:e.isCurrentTeam?k.A:R.A})),r.createElement("div",{className:"folder_move--teamTitleRow--6MpKM file_move--teamTitleRow--0tzGB"},r.createElement("div",{className:"folder_move--teamName--fvmi0 file_move--teamName--9fqeI"},t.name)),e.selectedTeamId===t.id&&!n&&r.createElement("div",{className:C},r.createElement(d.B,{svg:A.A})))}},120521:(e,t,a)=>{a.r(t),a.d(t,{ChangeAnnualPlanModal:()=>x,ChangeAnnualPlanRow:()=>N,ConfirmCancelAnnualPlanModal:()=>C});var r=a(411855),n=a(188507),i=a(966712),l=a(752553),o=a(946689),s=a(881388),c=a(939863),d=a(49891),m=a(662275),u=a(995852),_=a(672517),p=a(710667),g=a(720647),f=a(978779),E=a(860178),h=a(99506),y=a(820113),v=a(243987),b=a(984968),w=a(265361),T=a(488578),I=a(135079);function N(e){return r.createElement(r.Fragment,null,(0,c.tx)("change_annual_plan_modal.number_of_editors.seat_rename",{productType:(0,w.E)((0,g.vc)(e.editorType))}),r.createElement(o.ks,{"data-testid":"change-annual-plan-row-input",type:"number",name:e.editorType,step:1,min:1,max:v.m,value:e.tempNumEditors,onChange:t=>{let a=t.target.value;e.setTempEditorsValue(parseInt(a))}}))}function x(){let e=(0,b.cD)(),t=(0,E.TA)(),a=(0,n.d4)(e=>e.teamBilling.summary),o=(0,n.d4)(e=>e.payment.submitPutAnnualQuantityPending),x=(0,n.wA)(),C=(0,p.N1)(p.Fq.TEAM_ADMIN_CONSOLE),[S]=(0,l.mI)(C),k=()=>{try{if(a?.annual_subscription)return a?.annual_subscription||void 0;return}catch(e){return}},A=k(),R=A?.whiteboard_quantity||0,[L,D]=r.useState(R),[P,F]=r.useState(A?.design_quantity||A?.quantity||0),O=(t,a)=>{x(u.MV({teamId:e,annualQuantity:t,annualWhiteboardQuantity:a}))},M=!!A?.trial_end&&!!(0,v.mt)(A.trial_end),B=A?(0,c.t)("change_annual_plan_modal.plan_start_date",{startDate:new Date(A.current_period_end)}):(0,c.t)("change_annual_plan_modal.unknown_start_date"),U=M?(0,c.t)("change_annual_plan_modal.confirmation_header_plan_starting",{startDate:B}):(0,c.t)("change_annual_plan_modal.confirmation_header_plan_started",{startDate:B});return r.createElement(_.fu,{name:"Change Annual Plan Modal",properties:{teamId:e,userId:t??void 0}},r.createElement(T.Rw,{confirmationTitle:U,confirmText:(0,c.t)("change_annual_plan_modal.confirm_text"),onConfirm:()=>{isNaN(P)||isNaN(L)||P<0||L<0||0===P&&0===L?x(s.s.error((0,c.t)("change_annual_plan_modal.invalid_seats_error"))):P+L>v.m?(x(s.s.error(r.createElement("div",null,(0,c.tx)("change_annual_plan_modal.contact_support_to_purchase_more_seats_error",{maxAnnualSubscriptions:v.m,contactSupportLink:r.createElement("a",{href:`mailto:${(0,i.W4)()}`},(0,c.t)("change_annual_plan_modal.contact_support_link"))})))),F(k()?.design_quantity||k()?.quantity||0),D(k()?.whiteboard_quantity||0)):L+P>100?x(m.to({type:d.Mv,data:{numAnnualEditors:P+L,onConfirm:()=>{O(P,L)}}})):x(u.MV({teamId:e,annualQuantity:P,annualWhiteboardQuantity:L}))},onCancel:()=>{x(m.Ce())},dontClose:!0,disableConfirm:o,trackedConfirmationProperties:{teamId:e,userId:t??void 0,monthly_quantity_design:P,monthly_quantity_figjam:L}},r.createElement("br",null),(0,c.tx)("change_annual_plan_modal.change_annual_plan_grace_period.seat_rename"),r.createElement("br",null),r.createElement("br",null),(()=>{let e=a.currency,t=new y.vr(e),n=(0,f.He)(S.data,t.currency,g.G_.DESIGN),i=(0,f.He)(S.data,t.currency,g.G_.FIGJAM);return r.createElement(r.Fragment,null,(0,c.tx)("change_annual_plan_modal.instructions.seat_rename",{monthlyEditorCost:t.formatMoney(n,{showCents:!1}),editorProduct:(0,w.E)(g.Te.DESIGN),monthlyFigjamCost:t.formatMoney(i,{showCents:!1}),figJamProduct:(0,w.E)(g.Te.WHITEBOARD)}))})(),r.createElement("br",null),r.createElement("br",null),r.createElement(N,{editorType:h._Y.DESIGN,tempNumEditors:P,setTempEditorsValue:e=>F(e),dispatch:x}),r.createElement(r.Fragment,null,r.createElement("br",null),r.createElement("br",null),r.createElement(N,{editorType:h._Y.WHITEBOARD,tempNumEditors:L,setTempEditorsValue:e=>D(e),dispatch:x})),r.createElement("br",null),r.createElement("br",null),r.createElement("a",{className:"change_annual_plan_modal--link--n0jw2 blue_link--blueLink--9rlnd",onClick:()=>{x(m.to({type:I.V}))}},M?(0,c.t)("change_annual_plan_modal.remove_annual_plan"):(0,c.t)("change_annual_plan_modal.dont_renew_annual_plan"))))}function C(){let e=(0,b.ol)(),t=(0,n.d4)(e=>e.teamBilling.summary.currency),a=(0,n.d4)(e=>e.payment.submitPutAnnualQuantityPending),i=(0,n.wA)(),o=(0,p.N1)(p.Fq.TEAM_ADMIN_CONSOLE),[s]=(0,l.mI)(o),d=new y.vr(t),_=(0,f.He)(s.data,d.currency,g.G_.DESIGN),E=(0,f.He)(s.data,d.currency,g.G_.FIGJAM);return r.createElement(T.Rw,{title:(0,c.t)("change_annual_plan_modal.cancel_annual_plan_header"),confirmText:(0,c.t)("change_annual_plan_modal.confirm_cancel_annual_plan"),cancelText:(0,c.t)("change_annual_plan_modal.nevermind"),onConfirm:()=>{let t=e.id;i(u.MV({teamId:t,annualQuantity:0,annualWhiteboardQuantity:0}))},onCancel:()=>{i(m.to({type:I.X,data:{}}))},dontClose:!0,disableConfirm:a},r.createElement("br",null),r.createElement(r.Fragment,null,(0,c.tx)("change_annual_plan_modal.cancel_annual_plan_text.seat_rename",{monthlyEditorCost:d.formatMoney(_),monthlyFigJamEditorCost:d.formatMoney(E)})),r.createElement("br",null),r.createElement("br",null),(0,c.tx)("change_annual_plan_modal.cancel_annual_plan_subtext"))}},685399:(e,t,a)=>{a.r(t),a.d(t,{TeamChangePaymentModal:()=>y});var r=a(411855),n=a(188507),i=a(629019),l=a.n(i),o=a(981952),s=a(946689),c=a(493323),d=a(762638),m=a(939863),u=a(662275),_=a(843309),p=a(707465),g=a(668526),f=a(585878),E=a(512077),h=a(401331);function y({currency:e,customerInfo:t,defaultCountry:a,estimatedChargeCents:i,isReactivating:y,canSeeBillingAddressExp:v}){let b=y?(0,m.t)("change_payment.success.successfully_reactivated_subscription"):(0,m.t)("change_payment.success.successfully_updated_your_payment_method"),w=(0,n.d4)(e=>(0,p.Np)(e,{view:"teamAdminConsole",teamId:t.teamId,teamAdminConsoleViewTab:g.I.SETTINGS})),{createPaymentElement:T,unmountPaymentElement:I,savePayment:N,billingAddress:x,updateBillingAddress:C,nameOnPaymentMethod:S,setNameOnPaymentMethod:k,paymentMethodType:A,error:R}=(0,_.Op)({setupIntentParams:{redirect_url:w,subtotal_estimate:i,success_message:b,currency:e},paymentFlowSource:_.wn.PRO_CHANGE_PAYMENT,customerInfo:t,defaultCountry:a,currency:e,canSeeBillingAddressExp:v,isCheckout:!1}),[L,D]=r.useState(!1),[P,F]=r.useState(!1),[O,M]=r.useState(window.innerHeight),B=(0,n.wA)(),U=R?.code===_.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,V=()=>B(u.Ce());(0,o.P)(({height:e})=>{M(e)});let H=async e=>{e&&e.preventDefault(),F(!0),await N(),F(!1)};return r.createElement(f.XV,{title:v?(0,m.t)("change_payment.update_payment_details"):(0,m.t)("change_payment.enter_payment_method"),onClose:V,maxWidth:465,headerSize:"large"},r.createElement("div",{className:l()({[h.$J]:!L,[h.Un]:U})},r.createElement("form",{onSubmit:H},r.createElement("div",{className:h.KJ,style:{maxHeight:Math.min(O-49-65,652)}},L&&v&&r.createElement("div",{className:d.cx.mb16.$},r.createElement("label",{htmlFor:"updatePaymentDetails",className:d.cx.colorTextSecondary.$},(0,m.tx)("change_payment.update_payment_details_description"))),r.createElement(E.F,{createPaymentElement:T,unmountPaymentElement:I,billingAddress:x,updateBillingAddress:C,nameOnPaymentMethod:S,updateNameOnPaymentMethod:k,paymentMethodType:A,error:R,isCommunityCheckout:!1,paymentElementEventHandlers:{ready:()=>D(!0)},canSeeBillingAddressExp:v,isCheckout:!1})),L&&!U&&r.createElement("div",{className:h.UD},P&&r.createElement(c.kt,{className:h.u1}),r.createElement(s.tM,{onClick:V},(0,m.tx)("change_payment.cancel")),r.createElement(s.vd,{tabIndex:0,type:"submit",disabled:P},(0,m.tx)("change_payment.save")))),U&&r.createElement(s.tM,{onClick:V},(0,m.tx)("change_payment.close_window"))))}},165915:(e,t,a)=>{a.r(t),a.d(t,{ChangeVatGstIdModal:()=>y});var r=a(411855),n=a(188507),i=a(629019),l=a.n(i),o=a(915440),s=a(711525),c=a(946689),d=a(455057),m=a(939863),u=a(662275),_=a(99506),p=a(279453),g=a(585878),f=a(173067),E=a(209590);function h(e,t){return e&&"loaded"===t.status?t.data.org:e||"loaded"!==t.status?null:t.data.team}let y=r.memo(function(e){let t=(0,n.wA)(),{updateVatGstId:a}=e,i=!!e.org?.id,y=(0,o.Rs)(p.Wt6,{orgId:e.org?.id||""},{enabled:i}),v=(0,o.Rs)(p.xS7,{teamId:e.team?.id||""},{enabled:!i}),b=i?y:v,w=h(i,b),T=w?.taxIdVerificationStatus,[I,N]=r.useState(),[x,C]=r.useState(""),[S,k]=r.useState(""),[A,R]=r.useState(!1),[L,D]=r.useState({country:"",state:""}),[P,F]=r.useState(!1);r.useEffect(()=>{if(!P&&"loaded"===b.status){let e=h(i,b),t=e?(0,s.oA)(e.taxInfo):null;C(e?.vatGstId||""),k(t?.regionalVatGstId||""),R(t?.canUpdateRegionalVatGst||!1),D({country:t?.country||"",state:t?.state||""}),F(!0)}},[i,b,P]);let O=()=>{t(u.Ce())};return r.createElement(g.XV,{onClose:O,title:(0,m.t)("change_vat_gst_id.input_id"),minWidth:344,maxWidth:344,fixedTop:!0},I&&r.createElement("div",{className:"change_vat_gst_id_modal--errorBanner--sqxNt","data-testid":"change-vat-gst-id-error"},r.createElement(d._,{color:d.S.ERROR,rounded:!1,text:I})),T===_.kI.VERIFIED&&r.createElement("div",{"data-testid":"change-vat-gst-id-information"},r.createElement(d._,{color:d.S.INFORMATION,rounded:!1,text:(0,m.t)("change_vat_gst_id.tax_id_verification_succeeded")})),T===_.kI.UNVERIFIED&&r.createElement("div",{"data-testid":"change-vat-gst-id-warning"},r.createElement(d._,{color:d.S.WARNING,rounded:!1,text:(0,m.t)("change_vat_gst_id.tax_id_verification_failed")})),r.createElement("div",{className:E.Dy},r.createElement("p",{className:"change_vat_gst_id_modal--description--6gdSL"},(0,m.tx)("change_vat_gst_id.description")),r.createElement("form",{onSubmit:e=>{e.preventDefault(),a(x,e=>N(e),A?S:"").then(e=>{e&&O()})},"data-testid":"change-vat-form"},P&&r.createElement(f.A,{onChange:C,country:L.country,vatId:x,isCommunityCheckout:!1}),A&&r.createElement(f.A,{onChange:k,country:L.country,region:L.state,vatId:S,isCommunityCheckout:!1,variant:"regional"}),r.createElement("div",{className:l()(E.v0,E.hF)},r.createElement(c.vd,{className:E.pL,type:"submit",disabled:!P},(0,m.tx)("change_vat_gst_id.save_id"))))))})},815622:(e,t,a)=>{a.r(t),a.d(t,{ConfirmDowngradeModal:()=>g});var r=a(411855),n=a(188507),i=a(629019),l=a.n(i),o=a(776250),s=a(946689),c=a(939863),d=a(662275),m=a(995852),u=a(585878),_=a(209590);let p=r.memo(function(e){let t=(0,n.wA)(),{teamId:a,billingEndDate:i,exitSurveyData:p}=e.modalShown.data,g=e.teams[a],f=()=>{t(d.Ce())},E=i?(0,c.tx)("confirm_downgrade.at_the_end_of_your_current_billing_period_team_name_will_be_downgraded_to_our_free_starter_plan",{teamName:g.name,billingEndDate:i}):(0,c.tx)("confirm_downgrade.on_your_next_billing_date_team_name_will_be_downgraded_to_our_free_starter_plan",{teamName:g.name});return r.createElement(u.XV,{onClose:f,title:(0,c.t)("confirm_downgrade.cancel_professional_plan"),minWidth:344,maxWidth:344,dataTestId:"downgrade-confirmation-modal",fixedTop:!0},r.createElement("div",{className:_.Dy},r.createElement("p",null,E),r.createElement("div",{className:l()(_.v0,_.hF)},r.createElement(s.tM,{onClick:f},(0,c.tx)("confirm_downgrade.go_back")),r.createElement(s.qM,{className:_.pL,onClick:()=>{p&&(0,o.sx)("Team Downgrade Survey",{...p,selectedOptions:p.selectedOptions.map(e=>JSON.stringify(e))}),t(d.Ce()),t(m.Wc({teamId:a}))}},(0,c.tx)("confirm_downgrade.finish_cancellation")))))});function g(e){return r.createElement(p,{...e})}},888881:(e,t,a)=>{a.r(t),a.d(t,{ProCostBreakdown:()=>h,ProCostBreakdownModal:()=>y});var r=a(411855),n=a(188507),i=a(752553),l=a(939863),o=a(662275),s=a(710667),c=a(720647),d=a(978779),m=a(820113),u=a(585878);let _="cost_breakdown--row--6-9Kd",p="cost_breakdown--primary--miID8",g="cost_breakdown--secondary---4QGG",f="cost_breakdown--currency--gqS1S";function E(e){let t=new m.vr(e.currency),a=t.formatMoney(e.whiteboardCostAnnual),n=t.formatMoney(e.whiteboardCostMonthly),i=(0,l.t)("org_admin_settings.cost_breakdown.seats",{seats:e.whiteboardSeatsMonthly}),o=(0,l.t)("org_admin_settings.cost_breakdown.seats",{seats:e.whiteboardSeatsAnnual}),s=(0,l.t)("org_admin_settings.cost_breakdown.12_months");return r.createElement(r.Fragment,null,e.whiteboardSeatsAnnual>0&&r.createElement("div",{className:_,"data-testid":"cost-breakdown-row-figjam-annual"},r.createElement("div",{className:p},r.createElement("span",null,(0,l.tx)("org_admin_settings.cost_breakdown.whiteboard_seats_annual_annual_fig_jam_editor_seats.seat_rename",{whiteboardSeatsAnnual:e.whiteboardSeatsAnnual})),r.createElement("span",{className:f},a)),r.createElement("div",{className:g},(0,l.tx)("org_admin_settings.cost_breakdown.cost_breakdown_string_triple",{cost:t.formatMoney(e.annualMonthlyAmount),seats:o,numMonths:s}))),e.whiteboardSeatsMonthly>0&&r.createElement("div",{className:_,"data-testid":"cost-breakdown-row-figjam-monthly"},r.createElement("div",{className:p},r.createElement("span",null,(0,l.tx)("org_admin_settings.cost_breakdown.whiteboard_seats_monthly_monthly_fig_jam_editor_seats.seat_rename",{whiteboardSeatsMonthly:e.whiteboardSeatsMonthly})),r.createElement("span",{className:f},n)),r.createElement("div",{className:g},(0,l.tx)("org_admin_settings.cost_breakdown.cost_breakdown_string_double",{cost:t.formatMoney(e.monthlyAmount),seats:i}))))}function h(e){let t=e.currency,a=new m.vr(t),n=e.nDesignEditorsMonthly,i=e.nDesignEditorsAnnual,o=e.nWhiteboardEditorsMonthly,s=e.nWhiteboardEditorsAnnual,c=e.nFigjamEditors,d=e.whiteboardCotermUpgrades,u=d?.amount||0,h=a.formatMoney(u),y=e.designCotermUpgrades,v=12*e.annualMonthlyDesignAmount*e.nDesignEditorsAnnual,b=e.monthlyDesignAmount*e.nDesignEditorsMonthly,w=v+b,T=a.formatMoney(v),I=a.formatMoney(b),N=y?.amount||0,x=a.formatMoney(N),C=12*e.annualMonthlyFigjamAmount*s,S=e.monthlyFigjamAmount*o,k=C+S,A=a.formatMoney(w+k+N+u),R=(0,l.t)("org_admin_settings.cost_breakdown.seats",{seats:n}),L=(0,l.t)("org_admin_settings.cost_breakdown.seats",{seats:i}),D=(0,l.t)("org_admin_settings.cost_breakdown.12_months");return r.createElement("div",{className:"cost_breakdown--container--wwGb0"},i>0&&r.createElement("div",{className:_,"data-testid":"cost-breakdown-row-design-annual"},r.createElement("div",{className:p},r.createElement("span",null,(0,l.tx)("org_admin_settings.cost_breakdown.design_seats_annual_annual_design_editor_seats.seat_rename",{designSeatsAnnual:i})),r.createElement("span",{className:f},T)),r.createElement("div",{className:g},(0,l.tx)("org_admin_settings.cost_breakdown.cost_breakdown_string_triple",{cost:a.formatMoney(e.annualMonthlyDesignAmount),seats:L,numMonths:D}))),n>0&&r.createElement("div",{className:_,"data-testid":"cost-breakdown-row-design-monthly"},r.createElement("div",{className:p},r.createElement("span",null,(0,l.tx)("org_admin_settings.cost_breakdown.design_seats_monthly_monthly_design_editor_seats.seat_rename",{designSeatsMonthly:n})),r.createElement("span",{className:f},I)),r.createElement("div",{className:g},(0,l.tx)("org_admin_settings.cost_breakdown.cost_breakdown_string_double",{cost:a.formatMoney(e.monthlyDesignAmount),seats:R}))),r.createElement(E,{whiteboardSeatsMonthly:o,whiteboardSeatsAnnual:s,whiteboardCostMonthly:S,whiteboardCostAnnual:C,figjamSeats:c,currency:t,annualMonthlyAmount:e.annualMonthlyFigjamAmount,monthlyAmount:e.monthlyFigjamAmount}),y&&y.quantity>0&&y.amount>0&&r.createElement("div",{className:_},r.createElement("div",{className:p},r.createElement("span",null,(0,l.tx)("org_admin_settings.cost_breakdown.design_seats_monthly_cotermed_design_editor_seats.seat_rename",{seatsCotermed:y.quantity})),r.createElement("span",{className:f},x))),d&&d.quantity>0&&d.amount>0&&r.createElement("div",{className:_},r.createElement("div",{className:p},r.createElement("span",null,(0,l.tx)("org_admin_settings.cost_breakdown.whiteboard_seats_monthly_cotermed_whiteboard_editor_seats.seat_rename",{seatsCotermed:d.quantity})),r.createElement("span",{className:f},h))),r.createElement("div",{className:"cost_breakdown--divider--GRAn-"}),r.createElement("div",{className:"cost_breakdown--total--a6sZV"},r.createElement("div",null,(0,l.tx)("org_admin_settings.cost_breakdown.total")),r.createElement("div",{className:f},A)))}function y(e){let t=(0,n.wA)(),a=(0,s.N1)(s.Fq.TEAM_ADMIN_CONSOLE),[l]=(0,i.mI)(a),_=new m.vr(e.currency),p=(0,d.He)(l.data,_.currency,c.G_.DESIGN),g=(0,d.He)(l.data,_.currency,c.G_.FIGJAM),f=(0,d.G7)(l.data,_.currency,c.G_.DESIGN),E=(0,d.G7)(l.data,_.currency,c.G_.FIGJAM);return r.createElement(u.XV,{onClose:()=>t(o.Ce()),title:e.title,minWidth:341,maxWidth:341},r.createElement(h,{currency:e.currency,nDesignEditorsAnnual:e.nDesignEditorsAnnual,nDesignEditorsMonthly:e.nDesignEditorsMonthly,nFigjamEditors:e.nFigjamEditors,nWhiteboardEditorsAnnual:e.nWhiteboardEditorsAnnual,nWhiteboardEditorsMonthly:e.nWhiteboardEditorsMonthly,designCotermUpgrades:e.designCotermUpgrades,whiteboardCotermUpgrades:e.whiteboardCotermUpgrades,monthlyDesignAmount:p,monthlyFigjamAmount:g,annualMonthlyDesignAmount:f,annualMonthlyFigjamAmount:E}))}},143793:(e,t,a)=>{a.r(t),a.d(t,{TeamPermissionsModal:()=>eC});var r=a(411855),n=a(188507),i=a(729064),l=a(776250),o=a(935283),s=a(367253),c=a(966712),d=a(498750),m=a(915440),u=a(742808),_=a(218881),p=a(493323),g=a(939863),f=a(824520),E=a(761273),h=a(662275),y=a(672517),v=a(594901),b=a(860178),w=a(99506),T=a(279453),I=a(691205),N=a(643067),x=a(243987),C=a(147206),S=a(297536),k=a(428467),A=a(426197),R=a(389643),L=a(206193),D=a(668860),P=a(501256),F=a(613077),O=a(585878),M=a(542059),B=a(268787),U=a(800535),V=a(479842),H=a(860038),W=a(647501),j=a(880618),G=a(794094),$=a(574176),z=a(558867),Y=a(881816),K=a(299410),Q=a(515471),X=a(553551),q=a(761382),J=a(68188);function Z(e){let t=e.canAdmin,a=r.createElement($.B,{className:Q.wk,svg:q.A});e.sharingAudienceControl===w.PQ.ORG_EDIT||e.sharingAudienceControl===w.PQ.ORG_VIEW?a=r.createElement("div",{className:Q.AA},r.createElement($.B,{svg:J.A})):(e.sharingAudienceControl===w.PQ.WORKSPACE_EDIT||e.sharingAudienceControl===w.PQ.WORKSPACE_VIEW)&&(a=r.createElement("div",{className:Q.AA},e.workspace&&r.createElement(z.z6,{entity:e.workspace,size:24})));let n=e.sharingAudienceControl===w.PQ.INVITE_ONLY&&e.isTeamOrgBrowsable,i=n?Q.Fl:Q.Jt;return r.createElement("div",{className:t?i:Q.zn,onClick:t?()=>e.changeModalView(1):void 0,role:"button","data-onboarding-key":Y.F,tabIndex:0},a,r.createElement("div",{className:Q.$S},r.createElement("div",null,e.sharingAudienceControl&&(0,K.ET)(e.sharingAudienceControl,e.org,e.workspace),n&&r.createElement("div",{className:Q.JZ},(0,g.t)("team_creation.anyone_can_find_this_team"))),e.org&&r.createElement("div",{className:Q.j7,"data-onboarding-key":Y.F},e.sharingAudienceControl&&(0,K.mi)(e.sharingAudienceControl),t&&r.createElement($.B,{svg:X.A,className:Q.$w}),t&&r.createElement(Y.j,null))))}var ee=a(297666),et=a(799569),ea=a(268537),er=a(946689),en=a(738269),ei=a(331363),el=a(336599),eo=a(937890),es=a(498606),ec=a(237870),ed=a(720488),em=a(227795),eu=a(488578);let e_="team_join_link_permissions--loadedViewWrapperWithPaddingTop--VRkqb team_join_link_permissions--loadedViewWrapper--LjAIr";var ep=a(965358),eg=a(289298);let ef=(0,ee.s)((e,t,a)=>e(ei.do({teamId:t,level:a}))),eE=(0,n.Ng)((e,t)=>({teamJoinLinks:e.teamJoinLinks,loadingState:e.loadingState,canAdmin:(0,k.hasAdminRoleAccessOnTeam)(t.teamId,e),canEdit:(0,k.hasEditorRoleAccessOnTeam)(t.teamId,e)}),null,(e,t,a)=>({isInLoadingState:function(e,t,a){let r=!(0,el.VP)(t,(0,eo.OL)(e))&&!(0,el.aF)(t,(0,eo.OL)(e))&&!a;return(0,el.VP)(t,(0,eo.OL)(e))||(0,el.VP)(t,ei.ui.loadingKeyForPayload({teamId:e}))||(0,el.VP)(t,(0,eo._M)(e))||r}(a.teamId,e.loadingState,e.teamJoinLinks),...e,...a,...t}))(function(e){let{dispatch:t,teamId:a,initialInviteLevel:n,canAdmin:i,canEdit:l}=e,[o,s]=(0,r.useState)(n);if((0,r.useEffect)(()=>(ef(t,a,n),()=>{t(ei.F1(null))}),[t,a,n]),!e.isInLoadingState&&!e.teamJoinLinks||!i&&e.teamJoinLinks?.disabled)return null;let c=l&&!!e.teamJoinLinks?.url;return r.createElement(r.Fragment,null,r.createElement("div",{style:c?{justifyContent:"space-between"}:{justifyContent:"flex-start",marginTop:"8px"},className:"team_join_link_permissions--inviteLinkTitleWrapper--LSkbL"},r.createElement("span",{className:"team_join_link_permissions--inviteHeader--80xpy"},(0,g.tx)("team_join_links.invite_link")),c&&r.createElement(eh,{dropdownShown:e.dropdownShown,resetInviteLinks:()=>{t(h.$O({type:eb,data:{resetLink:()=>{t(ei.Nw({teamId:a,level:o,shouldShowVisualBell:!0}))}}}))},disableInviteLinks:()=>t(ei.ui({teamId:a})),loading:e.isInLoadingState,canAdmin:i})),e.isInLoadingState||e.teamJoinLinks?.url?r.createElement(ey,{dropdownShown:e.dropdownShown,setLevel:e=>{o!==e&&(s(e),t(ei.do({teamId:a,level:e,shouldShowFailureMessage:!0,callbackOnFailure:()=>s(o)})))},currentLevel:o,url:e.isInLoadingState?void 0:e.teamJoinLinks?.url,addPaddingTop:!c,inviteLevels:l?[D.e6.VIEWER,D.e6.EDITOR]:[D.e6.VIEWER],teamId:e.teamId}):r.createElement(ev,{turnOnInviteLinks:()=>t(ei.Nw({teamId:a,level:o}))}))});function eh(e){let t=(0,n.wA)(),a="team-link-settings-dropdown",i=r.createRef(),l=()=>e.dropdownShown?.type===a;return r.createElement("div",null,r.createElement("div",{ref:i},r.createElement(em.YW,{svg:ep.A,"data-tooltip-type":es.Ib.TEXT,"data-tooltip":(0,g.t)("team_join_links.team_invite_link_settings"),onClick:()=>{let e=i.current?.getBoundingClientRect();l()?t(en.oB()):e&&t(en.j7({type:a,data:{targetRect:e}}))},onMouseDown:e=>e.stopPropagation(),selected:l(),disabled:e.loading})),l()&&r.createElement(ed.Cf,{targetRect:e.dropdownShown.data.targetRect,maxWidth:140,minWidth:140,lean:"left",propagateCloseClick:!0},r.createElement(ea.c$,{onClick:e.resetInviteLinks},(0,g.tx)("team_join_links.reset_invite_links")),e.canAdmin&&r.createElement(ea.c$,{onClick:e.disableInviteLinks},(0,g.tx)("team_join_links.turn_off_invite_links"))))}function ey(e){let t=(0,n.wA)(),a="join-link-permission-level-dropdown",i=e.currentLevel===D.e6.VIEWER?"28px":"-20px";return r.createElement("div",{className:e.addPaddingTop?e_:"team_join_link_permissions--loadedViewWrapper--LjAIr"},r.createElement("div",{className:"team_join_link_permissions--linkAndDropdown--dOdkB"},r.createElement("span",{className:"team_join_link_permissions--urlSection--fh6VF"},!e.url&&r.createElement(p.kt,null),e.url&&r.createElement("span",{className:"team_join_link_permissions--urlText--jcjRH ellipsis--ellipsis--Tjyfa"},e.url)),r.createElement("div",{onClick:r=>{r.stopPropagation(),e.url&&(e.dropdownShown?t(en.oB()):t(en.j7({type:a})))},className:"team_join_link_permissions--permissionLevelDropdown--xuQLz role_row--select--6VpSS"},r.createElement("span",null,(0,C.C1)(e.currentLevel)),r.createElement("div",{className:"team_join_link_permissions--caretWrapper--OXpki role_row--caretWrapper--P1Mak"},r.createElement($.B,{svg:eg.A})),e.dropdownShown&&e.dropdownShown.type===a&&r.createElement(ea.ms,{className:"team_join_link_permissions--permissionLevelDropdownOptions--cgu-T",style:{marginTop:i}},e.inviteLevels.map((t,a)=>r.createElement(ea.MM,{key:a,checked:t===e.currentLevel,onClick:()=>e.setLevel(t)},(0,C.C1)(t)))))),r.createElement(er.$$,{className:"team_join_link_permissions--copyLinkButton--X-8QT",onClick:()=>{e.url&&t(ei.LN({teamId:e.teamId,url:e.url,source:ei.Kq.TEAM_PERMISSIONS_MODAL}))},disabled:!e.url},(0,g.tx)("team_join_links.copy_link")))}function ev(e){return r.createElement("div",{className:e_},(0,g.tx)("team_join_links.share_a_secret_link_people_can_use_to_join_your_team")," ",r.createElement(er.Us,{onClick:e.turnOnInviteLinks,trusted:!0},(0,g.tx)("team_join_links.turn_on_invite_links")))}let eb="RESET_LINKS_CONFIRMATION_MODAL";(0,ec.Ju)(function(e){let t=(0,n.wA)();return r.createElement(eu.aF,{className:"team_join_link_permissions--confirmationModal--iwmpk",size:288},r.createElement("div",{className:"team_join_link_permissions--titleAndCloseButton--5XqxG"},r.createElement(et.s_,{dispatch:t}),r.createElement("div",{className:"team_join_link_permissions--confirmationModalTitle--Htxwx"},r.createElement("span",null,(0,g.tx)("team_join_links.reset_invite_links")))),r.createElement("p",{className:"team_join_link_permissions--confirmationModalBody--qUqac"},(0,g.tx)("team_join_links.modal_description")),r.createElement("div",{className:"team_join_link_permissions--confirmationModalButtonContainer--rsNVu"},r.createElement(er.tM,{onClick:()=>t(h.Lo())},(0,g.tx)("team_join_links.cancel")),r.createElement(er.qM,{onClick:()=>{e.resetLink(),t(h.Lo())}},(0,g.tx)("team_join_links.reset_links"))))},eb);var ew=a(839957),eT=a(1700),eI=a(225530);let eN={domains:[],isFetching:!1,fetchedAt:null},ex=r.memo(function({roles:e,virtualItems:t,totalSize:a,user:n,parentOrg:i,permissionState:l,team:o,teamOrgDomains:s,canMakeAdmin:c,virtualized:d}){let m=r.useMemo(()=>({team:o,type:w.vt.TEAM}),[o]);return d?r.createElement("div",{style:{height:`${a}px`,position:"relative"}},t.map(t=>{let a=t.index,d=e[a];return r.createElement(ew.O,{key:`role-row-${a}`,role:d,user:n,currentUserOrgId:i?.id??null,isOwnerOfResource:(0,k.isResourceOwner)(n.id,o.id,w.vt.TEAM,l.roles),isOrgUser:!!d.org_user,currentOrg:i,resourceName:o.name,resource:m,canEditRole:(0,k.canEditTeamRole)(d,l),canMakeAdmin:c,readOnlyOverrideWarningMessage:null,orgDomains:s,inSharingClarity:!0,virtualRowItem:t})})):r.createElement(r.Fragment,null,e.map((e,t)=>r.createElement(ew.O,{key:`role-row-${t}`,role:e,user:n,currentUserOrgId:i?.id??null,isOwnerOfResource:(0,k.isResourceOwner)(n.id,o.id,w.vt.TEAM,l.roles),isOrgUser:!!e.org_user,currentOrg:i,resourceName:o.name,resource:m,canEditRole:(0,k.canEditTeamRole)(e,l),canMakeAdmin:c,readOnlyOverrideWarningMessage:null,orgDomains:s,inSharingClarity:!0})))});function eC({teamId:e,initialInviteLevel:t,prepopulateEmail:a,initialView:$}){let z,Y=(0,n.wA)(),K=(0,b.Pc)(),Q=(0,n.d4)(e=>e.autocomplete),X=(0,n.d4)(e=>e.contacts),q=(0,n.d4)(e=>e.dropdownShown),J=(0,v.FC)(),ee=I.M4.Team.useValue(e).data,et=(0,m.Rs)(T.GyZ,{teamId:e});(0,u.I)("loaded"===et.status,e=>{(0,l.sx)("share_modal_latency",{latency_ms:e,modal_type:"team"},{forwardToDatadog:!0})});let ea=(0,r.useMemo)(()=>(0,S.X)(et),[et]),er=ea&&ea.org,en=ea&&ea.teamSharingSettings,ei=ea&&ea.orgUser,el=er?er.id:null,eo=ea&&ea.workspace,es=er&&er.org_domains?er.org_domains:eN,ec=r.useMemo(()=>{let t=J.roles.byTeamId[e]||{};return Object.keys(t).map(e=>t[e]).sort((e,t)=>e.pending===t.pending?(0,eT.E4)(e,X).toLocaleLowerCase()<(0,eT.E4)(t,X).toLocaleLowerCase()?-1:1:e.pending?1:-1)},[J.roles.byTeamId,e,X]),ed=ea&&ea.pendingTeamRoleRequests?ea.pendingTeamRoleRequests:[];(0,r.useEffect)(()=>{Y(E.um())},[Y]);let em=e=>t||(!(0,x.w5)(ee)&&e?D.e6.EDITOR:D.e6.VIEWER),[eu,e_]=(0,r.useState)(()=>em((0,k.canEditTeam)(e,J))),ep=(0,r.useCallback)(e=>(0,S.yI)(e,X.usersByEmail[e]||e,er,es,K.email),[X.usersByEmail,es,K.email,er]);(0,r.useEffect)(()=>{if(a){let e=ep(a);Y(f.hZ({tokens:[e],inputValue:"",errorMessage:""}))}},[a,ep,Y]);let eg=e=>{e_(e)},ef=e=>(0,S.t9)(e,er,es),eh=t=>{let a=(0,P.Z)(t);Y((0,A.rq)({emails:a,resourceType:w.vt.TEAM,resourceIdOrKey:e,level:eu,emailsToExclude:(0,R.bp)(X.usersByEmail,K,ec),onSuccess:({invites:e,over_editor_limit:t})=>{if(eu>=D.e6.EDITOR&&t){let t=(0,k.getResourceTeamId)(e[0],J),a=t&&{...J.teams[t],canEdit:(0,k.canEditTeam)(t,J),canAdmin:(0,k.canAdminTeam)(t,J)};Y(h.to({type:M.oE,data:{team:a,invitesSent:e.length,editorType:null,upsellSource:L.b.ADD_EDITOR}}));return}},source:"team_share_modal",orgName:er?er.name:void 0}))},ey=e=>{if(er&&er.domain_capture&&es&&es.domains.length>0){let t=(0,P.Z)(e).filter(e=>(0,s.xf)(e)&&!(0,N.H_)(es.domains,e));if(er?.invite_whitelist_guest_invite_setting==null&&t.length>0){Y(h.to({type:V.F,data:{emails:t,onConfirm:()=>{eh(e)},popStack:!0,orgName:er.name}}));return}}eh(e)},ev=()=>{Y(h.Ce()),Y(f.cL())},eb=e=>{e.keyCode!==d.Uz.ESCAPE&&e.stopPropagation()},ew=(0,k.canEditTeam)(e,J),eC=(0,k.canViewTeam)(e,J),eS=(0,k.canAdminTeam)(e,J),[ek,eA]=r.useState($||0),eR=()=>0===ek?r.createElement("div",{className:eI.DA},r.createElement("p",null,(0,g.tx)("team_view.team_permissions_modal.share_this_team"))):r.createElement(W.w,{title:(0,g.t)("team_view.team_permissions_modal.share_settings"),onClick:()=>eA(0)}),eL=!!ee&&!ee.org_id,eD=!1,eP=(0,_.I7)("exp_org_team_sharing_suggestions");el&&(eD=!!eP.getConfig().getValue("enabled",!1));let{sharingSuggestions:eF,sharingSuggestionIdsToExclude:eO,sharingSuggestionEmailsToExclude:eM}=(0,j.$)({orgId:el,teamId:e,enabled:eD,contacts:X.usersByEmail,roles:ec,user:K,autocompleteTokens:Q.tokens}),eB=r.useCallback(()=>36,[]),eU=r.useRef(null),eV=(0,i.z)({size:ec.length,parentRef:eU,estimateSize:eB,overscan:10,paddingStart:0});return z=ee?0===ek?(()=>{if(!ea)return r.createElement("div",{className:eI.Lq},r.createElement(p.qc,null));let t=[];return eS&&t.push(D.e6.ADMIN),ew&&t.push(D.e6.EDITOR),eC&&t.push(D.e6.VIEWER),(0,o.KF)(t.length>0,"there should be at least one role (the user's own)"),r.createElement(r.Fragment,null,r.createElement("div",{key:"container",className:eI.SS,onKeyDown:eb},eL&&r.createElement(r.Fragment,null,r.createElement(eE,{teamId:e,dropdownShown:q,initialInviteLevel:em(ew)}),r.createElement("div",{className:eI.Vq},(0,g.tx)("team_view.team_permissions_modal.invite_by_email"))),!!ea?.canAdmin&&r.createElement(H.$i,{teamId:e,teamRoleRequests:ed,teamRoles:ec}),(0,U.r)(K)?r.createElement(U.X,{resourceType:"team"}):r.createElement(r.Fragment,null,r.createElement("div",{className:eI.Zk},r.createElement(F.e,{autocomplete:Q,buttonText:(0,g.t)("team_view.team_permissions_modal.invite"),dispatch:Y,dropdownKey:"permissions-invite-dropdown",dropdownShown:q,hideDropdownOnEmpty:!0,inviteLevel:eu,getSelectText:C.C1,onInviteLevelChange:eg,options:t,onSubmit:ey,searchResultToken:ef,fetchAsyncSearchResults:t=>(0,R.Wj)(t,X.usersByEmail,K,ec,el,e,null,ei?.permission===w._D.GUEST),validateToken:ep,TokenComponent:B.g,SearchResultComponent:B.o,joinLinkShown:eL,shouldAutoFocus:!eL,onHideModal:ev,placeholderText:(0,g.t)("team_creation.add_a_name_or_email")})),eD&&r.createElement(j.t,{suggestions:eF??void 0,autocomplete:Q,searchResultToken:ef,resourceType:"team",resourceId:e,idsToExclude:eO??void 0,emailsToExclude:eM??void 0})),er&&r.createElement("div",{className:eI.st,ref:eU},r.createElement("div",{className:eI.d3},r.createElement("div",{className:eI.eF},(0,g.t)("file_permissions_modal.who_has_access")),r.createElement(Z,{team:ee,workspace:eo,org:er,changeModalView:eA,sharingAudienceControl:en?.sharingAudienceControl,isTeamOrgBrowsable:en?.orgBrowsable,canAdmin:!!ea?.canAdmin}),r.createElement(ex,{roles:ec,...(0,c.kc)().team_share_modal_virtualize?{virtualized:!0,virtualItems:eV.virtualItems,totalSize:eV.totalSize}:{virtualized:!1},user:K,parentOrg:er,permissionState:J,team:ee,teamOrgDomains:es,canMakeAdmin:!!ea?.canAdmin})))))})():er?en&&r.createElement(G.nH,{team:ee,workspace:eo||void 0,org:er,teamSharingSettings:en,hideModal:ev,goBack:()=>eA(0)}):r.createElement(r.Fragment,null):r.createElement(p.qc,null),r.createElement(y.fu,{name:"Share Modal",properties:{resourceType:w.vt.TEAM,resourceId:e}},r.createElement(O.XV,{title:r.createElement(r.Fragment,null,eR()),maxWidth:eL?484:S.k4,fixedTop:!0,onClose:ev},z))}},937106:(e,t,a)=>{a.r(t),a.d(t,{TeamRenameModal:()=>c});var r=a(411855),n=a(188507),i=a(939863),l=a(964258),o=a(851363),s=a(782174);function c({team:e}){let t=(0,n.wA)();return r.createElement(s.c,{initialName:e.name,maxLength:o.qg,placeholder:(0,i.t)("resource_rename_modal.team.placeholder"),submitText:(0,i.t)("resource_rename_modal.team.submit"),onRename:a=>t((0,l.IA)({team:e,name:a}))})}},453191:(e,t,a)=>{let r;a.r(t),a.d(t,{FileBrowserView:()=>NM});var n,i,l,o=a(411855),s=a(188507),c=a(627776),d=a(517333),m=a(737947),u=a(320063),_=a(358145),p=a(966712),g=a(752553),f=a(860601),E=a(563706),h=a(218881),y=a(37153),v=a(394802),b=a(612670),w=a(708833),T=a(805785),I=a(335986),N=a(702701),x=a(935283),C=a(374626),S=a(680140),k=a(762638),A=a(939863),R=a(809840),L=a(243058),D=a(498750),P=a(192437),F=a(629019),O=a.n(F),M=a(459401),B=a(448169),U=a(172088),V=a(776250),H=a(650322),W=a(498480),j=a(413695),G=a(67294),$=a(134279),z=a(172115),Y=a(796933),K=a(296447),Q=a(896474),X=a(396147),q=a(138020),J=a(915440),Z=a(404090),ee=a(279453);function et(e){let{getConfig:t}=(0,h.I7)("exp_all_admin_request_dash"),a=(0,J.Rs)(ee.HpJ,{orgId:e.planId},{enabled:e.planType===X.ps.ORG}),r=!!("loaded"===a.status&&a.data?.org?.bigmaEnabledAt)&&t().get("enabled",!1)&&!!e.isOrgAdmin,n=(0,X.ZY)({isIntendedAudience:!!(e.planType===X.ps.ORG&&"loaded"===a.status&&a.data?.org?.bigmaEnabledAt)&&!1===e.isOrgAdmin}),i=e.isOrgAdmin?[null,...e.managedBillingGroups??[]]:e.managedBillingGroups,l=(0,J.Rs)(ee.KR2,{planType:e.planType,planId:e.planId,filterParams:r||n?JSON.stringify({billing_group_ids:i}):e.isOrgAdmin?JSON.stringify({billing_group_ids:[null]}):JSON.stringify({billing_group_ids:[]})}),s=(0,X.IA)({planType:e.planType,planId:e.planId,isOrgAdmin:e.isOrgAdmin}),c=e.planType===X.ps.TEAM||e.isOrgAdmin,d="loaded"===l.status&&l.data.adminDashboardRequestsTotalCount.status===q.tT.Loaded&&("loaded"===a.status||e.planType===X.ps.TEAM)?l.data.adminDashboardRequestsTotalCount.data?.rowCount:void 0,m=d??0,[u,_]=(0,C.fp)(Z.Y),[p,g]=(0,C.fp)(Z._),f=r?[e.planType,e.planId,!0].toString():[e.planType,e.planId].toString();o.useEffect(()=>{let t=e.isDataLoaded&&null!==s;if(d&&(t||!c)){let t={...u};t[f]=m,_(t);let a={...p};a[f]=!!(s||e.showDevModeOptIn),g(a)}return()=>{let e={...u};delete e[f],_(e);let t={...p};delete t[f],g(t)}},[e.isDataLoaded,d,f,e.showDevModeOptIn,s]);let E=e.showDevModeOptIn||p[f]?1:0,y=(u[f]??0)+(e.billingStatusCount||0)+(e.taxStatusCount||0)+E;if(y<1)return null;let v=W.zE.DEFAULT;return e.billingStatusCount||e.taxStatusCount||E?v=W.zE.WARNING:e.isSelected&&(v=W.zE.LIGHT),void 0!==d&&y>0&&e.isDataLoaded&&(null!==s||!c)?o.createElement(W.Ex,{text:y.toString(),color:v,className:v===W.zE.DEFAULT?k.cx.mr0.colorText.colorBgSelectedSecondary.$:k.cx.mr0.$,dataTestId:"admin-notifications-badge"}):null}var ea=a(738269),er=a(243987),en=a(428467),ei=a(498606),el=a(227795),eo=a(376783),es=a(131043);function ec(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.teams)[e.team.id],r=o.useCallback(r=>{r.stopPropagation(),t(ea.$T({view:"teamAdminConsole",teamId:e.team.id,isProTeam:a?.pro_team})),(0,V.sx)("Admin Console Opened",{trackingContext:e.trackingContextName,entryPoint:"sidebar"})},[t,e.team,e.trackingContextName,a?.pro_team]);return o.createElement(el.Me,{svg:es.A,onClick:r,"data-tooltip-type":ei.Ib.TEXT,"data-tooltip":(0,A.t)("sidebar.admin_console"),className:"admin_console_button--button--O4Rxd addition_button--button--X9H6b"})}function ed(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.currentTeamId),r=(0,s.d4)(e=>e.teams),n=(0,s.d4)(en.getPermissionsState);if(!a)return null;let i=r[a];if(!(0,en.hasAdminRoleAccessOnTeam)(a,n)||!i||!(0,er.w5)(i))return null;let l=e.selectedView&&"teamAdminConsole"===e.selectedView.view,c=o.createElement(et,{planType:X.ps.TEAM,planId:a,isSelected:l,isDataLoaded:!0,isOrgAdmin:!1});return o.createElement(eo.Z,{isSelected:l,onClick:()=>{t(ea.$T({view:"teamAdminConsole",teamId:a,isProTeam:i.pro_team})),t(ea.Oe({clickedResourceType:"teamAdminSettings",resourceIdOrKey:i.id}))},"data-onboarding-key":"PRO_ADMIN_SETTINGS_LINK_ONBOARING_KEY","data-testid":"admin-settings-link",icon:o.createElement(Q.In,{icon:"settings-16"}),text:o.createElement(R.E,{truncate:!0},(0,A.tx)("sidebar.admin_dashboard")),badge:i?.pro_team?c:void 0})}var em=a(365879),eu=a(145586),e_=a(507877),ep=a(662275),eg=a(672517),ef=a(385111),eE=a(742809),eh=a(723245),ey=a(964258),ev=a(318812),eb=a(694687),ew=a(594901),eT=a(7e3),eI=a(611978),eN=a(860178),ex=a(99506),eC=a(147206),eS=a(746869),ek=a(389643),eA=a(206193),eR=a(731078),eL=a(668860),eD=a(143678),eP=a(266431);function eF(){return o.createElement(W.Ex,{color:W.zE.INFORMATIONAL,text:(0,A.t)("team_list.pro_trial"),className:"pro_trials_badge--proTrialsBadge--HmAFD team_link--freeBadge--ynTW7 team_link--badge--Ou6oy"})}var eO=a(454542),eM=a(123948);let eB="team_link--lockedBadge--rfbIf team_link--badge--Ou6oy",eU="team_link--badgeButton--NRkT9",eV="team_link--teamWarningIcon--eC3Yz";function eH(e){let t;let a=(0,s.wA)(),r=(0,eN.iZ)(),n=(0,eI._6)(),i=(0,ev.Um)(),l=(0,eb.dq)(),c=(0,ew.FC)(),d=(0,s.d4)(e=>e.teams),m=(0,s.d4)(e=>e.teamRoleRequests),u=(0,s.d4)(e=>e.avatarEditorState),_=(0,s.d4)(e=>e.renamingNavTeamWithId),[p,g]=o.useState(!1),f=e.team,E=function(e,t){if(e&&e.type===Y.RQ&&e.data.teamId in t)return t[e.data.teamId]}(i,d),h=n&&"team"===n.view&&n.teamId===f.id&&_!==f.id;E&&E.id===f.id&&(t="team_link--contextSelectedTeam--Q2cQV team_link--team--qXgRE sidebar--sidebarSection---c9jn text--fontPos11--2LvXf text--_fontBase--QdLsd");let y=(0,en.hasAdminRoleAccessOnTeam)(f.id,c),v=(0,en.hasEditorRoleAccessOnTeam)(f.id,c),b=(0,en.canEditTeam)(f.id,c),w=_===f.id,T=(()=>{let t=d[e.team.id];return!!(t?.restrictions_list?.includes(ex.P4.FILES_LIMITED_LEGACY)||t?.restrictions_list?.includes(ex.P4.WHITEBOARD_FILES_LIMITED_BETA))})(),I=(0,er.oc)(f.id,c),N=!w&&!(0,eC.R$)(r,l)&&p&&!(T||I),x=!w&&y&&(0,er.XX)(e.team)&&!e.team.orgId,C={showReminder:!1,showAccessRestricted:!1};return c.user&&(C=(0,H.GU)(c.userEduGracePeriods,(0,H.cn)(c.user),f.id,!!f.studentTeamAt)),o.createElement("div",{onContextMenu:t=>{t.stopPropagation(),t.preventDefault(),e.team&&(0,ek.xN)(e.team.id,{dispatch:a});let r={top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1};a(ea.j7({type:Y.RQ,data:{teamId:e.team.id,targetRect:r}}))},onMouseOver:()=>{g(!0)},onMouseLeave:()=>{g(!1)},"data-onboarding-key":e.onboardingKey},o.createElement(eo.Z,{rowClassName:t,onClick:t=>{let r=e.team;a(e_.dm(r.id)),a(ea.Oe({clickedResourceType:"team",resourceIdOrKey:r.id}))},showGrabber:!1,isSelected:h,icon:o.createElement("div",{className:k.cx.h16.w16.flex.itemsCenter.justifyCenter.$},o.createElement(G.nl,{size:{imgSize:G.Pf.SMALL,fallbackSize:G.Pf.XSMALL},fallbackDisplay:$.U.HIDDEN,team:{...e.team,imgUrl:e.team.imgUrl||void 0}})),text:o.createElement("div",{className:k.cx.flex.flexRow.overflowHidden.flexGrow1.itemsCenter.$},w?o.createElement(j.p,{className:"team_link--teamNameInput--ZUj8d input--input--IPk3x",placeholderValue:f.name,submit:t=>{a((0,ey.IA)({team:e.team,name:t})),a(ea.tw({teamId:e.team.id}))},cancel:()=>{a(ea.tw({teamId:e.team.id}))}}):o.createElement(R.E,{truncate:!0},f.name),o.createElement(eW,{team:f,dispatch:a,permissionsState:c,selectedView:n,shouldShowFileLimitBadge:T,eduVerificationNeeded:C})),badge:o.createElement(o.Fragment,null,N&&o.createElement(em.I,{team:e.team,trackingContextName:eD.e0.FILE_BROWSER}),x&&o.createElement(ec,{team:e.team,trackingContextName:eD.e0.FILE_BROWSER}))}),!(0,eh.D6)(l)&&E&&E.id===f.id&&o.createElement(eu.W,{team:{...E,canEdit:b,canEditTeamContents:v},onRenameClick:e=>{a(ea.m({teamId:e.id}))},onChangeTeamIconClick:()=>{a((0,eE.o)({team:{...e.team,imgUrl:e.team.imgUrl||void 0}}))},teamRoleRequests:m}),y&&o.createElement("span",{className:"team_link--hiddenEditableAvatar--IO5YA"},o.createElement(eP.ER,{entity:{...f,imgUrl:f.imgUrl||void 0},entityType:eR.ck.TEAM,avatarEditorState:u,size:14,dispatch:a})))}function eW(e){let[t,a]=o.useState(!1),r=o.useRef(),n=(0,eT.TN)(e.team.id);if(e.shouldShowFileLimitBadge)return o.createElement(K.YR,{className:eV,dataTooltipType:ei.Ib.TEXT,dataTooltip:(0,A.t)("team_list.your_team_is_over_the_starter_plan_s_file_limit"),dataTooltipShowAbove:!0,dataTooltipMaxWidth:160,dataTooltipTimeout:50});let i=e.permissionsState,l=(0,en.getRolesForUserAndTeam)(e.team.id,i),s=(0,en.hasMinRole)(l,eL.e6.EDITOR);if(i.user&&(e.eduVerificationNeeded?.showReminder||e.eduVerificationNeeded?.showAccessRestricted)&&s){let t=o.createElement(K.YR,{className:eV,dataTooltipType:ei.Ib.TEXT,dataTooltip:(0,A.t)("team_list.verify_that_youre_a_student_or_educator"),dataTooltipShowAbove:!0,dataTooltipMaxWidth:160,dataTooltipTimeout:50});return e.eduVerificationNeeded?.showReminder&&(t=o.createElement(K.vW,{className:eV,dataTooltipType:ei.Ib.TEXT,dataTooltip:(0,A.t)("team_list.verify_that_youre_a_student_or_educator"),dataTooltipShowAbove:!0,dataTooltipMaxWidth:160,dataTooltipTimeout:50})),t}let c=i.user?.id,d=t=>{e.dispatch((0,ep.to)({type:z.V,data:{teamId:e.team.id,upsellSource:t}}))};if((0,er.oc)(e.team.id,e.permissionsState)){if(e.team.studentTeamAt&&(0,p.kc)().edu_onboarding_grace_period)return null;let t=eS.ng.canSeeProTrialExpiryUx(n);return(0,en.hasEditorRoleAccessOnTeam)(e.team.id,i)?t?o.createElement(eg.fu,{name:W._Y.PRO_TRIAL_EXPIRED,properties:{userId:c,teamId:e.team.id,...eS.ng.getTrackingProperties()}},o.createElement(eg.$z,{type:"button",onClick:()=>d(eA.b.PRO_TRIAL_UPSELL_MODAL),className:eU,trackingProperties:eS.ng.getTrackingProperties("Badge Clicked")},o.createElement("span",{"data-tooltip-type":ei.Ib.SPECIAL,"data-tooltip":eO.d,"data-tooltip-show-right":!0,"data-tooltip-max-width":128,"data-tooltip-timeout-delay":50},o.createElement(W.Ex,{color:W.zE.WARNING,text:(0,A.t)("team_list.pro_trial_expired"),className:eB})))):o.createElement(eg.fu,{name:W._Y.LOCKED,properties:{userId:c,teamId:e.team.id}},o.createElement(eg.$z,{type:"button",onClick:()=>d(eA.b.LOCKED_TEAM_BADGE),className:eU,trackingProperties:{text:"Badge Clicked"}},o.createElement(W.Ex,{color:W.zE.WARNING,text:(0,A.t)("team_list.locked"),className:eB}))):t?o.createElement(eg.fu,{name:W._Y.PRO_TRIAL_EXPIRED,properties:{userId:c,teamId:e.team.id,...eS.ng.getTrackingProperties()}},o.createElement(W.Ex,{color:W.zE.WARNING,text:(0,A.t)("team_list.pro_trial_expired"),className:eB})):o.createElement(W.Ex,{color:W.zE.WARNING,text:(0,A.t)("team_list.locked"),className:"team_link--badge--Ou6oy"})}if(n&&eS.ng.canSeeProTrialUx(n))return o.createElement(eg.fu,{name:W._Y.PRO_TRIAL,properties:{userId:c,teamId:e.team.id,...eS.ng.getTrackingProperties()}},o.createElement(eg.$z,{type:"button",onClick:()=>d(eA.b.PRO_TRIAL_UPSELL_MODAL),className:eU,trackingProperties:eS.ng.getTrackingProperties("Badge Clicked")},o.createElement("span",{"data-tooltip-type":ei.Ib.SPECIAL,"data-tooltip":eM.V,"data-tooltip-pro-trials-days-left":n.daysLeft,"data-tooltip-show-right":!0,"data-tooltip-max-width":195,"data-tooltip-timeout-delay":50},o.createElement(eF,null))));if(!(0,er.XX)(e.team)&&(0,en.hasEditorRoleAccessOnTeam)(e.team.id,i)){let n={monetization_surface:ef.h.MonetizationSurface.FILE_BROWSER,monetization_trigger:eA.b.STARTER_TEAM_BADGE};return o.createElement("button",{onClick:t=>{t.stopPropagation(),e.dispatch(e_.dm(e.team.id)),d(eA.b.STARTER_TEAM_BADGE),(0,V.sx)("Starter Team Badge Clicked",{userId:c,teamId:e.team.id,...n})},onMouseEnter:()=>{t||(r.current=setTimeout(()=>{(0,V.sx)("Starter Team Badge Viewed",{userId:c,teamId:e.team.id,...n}),a(!0)},1e3))},onMouseLeave:()=>{clearTimeout(r.current)},className:eU},o.createElement(W.Ex,{color:W.zE.INFORMATIONAL,text:(0,A.t)("team_list.free"),className:"team_link--freeBadge--ynTW7 team_link--badge--Ou6oy"}))}return null}var ej=a(808324),eG=a(27087),e$=a(881388),ez=a(980820);let eY=(0,ez.nF)((e,t)=>{let a=e.getState().user?.id,r=e.getState().currentUserOrgId;if(t.userInitiated){let n=eG.Ay.put(`/api/file_browser_preferences/section/${t.prefs.section_type}`,{...t.prefs,org_id:r}).catch(t=>{e.dispatch(e$.s.error(t.data?.message||"An error occurred.")),console.error(t)});t.prefs.id?ej.WB()?.optimisticallyUpdate({FileBrowserSectionPreferences:{[t.prefs.id]:{orderedFolderIds:t.prefs.ordered_folder_ids,sectionType:t.prefs.section_type,teamId:"team"===t.prefs.section_type?t.prefs.team_id:null,orgId:r}}},n):null!=a&&ej.WB()?.optimisticallyCreate({FileBrowserSectionPreferences:{"optimistic-id":{userId:a,orderedFolderIds:t.prefs.ordered_folder_ids||null,sectionType:t.prefs.section_type,teamId:"team"===t.prefs.section_type?t.prefs.team_id:null,updatedAt:new Date,createdAt:new Date,orgId:r}}},n)}});var eK=a(688083),eQ=a(164249);let eX={USER_FOLDERS:"user_folders",USER_DRAFTS:"user_drafts",TEAM:"team"},eq="nav_section--folderSeparatorBefore--RgAUv";function eJ(e,t,a){let{projects:r,sidebarData:n}=a,i=n?.fileBrowserSectionPreferences||[],l=[];for(let a of i)if("team"===a.sectionType){if("team"===e&&a.teamId===(t||null)){l=a.orderedFolderIds||[];break}}else e===a.sectionType&&(l=a.orderedFolderIds||[]);return r.sort((e,t)=>{let a=l.indexOf(e.id),r=l.indexOf(t.id);return a<r?-1:r<a?1:0}),r}function eZ(e,t,a,r,n,i,l,o){let s=e2(r,a),c=e.sidebarData?.fileBrowserSectionPreferences?.filter(e=>e.sectionType===n&&("team"!==n||e.teamId===i?.id)),d=c&&c.length>0?c[0].id:void 0;s===n&&(n!==eX.TEAM||r.teamId===i?.id)?e0(e,t,n,i?.id,r.id,l,o,d):i&&e1(e,t,r,n,i,l,o,d)}let e0=(e,t,a,r,n,i,l,o)=>{let s=eJ(a,r,e).map(e=>e.id),c=(0,M.moveItem)(s,n,i,l);c!==s&&t(eY({prefs:a===eX.TEAM?{id:o,section_type:a,team_id:r,ordered_folder_ids:c}:{id:o,section_type:a,ordered_folder_ids:c},userInitiated:!0}))},e1=(e,t,a,r,n,i,l,o)=>{if(!n)return;t((0,eK.Nr)({folder:a,team:n}));let s=eJ(r,n.id,e).map(e=>e.id),c=null==i?-1:s.indexOf(i);return c<0?c=l?0:s.length:l||(c+=1),s.splice(c,0,a.id),t(eY({prefs:r===eX.TEAM?{id:o,section_type:r,team_id:n.id,ordered_folder_ids:s}:{id:o,section_type:r,ordered_folder_ids:s},userInitiated:!0})),!0},e2=(e,t)=>e.teamId&&e.teamId in t.roles.byTeamId?eX.TEAM:e.id===t.user?.drafts_folder_id?eX.USER_DRAFTS:eX.USER_FOLDERS;function e8(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.dragState),r=(0,ew.FC)(),n=(0,eN.iZ)(),i=(0,eb.dq)(),l=(0,s.d4)(e=>e.renamingNavFolderWithId),[c,d]=o.useState(null),[m,u]=o.useState(!1),_=()=>{if(e.isEnterpriseSidenavEnabled&&a.data?.licenseGroupId&&a.data.licenseGroupId!==e.licenseGroup?.id)return!1;if(a.type===eQ.R.Folder){let t=a.data,i=e2(t,r);return!!(i===eX.USER_FOLDERS&&(0,er.S$)(t,e.team,n))||!!i&&e.acceptDropsFrom.has(i)}return!1},p=e=>{a.type===eQ.R.Folder&&d(e)},g=e=>{u(e.upper)},f=e=>{d(t=>t===e?null:t)},E=n=>{eZ(e,t,r,a.data,e.sectionType,e.team,n,m),d(null)},h=eJ(e.sectionType,e.team?.id,e),y=(0,eh.D6)(i)?"nav_section--folderSeparatorOffCustomSections--Z4VcU nav_section--sectionTextCustomSections--Jz4II sidebar--sectionTextCustomSections---1KFn sidebar--sectionContentCustomSections--wI9mZ ellipsis--ellipsis--Tjyfa":"nav_section--folderSeparatorOff--auqlH nav_section--sectionText--oYnQA sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa",v=(0,eh.D6)(i)?"nav_section--folderSeparatorOnCustomSections--2EgRi nav_section--folderSeparatorOffCustomSections--Z4VcU nav_section--sectionTextCustomSections--Jz4II sidebar--sectionTextCustomSections---1KFn sidebar--sectionContentCustomSections--wI9mZ ellipsis--ellipsis--Tjyfa":"nav_section--folderSeparatorOn--CIaoN nav_section--folderSeparatorOff--auqlH nav_section--sectionText--oYnQA sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa";return o.createElement("div",{className:0===h.length?"nav_section--orderedFoldersEmpty--7AgI4 nav_section--orderedFolders--3ZY9c":"nav_section--orderedFolders--3ZY9c"},o.createElement("div",{className:eq},o.createElement("div",{className:e.showPrependIndicator||0===h.length&&e.showAppendIndicator?v:y})),h.length>0&&h.map(t=>o.createElement(B.Y,{key:t.id,isDragTarget:_,onTargetDragEnter:()=>p(t.id),onTargetDragQuadrantUpdate:g,onTargetDragLeave:()=>f(t.id),onTargetDrop:()=>E(t.id),style:{position:"relative"}},o.createElement("div",{className:eq},o.createElement("div",{className:c===t.id&&m?v:y})),o.createElement(U.BS,{key:`folder-${t.id}`,folder:t,team:e.team,disambiguationFolders:e.sectionType===eX.USER_FOLDERS?h:void 0,renamingNavFolderWithId:l,isSharedProject:e.sectionType===eX.USER_FOLDERS}))),o.createElement("div",{className:"nav_section--folderSeparatorAfter--V0NpT"},o.createElement("div",{className:e.showAppendIndicator&&h.length>0?v:y})))}function e4(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.dragState),r=(0,ew.FC)(),n=(0,eN.iZ)(),[i,l]=o.useState(!1),[c,d]=o.useState(!1);return o.createElement(B.Y,{isDragTarget:()=>{if(e.isEnterpriseSidenavEnabled&&a.data?.licenseGroupId&&a.data.licenseGroupId!==e.licenseGroup?.id)return!1;if(a.type===eQ.R.Folder){let t=a.data,i=e2(t,r);return!!(i===eX.USER_FOLDERS&&(0,er.S$)(t,e.team,n))||!!i&&e.acceptDropsFrom.has(i)}return!1},onTargetDragEnter:()=>{a.type===eQ.R.Folder&&l(!0)},onTargetDragQuadrantUpdate:e=>{d(e.upper)},onTargetDragLeave:()=>{l(!1)},onTargetDrop:()=>{a.type===eQ.R.Folder&&e.team&&eZ(e,t,r,a.data,e.sectionType,e.team,null,c),l(!1)}},o.createElement("div",{className:"nav_section--section--CCwMs sidebar--section--COZVK"},e.sectionType===eX.USER_FOLDERS&&o.createElement(o.Fragment,null,o.createElement(e8,{showPrependIndicator:i&&c,showAppendIndicator:i&&!c,...e})),e.sectionType===eX.TEAM&&o.createElement(o.Fragment,null,o.createElement(eH,{team:e.team,projects:e.projects,onboardingKey:e.onboardingKey}),o.createElement(e8,{showPrependIndicator:i&&c,showAppendIndicator:i&&!c,...e}))))}function e3(e){let t=e.projectsByTeam[e4.USER_FOLDERS]||[];return o.createElement(e4,{sectionType:eX.USER_FOLDERS,team:null,projects:t,acceptDropsFrom:new Set([eX.USER_FOLDERS]),sidebarData:e.sidebarData})}function e5(e){let t=e.team.id,a=e.projectsByTeam[t]||[];return o.createElement(e4,{sectionType:eX.TEAM,acceptDropsFrom:new Set([eX.TEAM]),projects:a,onboardingKey:e.onboardingKey,team:e.team,sidebarData:e.sidebarData,licenseGroup:e.licenseGroup})}e4.USER_FOLDERS="USER_FOLDERS",e4.USER_DRAFTS="USER_DRAFTS";var e9=a(564780),e6=a(225868),e7=a(270056),te=a(349410),tt=a(988022),ta=a(488983),tr=a(643067),tn=a(392340),ti=a(832568),tl=a(297666),to=a(711525),ts=a(946689),tc=a(112967),td=a(493323),tm=a(827586),tu=a(428322),t_=a(574176),tp=a(616705),tg=a(309798),tf=a(984968),tE=a(489291),th=a(566067),ty=a(455566),tv=a(444173),tb=a(51924);function tw(e){let t=(0,s.d4)(e=>e.teams),a=(0,s.d4)(e=>e.roles.byTeamId),r=(0,s.d4)(e=>e.user),n=(0,tg.f)("team_creation_speed_bump_dismissed"),i=(0,h.I7)("starter_team_loophole_experiment_m0"),l=(0,h.I7)("starter_team_loophole_experiment_m1");return o.createElement("div",{className:"new_team_link--createNewTeamLink--ESx5o","data-onboarding-key":tp.CREATE_TEAM_ONBOARDING_KEY},o.createElement(tI,{currentOrgId:e.currentOrgId,onClick:()=>{if(e.currentOrgId)e.dispatch(ep.to({type:th.Uc,data:{}}));else{let o=()=>{e.dispatch(e_.Dw({}))};r?.id&&!n&&(0,tf.Ct)(r.id,Object.values(t),a)&&!(0,te.e5)({userId:r.id,teams:Object.values(t),rolesByTeamId:a,getM0Config:i.getConfig,getM1Config:l.getConfig})?e.dispatch(ep.to({type:ty.FK,data:{user:r,startTeamCreation:o,editorType:null}})):o()}},onMouseEnter:e.onMouseEnter,dimmed:e.disabled??!1,"data-tooltip-type":e.tooltipText?ei.Ib.TEXT:void 0,"data-tooltip":e.tooltipText,"data-tooltip-show-immediately":!0,disabled:e.disabled},(0,A.tx)("sidebar.create_new_team")))}function tT(e){let t=(0,s.wA)();return o.createElement("div",{className:"new_team_link--teamsListEmptyState--jFJWC sidebar--sidebarSection---c9jn text--fontPos11--2LvXf text--_fontBase--QdLsd"},o.createElement(t_.B,{className:"new_team_link--icon--UYAD3 sidebar--icon--wMzUY",svg:tb.A}),o.createElement("div",{className:e.org&&(0,eh.D6)(e.org.id)?"new_team_link--teamsListEmptyStateContentCustomSections--gJW6m sidebar--sectionContentCustomSections--wI9mZ":"new_team_link--teamsListEmptyStateContent--80VyB sidebar--sectionContent--NHX7b"},(0,A.tx)("sidebar.your_teams_and_favorited_projects_will_appear_here"),e.org?.id&&!e.isOrgGuest&&o.createElement("a",{className:"new_team_link--blueLink--HG5xD blue_link--blueLink--9rlnd",onClick:()=>{e.org&&t(ea.$T({view:"org",orgId:e.org.id,orgViewTab:tE.X.HOME}))}},(0,A.tx)("sidebar.browse_org",{orgName:e.org.name}))))}let tI=(0,eg.tf)(function(e){let{currentOrgId:t,children:a,onClick:r,dimmed:n,disabled:i,...l}=e;return o.createElement("div",{className:i?"new_team_link--navLinkDisabled--nWmFJ new_team_link--_navLink--rQ9f- sidebar--sidebarSection---c9jn text--fontPos11--2LvXf text--_fontBase--QdLsd":n?"new_team_link--navLinkDimmed--SNDWb new_team_link--_navLink--rQ9f- sidebar--sidebarSection---c9jn text--fontPos11--2LvXf text--_fontBase--QdLsd":"new_team_link--navLink--wO1bP new_team_link--_navLink--rQ9f- sidebar--sidebarSection---c9jn text--fontPos11--2LvXf text--_fontBase--QdLsd",onMouseDown:i?void 0:r,...l},o.createElement(eo.Z,{icon:o.createElement(t_.B,{"data-onboarding-key":"new-team-icon",className:k.cx.colorIcon.$,svg:tv.A}),text:o.createElement(o.Fragment,null,a)}))});var tN=a(935938);function tx(){let e=(0,s.wA)(),t=(0,eI.z3)();return o.createElement(eo.Z,{onClick:()=>{e(ea.$T({view:"recentsAndSharing",tab:tN.G.RECENTLY_VIEWED})),e(ea.Oe({clickedResourceType:"recentsAndSharing"}))},isSelected:"recentFiles"===t||"recentsAndSharing"===t,icon:o.createElement(Q.In,{icon:"recent-16"}),text:o.createElement(R.E,{truncate:!0},(0,A.tx)("sidebar.recents"))})}var tC=a(54552),tS=a(931828),tk=a(6949),tA=a(837502),tR=a(207286),tL=a(578585),tD=a(801387),tP=a(753757),tF=a(698812),tO=a(227544),tM=a(860529),tB=a(186828),tU=a(155367),tV=a(352898);let tH="admin_settings_link--yellowIcon--xqAn1";var tW=a(612325),tj=(e=>(e.WARNING="warning",e.NOTICE="notice",e))(tj||{});function tG(e){let t;let a=(0,s.wA)(),r=e.orgUser.permission===ex._D.ADMIN,n=(0,tF.RG)(),i=(0,tF.MX)(),{groupsUserIsAdminOf:l}=(0,tF.EQ)(i,e.orgUser.user_id,!r),c=(0,tR.Xf)(e.org.id),d="loaded"===c.status?c.data?.invoices??[]:void 0;o.useEffect(()=>{a(tL.Jt({forceRefetch:!1}))},[a,e.org.id]);let{groupsToReview:m}=(0,tF.Cz)(l,d),u=l[0]?.id,_=e.org.bigma_enabled&&n&&!!u,p=(0,tD.NJ)(e.org.id).data??[],g=e.org.bigma_enabled&&p.length>0,f=r||_||g,E=(0,X.ZY)({isIntendedAudience:e.org.bigma_enabled&&!r}),h=(0,J.Rs)(ee.Wt6,{orgId:e.org.id},{enabled:r}),y="loaded"===h.status?h.data.org?.taxIdVerificationStatus:void 0;if(!f)return null;let v=function(e){switch(e.view){case"orgAdminSettings":case"billingGroupDashboard":return!0;case"licenseGroup":return e.subView===tB.GN.ADMIN;case"workspace":return e.subView===tV.V0.ADMIN;default:return!1}}(e.selectedView);return r?t=o.createElement(tQ,{planType:X.ps.ORG,planId:e.org.id,orgUser:e.orgUser,licenseGroups:i,taxIdVerificationStatus:y,invoices:d,isSelected:v}):_&&(t=E?o.createElement(tK,{invoices:d,groupsUserIsAdminOf:l,isSelected:v,planId:e.org.id,planType:X.ps.ORG}):o.createElement(tY,{invoices:d,showTooltip:!0,org:e.org,orgUser:e.orgUser})),o.createElement(eo.Z,{icon:o.createElement(Q.In,{icon:"settings-16"}),text:o.createElement(R.E,{truncate:!0},(0,A.tx)("sidebar.admin_dashboard")),isSelected:v,onClick:()=>{let e=d&&(0,tO.hX)(d);if(r){let e=tU.J7.DASHBOARD;a(ea.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:e})),a(ea.Oe({clickedResourceType:"orgAdminSettings"}))}else _?E?a(ea.$T({view:"billingGroupDashboard",selectedTab:tM.D.REQUESTS})):(a(ea.$T({view:"licenseGroup",subView:tB.GN.ADMIN,licenseGroupId:e&&m.length>0?m[0].id:u,selectedTab:(0,tP.g)(e&&m.length>0?tB.RM.MEMBERS:tB.Uu[0])})),a(ea.Oe({clickedResourceType:"licenseGroupAdminSettings"}))):g&&(a(ea.$T({view:"workspace",subView:tV.V0.ADMIN,workspaceId:p[0].id,selectedTab:tV.rj[0]})),a(ea.Oe({clickedResourceType:"workspaceAdminSettings"})))},badge:t,dataTestId:"admin-settings-link"})}function t$(e,t,a,r,n,i){if(!r||!(0,tO.i0)(r))return null;if(i){if(!n)return null;let{groupsUserIsAdminOf:e}=(0,tF.EQ)(a,t.user_id,i),{groupsToReview:l}=(0,tF.Cz)(e,r);if(0===l.length)return null}return{tooltipData:(0,tO.XL)(e,r,i),iconStyle:(0,tO.m3)(r)?"admin_settings_link--redIcon--EqNI8":tH,iconType:(0,tO.m3)(r)?"warning":"notice"}}function tz(e){return e!==ex.kI.UNVERIFIED?null:{tooltipData:(0,A.t)("billing_status.tax_id.invalid"),iconStyle:tH,iconType:"notice"}}function tY(e){let t=(0,s.wA)(),a=(0,tF.MX)(),r=e.invoices&&(0,tO.hX)(e.invoices),n=e.org.bigma_enabled&&e.orgUser.license_admin&&e.orgUser.permission!==ex._D.ADMIN,i=(0,J.Rs)(ee.Wt6,{orgId:e.org.id}),l="loaded"===i.status?i.data.org?.taxIdVerificationStatus:null;o.useEffect(()=>{r&&n&&t(tL.Jt({forceRefetch:!1}))},[t,e.org.id,r,n]);let c=(()=>{switch(e.highlightType){case tO.EZ.BILLING_STATUS:return t$(e.org,e.orgUser,a,e.invoices,r,n);case tO.EZ.TAX_ID_STATUS:return tz(l);default:return t$(e.org,e.orgUser,a,e.invoices,r,n)||tz(l)}})();if(!c)return null;let d=`${c.iconStyle} ${e.inlineIcon?"admin_settings_link--inline--0cz0V":""} ${e.alignTop?"admin_settings_link--multiLineIcon--E-mdX":""}`,m={};e.showTooltip&&(m["data-tooltip-type"]=ei.Ib.TEXT,m["data-tooltip"]=c.tooltipData,m["data-tooltip-show-below"]=!0,m["data-tooltip-timeout-delay"]=50,m["data-tooltip-max-width"]=117);let u=o.createElement(t_.B,{className:`admin_settings_link--warningSvg--MK7zE ${d}`,svg:tW.A,useOriginalSrcFills_DEPRECATED:!0,...m}),_=e.showTooltip?o.createElement(K.YR,{className:d,dataTooltipType:m["data-tooltip-type"],dataTooltip:m["data-tooltip"],dataTooltipShowBelow:m["data-tooltip-show-below"],dataTooltipTimeout:m["data-tooltip-timeout-delay"],dataTooltipMaxWidth:m["data-tooltip-max-width"]}):o.createElement(K.YR,{className:d}),p="warning"===c.iconType?u:_;return(0,eg.T8)(p,"Org Admin Billing Status Badge",{orgId:e.org.id,isCurrentUserLicenseAndNotOrgAdmin:n})}function tK(e){let t=0;if(e.invoices){let{groupsToReview:a}=(0,tF.Cz)(e.groupsUserIsAdminOf,e.invoices);a.length>0&&(t=1)}return o.createElement(et,{isOrgAdmin:!1,isSelected:e.isSelected,planId:e.planId,planType:e.planType,billingStatusCount:t,managedBillingGroups:e.groupsUserIsAdminOf?e.groupsUserIsAdminOf.map(e=>e.id):[],taxStatusCount:void 0,isDataLoaded:void 0!==e.invoices,showDevModeOptIn:!1})}function tQ(e){let t=(0,tF.EQ)(e.licenseGroups,e.orgUser.user_id,!1).groupsUserIsAdminOf.map(e=>e.id),a=e.invoices&&(0,tO.i0)(e.invoices)?1:0,r=(0,J.Rs)(ee.lVt,{orgId:e.planType===X.ps.ORG?e.planId:""},{enabled:e.planType===X.ps.ORG}),n="loaded"===r.status,i=!!(e.planType===X.ps.ORG&&n&&(0,tO.CA)(r.data?.org?.devModeOptInPlanProperty||null)),l=e.taxIdVerificationStatus===ex.kI.UNVERIFIED?1:0;return n&&void 0!==e.taxIdVerificationStatus&&void 0!==e.invoices?o.createElement(et,{isOrgAdmin:!0,isSelected:e.isSelected,planId:e.planId,planType:e.planType,billingStatusCount:a,managedBillingGroups:t,taxStatusCount:l,isDataLoaded:n&&void 0!==e.invoices,showDevModeOptIn:i}):null}function tX(e){let t=(0,s.d4)(e=>e.currentTeamId),a=(0,s.wA)();return t?o.createElement(eo.Z,{isSelected:e.selectedView&&"team"===e.selectedView.view,onClick:()=>{a(e_.dm(t)),a(ea.Oe({clickedResourceType:"allProjects"}))},"data-onboarding-key":"ALL_PROJECTS_LINK_ONBOARIND_KEY",icon:o.createElement(Q.In,{icon:"grid-32"}),text:o.createElement(R.E,{truncate:!0},(0,A.tx)("sidebar.all_projects"))}):null}var tq=a(558867);function tJ(e){let t=(0,s.wA)(),a=(0,eI._6)(),r="workspace"===a.view&&a.workspaceId===e.workspace.id&&a.subView===tV.V0.DIRECTORY;return o.createElement(eo.Z,{isSelected:r,onClick:()=>{t(ea.$T({view:"workspace",workspaceId:e.workspace.id,selectedTab:tV.dN.TEAMS,subView:tV.V0.DIRECTORY})),t(ea.Oe({clickedResourceType:"workspace",resourceIdOrKey:e.workspace.id}))},icon:o.createElement(tq.z6,{entity:e.workspace,size:16}),text:o.createElement(R.E,{truncate:!0},e.workspace.name),"data-onboarding-key":e.dataOnboardingKey})}var tZ=a(101505),t0=a(456104),t1=a(723239),t2=a(582947),t8=a(397065),t4=a(340514),t3=a(493364),t5=a(463546);let t9="seen_sidebar_workspace_link_onboarding",t6="sidebar_workspace_link_onboarding";function t7(){let e=(0,t2.r1)(t9),t=(0,C.md)(e),a=(0,C.md)(t1.Fy),{show:r,isShowing:n,complete:i}=(0,t0.e)({overlay:t5.Tp6,priority:t8.N.DEFAULT_MODAL},[t,a]);return(0,u.h)(()=>{r({canShow:(e,t)=>!e&&t})}),o.createElement(t4.rq,{isShowing:n,trackingContextName:"sidebar-workspace-link-onboarding",targetKey:t6,title:(0,A.tx)("sidebar.workspaces.onboarding_title"),description:(0,A.tx)("sidebar.workspaces.onboarding_description"),emphasized:!0,primaryCta:{label:(0,A.tx)("general.done"),ctaTrackingDescriptor:tZ.c.DONE,type:"button",onClick:i},secondaryCta:{label:(0,A.tx)("general.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/7576392133527-Guide-to-workspaces",ctaTrackingDescriptor:tZ.c.LEARN_MORE},userFlagOnShow:t9,onClose:i,arrowPosition:t3.F_.LEFT_TITLE,clickOutsideToHide:!0,disableHighlight:!0})}var ae=a(119735);let at="sidebar--section--COZVK",aa="sidebar--loading--AITp2",ar="sidebar--divider--sHsz4";function an({userStateLoaded:e,sidebarData:t}){let a=(0,tk.a9)(),r=(0,ae.J_)();if(!a||!r())return null;if(!e)return o.createElement("div",{className:aa},o.createElement(td.kt,null));let n=t?.baseOrgUser?.permission===ex._D.GUEST,i=t?.baseOrgUser?.workspaceUsers?.find(e=>e.isMainWorkspace)?.workspace;return!i||n?null:o.createElement(o.Fragment,null,o.createElement(t7,null),o.createElement(tJ,{workspace:i,dataOnboardingKey:t6}))}var ai=a(171791),al=a(666901),ao=a(47506),as=a(919114),ac=a(858212),ad=a(237870),am=a(488578);let au=(0,ad.Ju)(function(e){let t=(0,s.wA)(),a=o.createElement("span",{className:k.cx.fontBold.$},e.sectionName);return o.createElement(am.Rw,{onConfirm:()=>{t(tC.de({sidebarSectionId:e.sectionId}))},confirmationTitle:(0,A.t)("sidebar.delete_section"),titleClass:"confirm_section_delete_modal--title--8Haoy text--fontPos11--2LvXf text--_fontBase--QdLsd",confirmText:(0,A.t)("sidebar.delete"),destructive:!0,autoFocusCta:!1},o.createElement("p",{className:"confirm_section_delete_modal--content--BToo-"},(0,A.tx)("sidebar.if_you_delete_section_the_section",{item:e.count>1?(0,A.t)("sidebar.items"):(0,A.t)("sidebar.item"),section:a,count:e.count,pronoun:e.count>1?(0,A.t)("sidebar.them"):(0,A.t)("sidebar.it")})))},"CONFIRM_SECTION_DELETE_MODAL",ad.ZU.YES);var a_=a(206074);let ap="custom-section-header-context-menu";function ag(){let e=(0,s.d4)(e=>e.dropdownShown);return e&&e?.type===ap?e:null}function af(e){let t=(0,s.wA)(),a=ag();if(null==a)return o.createElement(o.Fragment,null);let r=()=>{0===a.data.favoritesCount?t(tC.de({sidebarSectionId:a.data.customSection.id})):t((0,ep.to)({type:au,data:{sectionId:a.data.customSection.id,sectionName:a.data.customSection.name,count:a.data.favoritesCount}}))},n=()=>{e.setRenamingSectionId(a.data.customSection.id)},i=[{displayText:(0,A.t)("sidebar.rename_section"),callback:()=>n()},{displayText:(0,A.t)("sidebar.delete_section"),callback:()=>r()}];return o.createElement(a_.j,{depth:0,items:i,lean:"right",leanPadding:0,dispatch:t,minWidth:162,parentRect:a.data.targetRect,onSelectItem:(e,a)=>{e.callback&&e.callback("",null,t)},showPoint:!a.data.isFromRightClick,hidePointWhenContentOffScreen:!0})}let aE="favorited_section--emojiIcon--pDnB-",ah="favorited_section--favoriteStar--2R5nb",ay="favorited_section--isDragTarget--dQd5-",av="favorited_section--previewContainer--4E-dF _overlayBase--_overlayBase--Rkj8l",ab="favorited_section--previewContainerNoDelay--buvES favorited_section--previewContainer--4E-dF _overlayBase--_overlayBase--Rkj8l",aw="favorited_section--favoriteClickTarget--Z9eur",aT="favorited_section--thumbnailContainer--C4PE-",aI="favorited_section--lowerContainer--9gDfQ",aN="favorited_section--lowerPartTitles--44fhW",ax="favorited_section--title--bWf4x ellipsis--ellipsis--Tjyfa text--fontPos13--xW8hS text--_fontBase--QdLsd",aC="favorited_section--editorTypeIndicator--OmyvY",aS="favorited_section--svgContainer--vwRae",ak="favorited_section--icon--E7nFx";function aA(e){let t=(0,s.wA)(),a=(0,s.d4)(tr.wA);if(!a)return null;let r=o.createElement("span",{role:"link",tabIndex:0,onClick:()=>{t(ea.$T({view:"org",orgId:a.id,orgViewTab:tE.X.HOME}))},className:"favorited_section--browseOrgLink--BvX0-"},(0,A.tx)("sidebar.browse_org_custom_sections"));return o.createElement("div",{className:"favorited_section--customSectionsEmptyStateContent--Z6jKH"},(0,A.tx)("sidebar.just_click_the_on_files_projects_and_teams_to_add_and_organize_them_here"),r)}function aR(e){return o.createElement("div",{className:"favorited_section--customSectionsEmptyState--JcvfB favorited_section--customSectionsEmptyStateContent--Z6jKH"},o.createElement(aA,{setNewCustomSectionIndex:e.setNewCustomSectionIndex}))}var aL=a(722138),aD=a(392592),aP=a(786013),aF=a(823810),aO=a(391388);function aM(e,t){return e===aP.C7b.CAN_VIEW?function(e){let t=(0,ew.FC)();return(0,o.useMemo)(()=>aO.Qw.loaded((0,en.canViewFolder_DEPRECATED)(e,t)),[e,t])}(t):aO.Qw.loaded(!1)}var aB=a(286098),aU=a(970516),aV=a(944682),aH=a(76320),aW=a(782656),aj=a(128751),aG=a(355513),a$=a(67085),az=a(477782),aY=a(499743),aK=a(132135),aQ=a(892542),aX=a(623746),aq=a(691205),aJ=a(421234),aZ=a(451e3),a0=a(851363),a1=a(378356),a2=a(767904),a8=a(714728),a4=(e=>(e.FAVORITED_PROTOTYPE_CONTEXT_MENU="favorited-prototype-context-menu",e.FAVORITED_FILE_CONTEXT_MENU="favorited-file-context-menu",e.FAVORITED_PROJECT_CONTEXT_MENU="favorited-project-context-menu",e.FAVORITED_TEAM_CONTEXT_MENU="favorited-team-context-menu",e.FAVORITED_WORKSPACE_CONTEXT_MENU="favorited-workspace-context-menu",e))(a4||{});let a3="sidebar context menu";function a5(e,t,a,r){if(t.stopPropagation(),t.preventDefault(),"file"in e&&e.file){let t=e.file;a(aV.yJ({file:{key:t.key,team_id:t.teamId,file_repo_id:t.fileRepoId,folder_id:t.folderId}}));let r=(0,aB.QJ)(e);r&&a(aW.bE({repo:r}))}a(ea.j7({type:r,data:{resource:{...e},targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1}}}))}let a9=(e,t,a,r={})=>e?[{displayText:t?t():"",callback:a,...r}]:[],a6=[{displayText:"",separator:!0}];function a7({dropdownShown:e}){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.selectedView),r=(0,s.d4)(e=>e.user?.personal_drafts_folder_id),n=(0,aY.p)(),i=(0,p.kc)().ps_benchmark,l="favorited-project-context-menu"===e.type?e.data.resource.project?.id:e.data.resource?.file?.folderId,m=e.data.resource,u=i&&!!r&&m?.file?.folderId===r,_=aM(aP.C7b.CAN_VIEW,l).unwrapOr(!1),g=!u&&_,f="favorited-prototype-context-menu"===e.type,E=(0,aF.As)(m?.file?.key??""),h=o.useMemo(()=>"favorited-file-context-menu"===e.type&&!!E.unwrapOr(null)?.canDelete,[e.type,E]),y=[...a9(!0,()=>(0,A.t)("tile.dropdown.open"),()=>{(0,aL.DF)("open"),"favorited-file-context-menu"===e.type?((0,aL.LP)(m.file.key,ex.bk.FILE,m.sidebarSectionId,a3,m.file.editorType),(0,aG.Tq)(t,{key:m.file.key,editor_type:m.file.editorType})):"favorited-prototype-context-menu"===e.type?((0,aL.LP)(m.prototype.fileKey,ex.bk.PROTOTYPE,m.sidebarSectionId,a3,"design"),(0,eh.FS)(t,m)):"favorited-project-context-menu"===e.type&&(t(e_.kg({clickedResourceType:"folder",resourceIdOrKey:m.project.id})),(0,aG.U8)(m.project.id,t))}),...a9(!d.eD&&!(0,c.ce)(),()=>(0,A.t)("tile.dropdown.open_new_tab"),()=>{if("favorited-file-context-menu"===e.type)(0,aG.nz)((0,aK.jN)({...m,allowDefaulting:!0}),m.file.key,a,t),(0,aL.LP)(m.file.key,ex.bk.FILE,m.sidebarSectionId,a3,m.file.editorType),(0,aL.DF)("open_in_new_tab");else if("favorited-prototype-context-menu"===e.type){let e=m.prototype.url;(0,aG.D4)(e,m.prototype.fileKey,m.prototype.file.pageId,a),(0,aL.LP)(m.prototype.fileKey,ex.bk.PROTOTYPE,m.sidebarSectionId,a3,"design"),(0,aL.DF)("open_in_new_tab")}else"favorited-project-context-menu"===e.type&&(t(e_.kg({clickedResourceType:"folder",resourceIdOrKey:m.project.id})),(0,aG.Wq)((0,aZ.EE)(m.project.id,m.project.org_id??null),t),(0,aL.LP)(m.project.id,ex.bk.FOLDER,m.sidebarSectionId,a3,"design"))}),...a6,...a9(!0,()=>(0,A.t)("tile.dropdown.copy_link"),()=>{(0,aL.DF)("copy_link"),"favorited-file-context-menu"===e.type?t(aV.S({fileKey:m.file.key,url:(0,aK.jN)({file:m.file,attributionContext:(0,aQ.b)(n,aQ.d.FAVORITED_FILE_CONTEXT_MENU),allowDefaulting:!0}),source:aQ.d.FAVORITED_FILE_CONTEXT_MENU})):"favorited-prototype-context-menu"===e.type?t(aU.S({url:m.prototype.url})):"favorited-project-context-menu"===e.type&&t(aU.S({url:(0,aZ.EE)(m.project.id,m.project.org_id??null)}))}),...a9(!f&&!u,()=>(0,A.t)("sidebar.share"),()=>{(0,aL.DF)("share"),"favorited-file-context-menu"===e.type?t((0,ep.to)({type:a2.g_,data:{fileKey:m.file.key,source:a$.nk.fileBrowserFavoritedContextMenu}})):"favorited-project-context-menu"===e.type&&t((0,ep.to)({type:a8.W,data:{folderId:m.project.id}}))}),...a9(g,()=>(0,A.t)("tile.dropdown.show_in_project"),()=>{if((0,aL.DF)("show_in_project"),"favorited-file-context-menu"===e.type&&e.data.resource.file?.folderId!=null){if(t(ea.$T({view:"folder",folderId:e.data.resource.file.folderId})),t(aj.an()),e.data.resource.file.repo){let a=(0,aB.QJ)(e.data.resource);null!=a&&t(aj.y$({type:a1.F.REPOS,tiles:[{type:az.nb.REPO,repo:a,branches:[],selectedBranchKey:""}]}))}else t(aj.y$({type:a1.F.FILES,tiles:[{type:az.nb.FILE,file:e.data.resource.file}]}))}},{disabled:!g}),...a6,...a9(!f,()=>(0,A.t)("tile.favoriting.remove_from_favorites"),()=>{"favorited-prototype-context-menu"===e.type&&m.prototype?t(tC.X7({prototype:{file_key:m.prototype.fileKey,page_id:m.prototype.pageId},entrypoint:"sidebar",favoriteId:m.id})):"favorited-file-context-menu"===e.type&&m.file?t(tC.qP({file:{key:m.file.key,editor_type:m.file.editorType.toString()??void 0},entrypoint:"sidebar",favoriteId:m.id})):"favorited-project-context-menu"===e.type&&m.project&&t(e7.ZJ({folderId:m.resourceId,folderName:m.project.path,teamId:m.project.teamId,isSubscribed:!1}))}),...a6,...a9(!f&&!u,()=>(0,A.t)("sidebar.delete"),()=>{if((0,aL.DF)("delete"),"favorited-file-context-menu"===e.type){let e=E.unwrapOr(null)?.canDelete?{[m.file.key]:m.file}:{};t(aH.U1({filesByKey:e}))}},{disabled:!h})];return o.createElement(a_.j,{items:y,parentRect:e.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorited-resource-dropdown",dispatch:t,onSelectItem:(e,a)=>{e.callback?.("",{},t,a)}})}function re(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.selectedView),r=(0,aY.p)(),n=e.favoritedFile.file,i=aq.M4.useFile(n?.key).data,l=aM(aP.C7b.CAN_VIEW,e.folderId).unwrapOr(!1),m=(0,s.d4)(e=>e.dropdownShown);if(null==m||null==n)return null;let u="favorited-file-context-menu"===m.type,_=[...a9(!0,()=>(0,A.t)("tile.dropdown.open"),()=>{(0,aL.DF)("open"),(0,aL.LP)(n.key,ex.bk.FILE,e.favoritedFile?.sidebarSectionId??void 0,a3,n.editorType??void 0),(0,aG.Tq)(t,{key:n.key,editor_type:n.editorType})}),...a9(!d.eD&&!(0,c.ce)(),()=>(0,A.t)("tile.dropdown.open_new_tab"),()=>{(0,aG.nz)((0,aK.jN)({file:n,allowDefaulting:!0}),n.key,a,t),(0,aL.LP)(n.key,ex.bk.FILE,e.favoritedFile?.sidebarSectionId??void 0,a3,n.editorType),(0,aL.DF)("open_in_new_tab")}),...a6,...e.organizeFavoriteOptions,...a6,...a9(!0,()=>(0,A.t)("file_browser.copy_link"),()=>{t(aV.S({fileKey:n.key,url:(0,aK.jN)({file:n,attributionContext:(0,aQ.b)(r,aQ.d.FAVORITED_FILE_CONTEXT_MENU),allowDefaulting:!0}),source:aQ.d.FAVORITED_FILE_CONTEXT_MENU})),t(ea.oB())}),...a9(!0,()=>(0,A.t)("sidebar.share"),()=>{(0,aL.DF)("share"),t((0,ep.to)({type:a2.g_,data:{fileKey:n.key,source:a$.nk.fileBrowserFavoritedContextMenu}}))}),...a9(!0,()=>(0,A.t)("tile.dropdown.show_in_project"),()=>{if((0,aL.DF)("show_in_project"),t(ea.$T({view:"folder",folderId:e.folderId})),t(aj.an()),n.fileRepoId){let a=(0,aB.QJ)(e.favoritedFile);null!=a&&t(aj.y$({type:a1.F.REPOS,tiles:[{type:az.nb.REPO,repo:a,branches:[],selectedBranchKey:""}]}))}else{if(!i)return;t(aj.y$({type:a1.F.FILES,tiles:[{type:az.nb.FILE,file:i}]}))}},{disabled:!(u&&l)})];return o.createElement(a_.j,{items:_,parentRect:m.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorite-file-dropdown",dispatch:t,onSelectItem:(e,a)=>{e.callback?.("",{},t,a)}})}function rt(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.dropdownShown);if(null==a)return null;let r=[...e.organizeFavoriteOptions,...a6,...a9(!0,()=>(0,A.t)("file_browser.copy_link_to_team"),()=>{let a=(0,a0.bL)(e.teamId,e.orgId);t(aU.S({url:a})),t(ea.oB())})];return o.createElement(a_.j,{items:r,parentRect:a.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorite-file-dropdown",dispatch:t,onSelectItem:(e,a)=>{e.callback?.("",{},t,a)}})}function ra(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.dropdownShown);if(null==a)return null;let r=[...e.organizeFavoriteOptions,...a6,...a9(null!==e.orgId,()=>(0,A.t)("file_browser.copy_link_to_workspace"),()=>{if(null!==e.orgId){let a=(0,aJ.fO)(e.workspaceId,e.orgId);t(aU.S({url:a}))}t(ea.oB())})];return o.createElement(a_.j,{items:r,parentRect:a.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorited-resource-dropdown",dispatch:t,onSelectItem:(e,a)=>{e.callback?.("",{},t,a)}})}function rr(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.dropdownShown);if(null==a)return null;let r=[...e.organizeFavoriteOptions,...a6,...a9(!0,()=>(0,A.t)("file_browser.copy_link_to_project"),()=>{let a=(0,aZ.EE)(e.projectId,e.orgId);t(aU.S({url:a})),t(ea.oB())})];return o.createElement(a_.j,{items:r,parentRect:a.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorited-resource-dropdown",dispatch:t,onSelectItem:(e,a)=>{e.callback?.("",{},t,a)}})}function rn(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.dropdownShown);if(null==a)return null;let r=[...e.organizeFavoriteOptions,...a6,...a9(!0,()=>(0,A.t)("file_browser.copy_link"),()=>{let a=(0,aX._3)(e.prototype.fileKey,e.prototype.file?.name,e.prototype.pageId);t(aU.S({url:a})),t(ea.oB())})];return o.createElement(a_.j,{items:r,parentRect:a.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorited-resource-dropdown",dispatch:t,onSelectItem:(e,a)=>{e.callback?.("",{},t,a)}})}var ri=a(313231),rl=a(575675);function ro(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.currentUserOrgId),r=(0,s.d4)(e=>e.currentTeamId),n=(0,s.d4)(e=>e.favorites.collapsedCustomSections),i=e.favorite.team,l=(0,ew.FC)(),c=(0,s.d4)(e=>e.dropdownShown),d=(0,s.d4)(e=>e.avatarEditorState),u=o.useMemo(()=>c&&c.type===a4.FAVORITED_TEAM_CONTEXT_MENU&&c.data.teamId===i?.id,[c,i?.id]),_=o.useCallback((e,a)=>{(0,aL.LP)(a.team?.id,ex.bk.TEAM,a.sidebarSectionId??void 0,aL.vg);let r=(0,a0.bL)(a.resourceId,a.orgId);(0,D.oJ)(e)?(m.Ay.redirect(r,"_blank"),e.stopPropagation()):(t(e_.dm(a.resourceId)),e.preventDefault())},[t]),p=o.useCallback(e=>{if(!i)return;e.stopPropagation(),e.preventDefault();let a={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};t(ea.j7({type:a4.FAVORITED_TEAM_CONTEXT_MENU,data:{teamId:i.id,targetRect:a}}))},[t,i]);if(!a||null===i)return o.createElement(o.Fragment,null);let g=(0,en.canAdminTeam)(i.id,l),f=(0,ri.o)({dispatch:t,currentOrgId:a,currentTeamId:r,collapsedCustomSections:n,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:ex.bk.TEAM,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,updateFavorite:(a,r)=>{let n={entrypoint:"sidebar",sectionId:r,team:{id:i.id},favoriteId:e.favorite.id,resourceType:ex.bk.TEAM};a?t(tC.V1(n)):t(tC.ox(n))}});return o.createElement(o.Fragment,null,o.createElement(eo.Z,{isSelected:e.isSelected,rowClassName:aw,onClick:t=>_(t,e.favorite),showGrabber:e.showGrabber,onContextMenu:p,icon:i.imgUrl?o.createElement("div",{className:k.cx.colorIcon.$},o.createElement(G.nl,{shape:"ROUNDED_SQUARE",size:{imgSize:G.Pf.SMALL,fallbackSize:G.Pf.SMALL},fallbackDisplay:$.U.HIDDEN,team:{...i,imgUrl:i.imgUrl},fallbackSvg:rl.A})):o.createElement(Q.In,{icon:"team-16"}),text:o.createElement(R.E,{truncate:!0},i.name)}),u&&o.createElement(rt,{teamId:i.id,orgId:i.orgId,organizeFavoriteOptions:f}),g&&o.createElement("span",{className:"favorited_section--hiddenEditableAvatar--MuzYX"},o.createElement(eP.ER,{entity:{...i,imgUrl:i.imgUrl||void 0},entityType:eR.ck.TEAM,avatarEditorState:d,size:14,dispatch:t})))}var rs=a(93536),rc=a(67833),rd=a(331737),rm=a(386909),ru=a(487342),r_=a(875847),rp=a(112235),rg=a(300256);function rf(e){switch(e.iconType){case rc.y1.DESIGN:case rc.y1.DESIGN_AND_DEV_MODE:case rc.y1.SLIDES:case rc.y1.SLIDES_TEMPLATE:return o.createElement(rc.oS,{type:e.iconType,size:rc.LE.SMALL});case rc.y1.SITES:return o.createElement(Q.In,{icon:"file-design-16-file-type"});case rc.y1.WHITEBOARD:return o.createElement(Q.In,{icon:"file-figjam-16-file-type"});case rc.y1.DEV_MODE:case rc.y1.DEV_MODE_SELECTED:case rc.y1.PROTOTYPE:case rc.y1.PUBLISHED:return o.createElement(rc.oS,{type:e.iconType,size:rc.LE.SMALL});case rc.y1.TEMPLATE:return o.createElement(Q.In,{icon:"file-team-template-16-file-type"});case rc.y1.REPO:return o.createElement(Q.In,{icon:"file-design-branch-16-file-type"});case rc.y1.COOPER:return o.createElement(rg.w,{inverted:!0});default:(0,x.xb)(e.iconType)}}let rE=e=>o.createElement("div",{className:aE},e);function rh(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.currentUserOrgId),r=(0,s.d4)(e=>e.currentTeamId),n=(0,s.d4)(e=>e.favorites.collapsedCustomSections),i=(0,s.d4)(e=>e.dropdownShown),l=e.favorite.file,c=aq.M4.useFile(l?.key).data,d=(0,rp.p)(!0),u=null!==a,_=(0,p.kc)().ps_benchmark&&r,g=o.useMemo(()=>i&&i.type===a4.FAVORITED_FILE_CONTEXT_MENU&&i.data.fileKey===l?.key,[i,l]),f=o.useMemo(()=>i&&i.type===ap,[i]),E=o.useCallback(e=>{if(!l)return;c||t(aV.yJ({file:{key:l.key,team_id:l.teamId,file_repo_id:l.fileRepoId,folder_id:l.folderId}})),e.stopPropagation(),e.preventDefault();let a={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};t(ea.j7({type:a4.FAVORITED_FILE_CONTEXT_MENU,data:{fileKey:l.key,targetRect:a}}))},[t,l,c]);if(null===l)return o.createElement(o.Fragment,null);let h=(0,aK.jN)({file:l,allowDefaulting:!0}),y=(e,a)=>{(0,aL.LP)(a.file?.key,ex.bk.FILE,a.sidebarSectionId??void 0,aL.vg,a.file?.editorType??void 0),(0,D.oJ)(e)?(t(e_.UN({fileKey:a.file?.key??"",entrypoint:aL.vg})),e.stopPropagation()):e.preventDefault(),a.file&&(m.Ay.redirect(h,"_blank"),t(e_.UN({fileKey:a.file.key,entrypoint:aL.vg})))},v=()=>{null!==l&&t(tC.qP({file:{key:l.key,editor_type:l.editorType??ex._Y.DESIGN},repoId:l.fileRepoId??void 0,entrypoint:"sidebar",favoriteId:e.favorite.id}))},b=(0,ri.o)({dispatch:t,currentOrgId:a,currentTeamId:r,collapsedCustomSections:n,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:ex.bk.FILE,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,updateFavorite:(a,r)=>{if(a&&c){let a={entrypoint:"sidebar",sectionId:r,favoriteId:e.favorite.id,resourceType:ex.bk.FILE};t(tC.V1(a))}else a||null===l||v()}}),w=l?.name,T=(0,ru.AE)(w),I=d(e.favorite.file),N=T?rE(T):o.createElement(rf,{iconType:I}),x=T?(0,ru.Nn)(w,T):w,C=e.favorite.file?.project?.path,S=(0,r_.S)(C),k=S?ax:"favorited_section--titleWithoutSubtitle--BXdOW ellipsis--ellipsis--Tjyfa text--fontPos13--xW8hS text--_fontBase--QdLsd";return o.createElement(o.Fragment,null,o.createElement(eo.Z,{isSelected:e.isSelected,rowClassName:aw,showGrabber:e.showGrabber,onContextMenu:u||_?E:a=>{a5(e.favorite,a,t,a4.FAVORITED_FILE_CONTEXT_MENU)},onClick:t=>y(t,e.favorite),icon:N,text:""!==x?o.createElement(R.E,{truncate:!0,showTooltipWhenTruncated:!1},x):o.createElement(R.E,{truncate:!0},(0,A.tx)(e.favorite.file?.editorType==="whiteboard"?"sidebar.fig_jam_file":e.favorite.file?.editorType==="slides"?"sidebar.slides_file":"sidebar.design_file")),badge:e.isHover&&!(u||_)?o.createElement("div",{className:ah},o.createElement(rm.r,{favoriteType:ex.bk.FILE,resourceId:e.favorite.resourceId,favoriteId:e.favorite.id,size:rm.m.MEDIUM,setFavorite:v,orgId:e.favorite.orgId})):void 0,isFavoritesToMove:e.isFavoritesToMove}),!g&&!f&&o.createElement("div",{className:e.showPreviewDelay?av:ab,style:{transform:`translateY(${-e.previewYOffset}px)`}},o.createElement("div",{className:aT},o.createElement(rd.NM,{editor_type:l.editorType,client_meta:(0,p.kc)().thumbnail_lg_client_meta?l.checkpointClientMeta||null:l.clientMeta,isLocked:!!l.hasFileLinkPassword,thumbnail_url:l.thumbnailUrl,thumbnailGuid:l.thumbnailGuid,noBorder:!0})),o.createElement("div",{className:aI},o.createElement(rc.oS,{svgOptions:{id:"sidebar-thumbnail"},className:aC,type:I}),o.createElement("div",{className:aN},o.createElement("div",{className:k},e.favorite.file?.name),S&&o.createElement("div",{className:"favorited_section--subtitle--sQ1zI ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},S)))),(u||_)&&g&&l?.folderId&&o.createElement(re,{favoritedFile:e.favorite,folderId:l.folderId,organizeFavoriteOptions:b}))}let ry=e=>o.createElement("div",{className:aE},e);function rv(e){let t=(0,s.wA)(),a=e.favorite.project,r=(0,s.d4)(e=>e.currentTeamId),n=(0,s.d4)(e=>e.currentUserOrgId),i=(0,s.d4)(e=>e.favorites.collapsedCustomSections),l=(0,ac.S)(),c=(0,s.d4)(e=>e.dropdownShown),d=o.useMemo(()=>c&&c.type===a4.FAVORITED_PROJECT_CONTEXT_MENU&&c.data.projectId===a?.id,[c,a]),m=o.useCallback(e=>{if(!a)return;e.stopPropagation(),e.preventDefault();let r={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};t(ea.j7({type:a4.FAVORITED_PROJECT_CONTEXT_MENU,data:{projectId:a.id,targetRect:r}}))},[t,a]),u=o.useCallback((e,a)=>{(0,aL.LP)(a.project?.id,ex.bk.FOLDER,a.sidebarSectionId??void 0,aL.vg),t(e_.gN(a.resourceId))},[t]);if(!l||null==a)return null;let _=(0,ri.o)({dispatch:t,currentOrgId:n,currentTeamId:r,collapsedCustomSections:i,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:ex.bk.FOLDER,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,updateFavorite:(r,n)=>{let i={entrypoint:"sidebar",sectionId:n,folder:a,favoriteId:e.favorite.id};r?t(tC.Mv(i)):t(tC.jv(i))}}),p=(0,ru.AE)(a.path),g=p?(0,ru.Nn)(a.path,p):a.path;return o.createElement(o.Fragment,null,o.createElement(eo.Z,{rowClassName:aw,onContextMenu:m,isSelected:e.isSelected,onClick:t=>u(t,e.favorite),icon:p?o.createElement("div",null,ry(p)):o.createElement(Q.In,{icon:"folder-16"}),showGrabber:e.showGrabber,text:o.createElement(R.E,{truncate:!0},g),isFavoritesToMove:e.isFavoritesToMove}),d&&o.createElement(rr,{projectId:a.id,orgId:a.orgId,organizeFavoriteOptions:_}))}var rb=a(102504),rw=a(869381);function rT(e){return o.createElement(rb.V,{thumbnailUrl:e.thumbnailUrl,thumbnailType:rw.F.PROTOTYPE,isLockedThumbnail:e.isLocked,noBorder:e.noBorder,borderRadius:e.borderRadius,size:e.size})}let rI=o.createElement(rc.oS,{type:rc.y1.PROTOTYPE,size:rc.LE.SMALL});function rN(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.currentTeamId),r=(0,s.d4)(e=>e.currentUserOrgId),n=(0,s.d4)(e=>e.favorites.collapsedCustomSections),i=(0,s.d4)(e=>e.dropdownShown),l=o.useMemo(()=>i&&i.type===a4.FAVORITED_PROTOTYPE_CONTEXT_MENU&&i.data.resource.prototype.id===e.favorite.prototype?.id,[i,e.favorite.prototype]),c=o.useMemo(()=>i&&i.type===ap,[i]),d=(0,ac.S)();if(null===e.favorite.prototype)return o.createElement(o.Fragment,null);let u=(0,aX._3)(e.favorite.prototype.fileKey,e.favorite.prototype.file?.name,e.favorite.prototype.pageId),_=(e,t)=>{if((0,aL.LP)(t.prototype?.fileKey,ex.bk.PROTOTYPE,t.sidebarSectionId??void 0,aL.vg),(0,D.oJ)(e)){e.stopPropagation();return}e.preventDefault(),m.Ay.redirect(u,"_blank")},p=(a,r)=>{a||null===e.favorite.prototype||t(tC.X7({prototype:{file_key:e.favorite.prototype.fileKey,page_id:e.favorite.prototype.pageId},entrypoint:"sidebar",favoriteId:r}))},g=(0,ri.o)({dispatch:t,currentOrgId:r,currentTeamId:a,collapsedCustomSections:n,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:ex.bk.PROTOTYPE,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,updateFavorite:(a,r)=>{if(a){let a={entrypoint:"sidebar",sectionId:r,favoriteId:e.favorite.id,resourceType:ex.bk.PROTOTYPE};t(tC.V1(a))}else p(!1,e.favorite.id)}});return o.createElement(o.Fragment,null,o.createElement(eo.Z,{isSelected:e.isSelected,rowClassName:aw,onContextMenu:a=>{a5(e.favorite,a,t,a4.FAVORITED_PROTOTYPE_CONTEXT_MENU)},showGrabber:e.showGrabber,onClick:t=>_(t,e.favorite),icon:rI,text:o.createElement(R.E,{truncate:!0,showTooltipWhenTruncated:!1},e.favorite.prototype.file?.name),badge:e.isHover&&!d?o.createElement("div",{className:ah},o.createElement(rm.r,{favoriteType:ex.bk.PROTOTYPE,resourceId:e.favorite.resourceId,favoriteId:e.favorite.id,size:rm.m.MEDIUM,setFavorite:p,orgId:e.favorite.orgId})):void 0,isFavoritesToMove:e.isFavoritesToMove}),!l&&!c&&o.createElement("div",{className:e.showPreviewDelay?av:ab,style:{transform:`translateY(${-e.previewYOffset}px)`}},o.createElement("div",{className:aT},o.createElement(rT,{isLocked:!!e.favorite.prototype.file?.hasProtoLinkPassword&&e.favorite.prototype.file?.hasProtoLinkPassword,thumbnailUrl:e.favorite.prototype.thumbnailUrl,noBorder:!0})),o.createElement("div",{className:aI},o.createElement(rc.oS,{type:rc.y1.PROTOTYPE,className:aC}),o.createElement("div",{className:aN},o.createElement("div",{className:ax},e.favorite.prototype.file?.name)))),d&&l&&e.favorite.prototype&&o.createElement(rn,{prototype:e.favorite.prototype,organizeFavoriteOptions:g}))}var rx=a(9821);function rC(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.currentUserOrgId),r=(0,s.d4)(e=>e.currentTeamId),n=(0,s.d4)(e=>e.favorites.collapsedCustomSections),i=(0,s.d4)(e=>e.dropdownShown),l=e.favorite.workspace,c=o.useMemo(()=>i&&i.type===a4.FAVORITED_WORKSPACE_CONTEXT_MENU&&i.data.workspaceId===l?.id,[i,l?.id]),d=o.useCallback((e,a)=>{let r=a.workspace;(0,aL.LP)(r?.id,ex.bk.WORKSPACE,a.sidebarSectionId??void 0,aL.vg),r&&t(ea.$T({view:"workspace",subView:tV.V0.DIRECTORY,workspaceId:r.id,selectedTab:tV.dN.TEAMS}))},[t]),m=o.useCallback(e=>{if(!l)return;e.stopPropagation(),e.preventDefault();let a={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};t(ea.j7({type:a4.FAVORITED_WORKSPACE_CONTEXT_MENU,data:{workspaceId:l.id,targetRect:a}}))},[t,l]);if(!a||null===l)return o.createElement(o.Fragment,null);let u=(0,ri.o)({dispatch:t,currentOrgId:a,currentTeamId:r,collapsedCustomSections:n,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:ex.bk.WORKSPACE,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,updateFavorite:(a,r)=>{let n={workspace:{id:l.id,name:l.name??"",imgUrl:e.favorite.workspace?.imgUrl??null},entrypoint:"sidebar",sectionId:r,favoriteId:e.favorite.id};a?t(tC.ZW(n)):t(tC.if(n))}}),_=e.favorite.workspace?o.createElement(tq.z6,{entity:e.favorite.workspace,size:16}):o.createElement(t_.B,{svg:rx.A,className:k.cx.colorIcon.$});return o.createElement(o.Fragment,null,o.createElement(eo.Z,{isSelected:e.isSelected,showGrabber:e.showGrabber,rowClassName:aw,onClick:t=>d(t,e.favorite),onContextMenu:m,icon:_,text:o.createElement(R.E,{truncate:!0}," ",l.name)}),c&&o.createElement(ra,{workspaceId:l.id,orgId:e.favorite.orgId,organizeFavoriteOptions:u}))}var rS=a(408409);let rk=(e,t)=>{let a=e.cloneNode(!0),r=document.createElement("div");return r.className="favorited_generic_row--favorite--vFcy4 favorited_generic_row--_favorite--jiaJX sidebar--sidebarSection---c9jn text--fontPos11--2LvXf text--_fontBase--QdLsd",Object.assign(r.style,{position:"absolute",top:"-100%",left:"-100%",width:`${e.clientWidth}px`,height:`${e.clientHeight}px`,overflow:"hidden",zIndex:-1}),t&&(a.classList.add(t),a.classList.add(k.cx.colorText.$)),r.appendChild(a),document.body.appendChild(r),r};function rA(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.dragState),[r,n]=o.useState(!1),i=e.favorite.resourceType,l=(0,eI._6)(),[c,d]=o.useState(!1),m=e.rearrangeDragState?.draggedOverFavoriteId===e.favorite.resource.id&&!c,[u,_]=o.useState(!1),p=o.useRef(null),g=(0,ac.S)(),f=r&&!g,E=e.isSelected||(()=>{switch(i){case ex.bk.FOLDER:return"folder"===l.view&&l.folderId===e.favorite.resource.resourceId;case ex.bk.TEAM:return"team"===l.view&&l.teamId===e.favorite.resource.resourceId;case ex.bk.WORKSPACE:return"workspace"===l.view&&l.subView===tV.V0.DIRECTORY&&l.workspaceId===e.favorite.resource.resourceId;default:return!1}})();return o.createElement("div",{className:m?e.rearrangeDragState?.dropBefore?"favorited_generic_row--dropBefore--xZvBN sidebar--dropBefore--wZDYO":e.rearrangeDragState?.dropInto?"favorited_generic_row--dropInto--VKuX5":"favorited_generic_row--dropAfter--a64Ax sidebar--dropAfter--JEX7d":void 0},o.createElement(B.Y,{key:e.favorite.resource.resourceId,isDragTarget:e=>{let t=new rs.le(e);return d(t.isFile()),a.type!==eQ.R.SidebarSection&&!t.isFile()},onTargetDragEnter:(t,r)=>{let n=new rs.le(t),i=!1;(a.type===eQ.R.Favorite||n.isFigFiles()||n.isRepos()||n.isPrototypes()||n.isTiles())&&((n.isFigFiles()||n.isRepos()||n.isTiles())&&(i=e.favorite.resourceType===ex.bk.FOLDER),e.updateRearrangeDragState({draggedOverFavoriteId:e.favorite.resource.id,dropBefore:i?r.upperQuarter:r.upper,dropInto:i&&r.middleVerticalHalf,draggedOverSectionId:e.favorite.resource.sidebarSectionId}),_(i))},onTargetDragLeave:t=>{let r=new rs.le(t);(a.type===eQ.R.Favorite||r.isFigFiles()||r.isRepos()||r.isPrototypes()||r.isTiles()&&m)&&(e.clearRearrangeDragState(e.favorite.resource.id),_(!1))},onTargetDrop:r=>{let n=new rs.le(r);if(e.rearrangeDragState?.dropInto&&e.favorite.resourceType===ex.bk.FOLDER&&e.favorite.resource.project)(0,rS.A)(t,e.favorite.resource.project,e.favorite.resource.project.team,n),t(as.T());else if(n.isFigFiles()||n.isRepos()||n.isPrototypes()||n.isTiles())e.onSetResourceFavoriteDragDrop(r);else if(a.type===eQ.R.Favorite&&m){let r=a.data;e.reorderOrInsertFavorite(r.resource.id,r.resourceType),t(as.T())}e.clearRearrangeDragState(e.favorite.resource.id),_(!1)},onTargetDragQuadrantUpdate:t=>{e.updateRearrangeDragState({draggedOverFavoriteId:e.favorite.resource.id,dropBefore:u?t.upperQuarter:t.upper,dropInto:u&&t.middleVerticalHalf,draggedOverSectionId:e.favorite.resource.sidebarSectionId})},draggable:!1},o.createElement("div",{onMouseEnter:()=>{e.preventHoverStyle||n(!0)},onMouseLeave:()=>{e.setShowPreviewDelay(!1),n(!1)},onDragStart:a=>{a.dataTransfer.effectAllowed="move";let r=new rs.le(a.dataTransfer);r.setArbitraryData(e.favorite.resource.id);let n=a.currentTarget.firstElementChild;if(null===n)return;let i=n.getBoundingClientRect(),l=a.clientX-i.left,o=a.clientY-i.top;p.current=rk(n,"favorited_generic_row--draggable--QinZd"),r.setDragImage(p.current,l,o),t(as.v({type:eQ.R.Favorite,data:e.favorite}))},onDragEnd:a=>{p.current&&p.current.remove(),t(as.T()),e.clearRearrangeDragState(e.favorite.resource.id),_(!1)},draggable:!e.isFavoritesToMove},(()=>{switch(i){case ex.bk.FILE:return o.createElement(rh,{favorite:e.favorite.resource,isHover:r,showGrabber:f,isSelected:E,previewYOffset:e.previewYOffset,showPreviewDelay:e.showPreviewDelay,sections:e.sections,isFavoritesToMove:e.isFavoritesToMove});case ex.bk.PROTOTYPE:return o.createElement(rN,{favorite:e.favorite.resource,isHover:r,showGrabber:f,isSelected:E,previewYOffset:e.previewYOffset,showPreviewDelay:e.showPreviewDelay,sections:e.sections,isFavoritesToMove:e.isFavoritesToMove});case ex.bk.FOLDER:return o.createElement(rv,{favorite:e.favorite.resource,isHover:r,showGrabber:f,isSelected:E,previewYOffset:e.previewYOffset,showPreviewDelay:e.showPreviewDelay,sections:e.sections,isFavoritesToMove:e.isFavoritesToMove});case ex.bk.TEAM:return o.createElement(ro,{favorite:e.favorite.resource,isHover:r,showGrabber:f,isSelected:E,previewYOffset:e.previewYOffset,showPreviewDelay:e.showPreviewDelay,sections:e.sections});case ex.bk.WORKSPACE:return o.createElement(rC,{favorite:e.favorite.resource,isHover:r,showGrabber:f,isSelected:E,previewYOffset:e.previewYOffset,showPreviewDelay:e.showPreviewDelay,sections:e.sections});default:(0,x.xb)(i)}})())))}var rR=a(975988),rL=a(949207),rD=a(432023),rP=a(604771),rF=a(501191);function rO(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.currentTeamId),r=function(){let e=(0,s.d4)(e=>e.dropdownShown),t=(0,s.d4)(e=>e.currentUserOrgId),a=(0,s.d4)(e=>e.currentTeamId),r=(0,p.kc)().ps_benchmark&&a;return!e||e?.type!=="favorited-file-context-menu"&&e?.type!=="favorited-prototype-context-menu"||t||r?null:e}(),n=(0,eb.sZ)(),i=n?.id??null,l=(0,eh.sb)(e.favorites,e.order),c=(0,eI._6)(),[d,m]=o.useState(!1),u=(0,s.d4)(e=>e.favorites.movingResource),g=(0,ac.S)(),f=(0,s.d4)(e=>e.favorites.collapsedCustomSections),E=g&&e.section?!f.has(e.section?.id):!f.has("favorited"),[h,y]=o.useState(!1),[v,b]=o.useState(),[w,T]=o.useState(),I=(0,s.d4)(e=>e.dragState),N=(0,_.ZC)(I);o.useEffect(()=>{I.type===eQ.R.None&&N&&N.type!==eQ.R.None&&T(void 0)},[I,N]),o.useEffect(()=>{!e.isCurrentHoveredSection&&I.type===eQ.R.SidebarSection&&w&&T(void 0)},[e.isCurrentHoveredSection,w,I]);let[x,C]=o.useState(void 0),[S,R]=o.useState(!0),L=o.useRef(null),D=ag();o.useEffect(()=>{x===w?.draggedOverFavoriteId&&T(void 0),C(void 0)},[w,T,x,C]);let P=o.useCallback(a=>{e.section?.id&&(a.dataTransfer.effectAllowed="move",new rs.le(a.dataTransfer).setArbitraryData(e.section.id),t(as.v({type:eQ.R.SidebarSection,data:e.section.id})))},[t,e.section]),F=o.useCallback(()=>{(0,aL.xs)(!E);let a=new Set(f);g&&e.section?(rR.Fp({type:"topLevel",id:"custom",orgId:i,sectionId:e.section?.id},!E),E?a.add(e.section.id):a.delete(e.section.id)):(rR.Fp({type:"topLevel",id:"favorited",orgId:i},!E),E?a.add("favorited"):a.delete("favorited")),t(tC.U6({collapsedCustomSections:a}))},[E,i,e.section,f,g,t]),U=(a,r)=>{let n;let i=l.map(e=>e.resource.id);if(!w?.draggedOverFavoriteId)return i;let o=-1!==i.indexOf(a);if(o)n=(0,M.moveItem)(i,a,w.draggedOverFavoriteId,w.dropBefore);else{let e=i.indexOf(w.draggedOverFavoriteId);w.dropBefore||(e+=1),n=[...i.slice(0,e),a,...i.slice(e)]}if((0,aL.hp)(),b(a),e.section?.id){o?t(tC.vg({sectionId:e.section.id,orderedFavoriteIds:n})):t(tC.V1({favoriteId:a,sectionId:e.section.id,resourceType:r,orderedFavoriteIds:n}));return}o||t(tC.V1({favoriteId:a,sectionId:void 0,resourceType:r})),t(e6.yJ({prefs:{id:e.fileBrowserPreferences?.id||"optimistic-id",orderedFavoritedResourceIds:n,orderedTeamIds:e.fileBrowserPreferences?.orderedTeamIds,orderedLicenseGroupIds:e.fileBrowserPreferences?.orderedLicenseGroupIds},userInitiated:!0}))},V=o.useCallback(e=>{e.stopPropagation(),v&&b(void 0)},[v]),H=o.useCallback(()=>{R(!0)},[]),W=o.useCallback(e=>{let t=new rs.le(e);return m(t.isFile()),t.isFigFiles()||t.isRepos()||t.isPrototypes()||t.isTiles()},[]),G=r=>{let n=new rs.le(r),o=[],s=[],d=[];if(y(!1),n.isFigFiles()){if(!(o=n.getData()))return!1}else if(n.isPrototypes()){if(!(d=n.getData()))return!1}else if(n.isRepos()){let e=n.getReposData();if(!e)return!1;s=e.repos}else if(n.isTiles()){let e=n.getTilesData();if(!e)return!1;o=e.files,s=e.repos,d=e.prototypes}o=o.filter(e=>!e.is_favorited),s=s.filter(e=>!e.is_favorited),d=d.filter(e=>!e.is_favorited);let m=l.map(e=>e.resource.id),u=o.length+s.length+d.length,_=(0,eh.kK)(i);if(u+l.length>_)return t(aD.F.enqueue({message:(0,A.t)("tile.favoriting.max_favorites",{maxFavorites:_})})),!1;let p=null;return w&&(p=m.indexOf(w.draggedOverFavoriteId)+(w.dropBefore?0:1)),t(tC.N9({files:o,repos:s,prototypes:d,orgId:i,teamId:a,selectedView:c.view,entrypoint:"sidebar",insertAtIndex:p,orderedFavorites:m,sectionId:e.section?.id,fileBrowserPrefs:e.fileBrowserPreferences})),!0},$=o.useCallback(()=>{y(!0)},[]),z=o.useCallback(()=>{y(!1)},[]),Y=O()([k.cx.relative.$,"favorited_section--showsCaret--vjo7-",h||w?.draggedOverSectionId&&e.section&&!d&&w.draggedOverSectionId===e.section.id?ay:""]),K=g?e.section?.name===""||e.section?.name===void 0?(0,A.tx)("sidebar.starred"):e.section.name:(0,A.tx)("sidebar.favorite_files"),Q=D?.data?.customSection?.id===e.section?.id,X=e.isCreatingNewSection||e.isRenaming,q=O()({"favorited_section--sectionHeaderContainer--otgqF sidebar--sectionHeaderContainer--TcvBb sidebar--sectionHeaderName--xToHG sidebar--sectionName--4N7hT sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa":!0,"favorited_section--actionButtonsVisibleOnHover--AOJ8E":!X,"favorited_section--actionButtonsVisible--Ey4QI":Q&&!X}),J=e.section?.name===void 0?(0,A.t)("sidebar.new_section"):(0,eh.R3)(e.section)?(0,A.t)("sidebar.starred"):e.section.name;return o.createElement(B.Y,{className:Y,isDragTarget:W,draggable:!1,onTargetDrop:G,onTargetDragEnter:$,onTargetDragLeave:z},o.createElement("div",null,o.createElement("div",{draggable:!0,onDragStart:P,className:q,onClick:F,onContextMenu:a=>{a.stopPropagation(),a.preventDefault();let r={top:a.clientY,right:a.clientX,bottom:a.clientY,left:a.clientX,width:1,height:1};t(ea.j7({type:ap,data:{customSection:e.section,favoritesCount:l.length,isFromRightClick:!0,targetRect:r}}))},role:"button",tabIndex:0},o.createElement(t_.B,{className:g?"favorited_section--expandCaretCustomSections--SUjwA":"favorited_section--expandCaret--LgAK5 sidebar--expandCaret--eXGWm",svg:E?rL.A:rD.A}),o.createElement("div",{className:"favorited_section--sectionName--PrU2k ellipsis--ellipsis--Tjyfa","data-onboarding-key":1===e.allSections.length?null:"FAVORITES_ONBOARDING_KEY"},e.isRenaming?o.createElement(j.p,{className:"favorited_section--input--8x-Vh",placeholderValue:J,submit:a=>{e.isCreatingNewSection?(u?t(tC.yH({name:a,insertAtIndex:e.sectionIndex,currentOrderedSections:e.allSections.map(e=>e.id),prefs:e.fileBrowserPreferences??void 0,newResourceForSection:u})):t(tC.YI({name:a,insertAtIndex:e.sectionIndex,currentOrderedSections:e.allSections.map(e=>e.id),prefs:e.fileBrowserPreferences??void 0})),e.setNewCustomSectionIndex&&e.setNewCustomSectionIndex(void 0)):e.section&&(t(tC.vg({sectionId:e.section.id,name:a.trim()})),e.setRenamingSectionId&&e.setRenamingSectionId(void 0))},cancel:()=>{e.isCreatingNewSection?(e.setNewCustomSectionIndex&&e.setNewCustomSectionIndex(void 0),u&&t(tC.to({movingResource:void 0}))):e.setRenamingSectionId&&e.setRenamingSectionId(void 0)},maxLength:25}):K),i&&o.createElement("div",{className:"favorited_section--actionButtons--VZ6Er"},o.createElement("div",{role:"button",tabIndex:0,className:aS,"data-tooltip-max-width":200,ref:L,onClick:a=>{D?t(ea.oB()):L.current&&t(ea.j7({type:ap,data:{targetRect:L.current.getBoundingClientRect(),customSection:e.section,favoritesCount:l.length}})),a.stopPropagation(),a.preventDefault()},onContextMenu:e=>e.stopPropagation()},o.createElement(t_.B,{svg:rP.A,className:ak})),o.createElement(rM,{newCustomSectionIndex:e.sectionIndex,setNewCustomSectionIndex:e.setNewCustomSectionIndex})))),o.createElement("div",{className:E?void 0:k.cx.hidden.$},(()=>{if(0===l.length){let t=1===e.allSections.length&&(0,eh.R3)(e.allSections[0]);return g||e.isCreatingNewSection?g&&t&&!e.isCreatingNewSection?o.createElement(aA,{setNewCustomSectionIndex:e.setNewCustomSectionIndex}):o.createElement(o.Fragment,null):o.createElement(rB,{setNewCustomSectionIndex:e.setNewCustomSectionIndex})}return o.createElement("div",{onMouseMove:V,onMouseLeave:H},l.map(t=>{let a=v===t.resource.id||t.resource.resourceId===r?.data?.resource.resourceId;return o.createElement(rA,{key:t.resource.resourceId,favorite:t,isSelected:a,onSetResourceFavoriteDragDrop:G,reorderOrInsertFavorite:U,clearRearrangeDragState:C,updateRearrangeDragState:T,rearrangeDragState:w,previewYOffset:e.previewYOffset,showPreviewDelay:S,setShowPreviewDelay:R,sections:e.allSections,preventHoverStyle:void 0!==v})}),r&&o.createElement(a7,{dropdownShown:r}))})()))}function rM(e){return o.createElement("div",{role:"button",tabIndex:0,className:aS,"data-tooltip-max-width":200,"data-tooltip-type":ei.Ib.TEXT,"data-tooltip":(0,A.t)("favorited_resources.create_a_new_section_tooltip"),onClick:t=>{t.stopPropagation(),e.setNewCustomSectionIndex&&e.setNewCustomSectionIndex(e.newCustomSectionIndex)},onContextMenu:e=>e.stopPropagation()},o.createElement(t_.B,{svg:rF.A,className:ak}))}function rB(e){return o.createElement("div",{className:"favorited_section--favoritedSectionEmptyState--Xhxgt sidebar--emptySection--SKfhv sidebar--sidebarSection---c9jn text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,A.tx)("sidebar.to_favorite_files_you_use_often"))}function rU(e){let t=(0,eh.ds)(e.favoritedFiles,e.favoritedPrototypes,e.favoritedProjects,e.favoritedTeams,e.favoritedWorkspaces);return o.createElement(rO,{favorites:t,order:e.fileBrowserPreferences?.orderedFavoritedResourceIds??void 0,fileBrowserPreferences:e.fileBrowserPreferences,isEnterpriseSidenavEnabled:e.isEnterpriseSidenavEnabled,allSections:e.userSidebarSections??[],sectionIndex:0,previewYOffset:e.previewYOffset})}function rV(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.dragState),r=(0,s.d4)(e=>e.favorites.newCustomSectionIndex),n=(0,s.d4)(e=>e.favorites.favoritesCount),i=(0,eh.ds)(e.favoritedFiles,e.favoritedPrototypes,e.favoritedProjects,e.favoritedTeams,e.favoritedWorkspaces),[l,c]=o.useState(),[d,m]=o.useState(),[u,_]=o.useState(!1),p=(0,ac.S)(),g=o.useMemo(()=>(0,eh.t$)(e.userSidebarSections??[],e.fileBrowserPreferences?.orderedSidebarSections??void 0),[e.userSidebarSections,e.fileBrowserPreferences?.orderedSidebarSections]);o.useMemo(()=>{n&&n<15&&i.length>=15&&(0,ao.YQ)({id:tp.FAVORITES_COUNT_CROSSED_THRESHOLD_EVENT}),t(tC.lF({favoritesCount:i.length}))},[n,i.length,t]);let f={},E=[];i.forEach(e=>{e.resource.sidebarSectionId?f[e.resource.sidebarSectionId]?f[e.resource.sidebarSectionId].push(e):f[e.resource.sidebarSectionId]=[e]:E.push(e)});let h=o.useCallback(()=>a.type===eQ.R.Favorite||a.type===eQ.R.SidebarSection,[a]),y=o.useCallback(e=>{a.type===eQ.R.SidebarSection&&_(e.upper)},[a]),v=o.useCallback(()=>{let r="starred"===l?void 0:l;if(a.type===eQ.R.Favorite){let e=a.data;t(tC.V1({favoriteId:e.resource.id,sectionId:r,resourceType:e.resourceType}))}else if(a.type===eQ.R.SidebarSection&&r){let n=g.map(e=>e.id)??[],i=(0,M.moveItem)(n,a.data,r,u);t(e6.yJ({prefs:{id:e.fileBrowserPreferences?.id||"optimistic-id",orderedFavoritedResourceIds:e.fileBrowserPreferences?.orderedFavoritedResourceIds,orderedTeamIds:e.fileBrowserPreferences?.orderedTeamIds,orderedLicenseGroupIds:e.fileBrowserPreferences?.orderedLicenseGroupIds,orderedSidebarSections:i},userInitiated:!0}))}_(!1),c(void 0),t(as.T())},[l,t,a,u,g,e.fileBrowserPreferences]),b=o.useCallback(e=>()=>{c(e)},[]),w=o.useCallback(()=>{c(void 0)},[]),T=o.useCallback(e=>{t(tC.pS({newCustomSectionIndex:e}))},[t]);if(0===g.length&&p&&void 0===r)return o.createElement(aR,{setNewCustomSectionIndex:T});let I=o.createElement("div",{className:k.cx.mb8.$},o.createElement(rO,{favorites:[],order:[],allSections:g,isEnterpriseSidenavEnabled:e.isEnterpriseSidenavEnabled,isRenaming:!0,setRenamingSectionId:m,sectionIndex:r||0,isCreatingNewSection:!0,setNewCustomSectionIndex:T,fileBrowserPreferences:e.fileBrowserPreferences,previewYOffset:e.previewYOffset}));return o.createElement("div",{className:k.cx.mt8.$},0===r&&I,g.map((t,n)=>{let i=a.type===eQ.R.Favorite?ay:u?"favorited_section--dropBefore--6poyi sidebar--dropBefore--wZDYO":"favorited_section--dropAfter--7G6L7 sidebar--dropAfter--JEX7d",s=O()([l===t.id?i:"",k.cx.mb8.$]);return o.createElement("div",{key:t.id},o.createElement(B.Y,{className:s,isDragTarget:h,draggable:!1,onTargetDragQuadrantUpdate:y,onTargetDrop:v,onTargetDragEnter:b(t.id),onTargetDragLeave:w},o.createElement(rO,{favorites:f[t.id]??[],sectionIndex:n,section:t,allSections:g,order:t.orderedFavoritedResourceIds??[],isEnterpriseSidenavEnabled:e.isEnterpriseSidenavEnabled,isRenaming:d===t.id,setRenamingSectionId:m,setNewCustomSectionIndex:T,previewYOffset:e.previewYOffset,isCurrentHoveredSection:l===t.id})),r===n+1&&I)}),p&&o.createElement(af,{setRenamingSectionId:m}))}var rH=a(768137),rW=a(372038),rj=a(660656),rG=a(838329),r$=a(585878),rz=a(533600);let rY=(0,ad.Ju)(function(e){let[t,a]=(0,o.useState)(null),r=(0,s.wA)(),n=(0,rW.Gs)(),i=(0,eN.TA)(),l=(0,s.d4)(e=>e.teamUserByTeamId),c=(0,s.d4)(e=>i?e.authedUsers.byId[i]?.plans?.filter(e=>!e.is_org):null),d=(0,A.t)("file_browser.planless_favorites.add_favorites_to_modal_title"),m=()=>r(ep.Ce()),u={};i&&(0,rG._)(l,i).forEach(e=>{e.drafts_folder_id&&(u[e.team_id]=e.drafts_folder_id)});let _=(e,t)=>{t&&r(rj.C({files:e,folderName:"",folderId:t,isDraftsToMove:!0,fromFileModal:!0}))};return o.createElement(r$.XV,{title:d,fixedTop:!0,minWidth:480,maxWidth:480,onClose:m,truncateTitleText:!0},o.createElement("div",{className:"move_favorites_modal--modalBody---Rdx2"},c&&o.createElement(tm.P,{width:480},o.createElement("div",{className:k.cx.pl8.pr8.$},c.map(e=>o.createElement(rK,{key:e.plan_id,planId:e.plan_id,name:e.name,imgUrl:e.img_url,checked:t?.plan_id===e.plan_id,onSelect:()=>a(t?.plan_id===e.plan_id?null:e)})))),o.createElement("div",{className:"move_favorites_modal--footer--ERUeX"},o.createElement(ts.nR,{onClick:m},(0,A.tx)("modal.cancel")),o.createElement(ts.vd,{disabled:!t,onClick:()=>{let a=t?.is_org?null:t?.plan_id,i=e.favorites.reduce((e,t)=>t.resourceType===ex.bk.FILE&&t.resource.file?.key?{...e,[t.resource.file?.key]:!0}:e,{}),l={},o=n.filter(e=>{let t=!!i[e.key];return t&&(l[e.key]=!0),t}),s=e.favorites.filter(e=>!(e.resourceType===ex.bk.FILE&&e.resource.file?.key)||!l[e.resource.file?.key]).map(e=>e.resource.id);r(tC.Ic({favoriteIds:s,teamId:a})),a&&_(o,u[a]),m()}},(0,A.t)("modal.confirm")))))},"MoveFavoritesModal");function rK(e){return o.createElement("button",{"data-testid":`${e.name}-button`,className:O()("move_favorites_modal--teamRow--qNRGf",e.checked?k.cx.colorBgSelected.$:""),onClick:e.onSelect},o.createElement("div",{className:"move_favorites_modal--iconContainer--oDATP"},e.checked?o.createElement(t_.B,{className:k.cx.colorIcon.$,svg:rz.A}):o.createElement(G.nl,{size:G.Pf.MEDIUM,shape:"CIRCLE",fallbackDisplay:$.U.HIDDEN,team:{id:e.planId,imgUrl:e.imgUrl}})),o.createElement("div",{className:"move_favorites_modal--teamName--pVqcu ellipsis--ellipsis--Tjyfa"},o.createElement("span",{className:"move_favorites_modal--destinationHeading--mwxLX"},e.name)))}var rQ=a(842232);let rX="favorited_drafts_to_move";function rq(e){let t=(0,s.wA)(),[a,r]=o.useState(!0),n=(0,s.d4)(e=>e.favorites.collapsedCustomSections),i=e.teamUser?.planlessFavoritedFiles?.filter(t=>!e.dataDriftCorrectedTeamResources?.favoritedFilesKeySet.has(t.resourceId)),l=e.teamUser?.planlessFavoritedPrototypes?.filter(t=>!e.dataDriftCorrectedTeamResources?.favoritedPrototypesIdSet.has(t.resourceId)),c=e.teamUser?.planlessFavoritedProjects?.filter(t=>!e.dataDriftCorrectedTeamResources?.favoritedFoldersIdSet.has(t.resourceId)),d=(0,eh.ds)(i,l,c),m=!n.has(rX),u=o.useCallback(()=>{rR.Fp({type:"topLevel",id:rX,orgId:null},!m),m?n.add(rX):n.delete(rX),t(tC.U6({collapsedCustomSections:n}))},[m,n,t]),_=o.useCallback(()=>{t(tC.vr({favoriteIds:d.map(e=>e.id)}))},[t,d]);if(0===d.length)return o.createElement(o.Fragment,null);let p=d.map(t=>o.createElement(rA,{key:t.resource.resourceId,favorite:t,isSelected:!1,onSetResourceFavoriteDragDrop:f.lQ,reorderOrInsertFavorite:f.lQ,updateRearrangeDragState:f.lQ,clearRearrangeDragState:f.lQ,rearrangeDragState:void 0,previewYOffset:e.previewYOffset,showPreviewDelay:a,setShowPreviewDelay:r,sections:[],preventHoverStyle:!1,isFavoritesToMove:!0}));return o.createElement(o.Fragment,null,o.createElement("div",{className:"favorited_section--divider--o9WjE favorited_section--divider--o9WjE"}),o.createElement("div",{className:O()("favorited_section--moveFavoritesContainer--qp39R",k.cx.pt4.pb4.ml8.mr8.mb8.$)},o.createElement("div",{className:O()(k.cx.flex.itemsCenter.justifyBetween.pl8.pr8.$,"favorited_section--favoriteToMoveHeaderContainer--2RB9p favorited_section--sectionHeaderContainer--otgqF sidebar--sectionHeaderContainer--TcvBb sidebar--sectionHeaderName--xToHG sidebar--sectionName--4N7hT sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa")},o.createElement("div",{onClick:u,className:k.cx.flex.itemsCenter.justifyBetween.$,role:"button",tabIndex:0},o.createElement(t_.B,{className:O()(k.cx.flex.itemsCenter.p6.mr12.colorIcon.$,"favorited_section--moveFavoritesContainerHeaderLeftBlockItems--pl1Hf"),svg:m?rL.A:rD.A}),(0,A.tx)("sidebar.move_these_starred_items"),o.createElement(t_.B,{svg:rQ.A,className:O()("favorited_section--helpIcon--vfl5Y",k.cx.flex.itemsBaseline.ml4.$),"data-tooltip-type":ei.Ib.TEXT,"data-tooltip":(0,A.t)("file_browser.planless_favorites.your_favorited_items_tooltip"),"data-tooltip-timeout-delay":50,"data-tooltip-max-width":200})),m?null:o.createElement(W.Ex,{text:d.length>99?"99+":`${d.length}`,color:W.zE.DEFAULT,className:k.cx.mr8.colorText.colorBgSelectedSecondary.$})),m?o.createElement("div",{className:"favorited_section--favoritesToMoveContentContainer--xYv6p"},p,o.createElement("div",{className:k.cx.flex.justifyBetween.m8.h24.$},o.createElement(rH.$$,{className:"favorited_section--favoritesToMoveActionButtons--FUt77",onClick:()=>{t(ep.to({type:rY,data:{favorites:d}}))}},(0,A.tx)("file_browser.planless_favorites.add_to_sidebar")),o.createElement(rH.nR,{className:"favorited_section--unstarAllButton--Rhy3- favorited_section--favoritesToMoveActionButtons--FUt77",onClick:_},(0,A.tx)("file_browser.planless_favorites.unstar_all")))):null))}function rJ(e){let t=(0,s.d4)(e=>e.currentTeamId),a=(0,s.wA)();return t?o.createElement(eo.Z,{isSelected:e.selectedView&&"limitedTeamSharedProjects"===e.selectedView.view,onClick:()=>{a(e_.eP()),a(ea.Oe({clickedResourceType:"limitedTeamSharedProjects"}))},icon:o.createElement(Q.In,{icon:"grid-32"}),text:o.createElement(R.E,{truncate:!0},(0,A.tx)("sidebar.all_shared_projects"))}):null}var rZ=a(459231);function r0(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.dragState),r=(0,eb.dq)(),[n,i]=o.useState(null),[l,c]=o.useState(!1),d=o.useRef(null),m=(r,n)=>{a.type!==eQ.R.Team&&console.error("Expected Team");let i=a.data;if(!i)return;let l=i.id,o=n.upper,s=(0,tf.n$)(e.sidebarData?.teamRoles?.map(e=>e.team)?.filter(e=>!!e)||[],e.sidebarData?.fileBrowserPreferences?.orderedTeamIds||[]),c=(0,M.moveItem)(s,l,r,o),d=e.sidebarData?.fileBrowserPreferences?.orderedFavoritedResourceIds;c!==s&&t(e6.yJ({prefs:{id:e.sidebarData?.fileBrowserPreferences?.id||"optimistic-id",orderedTeamIds:c,orderedFavoritedResourceIds:d,orderedLicenseGroupIds:e.sidebarData?.fileBrowserPreferences?.orderedLicenseGroupIds},userInitiated:!0}))},u=(e,a)=>{a.dataTransfer.effectAllowed="move";let r=new rs.le(a.dataTransfer);r.setArbitraryData(e),d.current&&r.setDragImage(d.current),t(as.v({type:eQ.R.Team,data:e})),a.stopPropagation()},_=()=>{t(as.T())},p=()=>(!(e.isEnterpriseSidenavEnabled&&a.data?.licenseGroupId)||a.data.licenseGroupId===e.licenseGroup?.id)&&a.type===eQ.R.Team,g=e=>{a.type===eQ.R.Team&&i(e)},f=e=>{c(e.upper)},E=e=>{i(t=>t===e?null:t)},h=(e,t)=>{m(e,t),i(null)},y=1!==e.orderedTeams.length;return o.createElement(o.Fragment,null,o.createElement("div",null,e.orderedTeams.map((t,a)=>o.createElement(B.Y,{key:t.id,className:n===t.id?l?"sidebar--dropBefore--wZDYO":"sidebar--dropAfter--JEX7d":"",isDragTarget:p,onTargetDragEnter:()=>g(t.id),onTargetDragQuadrantUpdate:f,onTargetDragLeave:()=>E(t.id),onTargetDrop:(e,a)=>h(t.id,a),draggable:y,onDragStart:e=>u(t,e),onDragEnd:_},o.createElement(e5,{key:t.id,team:t,sidebarData:e.sidebarData,projectsByTeam:e.projectsByTeam,onboardingKey:0===a?tp.TEAM_FILES_ONBOARDING_KEY:void 0,licenseGroup:e.licenseGroup}))),o.createElement("div",{className:"sidebar--dragImage--HwlFW",ref:d})),!(0,eh.D6)(r)&&e.contextSelectedFolder&&o.createElement(rZ.p,{folder:e.contextSelectedFolder,onRenameClick:e.onFolderRenameClick}))}function r1(){let e=(0,s.d4)(e=>e.currentUserOrgId),t=(0,s.d4)(t=>e?t.orgById[e]:null),a=(0,tD.c4)(e).data??!1;return t&&e?a?(0,A.t)("sidebar.browse.all_workspaces"):(0,A.t)("sidebar.browse.all_teams"):null}function r2(){let e=r1();return o.createElement(o.Fragment,null,e)}var r8=a(499893);function r4(){let e=(0,s.wA)(),t=(0,s.d4)(e=>e.currentUserOrgId),a=(0,s.d4)(e=>e.selectedView),r=(0,ac.S)(),n=(0,s.d4)(e=>t?e.orgById[t]:null),i="org"===a.view&&a.orgId===t,l=r1();return n&&t&&l?o.createElement(eo.Z,{isSelected:i,onClick:()=>{e(ea.$T({view:"org",orgId:t,orgViewTab:tE.X.HOME})),e(ea.Oe({clickedResourceType:"org",resourceIdOrKey:t}))},icon:o.createElement(t_.B,{className:k.cx.colorIcon.$,svg:r?rx.A:r8.A}),text:o.createElement(R.E,{truncate:!0},l)}):null}var r3=a(807749),r5=a(304783),r9=a(278733),r6=a(408462),r7=a(74592),ne=a(799569);function nt(){return o.createElement("div",{className:"base_upgrade_section--divider--k-uOp sidebar--divider--sHsz4"})}function na(e){return o.createElement(eg.fu,{name:e.trackingContext,properties:e.trackingProperties},o.createElement("div",{className:"base_upgrade_section--content--95XrT"},e.onDismiss&&o.createElement(ne.Jn,{className:"base_upgrade_section--closeButton--cbjWt",onClick:e.onDismiss}),e.header&&o.createElement("div",{className:k.cx.mb12.wFull.$},e.header,o.createElement(nt,null)),e.svg&&o.createElement(t_.B,{className:`base_upgrade_section--icon--B3S9V ${e.svgStyles??""}`,svg:e.svg}),e.countDownDaysLeft&&o.createElement("div",{className:"base_upgrade_section--countdownTicker--6YLVt"},o.createElement(R.E,{children:e.countDownDaysLeft,fontWeight:"medium",fontSize:14})),o.createElement("div",{className:"base_upgrade_section--textContainer--ObHaO"},e.titleText&&o.createElement("p",{className:"base_upgrade_section--title--MLhT1"},e.titleText),o.createElement("p",null,e.bodyText)),o.createElement(ts.vd,{className:"base_upgrade_section--ctaButton--B1ywj",onClick:e.onClickCTA,dataTestId:e.ctaDataTestId,trackingProperties:e.ctaTrackingProperties},e.ctaText)))}let nr="upgrade_section--upgradeTextEmphasized--aQCr9";var nn=a(491095),ni=a(247866),nl=(e=>(e[e.UPGRADE=0]="UPGRADE",e[e.CREATE=1]="CREATE",e))(nl||{});function no(e){let t=(0,s.wA)(),a=o.createElement("span",{className:nr},(0,A.t)("edu.sidebar_section.verified"));return o.createElement(na,{trackingContext:0===e.type?"Edu Upgrade Section":"Edu Create Section",svg:nn.A,bodyText:o.createElement(o.Fragment,null,a," ",0===e.type?(0,A.t)("edu.sidebar_section.upgrade"):(0,A.t)("edu.sidebar_section.create_team")),ctaText:0===e.type?(0,A.t)("edu.choose_team"):(0,A.t)("edu.create_free_team"),onClickCTA:0===e.type?()=>{t((0,ep.to)({type:r6.q}))}:()=>{t(e_.Dw({isEduTeam:!0}))},onDismiss:()=>{t(tS.b({dismissed_edu_sidebar:!0}))},ctaDataTestId:"edu-upgrade-cta"})}function ns({daysLeft:e}){let t=(0,s.wA)(),a=(0,J.Rs)(ee.UpR,{},{enabled:!(0,p.kc)().edu_bootcamps_reverification}),r=(0,te.H5)(),n=!!(0,tg.f)("edu_hide_verification");if((0,p.kc)().edu_bootcamps_reverification||(n=(a.data?.currentUser?.schoolType?.status===to.tT.Loaded?a.data.currentUser.schoolType.data:null)===r7.h6.BOOTCAMP_OR_ONLINE&&r()),e<0)return null;let i=()=>{t((0,ep.to)({type:z.V,data:{upsellSource:eA.b.EDU_UPGRADE_SECTION}}))},l=o.createElement(ts.eM,{onClick:()=>m.Ay.redirect("/education/apply",E.Ay.isIpadNative?void 0:"_blank")},(0,A.tx)("edu.sidebar_section.verify_your_education_status"));return e>0?o.createElement(na,{trackingContext:"Universal Upgrade Section Education Plan Countdown",countDownDaysLeft:e,titleText:(0,A.tx)("edu.sidebar_section.education_plan_expires_in_days",{daysLeft:e}),bodyText:n?(0,A.tx)("edu.sidebar_section.bootcamp_users_after_that_you_ll_need_to_upgrade_your_team"):(0,A.tx)("edu.sidebar_section.after_that_you_ll_need_to_upgrade_your_team_or_verify",{verify:l}),ctaText:(0,A.tx)("upgrade.upgrade_to_professional"),onClickCTA:i}):o.createElement(na,{trackingContext:"Universal Upgrade Section Education Plan Expired",svg:ni.A,titleText:(0,A.tx)("edu.sidebar_section.education_plan_expired"),bodyText:n?(0,A.tx)("edu.sidebar_section.bootcamp_users_to_keep_editing_upgrade_your_team"):(0,A.tx)("edu.sidebar_section.to_keep_editing_upgrade_your_team",{verify:l}),ctaText:(0,A.tx)("upgrade.upgrade_to_professional"),onClickCTA:i})}var nc=a(898211),nd=a(724838),nm=a(990546);function nu({orgUpsellEligibility:e}){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.userFlags),r=e===nd.VY.SINGLE_TEAM?(0,A.tx)("upgrade.access_cross_team_design_libraries_sso_and_more"):(0,A.tx)("upgrade.centralize_your_teams_and_share_design_libraries"),n=`${e===nd.VY.SINGLE_TEAM?"Single-Team":"Multi-Team"} Dismissible Org Upgrade Section`;return o.createElement(na,{trackingContext:n,svg:nm.A,bodyText:r,ctaText:(0,A.tx)("upgrade.view_plans"),onClickCTA:()=>{e===nd.VY.SINGLE_TEAM&&t((0,ep.to)({type:nc.HS,data:{upsellSource:eA.b.ORG_UPGRADE_SECTION}})),e===nd.VY.MULTIPLE_TEAMS&&t((0,ep.to)({type:nc.u3,data:{upsellSource:eA.b.ORG_UPGRADE_SECTION}}))},onDismiss:()=>t((0,nd.CJ)(a)),ctaDataTestId:"org-upgrade-cta"})}var n_=a(175290),np=a(378459);let ng="pro_trials_upgrade_section--divider--0tBoX sidebar--divider--sHsz4";var nf=a(707990);function nE(){let e=(0,s.wA)();return o.createElement(na,{trackingContext:"Universal Upgrade Section Pro Trial Entry",trackingProperties:eS.ng.getTrackingProperties(),svg:nf.A,titleText:o.createElement(R.E,null,(0,A.tx)("upgrade.free_professional_team_trial")),bodyText:o.createElement(R.E,null,(0,A.tx)("upgrade.enjoy_our_best_design_features_for_14_days")),ctaText:o.createElement(R.E,null,(0,A.tx)("upgrade.try_the_professional_plan")),onClickCTA:()=>e((0,ep.to)({type:np.m})),ctaDataTestId:"redesigned-upgrade-button-pro-trial-entry-upgrade",ctaTrackingProperties:eS.ng.getTrackingProperties("Try the Professional Plan"),svgStyles:"pro_trials_upgrade_section--sparkleIcon--ybCKo"})}function nh({team:e}){return o.createElement(n_.Y,{spacing:8,dataTestId:"team-info"},o.createElement(G.nl,{size:G.Pf.SMALL,team:e,fallbackDisplay:$.U.HIDDEN,shape:"ROUNDED_SQUARE"}),o.createElement(R.E,{children:e.name,fontWeight:"medium",fontSize:11,truncate:"end"}))}function ny({daysLeft:e,trialTeam:t,onClickCTA:a}){var r;let n=o.createElement(ts.eM,{onClick:a,dataTestId:"pro_trial_inline_upgrade",trackingProperties:eS.ng.getTrackingProperties()},(0,A.tx)("upgrade.pro_trial_inline_upgrade_cta"));return o.createElement(eg.fu,{name:"Universal Upgrade Section Pro Trial Countdown",properties:eS.ng.getTrackingProperties()},o.createElement("div",{className:ng}),o.createElement("div",{className:"pro_trials_upgrade_section--redesignedUpgradeSection--E-f1E"},o.createElement("div",{className:"pro_trials_upgrade_section--countdownInfo--sN5Pd"},o.createElement(nh,{team:t})),o.createElement("div",{className:ng}),o.createElement("div",{className:"pro_trials_upgrade_section--countdownDaysTicker--rDpWO"},o.createElement(R.E,{children:e,color:e<=2?"danger":"default",fontWeight:"medium",fontSize:24})),o.createElement("div",{className:"pro_trials_upgrade_section--countdownDaysLeftText--a-ppM"},o.createElement(R.E,{color:e<=2?"danger":"default",fontWeight:"medium",fontSize:13},(0,A.tx)("upgrade.days_left_in_trial",{days:e}))),o.createElement("div",{className:"pro_trials_upgrade_section--redesignedUpgradeText--ho-7F"},o.createElement(R.E,{children:(r=e)>=14?o.createElement(R.E,null,(0,A.tx)("upgrade.pro_trial_uub_countdown.this_counter_will_help_you_keep_track",{upgrade:n})):r>=10?o.createElement(R.E,null,(0,A.tx)("upgrade.pro_trial_uub_countdown.if_you_are_enjoying_your_trial",{upgrade:n})):r>=4?o.createElement(R.E,null,(0,A.tx)("upgrade.pro_trial_uub_countdown.try_out_these_features")):r>=2?o.createElement(R.E,null,(0,A.tx)("upgrade.pro_trial_uub_countdown.you_will_miss_these_files")):r>=1?o.createElement(R.E,null,(0,A.tx)("upgrade.pro_trial_uub_countdown.just_a_memory")):null})),e<=9&&o.createElement(ts.vd,{className:"pro_trials_upgrade_section--redesignedUpgradeButton--SP1nz",onClick:a,dataTestId:"redesigned-upgrade-button-pro-trial-countdown-upgrade",trackingProperties:eS.ng.getTrackingProperties()},o.createElement(R.E,null,(0,A.tx)("upgrade.upgrade_to_professional")))))}function nv(e){return o.createElement(na,{trackingContext:"Universal Upgrade Section Pro Trial Expired",trackingProperties:eS.ng.getTrackingProperties(),titleText:o.createElement(R.E,null,(0,A.tx)("upgrade.currently_on_starter_plan")),bodyText:o.createElement(R.E,null,(0,A.tx)("upgrade.your_trial_has_ended")),ctaText:o.createElement(R.E,null,(0,A.tx)("upgrade")),onClickCTA:e.onClickCTA,ctaDataTestId:"redesigned-upgrade-button-pro-trial-expired-upgrade",ctaTrackingProperties:eS.ng.getTrackingProperties(),header:o.createElement(nh,{team:e.team})})}function nb(e){let t=(0,s.wA)(),{ongoingUpgradableTrials:a,expiredUpgradableTrials:r}=e,n=(0,s.d4)(e=>e.teams),i=e=>{t((0,ep.to)({type:z.V,data:{teamId:e,upsellSource:eA.b.PRO_TRIAL_UPSELL_MODAL}}))};return r.length>0?o.createElement(nv,{team:n[r[0].teamId],onClickCTA:()=>i(r[0].teamId)}):a.length>0?o.createElement(ny,{trialTeam:n[a[0].teamId],daysLeft:a[0].daysLeft,onClickCTA:()=>i(a[0].teamId)}):null}var nw=(e=>(e.PRO_TRIALS_ENTRY="Pro Trials Entry",e.PRO_TRIALS_UPGRADE="Pro Trials Upgrade",e.EDU_EXPIRY="EDU Expiry",e.EDU_UPGRADE="EDU Upgrade",e.ORG_UPGRADE="Org Upgrade",e.UNIVERSAL="Universal",e))(nw||{});function nT({onTeam:e,hitFileLimit:t}){let a=(0,s.wA)(),r=ef.h.useTrackingContext({trigger:eA.b.UNIVERSAL_UPGRADE_SECTION}),n=t?o.createElement(o.Fragment,null,o.createElement("span",{className:nr},(0,A.tx)("upgrade.running_out_of_files_in_your_free_team"))," ",(0,A.tx)("upgrade.upgrade_to_give_your_ideas_and_designs_room_to_grow_without_limits")):(0,A.tx)("upgrade.ready_to_go_beyond_free_plan_upgrade_for_premium_features");return o.createElement(na,{trackingContext:"Universal Upgrade Section",trackingProperties:{onTeam:e,hitFileLimit:t,...r},svg:nm.A,bodyText:n,ctaText:(0,A.tx)("upgrade.view_plans"),ctaTrackingProperties:{trackingDescriptor:tZ.c.UPGRADE},ctaDataTestId:"redesigned-upgrade-button",onClickCTA:()=>{a((0,ep.to)({type:z.V,data:{upsellSource:eA.b.UNIVERSAL_UPGRADE_SECTION}}))}})}var nI=a(794272),nN=a(38580),nx=a(529928),nC=a(693223);let nS=(0,nN.eU)(e=>{let t=e(nC.m),a=e(nk),r=(0,p.kc)().ps_benchmark;if(!a)return!1;let n=[ex.P4.FILES_LIMITED,ex.P4.FILES_LIMITED_LEGACY,ex.P4.WHITEBOARD_FILES_LIMITED,ex.P4.WHITEBOARD_FILES_LIMITED_BETA].some(e=>a?.restrictions_list?.includes(e));return r?n:Object.values(t).some(e=>[ex.P4.FILES_LIMITED,ex.P4.FILES_LIMITED_LEGACY,ex.P4.WHITEBOARD_FILES_LIMITED,ex.P4.WHITEBOARD_FILES_LIMITED_BETA].some(t=>e.restrictions_list&&e.restrictions_list.includes(t)))}),nk=(0,nx.bt)(e=>{let t=e.currentTeamId;return t?e.teams[t]:null});function nA(){return o.createElement(P.tH,{boundaryKey:"SidebarUpgradeSection",fallback:P.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:r5.e.MONETIZATION_UPGRADES}},o.createElement(nR,null))}function nR(){let e=function(){let e=function(){let e=(0,ew.FC)(),t=(0,eN.TA)(),a=(0,tg.f)(eS.Jy),r=(0,eT.xX)(),n=(0,tk.a9)(),i=(0,s.d4)(e=>e.userTeamFlags);if(eS.ng.uxEnabled()&&!n){let{ongoingTrials:n,expiredTrials:l}=eS.ng.getUpgradableProTrials(i,e),o=l.filter(eS.ng.canSeeProTrialExpiryUx);if(n.length>0||o.length>0)return{type:nw.PRO_TRIALS_UPGRADE,props:{ongoingUpgradableTrials:n,expiredUpgradableTrials:o}};if(a&&r.length>0&&eS.ng.isUserInVariant(t))return{type:nw.PRO_TRIALS_ENTRY}}return null}(),t=function(){let e=(0,eN.iZ)(),t=(0,tk.a9)(),a=(0,tf.ol)(),r=(0,ew.FC)(),n=(0,J.Rs)(ee.UpR,{}),i=n.data?.currentUser?.eduPeriodEnd,l=(0,s.d4)(e=>e.userFlags);if(!e||"loaded"!==n.status)return null;let o=(0,H.x$)(i,(0,H.cn)(e)),c=o>0&&o!==1/0&&(0,H.cn)(e)&&a?.student_team_state===a0.kU.STUDENT_TEAM_CURRENT,d=0===o&&a?.student_team_state===a0.kU.STUDENT_TEAM_EXPIRED&&(0,er.oc)(a.id,r);if((0,p.kc)().edu_offboarding_experience&&(c||d))return{type:nw.EDU_EXPIRY,props:{daysLeft:o}};if(!l.dismissed_edu_sidebar&&(0,H.cn)(e)&&!t){let e=(0,er.Kg)(r).length>0;return{type:nw.EDU_UPGRADE,props:{type:e?nl.UPGRADE:nl.CREATE}}}return null}(),a=function(){let e=(0,eN.iZ)(),t=0===Object.keys((0,s.d4)(e=>e.orgById)).length,a=(0,s.d4)(e=>e.teams),r=(0,tf.ol)(),n=(0,C.md)(nS),i=!Object.values(a).some(e=>null!==e.subscription||e.student_team_at),l=!!(0,p.kc)().ps_benchmark,o=(0,C.md)(t1.Lm),c=(0,J.Rs)(ee.kQI,{id:r?.id??""},{enabled:!!r&&l}),d=(0,ti.vt)(),m=(0,te.Yz)();if(!e||l&&!r||l&&("loaded"!==c.status||!c.data.team?.hasPermission||"loaded"!==o.status||!o.data))return null;let u=r&&l&&!(0,H.cn)(e)&&!(0,er.w5)(a[r.id])&&!m(d);return!l&&t&&!(0,H.cn)(e)&&i||u?{type:nw.UNIVERSAL,props:{onTeam:Object.keys(a).length>0,hitFileLimit:n}}:null}(),r=function(){let e=(0,ew.FC)(),t=(0,s.d4)(e=>e.userFlags),a=(0,nI.R)(e=>({orgUsersByOrgId:e.orgUsersByOrgId,user:e.user,userFlags:e.userFlags,teams:e.teams,currentTeamId:e.currentTeamId})),r=(0,nd.hF)(a,e),n=(0,nd.j)(t);return r===nd.VY.NONE||n?null:{type:nw.ORG_UPGRADE,props:{orgUpsellEligibility:r}}}();return null!==e?e:null!==t?t:null!==a?a:null!==r?r:null}(),t=(0,te.fn)();return null===e?null:o.createElement(o.Fragment,null,![te.ih.VARIANT_A,te.ih.VARIANT_B].includes(t)&&o.createElement("div",{className:k.cx.my8.mx0.h1.$,style:r9.sx.add({backgroundColor:"var(--color-border)"}).$}),o.createElement(nL,{...e}))}function nL(e){switch(e.type){case nw.PRO_TRIALS_ENTRY:return o.createElement(nE,null);case nw.PRO_TRIALS_UPGRADE:return o.createElement(nb,{ongoingUpgradableTrials:e.props.ongoingUpgradableTrials,expiredUpgradableTrials:e.props.expiredUpgradableTrials});case nw.EDU_EXPIRY:return o.createElement(ns,{daysLeft:e.props.daysLeft});case nw.EDU_UPGRADE:return o.createElement(no,{type:e.props.type});case nw.ORG_UPGRADE:return o.createElement(nu,{orgUpsellEligibility:e.props.orgUpsellEligibility});case nw.UNIVERSAL:default:return o.createElement(nT,{onTeam:e.props.onTeam,hitFileLimit:e.props.hitFileLimit})}}var nD=a(913270),nP=a(195907);function nF(){let e=(0,s.wA)(),t=()=>{(0,V.sx)("community_browser_sidebar_action_clicked"),e(ea.$T({view:"communityHub",subView:"searchAndBrowse",data:(0,nD.Gu)()}))};return o.createElement(eg.L0,{trackingEventName:"community_browser_sidebar_action_clicked",className:O()(k.cx.flex.flexRow.itemsCenter.gap12.h48.pl16.pr16.colorText.cursorDefault.$,"explore_community_button--hoverColor--mDUIs"),"data-onboarding-key":nP.vM,onClick:e=>{e.preventDefault(),e.stopPropagation(),t()}},o.createElement(Q.In,{icon:"community-16"}),o.createElement(R.E,null,(0,A.tx)("sidebar.explore_community")))}function nO(e){return o.createElement("div",{className:k.cx.sticky.bottom0.colorBg.zIndex1.if(e.hasTopBorder,k.cx.bt1.colorBorder.bSolid).$},e.shouldShowUUBInFooter&&o.createElement("div",{className:k.cx.pb10.pt12.$},o.createElement(nA,null)),o.createElement(nF,null))}var nM=a(55710),nB=a(111075);function nU(e){return o.createElement("div",{className:k.cx.colorBg.if(e.hasBottomBorder,k.cx.bb1.colorBorder.bSolid).$},o.createElement(nB.Xg,null),o.createElement(nM.Zn,null))}var nV=a(900581),nH=a(278362);function nW(e){let t=(0,s.wA)(),a=(0,eI._6)(),r=(0,s.d4)(e=>e.currentUserOrgId),n=(0,ac.S)(),i=(0,s.d4)(e=>e.teamFeedBellStates),l=!!(r&&i[r]),c="teamFeed"===a.view;return o.createElement(eo.Z,{onClick:()=>{t(ea.$T({view:"teamFeed"})),t(ea.Oe({clickedResourceType:"teamFeed"}))},isSelected:c,icon:o.createElement(t_.B,{className:k.cx.colorIcon.$,svg:n?nH.A:nV.A}),text:o.createElement("span",{className:"team_feed_page_link--sectionNameCustomSections--dPwog sidebar--sectionNameCustomSections--9e7LZ sidebar--sectionTextCustomSections---1KFn sidebar--sectionContentCustomSections--wI9mZ ellipsis--ellipsis--Tjyfa"},o.createElement("div",{className:"team_feed_page_link--sectionNameCustomSectionsLeft--MLMFK"},(0,A.tx)("fig_feed.feed"),l&&o.createElement("div",{className:"team_feed_page_link--redDot--t6QPY red_dot--baseRedDot--pgZV7"})))})}function nj({selectedView:e,teamFolderId:t,teamFolderName:a}){let r=(0,s.wA)();return t&&a?o.createElement(eo.Z,{isSelected:e&&"folder"===e.view&&e.folderId===t,onClick:()=>{r(e_.gN(t)),r(ea.Oe({clickedResourceType:"folder"}))},icon:o.createElement(Q.In,{icon:"folder-32"}),text:o.createElement(R.E,{truncate:!0,showTooltipWhenTruncated:!1},a),"data-onboarding-key":Y.Jo}):null}var nG=a(699575);function n$(){let e=(0,s.wA)(),t="deletedFiles"===(0,s.d4)(e=>e.selectedView).view;return o.createElement(eo.Z,{isSelected:t,onClick:()=>{e(ea.$T({view:"deletedFiles"})),e(ea.Oe({clickedResourceType:"deletedFiles"}))},icon:o.createElement(t_.B,{className:k.cx.colorIcon.$,svg:nG.A}),text:o.createElement(R.E,null,(0,A.tx)("file_browser.tool_bar.trash"))})}var nz=a(630834);function nY(e){let t=(0,s.wA)(),a=(0,eN.iZ)(),r=(0,eb.dq)(),n=(0,s.d4)(e=>e.currentTeamId),i=(0,ev.Um)(),l=(0,s.d4)(e=>e.userFlags),c=(0,ew.FC)(),d=(0,s.d4)(e=>e.userStateLoaded),m=(0,eI._6)(),u=(0,s.d4)(e=>e.dragState),_=r&&l.show_create_new_section_banner,g=o.createRef(),f=(0,tl.s)(V.sx,tt.WL,!0),h=(0,p.kc)().limited_plan_spaces,[y,v]=o.useState(!_&&rR.hG({type:"topLevel",id:"teamsOrLicenseGroups",orgId:r})),[b,w]=o.useState(0),[T,I]=o.useState(!1),[N,x]=o.useState(!1),[C,S]=o.useState(!1),L=e=>{t(ea.z5({folderId:e.id}))},D=e=>{t(tS.b({show_create_new_section_banner:!1}))},P=e=>{t(tC.pS({newCustomSectionIndex:0})),D(e)},F=()=>{rR.Fp({type:"topLevel",id:"teamsOrLicenseGroups",orgId:r},!y),v(!y)},M=(0,p.kc)().ps_benchmark&&n,B=e.projectsByTeam[e4.USER_DRAFTS],H=B?B[0]:null,W=(0,U.He)(i),j=0===(e.sidebarData?.teamRoles?.map(e=>e.team).filter(e=>e)||[]).map(e=>e.id).length,G=(0,tr.wA)(c),$=(0,tk.a9)(),z=$&&$.permission===ex._D.ADMIN,Y=(0,eh.D6)(r),K=()=>d?o.createElement(nA,null):null,Q=(0,tA.l2)(G,z??!1,!1),X=o.createElement(o.Fragment,null,o.createElement(tw,{dispatch:t,notOnAnyTeams:j,currentOrgId:r,tooltipText:Q?(0,A.t)("license_group_view.toolbar.create_team_disabled"):void 0,disabled:Q||(0,eC.R$)(a,G?.id),onMouseEnter:Q?()=>{f(tt.jd,{orgId:r,orgName:G?.name,placement:"teamsSidebar"})}:void 0})),q=()=>!(0,en.canMemberOrg)(r,c)&&r||E.Ay.mobile?null:X,J=()=>{let e=!(0,en.canMemberOrg)(r,c);return o.createElement(o.Fragment,null,j&&o.createElement(o.Fragment,null,o.createElement(tT,{org:G,isOrgGuest:e,dispatch:t})))},Z=()=>o.createElement("div",{onClick:F,role:"button",tabIndex:0,className:"sidebar--sectionHeaderContainer--TcvBb sidebar--sectionHeaderName--xToHG sidebar--sectionName--4N7hT sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa"},o.createElement(t_.B,{className:"sidebar--expandCaret--eXGWm",svg:y?rL.A:rD.A,onClick:F}),o.createElement("div",null,e.isEnterpriseSidenavEnabled?o.createElement(o.Fragment,null,o.createElement("span",null,(0,A.tx)("sidebar.workspaces"))):(0,A.tx)("sidebar.teams"))),ee=o.createElement(e3,{sidebarData:e.sidebarData,projectsByTeam:e.projectsByTeam}),et=!r&&e.projectsByTeam[e4.USER_FOLDERS],er=e.sidebarData,ei=(0,p.kc)().ps_benchmark&&M?e.dataDriftCorrectedTeamResources?.favoritedFiles:er?.favoritedFiles,el=(0,p.kc)().ps_benchmark&&M?e.dataDriftCorrectedTeamResources?.favoritedPrototypes:er?.favoritedPrototypes,eo=(0,p.kc)().ps_benchmark&&M?e.dataDriftCorrectedTeamResources?.favoritedProjects:er?.favoritedProjects;eo&&e.FBGNavigationUpdatesTreatment!==te.ih.CONTROL&&(eo=eo.filter(t=>t.project?.id!==e.teamFolderId));let es=ei?.length===0&&el?.length===0&&eo?.length===0,ec=e.FBGNavigationUpdatesTreatment===te.ih.CONTROL||!es,em=e.FBGNavigationUpdatesTreatment===te.ih.VARIANT_A,eu=e.FBGNavigationUpdatesTreatment===te.ih.VARIANT_B,e_=!!u.data&&(u.type===eQ.R.Folder||u.type===eQ.R.Team||u.type===eQ.R.Favorite),ep=G&&o.createElement("div",{className:at},l.show_create_new_section_banner?o.createElement("div",{className:"sidebar--betaAnnouncementContainer--FfmFT"},o.createElement("div",{className:"sidebar--betaAnnouncementHeader--g6Qzz"},o.createElement("div",{className:"sidebar--betaAnnouncementHeaderTitle--AyDjm"},(0,A.tx)("favorited_resources.custom_sections_banner_header")),o.createElement("div",{role:"button",tabIndex:0,className:"sidebar--closeX---nRcN",onClick:e=>D(e)},o.createElement(t_.B,{svg:nz.default}))),o.createElement("div",{className:"sidebar--betaAnnouncementBodyContainer--8u60g"},o.createElement("p",null,(0,A.tx)("favorited_resources.custom_sections_banner_body")),o.createElement("br",null),o.createElement("p",null,o.createElement(ts.tM,{className:"sidebar--betaAnnouncementButton--RCpKp",onClick:e=>P(e)},(0,A.tx)("favorited_resources.custom_sections_banner_create_new_section_button"))))):null),eg=!(e.showLoadingState||e.showingFileBrowserLoader);return o.createElement(tc.A,{loadingElementId:"filebrowser-loading-sidebar",loaded:eg,backgroundColor:"default"},o.createElement("div",{className:k.cx.flex.flexColumn.wFull.$},o.createElement(nU,{hasBottomBorder:C}),o.createElement(tm.P,{className:"sidebar--sidebarScrollContainer--Z95XT",innerClassName:k.cx.hFull.$,scrollingDisabled:!1,onScroll:e=>w(e)},o.createElement(tu.a,{onIntersectionChange:t=>{S(!t.isIntersecting),t.isIntersecting||T||(e.trackScroll(),I(!0))}}),o.createElement("div",{className:O()("sidebar--navContent--15V3f",{"sidebar--grabbingCursor--6rbhU":e_})},o.createElement("div",{className:k.cx.flexGrow1.flex.flexColumn.$},o.createElement(o.Fragment,null,o.createElement(tx,null),(0,p.kc)().ps_benchmark&&o.createElement(al.r,{selectedView:m,dispatch:t}),o.createElement("div",{className:ar}),o.createElement("div",{className:k.cx.ml8.mr8.mt2.mb2.$},o.createElement(r3.b,null)),(0,p.kc)().xr_debounce_threshold&&G&&$&&$.permission!==ex._D.GUEST?o.createElement(nW,null):null,H&&o.createElement(ai.s,{folder:H,selectedView:m,dispatch:t,shouldHideCreateFileButton:e.isShowingLockedRedesign}),o.createElement(an,{userStateLoaded:d,sidebarData:e.sidebarData}),M&&o.createElement(o.Fragment,null,o.createElement(tX,{selectedView:m}),h&&o.createElement(rJ,{selectedView:m}),(0,p.kc)().pdr_trashed_section&&o.createElement(n$,null),o.createElement(ed,{selectedView:m}),e.FBGNavigationUpdatesTreatment!==te.ih.CONTROL&&o.createElement(nj,{selectedView:m,teamFolderId:e.teamFolderId,teamFolderName:e.teamFolderName})),!em&&!eu&&o.createElement("div",{className:at},K()),!($&&G)&&ec&&o.createElement("div",{className:ar}),$&&G&&(d?o.createElement(o.Fragment,null,o.createElement(r4,null),(0,p.kc)().pdr_trashed_section&&o.createElement(n$,null),G&&$&&!E.Ay.mobile&&o.createElement(tG,{selectedView:m,org:G,orgUser:$})):o.createElement("div",{className:aa},o.createElement(td.kt,null))),Y&&ep,d?o.createElement(o.Fragment,null,r?o.createElement(rV,{fileBrowserPreferences:e.sidebarData?.fileBrowserPreferences,favoritedFiles:ei,favoritedPrototypes:el,favoritedProjects:eo,favoritedTeams:er?.favoritedTeams,favoritedWorkspaces:er?.favoritedWorkspaces,userSidebarSections:er?.userSidebarSections?(0,to.oA)(er.userSidebarSections):[],isEnterpriseSidenavEnabled:e.isEnterpriseSidenavEnabled,previewYOffset:b}):o.createElement(o.Fragment,null,ec&&o.createElement(rU,{fileBrowserPreferences:e.sidebarData?.fileBrowserPreferences,favoritedFiles:ei,favoritedPrototypes:el,favoritedProjects:eo,favoritedTeams:null,favoritedWorkspaces:null,isEnterpriseSidenavEnabled:e.isEnterpriseSidenavEnabled,previewYOffset:b}),!M&&et&&o.createElement(o.Fragment,null,o.createElement("div",{className:ar}),o.createElement("div",{className:O()(["sidebar--sectionName--4N7hT sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa","sidebar--sharedProjectsSectionHeaderContainer--yEyoT sidebar--sectionHeaderContainer--TcvBb sidebar--sectionHeaderName--xToHG sidebar--sectionName--4N7hT sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa"])},o.createElement(R.E,null,(0,A.tx)("file_browser.shared_projects"))),ee)),(0,p.kc)().ps_benchmark&&M&&o.createElement(rq,{teamUser:er?.currentTeamUser,dataDriftCorrectedTeamResources:e.dataDriftCorrectedTeamResources,previewYOffset:b}),(()=>{if(M||(0,eh.D6)(r))return o.createElement(o.Fragment,null);let t=(0,tf.yR)(e.sidebarData?.teamRoles?.map(e=>e.team).filter(e=>!!e)||[],e.sidebarData?.fileBrowserPreferences?.orderedTeamIds||[]);return o.createElement(o.Fragment,null,o.createElement("div",{className:ar}),Z(),!e.isEnterpriseSidenavEnabled&&o.createElement("div",{className:k.cx.if(!y,k.cx.hidden).$},o.createElement(r0,{sidebarData:e.sidebarData,projectsByTeam:e.projectsByTeam,isEnterpriseSidenavEnabled:!1,orderedTeams:t,contextSelectedFolder:W,onFolderRenameClick:e=>L(e)}),J(),o.createElement("div",{ref:g}),q()))})()):o.createElement("div",{className:aa},o.createElement(td.kt,null)),eu&&o.createElement("div",{className:k.cx.sticky.bottom0.colorBg.pb10.pt12.$},K()))),o.createElement(tu.a,{onInitialLoad:e=>{x(!e)},onIntersectionChange:e=>{x(!e.isIntersecting)}}))),o.createElement(nO,{hasTopBorder:!eu&&!em&&(N||C),shouldShowUUBInFooter:em})))}function nK(e){let t;let a=(0,eN.iZ)(),r=(0,eb.dq)(),n=(0,eb.sZ)(),i=(0,s.d4)(e=>e.currentTeamId),l=(0,ew.FC)(),c=(0,s.wA)(),d=(0,tn.Q)({currentOrgId:r,currentTeamId:(0,p.kc)().ps_benchmark&&i||null}),m=(0,eN.TA)(),u=(0,s.d4)(e=>m?e.authedUsers.byId[m]?.plans:null),[{status:_,data:f}]=(0,g.IT)((0,eK.Xg)({teamId:i||void 0})),E="loaded"===_&&f?.length===1?f[0]:null,h=E?.id,y=E?.name,v=!(0,en.canMemberOrg)(n?.id??null,l),b="loaded"===d.status?d.data:null,w="loaded"!==d.status,T={},I={},N=[],x=(b?.currentUser?.sharedProjectRolesWithoutOrgDeletedDrafts||[]).filter(e=>{let{project:t}=e;if(!t)return!1;let a=t.team?.orgId||t.orgId;return r?a===r:!a}),C=(0,ti.vt)(i),S=(0,te.Yz)(),k=x.length>0,A=(0,o.useMemo)(()=>b?{...b.currentUser}:null,[b]),R=o.useMemo(()=>{if(A&&A.currentTeamUser&&i)return(0,eh.TF)(A,i,u)},[A,i,u]),L=e.showingFileBrowserLoader;if(o.useEffect(()=>{if((0,p.kc)().ps_benchmark&&i&&A&&A?.currentTeamUser){let e=A.currentTeamUser;!e.fileBrowserPreferences&&A.fileBrowserPreferences&&c(e6.Sh({prefs:A.fileBrowserPreferences,orderedFolderSubscriptions:A.fileBrowserSectionPreferences?.filter(e=>e.teamId===i)[0]?.orderedFolderIds??[],teamUser:e}))}},[i,A,c]),A){let e;t=A.privilegedOrgUser?.licenseGroupMember?.licenseGroup;let a=[],n=new Set;for(let e of A.teamRoles||[])e.team?.orgId!==r||e.team?.deletedAt||e.pending||(a.push(e),n.add(e.team.id),e.team?.licenseGroupId?(I[e.team.licenseGroupId]=I[e.team.licenseGroupId]||[],I[e.team.licenseGroupId].push(e)):e.team&&N.push(e));if(A.teamRoles=a,r&&A.baseOrgUser){let e=A.baseOrgUser;A.fileBrowserPreferences=e.fileBrowserPreferences,A.fileBrowserSectionPreferences=e.fileBrowserSectionPreferences}else(0,p.kc)().ps_benchmark&&i&&A.currentTeamUser&&(A.fileBrowserPreferences=A.currentTeamUser?.fileBrowserPreferences);let l=(A.projectSubscriptions||[]).sort((e,t)=>e.projectV2?.path?.toLowerCase()<t.projectV2?.path?.toLowerCase()?-1:1),o={};for(let e of l){let t=e.projectV2;if(!t||(o[t.id]=e.id,(t.team?t.team.orgId!==r:t.orgId!==r)||!t.team&&""===t.path||t.team&&""===t.path&&(0,p.kc)().ps_benchmark))continue;let a=n.has(t.teamId)?t.teamId:e4.USER_FOLDERS;T[a]=T[a]||[],T[a].push(t)}e7.zL(o),e=(0,p.kc)().ps_benchmark&&i?b?.currentUser.currentTeamUser?.draftsProject:r?b?.currentUser.baseOrgUser?.draftsProject:b?.currentUser.draftsProject,T[e4.USER_DRAFTS]=e?[e]:[]}return o.createElement(nY,{showingFileBrowserLoader:L,hasSharedProjects:k,sidebarData:A,projectsByTeam:T,teamRolesByLicenseGroup:I,teamsUnassignedToLicenseGroup:N,mainLicenseGroup:t,isEnterpriseSidenavEnabled:(0,tr.LU)(n??void 0,v,A??void 0),dataDriftCorrectedTeamResources:R,showLoadingState:w,trackScroll:()=>(0,tt.uE)("Sidebar Scrolled",{user:a}),isShowingLockedRedesign:S(C),FBGNavigationUpdatesTreatment:(0,te.fn)(),teamFolderId:h,teamFolderName:y})}function nQ(e){let t=(0,s.d4)(e=>e.mobileNavShown);return o.createElement("nav",{className:O()("sidebar--navDefault--pYuzm",{"sidebar--showMobileNav--YiFit":t})},o.createElement(P.tH,{boundaryKey:"FileBrowserSidebar",fallback:o.createElement(e9.R,null),hasCustomWASMBuild:ta.y4},o.createElement(nK,{...e})))}var nX=a(697551),nq=a(411916),nJ=a(935757),nZ=a(435011),n0=a(637590),n1=a(840083),n2=a(726732),n8=a(355025),n4=a(929018),n3=a(809838),n5=a(91408),n9=a(170588),n6=a(550642),n7=a(539321),ie=a(568214),it=a(138392),ia=a(168039),ir=a(809511),ii=a(231959),il=a(42173);let io=(0,nN.eU)(void 0),is=(0,ie.H0)("#2c2c2c");function ic(e){let t=(0,C.md)(io);if(!e||"unset"===t)return;let a=(e.colorConfig?.colors??[])[0];return t?(0,n7.colorToHex)(t):a}function id(e){return!!e&&"unset"!==e}function im(e){return e&&e!==ii.O&&"colorConfig"in e?e:void 0}function iu(e){return void 0!==e.team_id}function i_(e,t){if(e!==ii.O){if("team_id"in e&&e.team_id)return t.teams[e.team_id];if("workspace_id"in e)return e}}var ip=a(383986),ig=a(127391);function iE(e){return o.createElement(n_.Y,{spacing:4},o.createElement(ig.H,{entityId:e.planEntity.id,entityName:e.planEntity.name,imgUrl:e.planEntity.img_url}),o.createElement(R.E,{fontSize:13,color:"secondary"},e.planEntity.name))}let ih={folder:e=>e?{view:"folder",folderId:e}:void 0,team:e=>e?{view:"team",teamId:e}:void 0,workspace:e=>({view:"workspace",subView:tV.V0.DIRECTORY,workspaceId:e??null,selectedTab:tV.dN.TEAMS}),org:e=>e?{view:"org",orgId:e,orgViewTab:tE.X.HOME}:void 0};function iy({resource:e}){let t=(0,s.wA)(),a=(0,ew.FC)(),r=(0,eb.sZ)(),n=ic(im(e)),i=(0,J.Rs)(ee.bUn,{orgId:r?.id??null},{enabled:!!r}),l="loaded"!==i.status,c=i.data?.org?.workspaces??[],d=function(e,t){let a=(0,nI.R)(e=>({currentUserOrgId:e.currentUserOrgId,teams:e.teams,orgById:e.orgById}));return(0,o.useMemo)(()=>({folder:iu(e)?e:void 0,team:i_(e,a),workspace:function(e,t,a){let r=i_(e,t);if(e===ii.O);else if(r&&r.workspace_id)return a?.find(e=>e.id===r.workspace_id);else if(r&&!r.workspace_id&&r.org_id){let e=t.orgById[r.org_id];return e?.workspaces_count?ii.O:void 0}else if("domain_capture"in e||iu(e)||"workspace_id"in e)return;return e}(e,a,t),org:function(e,t){let a=i_(e,t);return a?.org_id?t.orgById[a.org_id]:e===ii.O?t.currentUserOrgId?t.orgById[t.currentUserOrgId]:void 0:"org_id"in e?e.org_id?t.orgById[e.org_id]:void 0:"orgId"in e?e.orgId?t.orgById[e.orgId]:void 0:"domain_capture"in e?e:void 0}(e,a)}),[e,a,t])}(e,l?[]:[...c]);if(r||d.org?r?.id!==d.org?.id:!d.team||!(0,en.canViewTeam)(d.team.id,a)){let e=d.org??d.team;return e?o.createElement(iE,{planEntity:e}):null}let m=e===ii.O?void 0:e.id,u=(e,a)=>{let n=a===ii.O?void 0:a.id,i=ih[e](n);(0,tt.Cu)({clickedResourceType:e,clickedResourceId:n,currentResource:m,orgId:r?.id}),i&&t(ea.$T(i))},_=["org","workspace","team","folder"].reduce((e,t)=>{let a=d[t];if(a){let r="workspace"===t&&!a.canView,i=a===ip.s?(0,A.t)("breadcrumbs.unassigned_license_group"):r?(0,A.t)("breadcrumbs.private_workspace_ellipses"):a?.name;e.push({text:i,onClick:()=>{r||u(t,a)},parentBackgroundColor:n,isHoverable:!(a===ip.s||r)})}return e},[]);return _.pop(),o.createElement(S.B,{items:_})}function iv(e){return e.rightSideActions?o.createElement(ib,{headerLabel:e.label,rightSideActions:e.rightSideActions}):e.label}function ib(e){let t=(0,J.Rs)(ee.RIo,{orgId:null});return((0,J.ap)(t,"file_creation_defaults_latency"),"loaded"!==t.status)?null:o.createElement("div",{className:k.cx.flex.justifyBetween.wFull.itemsCenter.columnGap16.$},e.headerLabel,o.createElement("div",{className:k.cx.flex.gap8.$},e.rightSideActions))}function iw(e){let t=ic(im(e.resource));return o.createElement("div",{className:k.cx.if(e.showNavigationChevrons,k.cx.pl20,k.cx.pl32).if(!!e.pageHeaderContent,k.cx.bb1.colorBorder.bSolid).flex.flexRow.flexShrink0.gap8.itemsCenter.h48.pr32.$,style:{backgroundColor:t},"data-testid":"file-browser-desktop-header"},e.showNavigationChevrons&&o.createElement(n3.J,{parentBackgroundColor:t}),e.pageHeaderContent?o.createElement("span",{className:k.cx.minW0.wFull.$},o.createElement(iv,{label:e.pageHeaderContent,rightSideActions:e.pageHeaderActions})):e.resource&&o.createElement(iy,{resource:e.resource}))}var iT=a(860168);let iI=(0,n5.jz)(iT.tgj);function iN(e){return o.createElement(o.Fragment,null,o.createElement(n9.z,{query:`(min-width: ${iI}px)`,defaultClass:k.cx.sticky.top0.colorBg.zIndexTopBar.$},o.createElement(iw,{resource:e.breadcrumbResource,pageHeaderContent:e.pageHeaderContent?o.createElement(R.E,{fontSize:13,truncate:!0},e.pageHeaderContent):void 0,pageHeaderActions:e.pageHeaderActions,showNavigationChevrons:e.showNavigationChevrons})),e.pageHeaderContent&&o.createElement(n6.i,{tabs:[o.createElement(R.E,{key:"mobilePageHeaderKey",truncate:!0},e.pageHeaderContent)]}))}function ix(e){let t=(0,s.d4)(({selectedView:e})=>e),a=(0,eb.dq)(),r=(0,n3.E)(),n=(0,s.d4)(nZ.iy),i=(0,tD.P)(a,(0,s.d4)(nZ.o$)),l=(0,n8.K)(),m=(0,eb.sZ)(),u=l&&m&&!n0.T8.includes(t.view);!function(){let e=(0,p.kc)().ps_benchmark,t=(0,s.Pj)();o.useEffect(()=>{if(!e)return;let a=t.getState(),r=(0,en.getPermissionsState)(a),n=(0,nq.vp)(r.user,r.currentUserOrgId,r.currentTeamId);n&&(0,nJ.Y9)(n.userId,(0,nX.d9)(a.selectedView),n.orgId,void 0,n.teamId)},[t,e])}();let _=n||i.data||void 0,g="orgAdminSettings"===t.view||"licenseGroup"===t.view&&t.subView===tB.GN.ADMIN||"workspace"===t.view&&t.subView===tV.V0.ADMIN||"billingGroupDashboard"===t.view,f=!e.showingFileBrowserLoader&&!g&&(!!d.eD||(0,c.ce)()||_||e.pageHeaderContent);return o.useEffect(()=>{let e=e=>{e.keyCode===D.Uz.PERIOD&&document.activeElement?.tagName==="BODY"&&(0,p.kc)().internal_only_debug_tools&&(0,p.kc)().figment_debugger&&(0,n2.Y)()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),o.createElement("div",{className:k.cx.flex.flexRow.flexGrow1.$},o.createElement(nQ,{showLoadingState:!1,showingFileBrowserLoader:e.showingFileBrowserLoader}),o.createElement("div",{className:"file_browser_layout--fileBrowserPageViewContainer--m7oe2"},f&&o.createElement(P.tH,{boundaryKey:"FileBrowserPageHeader",fallback:P.H4.NONE_I_KNOW_WHAT_IM_DOING,hasCustomWASMBuild:ta.y4},o.createElement(iN,{pageHeaderContent:e.pageHeaderContent,pageHeaderActions:e.pageHeaderActions,breadcrumbResource:_,showNavigationChevrons:r})),o.createElement(P.tH,{boundaryKey:"FileBrowserLayout-content",fallback:o.createElement(e9.R,null),hasCustomWASMBuild:ta.y4},!e.showingFileBrowserLoader&&(u?o.createElement(n4.H,{org:m,isInFileBrowser:!0}):e.children))),o.createElement(n1.G,{entryPoint:n1.Q.FILE_BROWSER}))}var iC=a(90885);a(461816),(n||(n={})).filter=function(e,t){return"loaded"!==e.status?e:(0,to.gB)(e.data.filter(t))};var iS=a(336191),ik=a(660986);function iA(e){return o.createElement("div",{className:ik.p$},o.createElement("div",{className:ik._U},(0,A.tx)("team_tile.no_teams.title")),e.onCreateTeam&&o.createElement(o.Fragment,null,o.createElement("p",null,(0,A.tx)("team_tile.no_teams.info")),o.createElement(ts.cw,{className:ik.yd,onClick:e.onCreateTeam},o.createElement(t_.B,{svg:tv.A,className:ik.RS}),(0,A.tx)("team_tile.no_teams.create_team_button"))))}var iR=a(785598);function iL(e){let t=[...e.orgTeams.data||[]],a=t.length<M.REASONABLE_LOCALE_SORT_CUTOFF;(0,M.sortAlphabeticallyByProperty)(t,"name",{useExpensiveNaturalComparison:a});let r="loaded"!==e.orgTeams.status,[n,i]=o.useState(void 0),l=(0,s.wA)(),c=(e,t)=>{e.stopPropagation(),e.preventDefault();let a={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};i(t.id),l(ea.j7({type:Y.RQ,data:{teamId:t.id,targetRect:a}}))};return o.createElement(iS.X,{isLoading:r,emptyView:e.emptyView??o.createElement(iA,{onCreateTeam:e.onCreateTeam})},t.map(t=>o.createElement(iR.mc,{key:t.id,team:t,onJoin:e.onJoin,onLeave:e.onLeave,setSelectedTeamId:i,selectedTeamId:n,onContextMenu:c})))}var iD=a(245675),iP=a(297032);function iF(e){let[t,a]=o.useState(!1),r=(0,s.wA)(),n=(0,s.d4)(e=>e.selectedView),i=(0,ew.FC)(),l=e.team,c=()=>{(0,tt._J)("file_browser_team_click",l.id,i,{selectedView:"recentsAndSharing"===n.view?n.tab||tN.G.RECENTLY_VIEWED:n.view,viewMode:"grid"}),r(e_.kg({clickedResourceType:"team",resourceIdOrKey:l.id})),r(ea.$T({view:"team",teamId:l.id}))},d=e.selectedTeamId===e.team.id,m=t||d;return o.createElement(iD.a,{name:l.name,description:l.description,headerLeft:o.createElement(tq.Ro,{className:ik.rP,entity:l,size:40}),headerRight:o.createElement(iP.m,{team:l,onLeave:e.onLeave,isCardActive:m}),onClick:t=>{1===t.detail?e.setSelectedTeamId(e.team.id):2===t.detail&&c()},canView:!0,isCardActive:m,isSelected:d,onMouseOver:()=>{a(!0)},onMouseOut:()=>{a(!1)}})}function iO(e){let t=e.teams;(0,M.sortAlphabeticallyByProperty)(t,"name");let[a,r]=o.useState(void 0);return o.createElement(iS.X,{emptyView:(0,A.tx)("team_tile.guest.no_teams.info",{orgName:e.orgName})},t.map(t=>o.createElement(iF,{key:t.id,team:t,onLeave:e.onLeave,selectedTeamId:a,setSelectedTeamId:r})))}var iM=a(377090),iB=a(937294),iU=a(626322),iV=a(590564);let iH=(0,nN.eU)(()=>(0,to.gB)([])),iW=(0,s.Ng)(e=>({teamRoleRequests:e.teamRoleRequests,currentOrgUser:e.orgUsersByOrgId[e.currentUserOrgId][e.user.id],teams:e.teams,user:e.user,roles:e.roles,org:e.orgById[e.currentUserOrgId],orgId:e.currentUserOrgId,orgName:e.orgById[e.currentUserOrgId].name,permissionsState:(0,en.getPermissionsStateMemoized)(e)}))(function(e){let t=(0,s.wA)(),a=e.currentOrgUser&&e.currentOrgUser.permission===ex._D.GUEST,r=Object.keys((0,iU.t)(e.roles.byTeamId,e.user.id)).filter(t=>e.teams[t]);if(a){let{orgId:a}=e,n=r.map(t=>e.teams[t]).filter(e=>e.org_id===a);return o.createElement(iO,{teams:n,onLeave:e=>{t(ep.to({type:iV.p,data:{teamId:e.id}}))},orgName:e.orgName})}let i=e.workspace?.id??ii.O,l=n.filter(e.orgTeams,t=>{if(e.onlyJoinedTeams)return(0,en.hasViewerRoleAccessOnTeam)(t.id,e.permissionsState);if(i===ii.O){if(t.workspace_id)return!1}else if(i&&t.workspace_id!==i)return!1;return(0,iB.dP)(t,e.permissionsState,e.orgId)});return o.createElement(iL,{orgTeams:l,onJoin:e=>(0,iM.GR)(t,e)(),onLeave:e=>{t(ep.to({type:iV.p,data:{teamId:e.id}}))},onCreateTeam:e.canCreateTeam?()=>{let a={workspaceId:e.workspace?.id??ii.O};t(ep.to({type:th.Uc,data:a}))}:void 0,emptyView:i&&!e.canCreateTeam?(0,A.t)("team_tile.no_teams.empty_workspace"):void 0})});function ij(e){let t=(0,eb.sZ)(),a=(0,ew.FC)(),r=!(0,en.canMemberOrg)(t?.id??null,a),n=(0,C.md)(r?iH:iC.E),{canCreateTeam:i}=(0,tD.l6)(t,e.workspace?.id);return o.createElement(iW,{orgTeams:n,workspace:e.workspace,canCreateTeam:i,onlyJoinedTeams:e.onlyJoinedTeams})}var iG=a(214289),i$=a(602242),iz=a(939683);function iY(e){return o.createElement(rH.nR,{className:"button_custom--buttonSecondaryDisabled--9JtXq","data-tooltip-type":ei.Ib.TEXT,"data-tooltip":e.tooltipText,"data-tooltip-show-immediately":!0,onMouseEnter:e.onMouseEnter},e.text)}function iK({backgroundColor:e}){let t=(0,iz.NV)(tt.WL),a=(0,s.d4)(e=>e.selectedView.view),r=(0,A.t)("license_group_view.toolbar.new_team_button"),n=()=>{t(tt.jd,{placement:a})};return e?o.createElement("button",{className:O()("button_custom--buttonBase--H2KEL button--buttonBase---72nl",(0,ie.kx)(e)?"button_custom--buttonColorsForDarkBackground--CiydL":"button_custom--buttonColorsForLightBackground--wejKf","button_custom--buttonHugContents--Ntibj"),"data-tooltip-type":ei.Ib.TEXT,"data-tooltip":(0,A.t)("license_group_view.toolbar.create_team_disabled"),"data-tooltip-show-immediately":!0,onMouseEnter:n,disabled:!0},o.createElement(R.E,{fontSize:11,fontWeight:"medium",truncate:!0},r)):o.createElement(iY,{text:r,tooltipText:(0,A.t)("license_group_view.toolbar.create_team_disabled"),onMouseEnter:n})}var iQ=a(239831);function iX({avatar:e,title:t,rightSideActions:a,rightSideOfTitleAction:r,pageHeaderIcon:n,belowHeaderItem:i,textColor:l,badge:s}){return o.createElement(o.Fragment,null,o.createElement(n6.i,{tabs:null,hideToolBarOnMobile:!0}),o.createElement("div",{className:O()(k.cx.mt12.mx32.mb20.$,"page_header--mx16Mobile--8Eihb")},o.createElement("div",{className:k.cx.flex.mt8.itemsCenter.justifyBetween.$},o.createElement("div",{className:k.cx.flex.itemsCenter.h40.minW0.$},e,o.createElement("div",{className:k.cx.wFull.overflowHidden.$,style:r9.sx.if(e&&!n,r9.sx.ml16).$},o.createElement("span",{className:k.cx.flex.itemsCenter.$},n,o.createElement(R.E,{color:l,fontSize:24,truncate:"line-clamp",lineClamp:2},t," "),o.createElement("div",{className:k.cx.ml8.$},s),r&&r.element))),o.createElement("div",{className:k.cx.flex.ml16.gap8.$},a?.map(e=>o.createElement(iQ.K,{action:e,key:e.key}))))),i)}var iq=a(798099),iJ=a(292164);function iZ(e){let t=(0,s.wA)(),a=o.useRef(null),r=(0,s.d4)(({dropdownShown:e})=>e),n=e.dropdownKey&&e.dropdownOptions&&r&&r.type===e.dropdownKey&&r.data&&r.data.targetRect,i=(0,eg.j6)();return o.createElement("button",{ref:a,onClick:()=>{a.current&&t(ea.j7({type:e.dropdownKey,data:{targetRect:a.current.getBoundingClientRect()}}))},onMouseDown:iq.dG,className:k.cx.bgNone.ml8.$,"aria-label":e.buttonAriaLabel},o.createElement(t_.B,{svg:iJ.A,className:O()("page_header_dropdown--dropdownIcon--tr-Wo",e.dropdownColorClassName?e.dropdownColorClassName:"page_header_dropdown--dropdownIconColor--kMRsm")}),n&&o.createElement(a_.j,{parentRect:r.data.targetRect,minWidth:224,rootAndSubmenuMaxWidth:224,items:e.dropdownOptions,dispatch:t,onSelectItem:e=>{e.callback&&e.callback("",null,t),e.trackingProperties&&(0,tt.Cu)({...i.properties,trackingContext:i.name,...e.trackingProperties})},showPoint:!0}))}var i0=a(96796),i1=a(46481),i2=a(553015);let i8=o.forwardRef(function({disabled:e,onClick:t,onKeyDown:a,icon:r,children:n,onFocus:i,onBlur:l},s){let c=o.useCallback(e=>{a?.(e),e.keyCode===D.Uz.ESCAPE&&e.currentTarget.blur()},[a]);return o.createElement("button",{disabled:e,onClick:t,onKeyDown:c,className:O()("inverted_inverse_button--buttonBase--P39G5 button--buttonBase---72nl","inverted_inverse_button--buttonColors--7P1RD","inverted_inverse_button--buttonHugContents--PlfBM"),onFocus:i,onBlur:l,ref:s},r&&o.createElement("div",{className:"inverted_inverse_button--iconContainer--nR8Kk"},o.createElement(Q.In,{icon:r})),n&&o.createElement(R.E,{fontSize:11,fontWeight:"medium",truncate:!0},n))});var i4=a(783423),i3=a(740998);let i5=(e,t)=>{if(t)return k.cx.colorIconDisabled.$;switch(e){case"primary":case"destructive":case"success":case"toolbar-secondary":return k.cx.colorIconOnbrand.$;case"inverse":return k.cx.colorIconOninverse.$;default:return k.cx.colorIcon.$}},i9=o.forwardRef((e,t)=>{let a=o.createElement("div",{className:k.cx.flex.gap6.itemsCenter.$,"data-testid":e.dataTestId},o.createElement(t_.B,{className:i5(e.variant,e.disabled),svg:i3.A}),o.createElement(R.E,null,e.text),e.hasDropdown&&o.createElement(i1.U,{className:i5(e.variant,e.disabled),svg:i4.A},o.createElement(i0.O,{className:"plus_button--icon--zl7Xl"})));return"inverted-inverse"===e.variant?o.createElement(i8,{onMouseDown:e.onMouseDown?e.onMouseDown:f.lQ,onClick:e.onMouseDown?f.lQ:e.onClick,disabled:e.disabled},a):o.createElement(i2.$,{"data-onboarding-key":e["data-onboarding-key"],variant:e.variant,onMouseDown:e.onMouseDown?e.onMouseDown:f.lQ,onClick:e.onMouseDown?f.lQ:e.onClick,disabled:e.disabled,ref:t},a)});var i6=a(895379),i7=a(268537),le=a(56342),lt=a(300587),la=a(677859),lr=a(260378),ln=(e=>(e.SOLID="solid",e.NO_FILL="no_fill",e))(ln||{});function li({selectedFillOption:e,onSelectFillOption:t}){let a={solid:(0,A.t)("workspace_view.toolbar.solid"),no_fill:(0,A.t)("workspace_view.toolbar.no_fill")};return o.createElement(i7.Ve,{className:k.cx.ml8.colorTextMenuSecondary.colorIconMenuSecondary.$,dropdownButton:function({onClick:t}){return o.createElement(la.$n,{className:k.cx.ml4.mr4.$,role:"combobox",onClick:t,caret:"down"},o.createElement("span",{className:k.cx.minW32.mr8.$},a[e]))},dropdownOptionsClassName:k.cx.mt4.$,options:["solid","no_fill"].map((e,r)=>o.createElement(i7.c$,{className:k.cx.colorTextMenuSecondary.$,key:r,id:e,onClick:()=>{t(e)}},a[e])),optionsBelowSelector:!0,noBorder:!0})}let ll=aq.M4.Mutation(async e=>{await le.u.updateColor(e)});function lo({workspace:e,onClose:t}){let a=(0,s.wA)(),r=(0,aq.n_)(ll),n=[{option:is},...(0,il.TS)("base").filter(e=>!(0,ie.DA)(e,(0,il.BV)(ir.daH.BLACK,"base"))).map(e=>({option:e})),...(0,il.TS)("baseLight").map(e=>({option:e}))],i=o.useRef(null),[l,c]=o.useState(!1),d=(0,ia.DP)(),m=function(e){try{if(e)return(0,ie.H0)(e)}catch(e){console.error(e)}}((e?.colorConfig?.colors??[])[0]),[u,_]=o.useState(m?"solid":"no_fill"),[p,g]=(0,C.fp)(io);return o.useEffect(()=>(g(m),()=>{g(void 0)}),[]),o.useEffect(()=>{if(!l){let e=e=>{"Escape"===e.key&&t()},a=e=>{i.current&&!i.current.contains(e.target)&&t()};return document.addEventListener("keydown",e),document.addEventListener("pointerdown",a),()=>{document.removeEventListener("keydown",e),document.removeEventListener("pointerdown",a)}}},[l,t]),o.createElement(o.Fragment,null,o.createElement("div",{role:"button","aria-label":(0,A.t)("common.close"),tabIndex:0,className:k.cx.absolute.wFull.hFull.top0.left0.zIndexTertiaryModal.$,onClick:t}),o.createElement("div",{className:k.cx.absolute.flex.h40.justifyCenter.alignCenter.flexShrink0.bRadius4.colorBgMenu.elevation400.mt8.ml32.zIndexModal.$,ref:i},o.createElement(li,{selectedFillOption:u,onSelectFillOption:e=>{if(_(e),"solid"===e){let e="dark"===d?is:ie.UE;g(m??e)}else g("unset")}}),id(p)&&o.createElement(o.Fragment,null,o.createElement(la.wv,null),o.createElement(lt.qW,{buttonClassName:k.cx.ml2.mr2.$,options:n,value:{option:p},onColorChange:e=>{g(e.option)},paletteType:"base",numColumns:9,optionSize:"medium",buttonSize:"xsmall",shouldDisableDataTooltip:!0,dropperDisabled:!0,positionX:()=>0,positionY:(e,t)=>(0,lr.DH)(e,t,4),shouldCustomColorPopoverCloseOnEscape:!0,isColorPopoverOpen:l,setIsColorPopoverOpen:c,hasNonWhiteboardColors:!0})),o.createElement(la.wv,null),o.createElement(la.$n,{className:k.cx.ml4.mr2.$,onClick:t},o.createElement("span",{className:k.cx.mr1.colorTextToolbarSecondary.$},(0,A.t)("workspace_view.color.toolbar.cancel"))),o.createElement(la.$n,{className:k.cx.mr8.$,onClick:()=>{r({workspaceId:e.id,colors:id(p)?[(0,n7.colorToHex)(p)]:[],onfulfilled:()=>a(aD.F.enqueue({message:(0,A.t)("workspace_view.toolbar.workspace_color_updated")})),onrejected:()=>{let e=(0,A.t)("workspace_view.toolbar.workspace_color_update_error");a(e$.s.error(e)),console.error(e)}}),t()}},o.createElement("span",{className:k.cx.colorTextOnbrand.$},(0,A.t)("workspace_view.color.toolbar.save")))))}var ls=a(782174);let lc=aq.M4.Mutation(async e=>{await le.u.updateDescription(e)}),ld=(0,ad.Ju)(function({workspace:e}){let t=(0,s.wA)(),a=(0,aq.n_)(lc);return o.createElement(ls.c,{title:(0,A.t)("workspace_view.description_modal.title"),subtitle:o.createElement("div",{className:k.cx.mb16.$},o.createElement(R.E,{color:"secondary"},(0,A.tx)("workspace_view.description_modal.subtitle",{allWorkspacesText:o.createElement("span",{className:k.cx.fontSemiBold.$},(0,A.t)("sidebar.browse.all_workspaces"))}))),initialName:e.description??"",placeholder:(0,A.t)("workspace_view.description.placeholder"),submitText:(0,A.t)("workspace_view.description.save"),onRename:r=>a({workspaceId:e.id,description:r}).then(()=>t(aD.F.enqueue({message:(0,A.t)("workspace_view.description_update_updated")})),()=>{let e=(0,A.t)("workspace_view.description_update_error");t(e$.s.error(e)),console.error(e)})})},"UpdateWorkspaceDescriptionModal");var lm=a(32863),lu=a(797804);let l_=(0,s.Ng)(e=>({currentUserId:e.user?.id}))(function(e){let t=t=>{t.stopPropagation(),e.canLeave&&e.onLeaveClick()},a=e.members.length,r=e.membersToShow||10;return o.createElement("div",null,!e.removeHeader&&o.createElement("div",{className:k.cx.font13.fontMedium.mb12.$},e.label||(0,A.t)("file_browser.team_overview.member_label")),e.members.slice(0,r).map(a=>{let r=a.id===e.currentUserId,n=e.showAdminBadge&&e.showAdminBadge(a);return o.createElement(tq.az,{key:a.id,size:24,entity:a,className:e.customAvatarRowStyle?e.customAvatarRowStyle:k.cx.font13.mb16.$,showIsMe:r,onClick:e.onMemberClick,badge:n?{color:W.zE.DEFAULT,text:(0,A.t)("file_browser.badge_label.admin")}:void 0,includeUserEmailAddress:e.shouldIncludeUserEmailAddress},e.canLeave&&r&&o.createElement("span",{onClick:t,className:"members_preview--leaveLink--v8vxs text--fontPos13--xW8hS text--_fontBase--QdLsd blue_link--blueLink--9rlnd"},(0,A.tx)("file_browser.team.leave_confirm")))}),a>r&&(e.customOverflowRow||o.createElement("div",{className:"members_preview--totalMemberCountContainer--wYQwX",onClick:e.onClickShowMore},o.createElement(t_.B,{svg:lu.A,className:"members_preview--teamIcon--UFW2s"}),o.createElement("div",{className:"members_preview--totalMemberCount--D3Q8a text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,A.tx)("file_browser.team_overview.num_others",{numMembers:a-r})))))});var lp=a(589640),lg=a(548593),lf=(e=>(e.MEMBERS="MEMBERS",e.ADMINS="ADMINS",e))(lf||{});function lE(e){let t=(0,lg.rw)(),a=new Map([["MEMBERS",(0,A.t)("workspace_view.members_modal.members")],["ADMINS",(0,A.t)("workspace_view.members_modal.admins")]]),r=[];return a.forEach((a,n)=>{r.push(o.createElement(t,{tab:n,mobileNavTabTitle:a,selectedTab:e.selectedTab,key:n,onClick:()=>e.setTab(n)},a))}),o.createElement("div",{className:"workspace_members_modal--tabsContainer--DBh33"},r)}function lh(e){return o.createElement("div",{className:"workspace_members_modal--searchContainer--KGPrU modal--searchContainer--EA8ib"},o.createElement(lm.IW,{className:"workspace_members_modal--searchBar--z110d",focusOnMount:!0,query:e.query,clearSearch:()=>{e.onChange("")},onChange:e.onChange,hideXIcon:!0,hasTransparentBackground:!0,iconClassName:"workspace_members_modal--searchIcon--7DSd4",placeholder:(0,A.t)("workspace_view.members_modal.search_placeholder")}))}function ly(e){return o.createElement("div",{className:"workspace_members_modal--emptyContainer--bTf-s"},o.createElement("div",{className:"workspace_members_modal--emptyState--IwqA2 text--fontPos11--2LvXf text--_fontBase--QdLsd"},e.content))}let lv=(0,ad.Ju)(function(e){let t=(0,s.wA)(),a=(e,t)=>null===e.baseOrgUser?-1:null===t.baseOrgUser?1:e.baseOrgUser.user.handle.localeCompare(t.baseOrgUser.user.handle),r=(e.workspace?.members||[]).slice().sort(a),n=(e.workspace?.admins||[]).slice().sort(a),i={};r.forEach(e=>{e.baseOrgUser&&(i[e.baseOrgUser.user.id]=e.permission)});let[l,c]=(0,o.useState)("MEMBERS"),[d,m]=(0,o.useState)(r),[u,_]=(0,o.useState)(""),p=o.createElement(lE,{dispatch:t,selectedTab:l,setTab:e=>{_(""),c(e),m("MEMBERS"===e?r:n)}}),g=d.filter(e=>{let t=e.baseOrgUser?.user,a=u.toLocaleLowerCase();return!!t?.email?.toLocaleLowerCase().includes(a)||!!t?.handle.toLocaleLowerCase().includes(a)}).map(e=>{let t=e.baseOrgUser.user;return{id:t.id,handle:t.handle,img_url:t.imgUrl,email:t.email}})||[],f=o.createElement(lh,{query:u,onChange:e=>_(e)}),E=o.createElement(ly,{content:(0,A.tx)("workspace_view.members_modal.no_members",{workspaceName:e.workspace?.name})}),h=o.createElement(ly,{content:(0,A.tx)("workspace_view.members_modal.no_admins",{workspaceName:e.workspace?.name})}),y=o.createElement(ly,{content:(0,A.tx)("workspace_view.members_modal.no_results",{query:u})}),v=o.createElement(tm.P,{className:"workspace_members_modal--outerContainer--in03x",innerClassName:"workspace_members_modal--membersContainer--16pMi"},o.createElement(l_,{members:g,showAdminBadge:e=>"ADMINS"!==l&&i[e.id]===ex.bp.ADMIN,membersToShow:g.length,canLeave:!1,removeHeader:!0,customAvatarRowStyle:"workspace_members_modal--memberPopup--y5bbv text--fontPos13--xW8hS text--_fontBase--QdLsd admin_settings_page--avatarWithHandle--awCiS ellipsis--ellipsis--Tjyfa",shouldIncludeUserEmailAddress:!0,onMemberClick:(e,a)=>{t(ea.$T({view:"user",userId:a.id,userViewTab:lp.o.INTERNAL_PROFILE})),t(ep.Ce())}}));return"MEMBERS"===l?0===r.length?v=E:0===g.length&&(v=y):"ADMINS"===l&&0===n.length&&(v=h),o.createElement(r$.XV,{title:p,headerSize:"large",fixedTop:!0,onClose:()=>{t(ep.Ce())}},o.createElement("div",{className:"workspace_members_modal--modalContainer--3d9wu"},o.createElement(n_.Y,{direction:"vertical",height:"fill-parent",width:"fill-parent",spacing:0},"MEMBERS"===l&&r.length>0&&f," ",v)))},"WORKSPACE_MEMBERS_MODAL",ad.ZU.YES);var lb=a(247576);function lw(e){let{workspace:t,org:a}=e,r=(0,s.wA)(),n=(0,s.d4)(e=>e.currentUserOrgId),i=(0,s.d4)(e=>e.avatarEditorState),l=(0,eI._6)(),c=t?.canAdmin??!1,[d,m]=o.useState(!1),{canCreateTeam:u,cannotCreateTeamReason:_}=(0,tD.l6)(a,t?.id),p=(0,ac.S)(),g=window.innerWidth<=(0,n5.hG)(iT.tgj),f=t?t.id:ii.O,E=function(e){let t=(0,ia.DP)(),a=ic(e);if(a&&("light"===t||"dark"===t))return(0,ie.kx)(a)!==("dark"===t)}(t),h=ic(t),y=t?.members||[],v=()=>{n?r(ep.to({type:th.Uc,data:{workspaceId:f}})):r(e_.Dw({previousView:l}))},b=o.useCallback((e,a,n)=>{if(t){let i={workspace:{id:t.id,name:t.name??"",imgUrl:t.imgUrl},entrypoint:"workspace_page_view",sectionId:n,favoriteId:a};e?r(tC.ZW(i)):r(tC.if(i))}},[r,t]),w=()=>{r(ep.to({type:lv,data:{workspace:e.workspace,tab:lf.MEMBERS}}))},T={kind:i6.A.ICON_TEXT_BUTTON,key:i6.D.VIEW_MEMBERS,displayText:y.length.toString(),onClick:e=>w(),icon:lb.A,svgStyleClass:O()(h?(0,ie.kx)(h)?"workspace_page_header--iconTextButtonSvgForDarkBackground--Sq5Fx workspace_page_header--iconTextButtonSvg--zStD-":"workspace_page_header--iconTextButtonSvgForLightBackground--pL63t workspace_page_header--iconTextButtonSvg--zStD-":"workspace_page_header--iconTextButtonSvg--zStD-"),styleClass:O()(h?(0,ie.kx)(h)?"workspace_page_header--membersButtonForDarkBackground--2IRgt workspace_page_header--favoriteStarContainerForDarkBackground--MXtIt":"workspace_page_header--membersButtonForLightBackground--N75P8 workspace_page_header--favoriteStarContainerForLightBackground--AKL23":void 0),isLoading:e.isWorkspaceMembersLoading},I=o.useMemo(()=>o.createElement(rm.r,{setFavorite:b,favoriteType:ex.bk.WORKSPACE,resourceId:f,isFavoriteHeaderStar:!0,orgId:n,parentBackgroundColor:h}),[f,b,n,h]),N=function(){let e=(0,s.wA)(),t=(0,eN.TA)();return a=>{let r=a.workspace.admins.some(e=>e.baseOrgUser?.user.id===t),n=[];return r&&n.push({displayText:(0,A.t)("workspace_view.toolbar.admin_settings"),callback:()=>{e(ea.$T({view:"workspace",subView:tV.V0.ADMIN,workspaceId:a.workspace.id,selectedTab:tV.rj[0]}))}}),n.length>0&&n.push({displayText:"",separator:!0}),n.push({displayText:(0,A.t)("file_browser.copy_link"),callback:()=>{let t=(0,aJ.fO)(a.workspace.id,a.org.id);e(aU.S({url:t}))}}),a.workspace.canAdmin&&(n.push({displayText:(0,A.t)("license_group_view.toolbar.change_icon"),callback:()=>{e((0,eE.X)({entity:a.workspace,entityType:eR.ck.WORKSPACE,shape:"SQUARE"}))}}),n.push({displayText:(0,A.t)("workspace_view.toolbar.change_color"),callback:a.onWorkspaceChangeColorClick}),n.push({displayText:(0,A.t)("workspace_view.description.title"),callback:()=>{e(ep.to({type:ld,data:{workspace:a.workspace}}))}})),n}}(),x=t&&a?N({workspace:t,org:a,onWorkspaceChangeColorClick:()=>m(!0)}):u&&g?[{displayText:(0,A.t)("org_view.new_team"),callback:v}]:void 0,C=[];if(_===tD.z4.TEAM_CREATION_CONTROL?C.push({kind:i6.A.CUSTOM,key:i6.D.NEW_TEAM,element:o.createElement(iK,{backgroundColor:h})}):u&&C.push({kind:i6.A.CUSTOM,key:i6.D.NEW_TEAM,element:o.createElement(i9,{onClick:v,variant:E?"inverted-inverse":"inverse",text:(0,A.t)("license_group_view.toolbar.new_team_button")})}),e.showMembersButton&&C.push(T),p&&t&&C.push({kind:i6.A.CUSTOM_BUTTON,key:i6.D.FAVORITE,element:I,styleClass:O()(h?(0,ie.kx)(h)?"workspace_page_header--favoriteStarContainerForDarkBackground--MXtIt":"workspace_page_header--favoriteStarContainerForLightBackground--AKL23":void 0)}),!t)return o.createElement(iX,{title:(0,A.t)("license_group_view.meta.unassigned_title",{orgName:a.name}),rightSideActions:C});let S=x?{kind:i6.A.CUSTOM,key:i6.D.DROPDOWN,element:o.createElement(iZ,{buttonAriaLabel:(0,A.t)("org_view.page_header_dropdown_label"),dropdownKey:`workspace-context-${t.id}`,dropdownOptions:x,dropdownColorClassName:h?(0,ie.kx)(h)?"workspace_page_header--dropdownColorsForDarkBackground--OIHSt":"workspace_page_header--dropdownColorsForLightBackground--uH-aL":void 0})}:void 0;return o.createElement("div",{style:{backgroundColor:e.headerColor}},o.createElement(iX,{avatar:c?o.createElement(eP.j,{avatarEditorState:i,entityType:eR.ck.WORKSPACE,entity:t,dispatch:r,size:40}):o.createElement(tq.z6,{entity:t,size:40}),title:h&&(0,ie.kx)(h)?o.createElement("span",{className:"workspace_page_header--titleColorForDarkBackground--Qnjvi"},t.name):t.name,badge:t.orgAccess===ex.bU.SECRET?o.createElement("div",{"data-tooltip-type":ei.Ib.TEXT,"data-tooltip":(0,A.t)("workspace_table.secret_workspace_lock_tooltip"),"data-tooltip-subtext":(0,A.t)("workspace_table.secret_workspace_lock_tooltip_subtext"),"data-tooltip-timeout-delay":500,"data-tooltip-max-width":300},o.createElement(Q.In,{icon:"lock-16"})):void 0,rightSideActions:C,rightSideOfTitleAction:S,belowHeaderItem:d?o.createElement(lo,{workspace:t,onClose:()=>m(!1)}):void 0,textColor:E?"oninverse":void 0}))}function lT(e){let t=(0,s.wA)(),a=e.workspace?.members,r=o.useMemo(()=>a||[],[a]),n=o.useMemo(()=>r.slice(0).sort(()=>Math.random()-.5),[r]),i={};return r.forEach(e=>{e.baseOrgUser&&(i[e.baseOrgUser.user.id]=e.permission)}),o.createElement("div",{className:k.cx.my24.mr8.ml24.$},o.createElement("div",{className:"workspace_page_meta_content--membersHeader--0jaJ3 text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,A.t)("workspace_view.sidebar.members")),o.createElement(l_,{removeHeader:!0,members:n.map(e=>e.baseOrgUser?.user).filter(e=>!!e),onMemberClick:(e,a)=>{t(ea.$T({view:"user",userId:a.id,userViewTab:lp.o.INTERNAL_PROFILE}))},canLeave:!1,showAdminBadge:e=>i[e.id]===ex.bp.ADMIN,customOverflowRow:o.createElement(o.Fragment,null,o.createElement("button",{className:"workspace_page_meta_content--seeAllMembers--mIOar text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:()=>{t(ep.to({type:lv,data:{workspace:e.workspace,tab:lf.MEMBERS}}))}},(0,A.t)("workspace_view.sidebar.see_all_members")))}))}var lI=a(330654);function lN({isExpanded:e,fill:t,onClick:a}){return o.createElement("div",{role:"button",tabIndex:-1,className:O()("expand_caret--animation--GOE8s",{"expand_caret--expanded--MmsW9":e}),onClick:a},o.createElement(Q.In,{icon:"caret-right-16",fill:t}))}function lx({isOpen:e,toggleIsOpen:t,collapseHeader:a,content:r}){return o.createElement("div",{className:k.cx.flex.flexColumn.wFull.$},o.createElement("div",{className:k.cx.flex.flexRow.gap4.itemsCenter.wFull.$},o.createElement(lN,{isExpanded:e,fill:"secondary",onClick:t}),a),o.createElement("div",{className:k.cx.grid.ml20.$,"aria-hidden":!e,style:r9.sx.add({transition:"grid-template-rows 0.3s ease"}).if(e,r9.sx.add({gridTemplateRows:"1fr"}),r9.sx.add({gridTemplateRows:"0fr"})).$},o.createElement("div",{className:k.cx.if(!e,k.cx.overflowHidden).$},r)))}var lC=a(126049),lS=a(586459),lk=a(635344),lA=a(883913),lR=a(433676),lL=a(550163),lD=a(172522),lP=a(737329),lF=a(445092),lO=a(967409),lM=a(335856);function lB({title:e,confirmText:t,emptyStateText:a,onSelectFile:r,onSubmit:n,files:i,tileClassName:l,renderFileTile:s,renderTileFooter:c,query:d,setQuery:m,gridText:u,shouldDisableTile:_}){let[p,g]=o.useState(null),E=o.useCallback(()=>{p&&n(p)},[n,p]),h=o.useCallback(e=>{if(e.length>0){let t=e[0].key;r?.(t),g(t)}else g(null)},[r]);return o.createElement(lU,{title:e,onSubmit:E,confirmText:t,isDisabled:!p,query:d,onSearchChange:m,clearSearch:()=>m(""),searchPlaceholder:(0,A.t)("file_browser.choose_file_modal.search_for_a_file")},0===i.length?o.createElement("div",{className:k.cx.flex.flexRow.gap2.itemsCenter.justifyCenter.colorTextSecondary.hFull.wFull.alignCenter.$},a):o.createElement(o.Fragment,null,u&&o.createElement("span",{className:k.cx.colorTextSecondary.$},u),o.createElement(lM.g,{containerClassName:k.cx.pb16.$,handleContextMenu:f.lQ,isDraggable:!1,items:i,multiselectDisabled:!0,doNotFocusOnLoad:!0,getAriaLabel:e=>e.name,tileClassName:l,renderTile:s,renderTileFooter:c,onSelection:h,keepSelectionOnFocusLost:!0,canSelectItem:e=>!_?.(e)})))}function lU({title:e,confirmText:t,onSubmit:a,isDisabled:r,children:n,query:i,onSearchChange:l,clearSearch:s,searchPlaceholder:c}){return o.createElement(r$.Eo,{title:e,confirmText:t,onSubmit:a,disabled:r,maxWidth:1024,useRedesign:!0,fullWidthContent:!0},o.createElement(lm.IW,{className:O()(k.cx.px16.py8.colorBg.wFull.bb1.bSolid.colorBorder.borderBox.$,"choose_file_modal--heightOverride--QTue5"),hasTransparentBackground:!0,placeholder:c,focusOnMount:!0,query:i,onChange:l,clearSearch:s,iconClassName:k.cx.colorIcon.$,hideXIcon:!0}),o.createElement(tm.P,{className:"choose_file_modal--gridMaxHeight--8NKvW",innerClassName:k.cx.hFull.gap12.flex.flexColumn.pt16.px24.borderBox.$},n))}function lV({file:e,orgName:t,isDisabled:a}){let r=(0,lD.l)(e.folder_id),n=r.data;return o.createElement("div",{className:k.cx.pt8.flex.flexColumn.overflowHidden.$},o.createElement("div",{className:k.cx.flex.flexRow.gap4.justifyBetween.itemsCenter.maxWFull.$},o.createElement("span",{className:k.cx.ellipsis.textBodyLargeStrong.truncate.with({colorTextSecondary:a}).$},e.name),a&&t&&o.createElement("span",{"data-tooltip-type":"text","data-tooltip":(0,A.t)("file_browser.pinning.choose_file_to_pin_modal.file_not_workspace_visible.tooltip",{orgName:t}),"data-tooltip-show-immediately":!0,"data-tooltip-show-above":!0,"data-tooltip-max-width":500},o.createElement(Q.In,{icon:"info-16",fill:"secondary"}))),o.createElement("span",{className:k.cx.ellipsis.colorTextSecondary.truncate.$},"loaded"===r.status&&n?o.createElement("div",{className:k.cx.colorTextSecondary.truncate.$},n):null))}let lH=(0,ad.Ju)(function({workspaceId:e}){let t=(0,s.wA)(),a=(0,eb.sZ)(),[r,n]=o.useState(""),[i,l]=o.useState(null),c=o.useCallback(e=>{l(e)},[]);(0,J.Rs)(ee.wtK,{fileKey:i??""},{enabled:!!i});let d=(0,lA.L)("file_browser:file_picker_modal",lO.Rx.ORG,!1),m=(0,ae.dD)(e),u=o.useCallback(e=>{t(ep.ES(lH)),t(ep.to({type:(0,lk.a)(),data:{fileKey:e,source:r?"add_file_modal_search":"add_file_modal_suggested"}}))},[t,r]);o.useEffect(()=>(t(lF.Dy({entryPoint:"file_browser:file_picker_modal"})),t(lF.Rz({workspaceFilter:e})),()=>{t(lF.Rz({workspaceFilter:null})),t(lF.ky())}),[t,n,e]);let _=(0,lC.A)(d,400),p=o.useCallback(e=>{n(e),_(e,lO.uH.FILES,null,!1,!1,!1,!0)},[_,n]),g=(0,ae.$o)(e),E=(0,C.md)(lL.ic),h=(0,lR.h)(),y=aO.Qw.useTransformShallowEqual(aO.Qw.all([g,m]),([e,t])=>{let a=new Set(t??[]);return((r?E.files?.results.map(e=>e.model):e.map(e=>(0,ae.KR)(e)))??[]).filter(e=>!a.has(e.key))}),v=o.useMemo(()=>E.files?.results.map(e=>e.model.key)??[],[E]),b=(0,ae.H6)(v,{enabled:r.length>0});if("loaded"!==b.status||!r&&"loaded"!==y.status||r&&h!==lS.r.SUCCESS)return o.createElement(lU,{title:(0,A.t)("file_browser.pinning.pin_modal.pin_file_to_workspace"),confirmText:(0,A.t)("general.next"),isDisabled:!0,query:r,onSearchChange:p,clearSearch:f.lQ,searchPlaceholder:(0,A.t)("file_browser.choose_file_modal.search_for_a_file")},o.createElement("div",{className:O()(k.cx.flex.itemsCenter.justifyCenter.wFull.hFull.$)},o.createElement(td.qc,null)));let w=y.data??[],T=e=>{let t=b.data.get(e.key);return!!t&&!t?.canPinFileToWorkspace};return o.createElement(lB,{title:(0,A.t)("file_browser.pinning.pin_modal.pin_file_to_workspace"),confirmText:(0,A.t)("general.next"),tileClassName:"choose_file_to_pin_modal--showOnHoverContainer--DO9-h",query:r,setQuery:p,renderFileTile:(e,{isSelected:t,isHovered:a})=>o.createElement(lP.Z,{tile:(0,az.fA)(e),isSelected:t&&!T(e),isHovered:a,hideBranchIndicator:!0,hideFavoriteStar:!0}),renderTileFooter:e=>o.createElement(lV,{file:e,orgName:a?.name??null,isDisabled:T(e)}),onSubmit:u,onSelectFile:c,files:w??[],gridText:r?void 0:(0,A.t)("file_browser.pinning.suggested"),emptyStateText:r?(0,A.tx)("file_browser.workspace_pinning.no_files_matching_query",{searchQuery:o.createElement("div",{className:k.cx.colorText.fontMedium.truncate.$},r)}):(0,A.t)("file_browser.workspace_pinning.no_suggested_files"),shouldDisableTile:T})},"ChooseFileToPinModal");var lW=a(609494),lj=a(773362),lG=a(566590),l$=a(606856),lz=a(121072),lY=a(347120),lK=a(323256),lQ=a(671653);let lX={open:!0,openNewTab:!0,showInFolder:!0,copyLink:!0,pinToWorkspace:!0};function lq({suggestedFiles:e}){let t=e.slice(0,8),a=(0,eI._6)(),r=(0,s.wA)(),{showing:n,show:i,data:l}=(0,lz.L)(),c=o.useCallback((e,t)=>{m.Ay.redirect((0,aK.r1)(e)),(0,tt.k1)(e.key,{selectedViewName:a.view,entrypoint:"suggested_files_empty_state"}),t.stopPropagation(),t.preventDefault()},[a.view]),d=o.useCallback((e,t)=>{c({key:e.key,editor_type:e.editorType,url:e.url},t)},[c]),u=o.useCallback((e,t,a)=>{i({data:{tile:(0,ae.bn)(e[0]),targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:a,enableRestore:t.shiftKey&&t.altKey}})},[i]);return o.createElement(o.Fragment,null,o.createElement("div",{className:k.cx.colorTextSecondary.truncate.$},(0,A.t)("file_browser.pinning.suggested")),o.createElement(lK.A,{items:t,multiselectDisabled:!0,isDraggable:!1,handleOpenItem:d,onSelection:e=>{r(aj.an()),r(aj.Ku({fileKeys:e.map(e=>e.key)}))},handleContextMenu:u,gridViewProps:{containerClassName:"suggested_files_grid--gridContainer--ZdukV",renderTile:e=>o.createElement("div",{className:k.cx.m8.opacity0_5.bRadius4.elevation100.overflowHidden.$,style:r9.sx.add({width:"80px"}).$},o.createElement(rd.NM,{editor_type:e.editorType,thumbnailGuid:e.thumbnailGuid,client_meta:e.clientMeta,thumbnail_url:e.thumbnailUrlOverride??e.thumbnailUrl,isLocked:!1,noBorder:!0,size:rw.y.SMALL})),tileBorderRadius:8,tileBorderStyle:"dashed",tileFooterPosition:"right",renderTileFooter:(e,{isSelected:t,isHovered:a})=>o.createElement(lJ,{file:e,isHovered:a,isSelected:t})},viewType:lQ.XU.GRID}),n&&l?.tile?o.createElement(lY.i,{tileActions:lX,openTile:e=>c(l.tile.file,e),tile:l.tile,selectedTiles:[l.tile],dropdownVisible:n}):null)}function lJ({file:e,isHovered:t,isSelected:a}){let r=(0,s.wA)(),n=o.useCallback(t=>{r(ep.to({type:(0,lk.a)(),data:{fileKey:e.key,source:"suggested_files_empty_state"}})),t.stopPropagation(),t.preventDefault()},[r,e]),i=e.project?.name;return o.createElement("div",{className:k.cx.flex.flexColumn.gap2.flexGrow1.justifyCenter.overflowHidden.ml16.$},o.createElement("div",{className:k.cx.textBodyMedium.truncate.$},e.name),t||a||E.Ay.mobile||E.Ay.tablet?o.createElement("div",{role:"button",tabIndex:0,className:k.cx.colorTextBrand.truncate.cursorPointer.$,onClick:n},(0,A.t)("file_browser.pinning.pin_file")):i?o.createElement("div",{className:k.cx.colorTextSecondary.truncate.$},i):null)}function lZ({workspaceId:e}){let t;let a=(0,ae.$o)(e);return t="loaded"!==a.status?o.createElement("div",{className:k.cx.py1.h20.wFull.$},o.createElement(td.qc,null)):a.data.length>0?o.createElement(lq,{suggestedFiles:a.data}):o.createElement("span",{className:k.cx.colorTextSecondary.truncate.textBodyLarge.alignCenter.$},(0,A.t)("file_browser.pinning.no_pinned_files")),o.createElement("div",{className:k.cx.bRadius8.colorBgSecondary.px32.py24.flex.flexColumn.gap16.mt8.$},t)}var l0=a(109388),l1=a(346124),l2=a(88823),l8=a.n(l2),l4=a(511617),l3=a(988652),l5=a(733334),l9=a(564577),l6=a(167893),l7=a(296045);function oe({pinnedFile:e}){let t=(0,ae.bn)(e.file),a=(0,lD.l)(e.file.folderId);return o.createElement("div",{className:k.cx.bRadius8.borderBox.p16.flex.flexColumn.gap16.colorBg.colorText.b1.bSolid.colorBorder.elevation300.flexGrow1.$,style:r9.sx.add({width:"422px",overflowY:"auto",overflowX:"hidden"}).$},o.createElement("div",{className:k.cx.flex.flexRow.gap16.$},o.createElement("div",{className:k.cx.flexBasisAuto.$},o.createElement(l7.e,{entity:{id:e.creator.id,img_url:e.creator.imgUrl,name:e.creator?.name??void 0,handle:e.creator?.handle}})),o.createElement("div",{className:k.cx.flex.flexColumn.overflowHidden.$},o.createElement("div",{className:k.cx.flex.flexRow.gap8.textBodyLarge.$},o.createElement(R.E,{fontWeight:"semi-bold",truncate:!0},e.creator.name),o.createElement("span",{className:k.cx.flexBasisAuto.flexGrow1.flexShrink0.$},o.createElement(R.E,{color:"secondary"},o.createElement(l9.h1,{date:e.createdAt})))),o.createElement("div",{className:k.cx.textBodyLarge.overflowBreakWord.$,dangerouslySetInnerHTML:{__html:(0,l5.p)((0,lW.sP)(e.description))}}))),o.createElement("div",{className:k.cx.flex.flexColumn.$},o.createElement("div",{className:k.cx.bRadius8.b1.colorBorder.bSolid.wFull.overflowHidden.$},o.createElement("div",null,o.createElement(lj.e,{tile:t,noBorder:!0})),o.createElement("div",{className:k.cx.flex.flexRow.gap8.itemsCenter.bt1.bSolid.colorBorder.p16.$},o.createElement(l6.x,{tile:t,usePageIcon:!0}),o.createElement("div",{className:k.cx.flex.flexColumn.gap2.flexGrow1.justifyCenter.overflowHidden.$},o.createElement("div",{className:k.cx.textBodyLargeStrong.truncate.$},e.file.name),"loaded"===a.status&&a.data?o.createElement("div",{className:k.cx.textBodyMedium.colorTextSecondary.truncate.$},a.data):null)))))}let ot={width:0,height:0};function oa({pinnedFile:e,targetRef:t,shouldHide:a}){let r=(0,l3.s)(t),[n,i]=(0,l3.M)(),[l,s]=o.useState(ot),[c,d]=o.useState(!1),m=o.useCallback(()=>{if(!t.current)return;let e=(0,l4.E)(t.current.getBoundingClientRect()),a=window.innerWidth,r=window.innerHeight,n=r-e.top-8,i=n>100;if(a-e.right>438&&i){s({transform:`translate(${e.right+8}px, ${e.top}px)`,maxHeight:n});return}if(e.left>438&&i){s({transform:`translate(${e.left-430}px, ${e.top}px)`,maxHeight:n});return}let l=430-(a-e.left),o=r-e.bottom-16;if(o>100){s({transform:`translate(${(0,l1.clamp)(e.left-l,0,e.left)}px, ${e.bottom+8}px)`,maxHeight:o});return}let c=e.top-16;s({top:"auto",bottom:"100vh",transform:`translate(${(0,l1.clamp)(e.left-l,0,e.left)}px, ${e.top-8}px)`,maxHeight:c})},[t,s]),u=!a&&(r||i),p=(0,_.ZC)(u);if(o.useEffect(()=>{if(!p&&u)m();else if(p&&!u){d(!0);let e=setTimeout(()=>{d(!1)},(0,n5.XB)("150ms"));return()=>{clearTimeout(e)}}},[u,p,m]),o.useEffect(()=>{let e=l8()(m),t=()=>{u&&e()};return document.addEventListener("scroll",t,!0),()=>{document.removeEventListener("scroll",t,!0)}},[u,m]),!t.current)return null;let g=o.createElement("div",{className:"pinned_files_hover--hoverCardOverflowWrapper--VaAZM"},o.createElement("div",{className:O()("pinned_files_hover--hoverCard--MLJbb",u&&"pinned_files_hover--makeVisible--QrDF7"),style:l,ref:n,role:"tooltip",onContextMenu:e=>{e.preventDefault(),e.stopPropagation()}},(u||c)&&o.createElement(oe,{pinnedFile:e})));return l0.createPortal(g,document.body)}let or={open:!0,openNewTab:!0,showInFolder:!0,copyLink:!0,share:!0,duplicateToDrafts:!0,pinToWorkspace:!0,publishOrgTemplate:!0,favoriteFile:!0,unfavoriteFile:!0};function on({workspaceId:e,pinnedFiles:t,canAdminWorkspace:a}){let r=(0,s.wA)(),n=(0,eI._6)(),i=(0,eN.TA)(),{showing:l,show:c,data:d}=(0,lz.L)(),m=(0,l$.v)(),u=o.useCallback((t,a,r,i)=>{m(t,r),(0,tt.E9)(tt.gH,a.file,{entrypoint:i,selectedView:n.view,resourceType:"workspace",resourceId:e,pinDescription:(0,lW._Z)(a.description)})},[m,n.view,e]),_=o.useCallback((e,t)=>{u((0,ae.bn)(e.file),e,t,"pinned files")},[u]),p=o.useCallback(e=>{if(1!==e.length)return;let t=e[0];(a||t.creator?.id===i)&&r(ep.to({type:(0,lG.I)(),data:{pinnedFileId:e[0].id}}))},[a,i,r]),g=o.useMemo(()=>t.filter(({file:e})=>!!e).map(e=>(0,ae.bn)(e.file)),[t]),f=(0,az.nw)(g),E=o.useMemo(()=>t.sort((e,t)=>e.createdAt>t.createdAt?1:-1),[t]);return o.createElement(o.Fragment,null,t.length>0?o.createElement(lK.A,{handleContextMenu:(e,t,a)=>{r(aj.an()),r(aj.Ku({fileKeys:e.map(e=>e.file.key)})),c({data:{tile:(0,ae.bn)(e[0].file),targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:a}})},isDraggable:!0,items:E,handleDragDataTransfer:(e,t)=>{t.setFigFilesData(e.map(e=>(0,ae.KR)(e.file)))},doNotFocusOnLoad:!0,getAriaLabel:e=>e.file.name,viewType:lQ.XU.GRID,handleOpenItem:_,handleDeleteKey:p,gridViewProps:{containerClassName:"pinned_files_content--pinnedFilesGrid--WZBpn",renderTile:e=>o.createElement(oi,{pinnedFile:e,isDropdownOpen:l}),renderTileFooter:e=>o.createElement(ol,{pinnedFile:e}),renderTileDragImage:e=>o.createElement(rd.NM,{editor_type:e.file.editorType,thumbnail_url:e.file.thumbnailUrlOverride??e.file.thumbnailUrl,client_meta:e.file.clientMeta,isLocked:!1,thumbnailGuid:e.file.thumbnailGuid,noBorder:!0})}}):o.createElement(lZ,{workspaceId:e}),(()=>{let e=d?.tile??null,a=d?.index??0;return o.createElement(lY.i,{tile:e,selectedTiles:f,tileActions:or,openTile:r=>{e&&u(e,t[a],r,"pinned files: context menu")},dropdownVisible:l})})())}function oi({pinnedFile:e,isDropdownOpen:t}){let a=o.useRef(null),r=(0,ae.bn)(e.file);return o.createElement(o.Fragment,null,o.createElement(oa,{pinnedFile:e,targetRef:a,shouldHide:t}),o.createElement("div",{ref:a},o.createElement(lj.e,{tile:r,noBorder:!0,size:rw.y.SMALL})))}function ol({pinnedFile:e}){return o.createElement("div",{className:k.cx.pt8.flex.flexColumn.$},o.createElement("span",{className:k.cx.ellipsis.textBodyLargeStrong.truncate.$},e.file.name),o.createElement(R.E,{truncate:!0,showTooltipWhenTruncated:!0,color:"secondary"},(0,A.t)("tile.file_tile.pinned_by_user",{name:e.creator?.name??""})))}let oo=(0,C.Iz)(e=>(0,C.E2)(`file_browser.workspace.pinned_section_open.${e}`,!0,lI.boolean()));function os({workspaceId:e,canAdminWorkspace:t}){let[a,r]=(0,C.fp)(oo(e)),n=o.useCallback(()=>r(e=>!e),[r]),i=(0,s.wA)(),l=(0,eb.dq)(),c=(0,tD.Au)(l),d=(0,J.Rs)(ee.qTu,{workspaceId:e}),m=aO.Qw.useTransform(d,e=>e.workspace?.pinnedFiles??null),u=aO.Qw.useTransform(m,e=>e?e.length:0),_=aO.Qw.useTransform(aO.Qw.all([c,d]),([t,a])=>!!a.workspace&&(t===e||a.workspace.canAdmin)),p="loaded"!==u.status||u.data>=ae.D1,g="loaded"===_.status&&_.data||"loaded"===u.status&&u.data>0,f=o.useCallback(()=>{i(ep.to({type:lH,data:{workspaceId:e}}))},[i,e]);return o.createElement(o.Fragment,null,g&&o.createElement(lx,{isOpen:a,toggleIsOpen:n,collapseHeader:o.createElement("div",{className:k.cx.flex.justifyBetween.itemsCenter.wFull.$},o.createElement("div",{"aria-expanded":a,role:"button",tabIndex:0,className:k.cx.flex.flexRow.gap4.itemsCenter.textBodyLargeStrong.cursorDefault.$,onClick:n},(0,A.t)("file_browser.pinning.pinned_files")),"loaded"===_.status&&_.data&&o.createElement("button",{onClick:f,disabled:p,"data-tooltip":p&&"loaded"===u.status?(0,A.t)("file_browser.pinning.max_files.add_button_tooltip",{maxPins:ae.D1}):void 0,"data-tooltip-type":ei.Ib.TEXT,"data-tooltip-show-above":!0},o.createElement("div",{className:p?k.cx.colorTextDisabled.$:k.cx.colorTextBrand.$},(0,A.t)("file_browser.pinning.add_file")))),content:"loaded"===m.status?o.createElement(on,{workspaceId:e,canAdminWorkspace:t,pinnedFiles:m.data??[]}):o.createElement(td.qc,null)}))}function oc(){let e=(0,eI._6)(),t=(0,eb.sZ)(),a=(0,J.Rs)(ee.bUn,{orgId:t.id}),r="loaded"!==a.status,n=a.data?.org?.workspaces??[],i=r?[]:[...n],l=null;e.workspaceId&&(l=i.find(t=>t.id===e.workspaceId||t.mirroringLicenseGroup?.id===e.workspaceId));let s=(0,A.t)("view_selectors.file_browser.other_teams");l&&(s=l.name),(0,aG.hL)(s);let c=ic(l),d=!!e.workspaceId,m=(0,J.Rs)(ee.nD$,{workspaceId:e.workspaceId??""},{enabled:d}),u="loaded"===m.status,_="loading"===m.status,p=m.data?.workspace?.members??[],g=l?{...l,members:p}:void 0,f=l?.admins??[],E=d&&u&&p.length>0,h=d&&(_||p.length>0||f.length>0),y=(0,ae.J_)();return r&&e.workspaceId?o.createElement(td.qc,null):l&&!l?.canView?o.createElement(iG.S,{resourceType:n0.Ft.WORKSPACE}):o.createElement(i$.r,{header:o.createElement(lw,{headerColor:c,workspace:g,org:t,isWorkspaceMembersLoading:_,showMembersButton:h}),content:o.createElement("div",{className:k.cx.flex.flexColumn.gap24.my24.$},l&&l?.id!==ii.O&&y()?o.createElement("section",{"aria-label":(0,A.t)("file_browser.pinning.pinned_files"),className:k.cx.pl12.pr32.borderBox.wFull.$},o.createElement(os,{workspaceId:l.id,canAdminWorkspace:l.canAdmin})):null,o.createElement("section",{"aria-label":(0,A.t)("file_browser.teams")},o.createElement("div",{className:k.cx.mx32.textBodyLargeStrong.$},o.createElement("div",null,(0,A.t)("file_browser.teams"))),o.createElement(ij,{workspace:l}))),metaContent:E?o.createElement(lT,{workspace:g}):void 0})}var od=a(753178),om=a(632923),ou=a(427472),o_=a(802755),op=a(909595),og=a(108545),of=a(293014),oE=a(444077);let oh=o.memo(function(e){let t,a;return"implicit"===e.consentRegion?(t=o_.Ml,a=o_.e2):"explicit"===e.consentRegion&&(t=(0,ou.aJ)(),a=(0,ou.Sz)()),o.createElement("div",{role:"region","aria-label":t,className:O()(og.MZ)},o.createElement(ts.Yo,{className:og.o2,rel:"noopener",target:"_blank",href:a},o.createElement(t_.B,{svg:of.A})),o.createElement("span",{className:og.R2,"aria-hidden":"true"},t))}),oy=o.memo(function(){return(0,p.kc)().cookie_banners_community?"implicit"===(0,p.Ay)().consent_region?o.createElement(o_.C$,{variant:op.a.COMMUNITY,dismissIcon:oE.A,SecondaryButton:e=>o.createElement(om.Wd,{fullWidth:!1,className:og.Rn,use:"hollow",...e}),persistentMessage:o.createElement(oh,{consentRegion:"implicit"})}):"explicit"===(0,p.Ay)().consent_region?o.createElement(ou.ZQ,{variant:op.a.COMMUNITY,dismissIcon:oE.A,SecondaryButton:e=>o.createElement(om.Wd,{fullWidth:!1,className:og.Rn,use:"hollow",...e}),PrimaryButton:e=>o.createElement(om.Wd,{fullWidth:!1,className:og.Rn,use:"standard",...e}),persistentMessage:o.createElement(oh,{consentRegion:"explicit"})}):null:null});var ov=a(385422),ob=a(460845),ow=a(837324),oT=a(612776),oI=a(555328),oN=a(686257);function ox({children:e}){return o.createElement(o.Fragment,null,e)}var oC=a(590237),oS=a(637961);let ok=e=>{let t={};return e.filter(e=>{let a="model"in e?e.model.id:e.id;return!t[a]&&(t[a]=!0,!0)})};function oA(e="normal"){return"rows"===e?oS.bu:"profile"===e?oS._1:"compact"===e?oS.en:oS.z3}function oR({resources:e,adtlClassName:t,showAsTable:a=!1,showMoreCallback:r,onIntersectionChange:n,viewContext:i="feedResourceGrid",TileWrapper:l=ox}){let c=(0,oT.X5)(),d=(0,s.d4)(e=>e.authedActiveCommunityProfile),m=o.useMemo(()=>ok(e),[e]);return o.createElement(eg.fu,{name:i},o.createElement("div",{className:O()(t||oS.z3,{[oS.wS]:c})},m.map((e,t)=>"is_widget"in e?e.is_widget?o.createElement(l,{key:`widget-${e.id}`,resourceId:e.id,resourceType:oI.vt.WIDGET,resourceName:(0,ow.qD)(e).name},o.createElement(oC.bN,{key:`widget-${e.id}`,index:t,resource:e,onIntersectionChange:t=>n?.(e,t),subView:i})):a?o.createElement(l,{key:`pluginRow-${e.id}`,resourceId:e.id,resourceType:oI.vt.PLUGIN,resourceName:(0,ow.qD)(e).name},o.createElement(oC.mb,{key:`pluginRow-${e.id}`,index:t,resource:e,onIntersectionChange:t=>n?.(e,t),isOrgTeamBrowsing:!!(d?.team_id||d?.org_id)})):o.createElement(l,{key:`plugin-${e.id}`,resourceId:e.id,resourceType:oI.vt.PLUGIN,resourceName:(0,ow.qD)(e).name},o.createElement(oC.cS,{index:t,key:`plugin-${e.id}`,resource:e,onIntersectionChange:t=>n?.(e,t),subView:i})):"resources"in e?o.createElement(l,{key:`profileRow-${e.model.id}`,resourceId:e.model.id,resourceType:"profile",resourceName:e.model.name},o.createElement(oC.Yw,{index:t,key:`profileRow-${e.model.id}`,resource:e,authedActiveCommunityProfile:d})):"profile_handle"in e?o.createElement(l,{key:`profile-${e.id}`,resourceId:e.id,resourceType:"profile",resourceName:e.name},o.createElement(oC.UG,{key:`profile-${e.id}`,resource:e})):o.createElement(l,{key:`file-${e.id}`,resourceId:e.id,resourceType:oI.vt.HUB_FILE,resourceName:(0,ow.qD)(e).name},o.createElement(oC.Cv,{index:t,key:`file-${e.id}`,resource:e,onIntersectionChange:t=>n?.(e,t),subView:i})))),e.length>0&&r&&o.createElement(oN.a,{callback:e=>{e[0].isIntersecting&&r()}}))}var oL=a(813408),oD=(e=>(e.BUNDLE_SECTION="bundle_section",e.HERO_SECTION="hero_section",e))(oD||{});let oP=lI.object({title:lI.string(),description:lI.string().optional(),imageUrl:lI.string().url(),prompt:lI.string(),category:lI.string()});lI.object({figjam_ai:lI.array(oP).nullable()});let oF=lI.object({hub_file_id:lI.string().optional(),plugin_id:lI.string().optional(),widget_id:lI.string().optional(),title:lI.string().optional(),description:lI.string().optional()}),oO=lI.object({resources:lI.array(oF).nullish(),resource:oF.nullish()}).nonstrict(),oM=lI.object({title:lI.string().nullable(),description:lI.string().nullable(),meta:oO,position:lI.number(),section_type:lI.nativeEnum(oD),created_at:lI.string().nullable(),updated_at:lI.string().nullable()}),oB=oM.extend({resources:lI.array(lI.custom())}),oU=oM.extend({resource:lI.custom().nullable()}),oV=lI.object({question:lI.string(),answer:lI.string()}),oH=lI.object({faqs:oV.nullish(),breadcrumb_text:lI.string().nullish()}).nonstrict();function oW(e,t){let a=(0,ow.Vm)(e);return t?.resources?.length?(t?.resources).find(t=>a===oI.vt.HUB_FILE?t?.hub_file_id===e.id:a===oI.vt.PLUGIN?t?.plugin_id===e.id:a===oI.vt.WIDGET?t?.widget_id===e.id:void 0):t?.resource?t?.resource:void 0}lI.object({title:lI.string().nullable(),description:lI.string().nullable(),header_img_url:lI.string().url().nullable(),meta_title:lI.string().nullable(),meta_description:lI.string().nullable(),thumbnail_url:lI.string().url().nullable(),meta:oH,url_slug:lI.string(),sections:lI.array(lI.union([oB,oU])),profile:oL.bo,publishing_status:lI.string(),latest_published_at:lI.string().nullable(),created_at:lI.string().nullable(),updated_at:lI.string().nullable(),is_template_url:lI.boolean(),faqs:lI.array(oV).nullable()});let oj={"ui-kits":"ui-kits","2023-presentation-templates":"presentations","2023-resume-templates":"resume-templates","plugins-accessibility":"accessibility","org-chart-templates":"diagramming","plugins-tidy-cleanup":"file-organization","flow-chart-templates":"diagramming",icons:"icons","build-and-play":"fun-games","figjam-plugins":"whiteboarding",widgets:"team-meetings",typography:"fonts-typography","favorite-educational":"education","favorite-graphic-resources":"visual-assets",workshops:"brainstorming",diagramming:"diagramming",meetings:"team-meetings",engineering:"development",planning:"strategic-planning",brainstorms:"brainstorming",education:"education","favorite-team-bonding":"team-meetings",fun:"fun-games","graphic-resources":"visual-assets","how-teams-jam":"team-meetings","figjam-team-bonding":"team-meetings",educational:"education"},oG={"world-emoji-day-2021":"world-emoji-day","config2021-sessions":"config-sessions","holidays-2022":"holidays","config-2022-speaker-decks":"config-speaker-decks","schema-2022-speaker-decks":"schema-speaker-decks","social-media":"instagram-mockup-designs","pride-2021":"pride-posters"},o$="community_collections--bannerContainer--7yGIP",oz="community_collections--copyButton--Mb-fA text--fontPos13--xW8hS text--_fontBase--QdLsd",oY="community_collections--resourcePreviewRow--wcOSC",oK="community_collections--resourcePreview--QDaaf",oQ="community_collections--breadcrumbTrailContainer--uibe8",oX="community_collections--breadcrumbTrail--JQcAW",oq="community_collections--breadcrumbArrow--bv6Ia",oJ="community_collections--parentBreadcrumb--fhqqK community_collections--breadcrumb--E-9f5 text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",oZ="community_collections--childBreadcrumb--X4qf6 community_collections--breadcrumb--E-9f5 text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",o0="community_collections--footerContainer--OI6W4";function o1({page:e}){let t=o.useRef(null),a=function(e,t=4,a=540){let[r,n]=o.useState(t),i=o.useCallback(()=>{if(window.innerWidth<=a){n(t);return}let r=e.current.children[1];if(0===r.children.length){n(0);return}let i=r.children[0].getBoundingClientRect().width;n(Math.floor(r.getBoundingClientRect().width/i))},[e,n,t,a]);return(0,u.h)(()=>(i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i))),r}(t),r=function(e){let{resources:t}=e.sections.reduce(({resources:e,resourceIds:t},a)=>{if("bundle_section"===a.section_type)for(let r of a.resources)r?.id&&!t.has(r.id)&&(t.add(r.id),e.push(r));else if("hero_section"===a.section_type){let r=a.resource;r&&!t.has(r.id)&&(e.push(r),t.add(r.id))}return{resources:e,resourceIds:t}},{resources:[],resourceIds:new Set});return t}(e);return o.createElement("div",{className:"community_collections--communityShelfAllPageRow--xw1Ut",ref:t},o.createElement("div",{className:"community_collections--communityShelfAllPageHeader--pbqhx"},o.createElement("div",{className:"community_collections--communityShelfAllPageHeaderLeftSide--6UBkD text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement("div",{className:"community_collections--communityShelfAllPageSubTitle--sP1yP text--fontPos12--YsUAh text--_fontBase--QdLsd"}),o.createElement("div",{className:"community_collections--communityShelfAllPageTitle--r8QHx ellipsis--ellipsis--Tjyfa text--fontPos24--YppUD text--_fontBase--QdLsd"},e.title)),o.createElement(ob.N_,{to:e.is_template_url?`/community/templates/${e.url_slug}`:`/community/collections/${e.url_slug}`,className:"community_collections--communityShelfAllPageHeaderRightSide--UQUv8 community_collections--communityShelfAllPageHeaderLeftSide--6UBkD text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,A.tx)("community.shelves.show_more"))),o.createElement(oR,{resources:r.slice(0,a),adtlClassName:"community_collections--allCollectionsResourceGrid--jMwuQ feed_page--feedGrid--Wm-8Q"}))}var o2=a(167807),o8=a(547807);let o4=new class{constructor(){this.CollectionPageSchemaValidator=(0,o8.vh)()}getCollectionPageByUrlSlug(e,t){return this.CollectionPageSchemaValidator.validate(async({xr:a})=>await a.get(`/api/collection_pages/${e}?is_template_url=${t}`))}},o3=new class{constructor(){this.CollectionPageSchemaValidator=(0,o8.vh)()}getCollectionPageByUrlSlug(e){return this.CollectionPageSchemaValidator.validate(async({xr:t})=>await t.get(`/api/admin/collection_pages/${e}`))}updateCollectionPageByUrlSlug(e){return this.CollectionPageSchemaValidator.validate(async({xr:t})=>await t.put(`/api/admin/collection_pages/${e.urlSlug}`,o8.td.toAPIParameters(e.collectionPage||{})))}deleteCollectionPageByUrlSlug(e){return this.CollectionPageSchemaValidator.validate(async({xr:t})=>await t.del(`/api/admin/collection_pages/${e.urlSlug}`))}createCollectionPage(e){return this.CollectionPageSchemaValidator.validate(async({xr:t})=>await t.post("/api/admin/collection_pages",o8.td.toAPIParameters(e.collectionPage||{})))}},o5=aq.M4.Query({fetch:async({urlSlug:e,isTemplateUrl:t})=>(await o4.getCollectionPageByUrlSlug(e,t)).data.meta});aq.M4.Query({fetch:async({urlSlug:e})=>(await o3.getCollectionPageByUrlSlug(e)).data.meta}),aq.M4.Mutation(async({urlSlug:e,collectionPage:t})=>(await o3.updateCollectionPageByUrlSlug({urlSlug:e,collectionPage:t})).data.meta),aq.M4.Mutation(async({urlSlug:e})=>(await o3.deleteCollectionPageByUrlSlug({urlSlug:e})).data.meta),aq.M4.Mutation(async e=>(await o3.createCollectionPage({collectionPage:e})).data.meta),aq.M4.PaginatedQuery({fetch:(0,o2.ER)(()=>"/api/admin/collection_pages",8)});let o9=aq.M4.PaginatedQuery({fetch:(0,o2.ER)(()=>"/api/collection_pages",8)});var o6=a(674694),o7=a(233562),se=a(222085),st=a(22332),sa=a(542061),sr=a(463420);function sn({breadcrumbs:e,surface:t}){return o.createElement("div",{className:O()("community_breadcrumbs--breadcrumbsContainer--e76p8",{"community_breadcrumbs--resourcePagePadding--MUCrg":"resource_page"===t,"community_breadcrumbs--categoryPadding--b-ilJ":"category"===t})},o.createElement("div",{className:"community_breadcrumbs--breadcrumbs--S2TN8"},o.createElement(eg.o3,{trackingEventName:"cmty_breadcrumbs_home",to:"/community"},o.createElement("div",{className:"community_breadcrumbs--homeIcon--VSWVj"},o.createElement(sa.Q,null))),e.map(e=>o.createElement("div",{className:"community_breadcrumbs--breadcrumbContainer--eI8-l",key:e.text},o.createElement("div",{className:"community_breadcrumbs--chevronIcon--rXeJw"},o.createElement(sr.k,null)),o.createElement(eg.o3,{...e.linkProps,className:"community_breadcrumbs--breadcrumb--Op180 text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.text)))))}function si({collection:e}){let t=(0,st.N)(`(max-width: ${iT._C6})`),a=[{text:(0,A.t)("community.breadcrumbs.collections"),linkProps:{to:"/community/collections",trackingEventName:"cmty_breadcrumbs_collections"}},e?.title&&{text:e.title,linkProps:{to:`/community/collections/${e.url_slug}`,trackingEventName:"cmty_breadcrumbs_collection",trackingProperties:{name:"collection_breadcrumb_clicked",collection_slug:e.url_slug,collection_text:e.title,is_mobile:t}}}].filter(Boolean);return o.createElement(sn,{breadcrumbs:a,surface:"collection"})}var sl=a(800576),so=a(742580),ss=a(944452);let sc="footer--divider--srDs2";var sd=a(686352);let sm=lI.object({label:lI.string(),url:lI.string()});function su(){let e=[{title:(0,A.t)("community.footer.popular_searches"),items:[{label:(0,A.t)("community.footer.resume"),url:new ss.IE({categorySlug:so.LJ.resumes}).href},{label:(0,A.t)("community.footer.mobile_apps"),url:new ss.IE({categorySlug:so.LJ.mobileApps}).href},{label:(0,A.t)("community.footer.presentations"),url:new ss.IE({categorySlug:so.LJ.presentations}).href},{label:(0,A.t)("community.footer.ui_kits"),url:new ss.IE({categorySlug:so.LJ.uiKits}).href},{label:(0,A.t)("community.footer.calendar_templates"),url:new ss.IE({categorySlug:so.LJ.calendarTemplates}).href}]},{title:(0,A.t)("community.footer.most_used"),items:[{label:"Material 3 Design Kit",url:"/community/file/1035203688168086460"},{label:"iOS 18 and iPadOS 18",url:"/community/file/1385659531316001292"},{label:"Figma auto layout playground",url:"/community/file/784448220678228461"},{label:"Anima - Figma to React, HTML",url:"/community/plugin/857346721138427857/anima-figma-to-react-html-react-html-in-devmode"},{label:"Ant Design Open Source",url:"/community/file/831698976089873405"}]},{title:(0,A.t)("community.footer.recommended_categories"),items:[{label:(0,A.t)("community.collections.instagram_templates"),url:new ss.IE({categorySlug:so.LJ.instagramTemplates}).href},{label:(0,A.t)("community.footer.workshop_templates"),url:new ss.IE({categorySlug:so.LJ.workshopTemplates}).href},{label:(0,A.t)("community.footer.data_templates"),url:new ss.IE({categorySlug:so.LJ.dataTemplates}).href},{label:(0,A.t)("community.collections.laptop_mockups"),url:new ss.IE({categorySlug:so.LJ.laptopMockups}).href},{label:(0,A.t)("community.footer.design_inspirations"),url:new ss.IE({categorySlug:so.LJ.designInspirations}).href}]},{title:(0,A.t)("community.footer.top_categories"),items:[{label:(0,A.t)("categories.design_templates"),url:new ss.IE({categorySlug:so.LJ.designTemplates}).href},{label:(0,A.t)("categories.libraries"),url:new ss.IE({categorySlug:so.LJ.libraries}).href},{label:(0,A.t)("categories.icons"),url:new ss.IE({categorySlug:so.LJ.icons}).href},{label:(0,A.t)("categories.development"),url:new ss.IE({categorySlug:so.LJ.development}).href},{label:(0,A.t)("categories.brainstorming"),url:new ss.IE({categorySlug:so.LJ.brainstorming}).href}]}];function t({href:e,children:t}){let a={trackingEventName:"cmty_footer",trackingProperties:{name:"footer_link_clicked",link:e}};return(0,sl.vh)(e)?o.createElement(eg.L0,{href:e,...a},t):o.createElement(eg.o3,{to:e,...a},t)}return o.createElement("div",{className:"footer--footer--tuKBS text--fontPos13--xW8hS text--_fontBase--QdLsd","data-testid":"community-footer"},o.createElement("div",{className:"footer--sectionsContainer--BR5as"},e.map(e=>o.createElement(n_.Y,{key:e.title,direction:"vertical",padding:{right:16}},o.createElement("div",{className:"footer--sectionTitle--pM53E"},e.title),e.items.map(e=>o.createElement(t,{key:e.url,href:e.url},e.label))))),o.createElement(n_.Y,{direction:"vertical",spacing:16},o.createElement(t,{href:"/"},o.createElement(t_.B,{svg:sd.A,className:"footer--wordmark--CrA9E"})),o.createElement("div",null,o.createElement("span",null,(0,A.tx)("community.footer.copyright")),o.createElement("span",{className:sc},"\u2022"),o.createElement(t,{href:"/sitemaps/figma-community-index.xml"},(0,A.tx)("community.footer.site_map")),o.createElement("span",{className:sc},"\u2022"),o.createElement(t,{href:"https://help.figma.com/hc/en-us/articles/360038510573-Figma-Community-Guidelines"},(0,A.tx)("community.footer.community_guidelines")),o.createElement("span",{className:sc},"\u2022"),o.createElement(t,{href:"/community-terms"},(0,A.tx)("community.footer.terms_of_service")))))}lI.object({title:lI.string(),items:lI.array(sm)});let s_="load_more_pagination_button--loadMoreButtonWrapper--nNqNo";function sp({onClick:e,isLoading:t,isMoreToFetch:a}){return t?o.createElement("div",{className:s_},o.createElement(o7.y$,null)):a?o.createElement("div",{className:s_},o.createElement(ts.tM,{onClick:e},(0,A.tx)("community.landing_page.load_more"))):null}var sg=a(781779),sf=a(694953);let sE=o.createElement("svg",{width:"7",height:"10",viewBox:"0 0 7 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M1 1L5 4.91111L1 9",strokeWidth:"2"})),sh=o.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.0304 9.53033L8.00006 16.5607L3.46973 12.0303L4.53039 10.9697L8.00006 14.4393L13.9697 8.46967L15.0304 9.53033Z",fill:"white"})),sy=o.createElement("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.52469 13.6568L8.17634 11.0052L8.88345 11.7123L6.2318 14.3639C4.96259 15.6331 2.90481 15.6331 1.6356 14.3639C0.366401 13.0947 0.366401 11.0369 1.6356 9.76772L4.28726 7.11607L4.99436 7.82317L2.34271 10.4748C1.46403 11.3535 1.46403 12.7781 2.34271 13.6568C3.22139 14.5355 4.64601 14.5355 5.52469 13.6568ZM11.7119 8.88383L11.0048 8.17673L13.6564 5.52507C14.5351 4.6464 14.5351 3.22177 13.6564 2.34309C12.7777 1.46441 11.3531 1.46442 10.4744 2.34309L7.82279 4.99474L7.11568 4.28764L9.76733 1.63599C11.0365 0.366784 13.0943 0.366784 14.3635 1.63599C15.6327 2.90519 15.6327 4.96298 14.3635 6.23218L11.7119 8.88383ZM6.26126 10.5043L10.5039 6.26164L9.73787 5.49561L5.49523 9.73825L6.26126 10.5043Z",fill:"white"})),sv={Blue:sg.wRm,"Multiplayer Yellow":sg.KsR,Teal:sg.Dmn,"Hot Pink":sg.FXh,Redish:sg.uAC,Green:sg.zo1,Purple:sg.A8q,"Dark Blue":sg.WGG,"FigJam Primary":sg.L2H},sb=Object.keys(sv)[0];function sw(){let{urlSlug:e}=(0,od.g)();return o.createElement(o.Fragment,null,o.createElement(sN,{urlSlug:e}))}function sT({isLoading:e,collectionPages:t}){if(!t.length&&e)return null;let a=t.filter(e=>!function(e){for(let t of e.sections)if("bundle_section"===t.section_type&&t.meta.hasOwnProperty("figjam_ai"))return!0;return!1}(e));return o.createElement(o.Fragment,null,a.map(e=>o.createElement(o1,{key:e.url_slug,page:e})))}function sI(){let[e,t]=(0,g.IT)(o9("")),a="loading"===e.status||!!e.isFetchingNextPage,r=(0,oT.o5)(),n=(0,oT.kk)();return o.createElement(o.Fragment,null,o.createElement(ov.S,null),o.createElement("div",{className:"community_collections--allCollectionsPage--YFBlU"},o.createElement("div",{className:"community_collections--allCollectionsHeaderContainer--9UL5p"},o.createElement("h1",{className:"community_collections--allCollectionsHeader--L0frM text--fontPos32Whyte--AHO3S text--_fontBaseWhyte--efAjI"},(0,A.tx)("community.categories.figma_community_collections")),o.createElement("h2",{className:"community_collections--allCollectionsSubHeader--Ww0AY text--fontPos18--rYXJb text--_fontBase--QdLsd"},(0,A.tx)("community.categories.check_out_collections_of_some_of_our_favorite_design_files_plugins_and_creators_from_figma_community"))),n()?o.createElement(si,null):o.createElement("div",{className:oQ},o.createElement("ul",{className:oX},o.createElement("li",{className:oJ},o.createElement("a",{href:"/community"},(0,A.tx)("community.view_bar.home"))),o.createElement("div",{className:oq},sE),o.createElement("li",{className:oZ},(0,A.tx)("community.shelves.all_collections")))),o.createElement(sT,{isLoading:a,collectionPages:e.data||[]}),r()?o.createElement(sp,{onClick:e=>{e.preventDefault(),t.fetchNextPage()},isLoading:a,isMoreToFetch:!!e.hasNextPage}):o.createElement(o.Fragment,null,a&&o.createElement(o7.y$,null),!!e.hasNextPage&&o.createElement(oN.a,{callback:e=>{e[0].isIntersecting&&t.fetchNextPage()}})),r()&&!(0,d.y3)()&&o.createElement("div",{className:o0},o.createElement(su,null))))}function sN(e){let{urlSlug:t,profileTile:a,onSetShelf:r}=e,[n,i]=o.useState(null),l=(0,oT.o5)(),s=()=>{se.A.getCommunityShelves({urlSlug:t}).then(({data:e})=>{r&&r(e.meta[0]),i(e.meta[0])}).catch(()=>{})};if(o.useEffect(()=>{s()},[t]),!n)return o.createElement(o.Fragment,null);let c=o.createElement("div",{className:o$},o.createElement("div",{className:oQ},o.createElement("ul",{className:oX},o.createElement("li",{className:oJ},o.createElement("a",{href:"/community"},(0,A.tx)("community.view_bar.home"))),o.createElement("div",{className:oq},sE),o.createElement("li",{className:oJ},o.createElement("a",{href:"/community/collections"},(0,A.tx)("community.shelves.all_collections"))),o.createElement("div",{className:oq},sE),o.createElement("li",{className:oZ,style:{color:sv[n.shelf_meta.banner?.color||sb]}},o.createElement("a",{href:window.location.href},(0,A.Yd)(n.i18n_meta.title,n.title)))))),m=o.createElement("div",{className:"community_collections--gridContainer--PkTIN"},o.createElement("div",{className:oS.IB},o.createElement("div",{className:"community_collections--feed--71Y8R feed_page--feed--7UNQq text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement(oR,{resources:n.shelf_content,profileTile:a}))));return o.createElement(o.Fragment,null,o.createElement(ov.S,null),o.createElement(sC,{shelf:n}),c,m,l()&&!(0,d.y3)()&&o.createElement("div",{className:o0},o.createElement(su,null)))}function sx(e){let{isMobileScreen:t}=e,[a,r]=o.useState(!1);return a?o.createElement("button",{className:oz},t?sh:(0,A.tx)("community.view_bar.copied")):o.createElement("button",{className:oz,onClick:()=>{r(!0),(0,ow.lW)(window.location.href),setTimeout(()=>r(!1),1e3)}},t?sy:(0,A.tx)("community.view_bar.copy_link"))}function sC(e){let{shelf:t,bannerStyle:a}=e,[r,n]=o.useState(window.innerWidth),[i,l]=o.useState(null);o.useEffect(()=>{let e=i?.querySelectorAll(`.${oK}`),t=setInterval(()=>{e?.forEach((e,t)=>{setTimeout(()=>{e.style.transform="scale(1.03) translateX(-3px)",setTimeout(()=>{e.style.transform="scale(1)"},400)},100*t)})},4e3);return()=>clearTimeout(t)},[i]);let s=t?new Date(t?.updated_at):new Date;o.useEffect(()=>{let e=()=>{n(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let c=sv[t?.shelf_meta.banner?.color||Object.keys(sv)[0]];return o.createElement("div",{className:a||o$,ref:e=>l(e)},o.createElement("div",{className:"community_collections--banner--S2zb2 text--fontPos13--xW8hS text--_fontBase--QdLsd",style:{background:`linear-gradient(45deg, ${c}, ${c}80)`}},o.createElement("div",{className:"community_collections--bannerLeft--1oEnB"},o.createElement("div",{className:"community_collections--info--7PVz2"},t&&o.createElement(o.Fragment,null,o.createElement("div",{className:"community_collections--subtitle--dm958 text--fontPos12--YsUAh text--_fontBase--QdLsd community_collections--marginX--8hpWs"},(0,A.Yd)(t.i18n_meta.subtitle,t.subtitle)),o.createElement("h1",{className:"community_collections--title--cqPZt text--fontPos32Whyte--AHO3S text--_fontBaseWhyte--efAjI community_collections--marginX--8hpWs text--fontPos24--YppUD text--_fontBase--QdLsd"},(0,A.Yd)(t.i18n_meta.title,t.title)),o.createElement("p",{className:"community_collections--description--cjsSf community_collections--marginX--8hpWs text--fontPos16--oMC-G text--_fontBase--QdLsd"},(0,A.Yd)(t.i18n_meta.description,t.description))),o.createElement("div",{className:"community_collections--meta--Z25Vv"},o.createElement("div",{className:"community_collections--metaLeft--9gNAe"},o.createElement("div",{className:"community_collections--curatedImage--YDOQy community_collections--metaSpace--9Jcor"},o.createElement(t_.B,{svg:sf.A,width:"15px",height:"15px",useOriginalSrcFills_DEPRECATED:!0})),o.createElement("div",{className:"community_collections--curated--fHhRS"},(0,A.tx)("community.view_bar.curated_by"),"\xa0"),o.createElement("a",{className:"community_collections--figmaLink--4hdDG community_collections--metaSpace--9Jcor",href:`${(0,p.tl)().figma_url}/@figma`},(0,A.tx)("community.view_bar.figma"))),o.createElement("div",{className:"community_collections--metaRight--hhG9k"},o.createElement("div",{className:"community_collections--separator--OfDbC community_collections--metaSpace--9Jcor"},"\u2022\xa0"),o.createElement("div",{className:"community_collections--updateDate--vgkWS"},(0,A.tx)("community.view_bar.updated_date",{date:s.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})),o.createElement(sx,{isMobileScreen:r<=540}))))),o.createElement("div",{className:"community_collections--bannerRight--CuT0Z"},t?.shelf_content&&o.createElement(sk,{resources:t.shelf_content}))))}function sS({resource:e}){let t=(0,ow.qD)(e),a=(0,ow.Qo)(e),r=e.thumbnail_url;return o.createElement("div",{className:oK},a?o.createElement(o6.Xy,{hubFileId:e.id,image:r,alt:t.name,onLoad:e=>e.target.style.opacity="1",resizedThumbnailUrls:e.resized_thumbnail_urls}):o.createElement("img",{alt:t.name,src:r}))}function sk(e){let t=e.resources.filter(e=>e&&("current_hub_file_version_id"in e||"current_plugin_version_id"in e));return o.createElement("div",{className:"community_collections--previewTransformContainer--8b6Bh"},o.createElement("div",{className:oY},!!t[0]&&o.createElement(sS,{resource:t[0]}),!!t[1]&&o.createElement(sS,{resource:t[1]})),o.createElement("div",{className:"community_collections--previewRowMiddle--jwXWH community_collections--resourcePreviewRow--wcOSC"},!!t[2]&&o.createElement(sS,{resource:t[2]}),!!t[3]&&o.createElement(sS,{resource:t[3]})),o.createElement("div",{className:oY},!!t[4]&&o.createElement(sS,{resource:t[4]}),!!t[5]&&o.createElement(sS,{resource:t[5]})))}var sA=a(629732);function sR({collection:e}){return o.createElement("div",{className:"header_attributes--attributes--UE7uE text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement(sA.L,{publishers:[e.profile]}),o.createElement("div",{className:"header_attributes--profile--qrbMp"},(0,A.tx)("community.collections.curated_by"),o.createElement("span",{className:"header_attributes--profileName--n9lfZ"},o.createElement(sA.I,{publishers:[e.profile],useSmallWidth:!0,removeByLabel:!0,openInNewTab:!0}))),!!e.latest_published_at&&o.createElement("div",{className:"header_attributes--date--Zt4VW"},o.createElement("span",{className:"header_attributes--dot--1yVwn"},"\u2022"),o.createElement("span",null,new Date(e.latest_published_at).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}))))}function sL({collection:e,preview:t=!1}){let a=(0,st.N)(`(max-width: ${iT._C6})`);return o.createElement("div",{className:"collection_banner--collectionBanner--vyr9z"},o.createElement("div",{className:O()("collection_banner--headerContainer--52lrp")},!t&&o.createElement(si,{collection:e}),o.createElement("div",{className:O()("collection_banner--collectionHeader--85DYX text--fontPos24Whyte--gYiFz text--_fontBaseWhyte--efAjI",{[k.cx.flexColumn.$]:a})},o.createElement("h1",null,e.title)),o.createElement("p",{className:"collection_banner--collectionDescription--TjSn1 text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.description)),o.createElement(sR,{collection:e}))}var sD=a(815063),sP=a(96328);let sF="breadcrumbs--link--8OB6k";function sO({pathname:e,overrideText:t}){let a=decodeURIComponent(e).split("/").slice(1),r=a[a.length-1].replace(/-/g," ");return o.createElement("div",{className:"breadcrumbs--breadcrumbs--7n1rP text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement(ob.N_,{className:sF,to:"/community/collections"},(0,A.tx)("community.shelves.all_collections")),o.createElement("div",{className:"breadcrumbs--separator--4AJjS"},"/"),o.createElement("span",{className:O()(sF,"breadcrumbs--black--BefO-")},t||(0,sP.Zr)(r)))}function sM({title:e,hasDivider:t=!1,children:a}){let[r,n]=(0,o.useState)(!1);return o.createElement(n_.Y,{verticalAlignItems:"start",width:"fill-parent",height:"hug-contents"},o.createElement("div",{tabIndex:0,className:"faq_accordion--accordionButton--t23kN",role:"button",onClick:()=>{n(e=>!e)}},o.createElement("div",{className:O()("faq_accordion--accordionButtonContent--lHulm text--fontPos13--xW8hS text--_fontBase--QdLsd",{"faq_accordion--divider--VdCtu":t})},o.createElement(n_.Y,{direction:"vertical"},o.createElement(n_.Y,{horizontalAlignItems:"space-between",verticalAlignItems:"center"},o.createElement("div",{className:r?"faq_accordion--semibold--ff-Ee":"faq_accordion--medium--4FEsg"},e),o.createElement(Q.In,{icon:r?"chevron-up-32":"chevron-down-32",fill:"secondary"})),o.createElement("div",{className:r?void 0:"faq_accordion--hidden--G1Whc"},a)))))}function sB({faqs:e}){return o.createElement("div",{className:"faqs_section--sectionContainer--NWPTP"},o.createElement(n_.Y,{horizontalAlignItems:"center"},o.createElement("div",{className:"faqs_section--section--5Tey9"},o.createElement(n_.Y,{width:"fill-parent",height:"hug-contents",direction:"vertical",spacing:0},o.createElement("div",{className:"faqs_section--sectionTitle--I5tGC text--fontPos24--YppUD text--_fontBase--QdLsd"},(0,A.tx)("community.collections.frequently_asked_questions")),o.createElement("div",{className:"faqs_section--sectionBody--e9hQ3"},e.map((e,t)=>o.createElement(sM,{key:t,hasDivider:0!==t,title:e.question},o.createElement("p",{className:"faqs_section--answer--CBO9A"},e.answer))))))))}var sU=a(675665);let sV=(0,nN.eU)(sU.$O.DescriptionView);var sH=a(892123),sW=a(175420),sj=a(654923),sG=a(466636),s$=a(215822),sz=a(408552),sY=a(365292);function sK({orgName:e}){return o.createElement(sY.Ex,{background:"white",height:"16",border:"strong"},e?(0,A.tx)("community.plugins.private_for_plugin_org_name",{orgName:e}):(0,A.tx)("community.plugins.private_for_your_organization"))}var sQ=a(17284);function sX({resource:e}){let t=(0,s.d4)(e=>e.authedActiveCommunityProfile),a=(0,sj.I)(e),r=(0,sG.QQ)(a),n=!(0,nX.cs)(t)&&r?o.createElement(sz.V6,{resource:e,backgroundColor:"white",height:"16",border:"strong"}):null,i=((0,oI.I0)(e)||(0,oI.xQ)(e))&&(0,s$.Rt)(e)?o.createElement(sK,{orgName:e.roles?.org?.name}):void 0;return o.createElement(o.Fragment,null,n||i||o.createElement(sQ.I,{badges:e.badges,height:"16",border:"strong",disableIcon:!0}))}var sq=a(203008),sJ=a(776621),sZ=a(743282),s0=a(195847),s1=a(442898),s2=a(749949),s8=a(727749),s4=a(756085),s3=a(332086);let s5="save-button-clicked";function s9(e,t,a,r){return function(n,i){let l=i();if((0,tt.Cu)(s7({state:l,resource:e,viewContext:t,action:"save",loggedIn:!!l.user,forOrg:a}),s5),!l.user){(0,sJ.$D)(r5.e.COMMUNITY,Error("[Community Saves] Attempted unsave without currentUser"));return}if((0,oI.U)(e)){let t=()=>{let t=eG.Ay.post(`/api/hub_file/${e.id}/save`),a=`optimistic-resource-save-${(0,sZ.g)()}`;(0,ej.WB)().optimisticallyCreate({ResourceSave:{[a]:{userId:l.user.id,hubFileId:e.id,createdAt:new Date(Date.now())}}},t),t.then(()=>{n(aD.F.enqueue({message:(0,A.t)("community.saves.file_saved_for_your_profile"),type:"resource-save"}))}).catch(e=>{(0,sJ.$D)(r5.e.COMMUNITY,e)})};if(!l.authedActiveCommunityProfile?.public_at){n(ep.to({type:s3.G$,data:{userId:l.user.id,variations:[s3.FF.OPT_IN],onFinish:t}}));return}t()}else n((0,s8.d6)({id:e.id,resourceType:(0,ow.Vm)(e),communityProfile:i().authedActiveCommunityProfile||void 0,orgId:(0,p.kc)().cmty_deprecate_browse_as_admin?r:a&&l.authedActiveCommunityProfile?.org_id||void 0,source:s8.uR.COMMUNITY_HUB,optimisticData:{resource:e}}))}}function s6(e,t,a,r){return function(n,i){let l=i();if(!l.user){(0,sJ.$D)(r5.e.COMMUNITY,Error("[Community Saves] Attempted save without currentUser"));return}((0,tt.Cu)(s7({state:l,resource:e,viewContext:t,action:"unsave",loggedIn:!!l.user,forOrg:a}),s5),(0,oI.U)(e))?eG.Ay.del(`/api/hub_file/${e.id}/save`).then(()=>{n(aD.F.enqueue({message:(0,A.t)("community.saves.file_removed_from_your_profile"),type:"resource-save"}))}).catch(e=>{(0,sJ.$D)(r5.e.COMMUNITY,e)}):n((0,s8.s1)({id:e.id,resourceType:(0,ow.Vm)(e),communityProfile:i().authedActiveCommunityProfile||void 0,orgId:(0,p.kc)().cmty_deprecate_browse_as_admin?r:a&&l.authedActiveCommunityProfile?.org_id||void 0,source:s8.uR.COMMUNITY_HUB}))}}function s7({state:e,resource:t,viewContext:a,action:r,loggedIn:n,forOrg:i=!1}){return{action:r,resourceId:t.id,resourceType:(0,ow.Vm)(t),viewContext:a,loggedIn:n,forOrgId:i?e.authedActiveCommunityProfile?.org_id:void 0,searchSessionId:(0,s2.w)(e)}}function ce(e,t){let a=(0,s.wA)(),r=!!function(e,t){let a=(0,J.Rs)(ee.Ko6,{hubFileId:t},{enabled:e===oI.vt.HUB_FILE}),r=(0,J.Rs)(ee.H$B,{pluginId:t,orgIds:[]},{enabled:e===oI.vt.PLUGIN||e===oI.vt.WIDGET});return(a.data?.resourceSave?.createdAt||r.data?.pluginInstall?.createdAt)??null}((0,ow.Hh)(e),e.id),n=o.useCallback(n=>{(0,ao.YQ)({id:"cmty-detail-view-saved-button-clicked"}),n?.stopPropagation(),r?a(s6(e,t)):a(s9(e,t))},[r,a,e,t]);return o.useCallback(e=>{(0,s1.FL)(s0.qB.SIGN_UP,{preventDefaultRedirect:!0})},[]),{onUserSaveActionClick:n,isResourceSavedForUser:r}}function ct(e,t){let a=(0,s.wA)(),r=(0,s.d4)(e=>(0,nX.Tm)(e)),n=(0,J.Rs)(ee.H$B,{pluginId:e.id,orgIds:Object.keys(r)}),i=(0,J.Rs)(ee.KC4,{pluginId:e.id,orgIds:Object.keys(r)}),l=o.useMemo(()=>{if((0,oI.U)(e))return{};let t=n.data?.orgPluginInstalls.status!==to.tT.Loaded?[]:n.data?.orgPluginInstalls.data||[],a={};return Object.values(r).forEach(r=>{(!((0,oI.I0)(e)&&r.plugins_whitelist_enforced||(0,oI.xQ)(e)&&r.widgets_whitelist_enforced)||(i.data?.orgAllowlistedPlugins.status!==to.tT.Loaded?[]:i.data?.orgAllowlistedPlugins.data||[]).some(e=>e.orgId===r.id))&&(a[r.id]=t.some(e=>e.orgId===r.id))}),a},[r,i,e,n.data?.orgPluginInstalls]),c=o.useCallback((r,n)=>{n?.stopPropagation(),l[r]?a(s6(e,t,!0,r)):a(s9(e,t,!0,r))},[a,e,t,l]);return{savesByOrgId:l,onOrgSaveAction:c}}let ca="save_button--buttonContainerBrandColors--xQhK7",cr="save_button--buttonContainerBase--m8dS8 text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",cn="save_button--buttonContainerBaseWide--EDZcF",ci="save_button--buttonContainer--JQjtD save_button--buttonContainerBase--m8dS8 text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",cl="save_button--iconContainer--Brlqe",co="save_button--iconDisabled--15buP save_button--iconContainer--Brlqe";function cs(e){return o.createElement(cc,{...e})}function cc({resource:e,viewContext:t,authedActiveCommunityProfile:a}){let r=(0,eb.sZ)(),{onOrgInstallActionClick:n,isResourceInstalledForOrg:i}=function(e,t){let a=(0,s.wA)(),{orgPlugins:r,orgWidgets:n}=(0,s4.Be)(),i=(0,oI.xQ)(e)?n[e.id]:r[e.id];return{onOrgInstallActionClick:o.useCallback(r=>{r.stopPropagation(),i?a(s6(e,t,!0)):a(s9(e,t,!0))},[a,i,e,t]),isResourceInstalledForOrg:i}}(e,t),l=(0,oI.xQ)(e)?r?.widgets_whitelist_enforced:r?.plugins_whitelist_enforced,c=(0,s4.ll)(),d=(0,s4.U6)(),m=(0,oI.xQ)(e)?!!d[e.id]:!!c[e.id];return l&&!m?o.createElement("button",{className:ci,disabled:!0},o.createElement("div",{className:co},o.createElement(sq.LP,null))):o.createElement("button",{className:ci,onClick:n,"data-tooltip-type":ei.Ib.TEXT,"data-tooltip":i?(0,A.t)("community.saves.remove_this_resource_for_everyone_at",{orgName:a.name}):(0,A.t)("community.saves.save_this_resource_for_everyone_at",{orgName:a.name})},o.createElement("div",{className:cl},i?o.createElement(sq.Ns,null):o.createElement(sq.LP,null)))}let cd="community-save-button-dropdown";function cm(e){let{viewContext:t}=e,a=(0,s.d4)(e=>e.authedActiveCommunityProfile);return(0,p.kc)().cmty_deprecate_browse_as_admin?o.createElement(cu,{resource:e.resource,viewContext:t,type:e.type,theme:e.theme,allowOrgSaves:e.allowOrgSaves,enableWideButtonForStickyFooter:e.enableWideButtonForStickyFooter}):a?.team_id||a?.org_id&&(0,oI.U)(e.resource)?o.createElement("button",{className:ci,disabled:!0},o.createElement("div",{className:co},o.createElement(sq.LP,null))):a?.org_id?o.createElement(cs,{resource:e.resource,viewContext:t,authedActiveCommunityProfile:a}):o.createElement(cp,{resource:e.resource,viewContext:t,type:e.type,theme:e.theme,enableWideButtonForStickyFooter:e.enableWideButtonForStickyFooter})}function cu({resource:e,viewContext:t,type:a,theme:r,allowOrgSaves:n,enableWideButtonForStickyFooter:i}){let l=(0,s.wA)(),{onUserSaveActionClick:c,isResourceSavedForUser:d}=ce(e,t),{savesByOrgId:m}=ct(e,t),u=n?m:{},_=o.useRef(null),p=O()(cr,{[k.cx.gap6.pl16.pr16.$]:"containText"===a,[ca]:"brand"===r,[k.cx.w40.h40.$]:"square"===a,[cn]:i}),g=O()(cl,{[k.cx.ml2.$]:"containText"===a}),f="brand"===r?"var(--color-icon-onbrand)":void 0,E=d||Object.values(u).some(e=>e);return o.createElement(o.Fragment,null,o.createElement("button",{className:p,onClick:e=>{if(0===Object.keys(u).length)return c(e);let t=_.current?.getBoundingClientRect();t&&l(ea.j7({type:cd,data:{targetRect:t}}))},"data-testid":"save-button","data-onboarding-key":"save-button","data-tooltip-type":ei.Ib.TEXT,ref:_,"data-tooltip":E?(0,A.t)("community.saves.remove_from_saves"):(0,A.t)("community.saves.save")},o.createElement("div",{className:g},E?o.createElement(sq.Ns,{fill:f}):o.createElement(sq.LP,{fill:f})),"containText"===a&&o.createElement("div",null,(0,A.tx)(E?"community.saves.remove_from_saves":"community.saves.save_for_later"))),n&&o.createElement(c_,{resource:e,viewContext:t}))}function c_({resource:e,viewContext:t}){let a=(0,s.wA)(),r=(0,s.d4)(e=>e.dropdownShown?.type===cd),n=(0,s.d4)(e=>e.dropdownShown?.data?.targetRect),{onUserSaveActionClick:i,isResourceSavedForUser:l}=ce(e,t),{savesByOrgId:c,onOrgSaveAction:d}=ct(e,t),m=(0,s.d4)(e=>(0,nX.Tm)(e));if((0,oI.U)(e))return null;let u=[{displayText:(0,A.t)("community.saves.save_this_resource_for_yourself"),isChecked:l,callback:()=>{i()}}],_=Object.values(m).map(e=>({displayText:(0,A.t)("community.saves.save_for_everyone_at",{orgName:e.name}),isChecked:c[e.id],callback:()=>{d(e.id)}}));return u=u.concat(_),o.createElement(o.Fragment,null,r&&o.createElement(a_.j,{showPoint:!0,items:u,onSelectItem:(e,t)=>{e.callback&&e.callback("",null,a,t)},parentRect:n,dispatch:a}))}function cp({resource:e,viewContext:t,type:a,theme:r,enableWideButtonForStickyFooter:n}){let{onUserSaveActionClick:i,isResourceSavedForUser:l}=ce(e,t),s=O()(cr,{[k.cx.gap6.pl16.pr16.$]:"containText"===a,[ca]:"brand"===r,[k.cx.w40.h40.$]:"square"===a,[cn]:n}),c=O()(cl,{[k.cx.ml2.$]:"containText"===a}),d="brand"===r?"var(--color-icon-onbrand)":void 0;return o.createElement("button",{className:s,onClick:i,"data-testid":"save-button","data-onboarding-key":"save-button","data-tooltip-type":ei.Ib.TEXT,"data-tooltip":l?(0,A.t)("community.saves.remove_from_saves"):(0,A.t)("community.saves.save")},o.createElement("div",{className:c},l?o.createElement(sq.Ns,{fill:d}):o.createElement(sq.LP,{fill:d})),"containText"===a&&o.createElement("div",null,(0,A.tx)(l?"community.saves.remove_from_saves":"community.saves.save_for_later")))}function cg(e){return o.createElement(cm,{resource:e.resource,viewContext:e.viewContext,type:"square",theme:"default",allowOrgSaves:!0})}function cf(e){return o.createElement(cm,{resource:e.resource,viewContext:e.viewContext,type:"containText",theme:"brand",enableWideButtonForStickyFooter:e.enableWideButtonForStickyFooter})}var cE=a(545941);let ch="basic_resource_header--numberOfUsers--oWoBg",cy="basic_resource_header--mobileResourcePageHeaderMaxWidth--McUl4 basic_resource_header--resourcePageHeaderMaxWidth--ym-5U",cv="basic_resource_header--mobileResourceNameHeader--oN4qX text--fontPos24--YppUD text--_fontBase--QdLsd",cb="basic_resource_header--mobileName--5NvYd",cw="basic_resource_header--anchorLink--r0iNn meta_container--metaTab--zRKXG text--fontPos14--OL9Hp text--_fontBase--QdLsd",cT="basic_resource_header--activeAnchorLink--3ueWI meta_container--selectedMetaTab--5IRWQ meta_container--metaTab--zRKXG text--fontPos14--OL9Hp text--_fontBase--QdLsd",cI="basic_resource_header--ctaContainer--k8wqG",cN="basic_resource_header--leftSide--MzgPN";var cx=a(404554),cC=a(815234);function cS({resource:e,viewContext:t}){let r=e.like_count>0,n=(0,cE.mk)(e)>0,i=(0,ow.Bl)(e.id,(0,ow.Vm)(e)),l=i.data?.[0],s=a(892123).o.useLikeActions(e,!!l,i.data?.[1]||null,t||"")(),c=o.createElement("div",{className:"basic_resource_header--bulletSeparator--OGYaL text--fontPos10--s1PI5 text--_fontBase--QdLsd"},(0,A.tx)("community.detail_view.bullet_point"));return o.createElement("div",{className:"basic_resource_header--stats--U1D-b text--fontPos13--xW8hS text--_fontBase--QdLsd","data-testid":"resource-header-stats"},o.createElement("div",null,(0,ow.c8)(e)),r&&o.createElement(o.Fragment,null,c,o.createElement("button",{onClick:e=>{(0,p.kc)().cmty_deprecate_browse_as_admin&&s(e)}},(0,p.kc)().cmty_deprecate_browse_as_admin?l?cA:ck:o.createElement(t_.B,{svg:cx.A})),o.createElement("div",{className:ch},(0,sP.$M)(e.like_count))),n&&o.createElement(o.Fragment,null,c,o.createElement(t_.B,{svg:cC.A}),o.createElement("div",{className:ch},(0,A.tx)("community.detail_view.number_of_users",{numberOfUsers:(0,sP.$M)((0,cE.mk)(e))}))))}let ck=o.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99988 4.5L7.3254 3.96042C6.28613 3.129 4.78791 3.21198 3.84681 4.15308C2.82678 5.17311 2.82678 6.8269 3.84681 7.84693L7.99988 12L12.153 7.84693C13.173 6.8269 13.173 5.17311 12.153 4.15308C11.2119 3.21198 9.71364 3.129 8.67437 3.96042L7.99988 4.5ZM7.99988 10.5858L11.4459 7.13982C12.0754 6.51032 12.0754 5.48969 11.4459 4.86018C10.8651 4.27939 9.94044 4.22818 9.29906 4.74129L7.99988 5.78063L6.70071 4.74128C6.05933 4.22818 5.13471 4.27939 4.55391 4.86018C3.92441 5.48969 3.92441 6.51032 4.55392 7.13982L7.99988 10.5858Z",fill:"black"})),cA=o.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("rect",{width:"16",height:"16",fill:"var(--color-background)"}),o.createElement("path",{d:"M3.84693 7.84693L8 12L12.1531 7.84692C13.1731 6.8269 13.1731 5.1731 12.1531 4.15308C11.212 3.21198 9.71375 3.129 8.67448 3.96041L8 4.5L7.32552 3.96041C6.28625 3.129 4.78802 3.21198 3.84692 4.15308C2.8269 5.1731 2.8269 6.8269 3.84693 7.84693Z",fill:"#F24822"})),cR=a(258520).U;var cL=a(198181);let cD=a(62258).X;var cP=a(708071),cF=a(225266),cO=a(782501),cM=a(820642),cB=a(624618);function cU({resourceId:e,resourceType:t,containerClassName:a}){let r=(0,s.wA)(),n=(0,s.d4)(a=>t===oI.vt.HUB_FILE?(0,cM.M3)(e,a.hubFiles):(0,s$.my)(e,a.publishedPlugins)),i=(0,s.d4)(e=>e.authedActiveCommunityProfile),l=(0,s.d4)(e=>(0,cO.MK)(e,n)),c=o.useCallback(()=>{r((0,cF.z8)({hub_file_id:(0,oI.U)(n)?n.id:void 0,widget_id:(0,oI.xQ)(n)?n.id:void 0,plugin_id:(0,oI.I0)(n)?n.id:void 0})),r(aD.F.enqueue({message:(0,A.t)("community.detail_view.accepted_creator_invite")}))},[r,n]),d=o.useCallback(()=>{r((0,cF.bb)({hub_file_id:(0,oI.U)(n)?n.id:void 0,widget_id:(0,oI.xQ)(n)?n.id:void 0,plugin_id:(0,oI.I0)(n)?n.id:void 0})),r(aD.F.enqueue({message:(0,A.t)("community.detail_view.declined_creator_invite")}))},[r,n]);return!i||(0,nX.cs)(i)||!cO.ot.includes(l)?null:o.createElement("div",{className:a},o.createElement(cB.vR,{onClickAccept:c,onClickDecline:d,label:(0,A.t)("community.detail_view.you_have_been_added_as_a_creator_of_this_resource")}))}var cV=a(986323);function cH({pluginId:e,containerClassName:t}){let a=(0,s.wA)(),r=(0,s.d4)(t=>(0,s$.my)(e,t.publishedPlugins)),n=(0,s.d4)(e=>(0,cV.A)(e,r));return void 0!==n&&(0,cV.jT)(n)?o.createElement("div",{className:t},o.createElement(cB.vR,{onClickAccept:()=>{a((0,cF.dx)({widget_id:(0,oI.xQ)(r)?r.id:void 0,plugin_id:(0,oI.I0)(r)?r.id:void 0,src:cF.Nn.COMMUNITY_PAGE})),a(aD.F.enqueue({message:(0,A.t)("community.detail_view.accepted_publisher_invite")}))},onClickDecline:()=>{a((0,cF.MZ)({widget_id:(0,oI.xQ)(r)?r.id:void 0,plugin_id:(0,oI.I0)(r)?r.id:void 0,src:cF.Nn.COMMUNITY_PAGE})),a(aD.F.enqueue({message:(0,A.t)("community.detail_view.declined_publisher_invite")}))},label:(0,A.t)("community.detail_view.you_have_been_added_as_a_publisher_of_this_resource")})):null}var cW=a(609271),cj=a(107877),cG=a(629521),c$=a(27703),cz=a(106757),cY=a(927625);let cK="canvas_viewer--canvasViewer--aDA8H",cQ=(e,{width:t,height:a,top:r,left:n})=>{e.style.position="fixed",e.style.width=t+"px",e.style.height=a+"px",e.style.top=r+"px",e.style.left=n+"px"},cX=(e,t)=>{if(e.viewer_mode===ex.y4.PROTOTYPE)return`/community/file/${e.id}/embed`;let a=`/embed?embed_host=fastma&community_viewer=true&hub_file_id=${e.id}`;return void 0===t?a:`${a}&fuid=${t}`};function cq({viewer:e,resource:t,fixedSize:a}){let[r,n]=o.useState(void 0),[i,l]=o.useState(!1),[s,c]=o.useState(!1),d=(0,C.md)(cz.kS);o.useEffect(()=>{if(!e)return;let t=t=>{"LOAD_FINISHED"===t.data&&(e.querySelector("iframe").classList.add("canvas_viewer--showIframe--uYOO5"),e.setAttribute("data-loaded","true"),l(!0),(0,tt.qD)({name:"hub-file-canvas-loaded"}))},a=()=>{document.activeElement===e.querySelector("iframe")&&(0,tt.qD)({name:"community-LO-embed-iframe-interacted",comparisonVariant:s?"fullscreen":"thumbnail"})};return window.addEventListener("message",t,!1),window.addEventListener("blur",a,!1),()=>{window.removeEventListener("message",t,!1),window.removeEventListener("blur",a,!1)}},[e,s]);let m=()=>{if(!e)return;let t=e.querySelector(`div.${cK}`);if(!t)return;let a=t.getBoundingClientRect();cQ(t,a),n(a),requestAnimationFrame(()=>{e.setAttribute("data-animation-phase","open"),t.style.position="fixed",t.style.width="calc(100vw - 96px)",t.style.height="calc(100vh - 96px)",t.style.top="48px",t.style.left="48px"}),(0,tt.qD)({name:"community-LO-embed-view-expanded"}),c(!0)},u=()=>{if(!e)return;let t=e.querySelector(`.${cK}`);t&&(cQ(t,r),e.setAttribute("data-animation-phase","closing"),setTimeout(()=>{e.removeAttribute("data-animation-phase"),t.style.position="absolute",t.style.removeProperty("width"),t.style.removeProperty("height"),t.style.removeProperty("top"),t.style.removeProperty("left")},300),c(!1))};return e?o.createElement(o.Fragment,null,o.createElement("div",{className:"canvas_viewer--iframeWrapper--eemgJ"},o.createElement("iframe",{key:t.id,title:(0,A.t)("community.embed.preview_title_long"),style:{width:a?"100%":(0,ow.zS)(i),height:"100%"},src:cX(t,d),allowFullScreen:!0}),o.createElement("svg",{onClick:()=>{s?u():m()},"aria-label":s?"Close":"Open",className:"canvas_viewer--fullscreenIcon--ew-9d",width:"18",height:"18",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M14.54 4.168l-3.187 3.186-.708-.708 3.197-3.197.753-.449H11V2h5v5h-1V3.334l-.46.834zM3.46 13.832l3.186-3.186.708.708-3.198 3.197-.752.449H7v1H2v-5h1v3.666l.46-.834z",fillRule:"nonzero",fillOpacity:"1",fill:"#000",stroke:"none"}))),o.createElement("div",{role:"button",tabIndex:0,onClick:u,className:"canvas_viewer--iframeBackdrop--1sZT3"})):o.createElement(o.Fragment,null)}function cJ({resource:e,enableEmbedOnSmallScreens:t}){let[a,r]=o.useState(null),n=e.viewer_mode===ex.y4.WHITEBOARD,i=!!e.thumbnail_is_set,l=t?cj.YW:900;return o.createElement("div",{className:O()("canvas_viewer--canvasViewerWrapper--PEx4d",{"canvas_viewer--smallEmbed--1di1B":t}),"data-loaded":"false",ref:e=>r(e)},o.createElement("div",{className:n?"canvas_viewer--canvasViewerFigJam--GQ00B canvas_viewer--canvasViewer--aDA8H":cK,key:e.id},o.createElement("div",{className:"canvas_viewer--hubFileLoadingCoverImage--2onuq canvas_viewer--resourceLoadingCoverImage--e9uBx"},o.createElement(cY.Ho,{image:e.thumbnail_url,isSet:i,isWhiteboard:n,backgroundColor:(0,c$.Cn)(e.client_meta),hubFileId:e.id,alt:(0,ow.qD)(e).name+" preview",thumbnailContext:o6.O7.DETAIL,resizedThumbnailUrls:e.resized_thumbnail_urls})),o.createElement(cW.Ay,{mediaQuery:`(min-width: ${l}px)`,onHide:()=>{a&&a.setAttribute("data-loaded","false")}},o.createElement(cq,{fixedSize:t,viewer:a,resource:e}))))}function cZ({resource:e}){return o.createElement("div",{className:"canvas_viewer--canvasViewerWrapperPlugins--YfQ3Y canvas_viewer--canvasViewerWrapper--PEx4d","data-loaded":"true"},o.createElement("div",{className:cK},o.createElement("img",{className:"canvas_viewer--pluginLoadingCoverImage--nn23R canvas_viewer--resourceLoadingCoverImage--e9uBx",src:e.thumbnail_url,alt:(0,ow.qD)(e).name+" preview",key:e.id})))}function c0({resource:e,enableEmbedOnSmallScreens:t}){return"current_hub_file_version_id"in e?o.createElement(eg.fu,{name:"Canvas Embed"},o.createElement(cJ,{resource:e,enableEmbedOnSmallScreens:t})):o.createElement(cZ,{resource:e})}function c1(e){let t;return()=>t??=e()}let c2=c1(function(){return{designTemplates:[{urlSlug:so.LJ.desktopAppsWebsites,text:(0,A.t)("categories.desktop_apps_websites")},{urlSlug:so.LJ.mobileApps,text:(0,A.t)("categories.mobile_apps")},{urlSlug:so.LJ.resumes,text:(0,A.t)("categories.resumes")},{urlSlug:so.LJ.portfolios,text:(0,A.t)("categories.portfolios")},{urlSlug:so.LJ.presentations,text:(0,A.t)("categories.presentations")}],libraries:[{urlSlug:so.LJ.uiKits,text:(0,A.t)("categories.ui_kits")},{urlSlug:so.LJ.wireframes,text:(0,A.t)("categories.wireframes")}],designTools:[{urlSlug:so.LJ.accessibility,text:(0,A.t)("categories.accessibility")},{urlSlug:so.LJ.editingEffects,text:(0,A.t)("categories.editing_effects")},{urlSlug:so.LJ.fileOrganization,text:(0,A.t)("categories.file_organization")},{urlSlug:so.LJ.importExport,text:(0,A.t)("categories.import_export")},{urlSlug:so.LJ.prototypingAnimation,text:(0,A.t)("categories.prototyping_animation")}],visualAssets:[{urlSlug:so.LJ.fontsTypography,text:(0,A.t)("categories.fonts_typography")},{urlSlug:so.LJ.illustrations,text:(0,A.t)("categories.illustrations")},{urlSlug:so.LJ.shapesColors,text:(0,A.t)("categories.shapes_colors")},{urlSlug:so.LJ.stockPhotography,text:(0,A.t)("categories.stock_photography")}],whiteboarding:[{urlSlug:so.LJ.brainstorming,text:(0,A.t)("categories.brainstorming")},{urlSlug:so.LJ.diagramming,text:(0,A.t)("categories.diagramming")},{urlSlug:so.LJ.funGames,text:(0,A.t)("categories.fun_games")},{urlSlug:so.LJ.strategicPlanning,text:(0,A.t)("categories.strategic_planning")},{urlSlug:so.LJ.teamMeetings,text:(0,A.t)("categories.team_meetings")}]}}),c8=c1(function(){return{designTemplates:{urlSlug:so.LJ.designTemplates,text:(0,A.t)("categories.design_templates"),allText:(0,A.t)("categories.all_design_templates")},libraries:{urlSlug:so.LJ.libraries,text:(0,A.t)("categories.libraries"),allText:(0,A.t)("categories.all_libraries")},designTools:{urlSlug:so.LJ.designTools,text:(0,A.t)("categories.design_tools"),allText:(0,A.t)("categories.all_design_tools")},visualAssets:{urlSlug:so.LJ.visualAssets,text:(0,A.t)("categories.visual_assets"),allText:(0,A.t)("categories.all_visual_assets")},whiteboarding:{urlSlug:so.LJ.whiteboarding,text:(0,A.t)("categories.whiteboarding"),allText:(0,A.t)("categories.all_whiteboarding")},education:{urlSlug:so.LJ.education,text:(0,A.t)("categories.education")},development:{urlSlug:so.LJ.development,text:(0,A.t)("categories.development")},icons:{urlSlug:so.LJ.icons,text:(0,A.t)("categories.icons")},more:{text:(0,A.t)("categories.more")}}});function c4(){let e=c2(),t=c8();return(0,o.useMemo)(()=>({designTemplates:{category:t.designTemplates,dropdownCategories:e.designTemplates},libraries:{category:t.libraries,dropdownCategories:e.libraries},designTools:{category:t.designTools,dropdownCategories:e.designTools},visualAssets:{category:t.visualAssets,dropdownCategories:e.visualAssets},whiteboarding:{category:t.whiteboarding,dropdownCategories:e.whiteboarding},more:{category:t.more,dropdownCategories:[t.education,t.development,t.icons]},icons:{category:t.icons},development:{category:t.development},education:{category:t.education}}),[t,e])}var c3=a(97128);let c5="tags_container--tagsHeader--6f339 text--fontPos14--OL9Hp text--_fontBase--QdLsd",c9="tags_container--tagsContainer--M7709",c6="tags_container--tag--40TSY text--fontPos13--xW8hS text--_fontBase--QdLsd";function c7({parentCategorySlug:e,childCategorySlug:t,rdpImpressionId:a}){let r=function(){let e=function(){let e=c4();return(0,o.useMemo)(()=>[e.libraries,e.designTemplates,e.designTools,e.visualAssets,e.whiteboarding,e.more],[e])}();return(0,o.useMemo)(()=>{let t={};return e.forEach(({category:e,dropdownCategories:a})=>{"urlSlug"in e&&(t[e.urlSlug]=e.text),a?.forEach(e=>{t[e.urlSlug]=e.text})}),t["calendar-templates"]=(0,A.t)("categories.calendar_templates"),t},[e])}(),n=(0,sD.S)(e,so.LJ),i=(0,sD.S)(t,so.LJ);if(!n&&!i)return null;let l=n?new ss.IE({categorySlug:n}).href:null,s=i?new ss.IE({categorySlug:i}).href:null,c=n?r[n]:null,d=i?r[i]:null;return d||c?o.createElement("div",{className:k.cx.mb32.$},o.createElement("h3",{className:c5},(0,A.tx)("community.detail_view.category")),o.createElement("div",{className:c9},!!c&&!!l&&o.createElement(eg.o3,{to:l,trackingEventName:"cmty_category",trackingProperties:{name:"rdp_pill_clicked",category_slug:e,category_text:c,rdpImpressionId:a}},o.createElement("div",{className:c6},c)),!!d&&!!s&&o.createElement(eg.o3,{to:s,trackingEventName:"cmty_category",trackingProperties:{name:"rdp_pill_clicked",category_slug:t,category_text:d,rdpImpressionId:a}},o.createElement("div",{className:c6},d)))):o.createElement(o.Fragment,null)}function de({resource:e}){return null}var dt=a(443474);function da(){return o.createElement(dt.b,{onClick:()=>(0,s1.FL)(s0.qB.SIGN_UP,{preventDefaultRedirect:!0}),isResourceLiked:!1})}var dr=a(367253),dn=a(751297);let di=a(342646).G;var dl=a(137459),ds=a(376485),dc=a(788541);let dd="resource_page_metadata_badge--badge--PWa-6",dm="resource_page_metadata_badge--badgeRedesign--mM76e";function du(e){let{hubFileEditorType:t,pluginEditorType:a}=e;if(!t&&!a)return null;let r=(0,A.t)("community.detail_view.made_for_figma_design");if(t||a?.length===1){let e=t||a?.[0];r=(()=>{switch(e){case dl.LE.SLIDES:return(0,A.t)("community.detail_view.made_for_slides");case dl.LE.FIGJAM:case ds.FW.FIGJAM:return(0,A.t)("community.detail_view.made_for_fig_jam");case ds.FW.INSPECT:case ds.FW.DEV:return(0,A.t)("community.detail_view.made_for_dev_mode");case dl.LE.FIGMA:case ds.FW.FIGMA:default:return(0,A.t)("community.detail_view.made_for_figma_design")}})()}a?.includes(ds.FW.FIGJAM)&&a?.includes(ds.FW.FIGMA)&&(0,s$.Pe)(a)?r=(0,A.t)("community.detail_view.universal"):a?.includes(ds.FW.FIGJAM)&&a?.includes(ds.FW.FIGMA)?r=(0,A.t)("community.detail_view.made_for_figma_design_and_figjam"):a?.includes(ds.FW.FIGJAM)&&(0,s$.Pe)(a)?r=(0,A.t)("community.detail_view.made_for_fig_jam_and_dev_mode"):a?.includes(ds.FW.FIGMA)&&(0,s$.Pe)(a)&&(r=(0,A.t)("community.detail_view.made_for_figma_design_and_dev_mode"));let n=(0,p.kc)().cmty_rdp_badge_update;return o.createElement("div",{className:n?dm:dd},o.createElement(dc.dn,{editorType:t??a,is16x16:!n}),o.createElement("div",null,r))}var d_=a(520863),dp=a(830445),dg=a(965270),df=a(51055),dE=a(733648);function dh({resource:e}){let t=(0,p.kc)().cmty_rdp_badge_update,a=function(e){if((0,oI.U)(e))return o.createElement(du,{hubFileEditorType:(0,ow.JJ)(e.viewer_mode)});let t=(0,ow.qD)(e).manifest.editorType;return(0,p.kc)().cmty_rdp_badge_update&&t?o.createElement(o.Fragment,null,t.map(e=>o.createElement(du,{key:e,pluginEditorType:[e]}))):o.createElement(du,{pluginEditorType:t})}(e),r=(0,p.kc)().dse_preset_libraries&&(0,p.kc)().presets_on_cmty&&(0,dp.TX)(e.id)&&o.createElement(dy,{useRedesignBadges:!!t}),n=!(0,oI.U)(e)&&(0,s$.pk)((0,ow.qD)(e))&&o.createElement(dv,{useRedesignBadges:!!t}),i=e.community_publishers.accepted.reduce((e,t)=>e.concat(t.badges),[]),l=[...new Set(e.badges.concat(i))],s=(0,sW.C2)({badges:l},!1,t),c=(0,oI.U)(e)?null:function(e,t){let a=(0,ow.qD)(e).manifest;return o.createElement(o.Fragment,null,o.createElement(db,{plugin:e,is24x24:t}),o.createElement(dg.u,{networkAccess:a.networkAccess,isWidget:e.is_widget,isLearnMoreLinkVisible:!0,is24x24:t}))}(e,t);return o.createElement(o.Fragment,null,a,r,n,s&&o.createElement("div",{className:t?dm:dd},o.createElement(sW.Gx,null,s),(0,A.tx)("community.detail_view.made_by_a_figma_partner")),c)}function dy({useRedesignBadges:e}){return o.createElement("div",{className:e?dm:dd},o.createElement(t_.B,{svg:dE.A,svgClassName:e?"resource_page_metadata_badge--uiKitBadgeSvg--deluf":"resource_page_metadata_badge--uiKitBadgeSvg16---g-GU",useOriginalSrcFills_DEPRECATED:!0}),o.createElement("div",null,(0,A.t)("community.detail_view.ui_kit")))}function dv({useRedesignBadges:e}){return o.createElement("div",{className:e?dm:dd},o.createElement(dc.ZA,{is24x24:e}),o.createElement("div",null,(0,A.t)("community.detail_view.made_for_codegen")))}function db({plugin:e,is24x24:t}){let a=(0,d_.A)(e.id,!0);return o.createElement(o.Fragment,null,a.loaded&&a.data?.status===ex.bQ.APPROVED&&o.createElement(df.b,{securityFormResponse:a.data,entryPoint:df.X.COMMUNITY_DETAIL,isWidget:e.is_widget,is24x24:t}))}function dw(e){return o.createElement("div",{className:(0,p.kc)().cmty_rdp_badge_update?"resource_page_metadata_badge--badgesContainerRedesign--I4Jqr resource_page_metadata_badge--badgesContainer--heM3E text--fontPos13--xW8hS text--_fontBase--QdLsd":"resource_page_metadata_badge--badgesContainer--heM3E text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.children)}var dT=a(226900),dI=a(831949),dN=a(126815);function dx({monetizedResourceMetadata:e,isFreemium:t,isOffPlatform:a}){if(t&&e){let t=(0,sG.X2)(e);return(0,A.tx)("community.detail_view.in_app_purchases",{priceString:t})}return a?o.createElement("div",{className:dI.UH},(0,A.tx)("community.detail_view.third_party_badge.off_platform"),o.createElement(t_.B,{svg:dN.A,className:dI.G,"data-tooltip-type":ei.Ib.TEXT,"data-tooltip":(0,A.t)("community.detail_view.resource_outside_of_figma"),"data-tooltip-show-immediately":!0})):null}function dC(e){let{updatedAt:t,paymentInfo:a,supportContact:r,creatorPolicyData:n,license:i}=e,[l,s]=o.useState(!1),c=r;return r&&((0,dr.xf)(r)?c=`mailto:${r}`:r.startsWith("https://")||r.startsWith("http://")||(c=`//${r}`)),o.createElement(dT.z,null,o.createElement("div",null,(0,A.tx)("community.detail_view.last_updated_at_time_stamp",{timeStamp:o.createElement(l9.h1,{date:t})})),r&&o.createElement("div",{className:dI.Ev},(0,A.tx)("community.detail_view.support_contact",{supportContact:o.createElement("a",{href:c||void 0,className:dI.tx,target:"_blank",rel:"nooppener noreferrer"},r)})),a,i,(0,p.kc)().cmty_hub_file_creator_policy&&n?.policyText&&o.createElement("span",null,o.createElement("span",{role:"button",onClick:()=>{s(!0)},tabIndex:0,className:dI.Rc},(0,A.tx)("community.detail_view.creator_policy")),l&&o.createElement(r$.XV,{title:(0,A.t)("community.detail_view.creator_policy"),maxWidth:450,onClose:()=>{s(!1)},allowScroll:!0,containerClassName:dI.D9},o.createElement("div",{className:dI.OC},o.createElement("div",{className:dI.$h},(0,A.tx)("community.detail_view.creator_policy_publisher_name",{publisherName:n.publisherName}))))))}function dS({resource:e}){let t=(0,ow.qD)(e),a=(0,oI.m3)(e)&&(0,oI.PM)(e),r=(0,oI.zF)(e);return o.createElement("div",{className:dI.tJ,"data-testid":"metadata-container"},o.createElement(dw,null,o.createElement(dh,{resource:e})),o.createElement(dC,{updatedAt:t.created_at,supportContact:e.support_contact,license:o.createElement(dn.F,{isMonetizedResource:(0,oI.m3)(e),isHubFile:(0,oI.U)(e),isAppleResource:(0,cE.mA)(e),isFigmaResource:(0,cE.sB)(e)}),paymentInfo:o.createElement(dx,{monetizedResourceMetadata:e.monetized_resource_metadata,isFreemium:a,isOffPlatform:r}),creatorPolicyData:{policyText:t.creator_policy??null,publisherName:e.publisher.name}}),(0,cL.M)()?o.createElement(di,{resource:e}):null,(0,cL.M)()?o.createElement(cB.dx,null):o.createElement("a",{href:"mailto:content-reviews@figma.com",className:dI.hV},(0,A.tx)("community.detail_view.report_resource")))}var dk=a(920037),dA=a(978527),dR=a(206144);let dL="related_content--relatedContentTile--gwfdU",dD="related_content--relatedContentTileTitle--DJQmt text--fontPos13--xW8hS text--_fontBase--QdLsd";function dP({resource:e,rdpImpressionId:t}){let a=(0,ow.qD)(e),r=e.thumbnail_url,n=!!e.thumbnail_is_set,i=e.viewer_mode===ex.y4.WHITEBOARD,l=(0,p.kc)().cmty_thumbnail_16x9_ar,s=(0,ow._t)({resource:e});return o.createElement(dR.A6,{to:s,className:O()(dL,{"related_content--relatedContentTile16to9--6fnkm":l}),onClick:()=>dM(e,t)},o.createElement("div",{className:n?"related_content--relatedContentTileImageThumbnailIsSet--ceK9X related_content--relatedContentTileImage--0IZ1a":"related_content--relatedContentTileImage--0IZ1a",style:{backgroundColor:(0,dk.C)(e.client_meta)}},o.createElement(cY.Ho,{hubFileId:e.id,image:r,isWhiteboard:i,isSet:n,alt:a.name,resizedThumbnailUrls:e.resized_thumbnail_urls}),o.createElement(dc.dn,{editorType:(0,ow.JJ)(e.viewer_mode)})),o.createElement("div",{className:dD},a.name))}function dF({resource:e,rdpImpressionId:t}){let a=(0,ow.qD)(e),r=a.redirect_icon_url,n=(0,ow._t)({resource:e});return o.createElement(dR.A6,{to:n,className:dL,onClick:()=>dM(e,t)},o.createElement("div",{className:"related_content--relatedContentTilePluginContentWrapper--ie8pw"},o.createElement(dc.dn,{editorType:a.manifest.editorType}),o.createElement(dA.V,{className:"related_content--relatedContentPluginTileImage--4Jsqh",plugin:a}),o.createElement("div",{className:"related_content--relatedContentPluginTileImageBlurry--z0-ki related_content--relatedContentPluginTileImage--4Jsqh",style:{backgroundImage:`url(${r})`}})),o.createElement("div",{className:dD},a.name))}function dO({resource:e,rdpImpressionId:t}){let a=(0,ow.qD)(e),r=a.redirect_snapshot_url,n=(0,ow._t)({resource:e});return o.createElement(dR.A6,{to:n,className:dL,onClick:()=>dM(e,t)},o.createElement("div",{className:"related_content--relatedContentWidgetTileImage--rY25h related_content--relatedContentTileImage--0IZ1a"},o.createElement("img",{src:r,alt:a.name,loading:"lazy"})),o.createElement("div",{className:dD},a.name))}let dM=(e,t)=>{(0,V.sx)("Community Related Content Clicked",{community_resource:(0,ow.Vm)(e),community_resource_id:e.id,related_content_type:e.related_content?.types.join(","),rdp_impression_id:t})};function dB({resource:e,content:t,types:a,creators:r,rdpImpressionId:n}){o.useEffect(()=>{(0,V.sx)("Community Related Content Viewed",{communityResource:(0,ow.Vm)(e),communityResourceId:e.id,relatedContentType:a,rdp_impression_id:n,itemsImpressed:t.map(e=>e.id).join(",")})},[t.map(e=>e.id).join(",")]);let i=1===a.length&&a[0]===cj.oS.by_creator?r.accepted.length>1?(0,A.t)("community.related_content.more_by_these_creators"):(0,A.t)("community.related_content.more_by_this_creator"):(0,A.t)("community.related_content.more_like_this");return o.createElement("div",{className:"related_content--relatedContent--TYPp2"},o.createElement("div",{className:"related_content--relatedContentHeader--gjj-d text--fontPos14--OL9Hp text--_fontBase--QdLsd"},o.createElement("div",{className:"related_content--relatedContentTitle--uylYw"},i)),o.createElement("div",{className:"related_content--relatedContentTilesContainer--L8KiC"},t.map(e=>{let t=e.id;return(0,oI.U)(e)?o.createElement(dP,{key:t,resource:e,rdpImpressionId:n}):(0,oI.I0)(e)?o.createElement(dF,{key:t,resource:e,rdpImpressionId:n}):o.createElement(dO,{key:t,resource:e,rdpImpressionId:n})})))}var dU=a(386339),dV=a(971120);function dH({tags:e,resourceType:t,optionalTitle:a,disableHeader:r}){if(0===e.length)return o.createElement(o.Fragment,null);let n=(0,p.kc)().cmty_curated_tags_mapping;return o.createElement(o.Fragment,null,!r&&o.createElement("h3",{className:c5},a||(0,A.tx)("community.detail_view.tags")),o.createElement("div",{className:c9},e.map(e=>{let a=`/community/tag/${e}`;return(t!==dV.L.BrowseResourceTypes.MIXED&&(a+=`/${t}`),n)?o.createElement("div",{className:c6,key:e},e):o.createElement(dR.A6,{key:e,to:a,onClick:()=>{(0,V.sx)("Tag clicked",{text:e,tab:t})}},o.createElement("div",{className:c6},e))})))}var dW=a(568424);function dj({resource:e}){let[t,a]=o.useState(!1);if(!(0,ow.zo)(e))return null;let{versions:r}=e,n=(0,s$.uF)(e);return o.createElement("div",{className:"version_history--versionHistory--yOsFW text--fontPos14--OL9Hp text--_fontBase--QdLsd"},o.createElement("div",{className:"version_history--header--jdIyg"},o.createElement(dA.V,{className:"version_history--icon--pnnmo",plugin:n}),o.createElement("span",{className:"version_history--title--1a95q text--fontPos14--OL9Hp text--_fontBase--QdLsd"},(0,A.tx)("community.plugins.version_history"))),o.createElement("div",null,Object.keys(r).map(parseFloat).sort((e,t)=>e>t?-1:1).map(e=>r[e]).filter(e=>!!e).map(e=>{let t=!e.release_notes,a=new Date(e.created_at).toLocaleDateString(navigator.language,{year:"numeric",month:"long",day:"numeric"});return o.createElement("div",{className:t?"version_history--releaseSectionEmpty--t8k4f":"version_history--releaseSection--mOmlB",key:e.id},o.createElement("span",{className:"version_history--versionName--PC5Ws"},(0,A.tx)("community.plugins.version_version_on_date",{createdAt:a,versionName:e.version})),o.createElement("span",{className:"version_history--versionDescription--bzh-V"},e.release_notes))}).slice(0,t?1/0:2),!t&&Object.keys(r).length>2&&o.createElement("div",{className:"version_history--showAll--b8ClA",onClick:()=>a(!0),role:"button",tabIndex:0},(0,A.tx)("community.plugins.see_all"))))}let dG="meta_container--tabbedMetaContainer--DJyPv meta_container--metaContainer--kaSwh",d$="meta_container--metaTabContainer--lvUtb",dz="meta_container--metaContainerDivider--ZXFZP",dY="meta_container--metaContainerDividerSpacer--OW9jB",dK="meta_container--mobileMetaContainer--gGQKv",dQ="meta_container--metaTab--zRKXG text--fontPos14--OL9Hp text--_fontBase--QdLsd",dX="meta_container--selectedMetaTab--5IRWQ meta_container--metaTab--zRKXG text--fontPos14--OL9Hp text--_fontBase--QdLsd",dq="meta_container--metaTabCommentCount--B1a21",dJ="meta_container--selectedMetaTabCommentCount--lS1BF meta_container--metaTabCommentCount--B1a21";function dZ({resource:e,rdpImpressionId:t}){return e.related_content&&0!==e.related_content.content.length?o.createElement(o.Fragment,null,o.createElement(dB,{resource:e,content:e.related_content.content,types:e.related_content.types,creators:e.community_publishers,rdpImpressionId:t}),o.createElement("hr",null)):null}function d0(e,t){if(e.preventDefault(),t===sU.$O.DescriptionView){window.scrollTo({top:0,behavior:"smooth"});return}let a=document.getElementById(t);if(a){let e=sU.bK,t=a.getBoundingClientRect().top+window.scrollY+e;window.scrollTo({top:t,behavior:"smooth"})}}function d1(e){if(!(0,oI.U)(e))return!1;let t=e.viewer_mode===ex.y4.WHITEBOARD&&(0,oI.m3)(e),a=(0,ow.z$)(e)===cG.Z4.EMBED;return!t&&!a&&!(0,ow.cX)(e)}function d2({resource:e,rdpImpressionId:t}){let[a,r]=(0,C.fp)(sV),n=(0,ow.qD)(e),i=d1(e),l=(0,oT.kk)(),{externalCommentScrollRef:s}=o.useContext(cP.H);return o.useEffect(()=>{let e=()=>{let e=document.getElementById(sU.$O.CommentsView);if(e){let t=e.getBoundingClientRect().top;(0,ow._m)(t,window.innerHeight,window.scrollY)?r(sU.$O.CommentsView):r(sU.$O.DescriptionView)}};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[r]),o.createElement(o.Fragment,null,o.createElement(cU,{resourceId:e.id,resourceType:(0,ow.Vm)(e),containerClassName:dG}),!(0,oI.U)(e)&&o.createElement(cH,{pluginId:e.id,containerClassName:dG}),o.createElement("div",{className:d$},o.createElement("button",{onClick:e=>d0(e,sU.$O.DescriptionView)},o.createElement("div",{className:O()(dQ,{[dX]:a===sU.$O.DescriptionView})},(0,A.t)("community.resource_page.about"))),(0,nX.e5)(e)&&o.createElement("button",{onClick:e=>d0(e,sU.$O.CommentsView)},o.createElement("div",{className:O()(dQ,{[dX]:a===sU.$O.CommentsView})},(0,A.tx)("community.resource_page.comments",{numComments:o.createElement("span",{className:O()(dq,{[dJ]:a===sU.$O.CommentsView})},e.comment_count)})))),o.createElement("div",{className:dz},o.createElement("div",{className:dY})),o.createElement("div",{className:dG},o.createElement("div",{className:"meta_container--leftSide--KSlX8",ref:s,id:sU.$O.DescriptionView},n.description&&o.createElement(dW.u,{description:n.description,hideDivider:!0}),i&&o.createElement(o.Fragment,null,o.createElement("h3",{className:k.cx.font14.fontSemiBold.mb16.$},(0,A.t)("community.embed.preview_title")),o.createElement(c0,{enableEmbedOnSmallScreens:!0,resource:e}),o.createElement("hr",{className:k.cx.my24.$})),o.createElement(dZ,{resource:e,rdpImpressionId:t}),o.createElement(dj,{resource:e}),o.createElement("div",{id:sU.$O.CommentsView},o.createElement(cD,{resource:e}))),o.createElement("div",{className:"meta_container--rightSide--FQNL-"},o.createElement(de,{resource:e}),!l()&&o.createElement(c7,{parentCategorySlug:e.parent_category_slug,childCategorySlug:e.category_slug,rdpImpressionId:t}),o.createElement(dH,{tags:e.tags||[],resourceType:(0,ow.Dl)(e)+"s"}),o.createElement(dU.p,{resource:e}),o.createElement(dS,{resource:e}))))}function d8({resource:e,rdpImpressionId:t}){let[a,r]=(0,C.fp)(sV),n=d1(e),i=(0,ow.qD)(e),l=(0,oT.kk)();return o.useEffect(()=>{let e=()=>{let e=document.getElementById(sU.$O.CommentsView);if(e){let t=e.getBoundingClientRect().top;(0,ow._m)(t,window.innerHeight,window.scrollY)&&r(sU.$O.CommentsView)}else r(sU.$O.DescriptionView)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[r]),o.createElement(o.Fragment,null,o.createElement(cU,{resourceId:e.id,resourceType:(0,ow.Vm)(e),containerClassName:dG}),!(0,oI.U)(e)&&o.createElement(cH,{pluginId:e.id,containerClassName:dG}),o.createElement("div",{className:d$},o.createElement("button",{onClick:e=>d0(e,sU.$O.DescriptionView)},o.createElement("div",{className:O()(dQ,{[dX]:a===sU.$O.DescriptionView})},(0,A.t)("community.resource_page.about"))),(0,nX.e5)(e)&&o.createElement("button",{onClick:e=>d0(e,sU.$O.CommentsView)},o.createElement("div",{className:O()(dQ,{[dX]:a===sU.$O.CommentsView})},(0,A.tx)("community.resource_page.comments",{numComments:o.createElement("span",{className:O()(dq,{[dJ]:a===sU.$O.CommentsView})},e.comment_count)})))),o.createElement("div",{className:dz},o.createElement("div",{className:dY})),o.createElement("div",{className:dG},o.createElement("div",{className:dK,"data-mobile-view":!0,id:sU.$O.DescriptionView},i.description&&o.createElement(dW.u,{description:i.description}),n&&o.createElement(o.Fragment,null,o.createElement("h3",{className:k.cx.font14.fontSemiBold.mb16.$},(0,A.t)("community.embed.preview_title")),o.createElement(c0,{enableEmbedOnSmallScreens:!0,resource:e}),o.createElement("hr",{className:k.cx.my24.$})),o.createElement(de,{resource:e}),!l()&&o.createElement("div",{className:k.cx.mb32.$},o.createElement(c7,{parentCategorySlug:e.parent_category_slug,childCategorySlug:e.category_slug,rdpImpressionId:t})),e.tags&&e.tags.length>0&&o.createElement(o.Fragment,null,o.createElement(dH,{tags:e.tags,resourceType:(0,ow.ss)(e,{plural:!0})}),o.createElement("hr",null)),o.createElement(dZ,{resource:e,rdpImpressionId:t}),o.createElement(dj,{resource:e}),o.createElement("div",{id:sU.$O.CommentsView},o.createElement(cD,{resource:e})),o.createElement(dU.p,{resource:e}),o.createElement(dS,{resource:e}))))}function d4({resource:e}){if(!(0,cL.M)())return o.createElement(da,null);{let t=(0,oI.U)(e)?eD.e0.COMMUNITY_HUB_FILE:(0,oI.xQ)(e)?eD.e0.COMMUNITY_HUB_WIDGET:eD.e0.COMMUNITY_HUB_PLUGIN;return o.createElement(sH.Q,{resource:e,viewContext:t})}}function d3({resource:e,rdpImpressionId:t}){let a=(0,ow.qD)(e),{externalCommentScrollRef:r}=o.useContext(cP.H),n=(0,oT.kk)();return o.createElement(o.Fragment,null,o.createElement("div",{className:dK,"data-mobile-view":!0,ref:r},!!a.description&&o.createElement(dW.u,{description:a.description}),!!a.description&&o.createElement("hr",null),!(0,oI.U)(e)&&o.createElement(cH,{pluginId:e.id}),o.createElement(de,{resource:e}),!n()&&o.createElement("div",{className:k.cx.mb32.$},o.createElement(c7,{parentCategorySlug:e.parent_category_slug,childCategorySlug:e.category_slug,rdpImpressionId:t})),e.tags&&e.tags.length>0&&o.createElement(o.Fragment,null,o.createElement(dH,{tags:e.tags,resourceType:(0,ow.ss)(e,{plural:!0})}),o.createElement("hr",null)),o.createElement(dZ,{resource:e,rdpImpressionId:t}),o.createElement(dj,{resource:e}),o.createElement("div",{id:sU.$O.CommentsView},o.createElement(cD,{resource:e})),o.createElement(dU.p,{resource:e}),o.createElement(dS,{resource:e})))}function d5({resource:e,rdpImpressionId:t,isMobileSize:a}){return o.createElement(o.Fragment,null,o.createElement("div",{className:a?"meta_container--metaContainer--kaSwh":""},o.createElement(cW.Ay,{mediaQuery:`(max-width: ${cj.YW-1}px)`},o.createElement(d3,{resource:e,rdpImpressionId:t})),o.createElement(cW.Ay,{mediaQuery:`(min-width: ${cj.YW}px) and (max-width: ${cj.w3-1}px)`},o.createElement(d8,{resource:e,rdpImpressionId:t})),o.createElement(cW.Ay,{mediaQuery:`(min-width: ${cj.w3}px)`},o.createElement(d2,{resource:e,rdpImpressionId:t}))))}var d9=a(166521);let d6=a(10588).l;function d7({resource:e}){let t=(0,sj.I)(e),a=o.useMemo(()=>(0,sG._K)(e,t)?o.createElement(d9.I,{resource:e,enableWideButtonForStickyFooter:!0}):(0,ow.cX)(e)?o.createElement(d6,{resource:e,enableWideButtonForStickyFooter:!0}):(0,ow.Qo)(e)?o.createElement(cR,{hubFile:e,enableWideButtonForStickyFooter:!0}):null,[e,t]),r=(0,cL.M)()?"mobile_logged_in":"mobile_logged_out",n=o.useMemo(()=>(0,oI.I0)(e)||(0,oI.xQ)(e)?o.createElement(o.Fragment,null,o.createElement(cf,{resource:e,viewContext:r,enableWideButtonForStickyFooter:!0}),o.createElement(d4,{resource:e})):o.createElement(o.Fragment,null,a,o.createElement(d4,{resource:e}),o.createElement(cg,{resource:e,viewContext:r})),[e,a,r]);return o.createElement("div",{className:O()("meta_container--mobileButtonRow--a-eRc","meta_container--wideMobileButtonRow--ahIrA")},n)}let me=a(895587).s;function mt({resource:e,CTAButton:t,hasScrolled:a}){let r=(0,ow.qD)(e),n=(0,s.d4)(e=>(0,nX.Tm)(e)),i=(0,ow.Qo)(e)?eD.e0.COMMUNITY_HUB_FILE:(0,oI.xQ)(e)?eD.e0.COMMUNITY_HUB_WIDGET:eD.e0.COMMUNITY_HUB_PLUGIN,l=null,c=Object.values(n).some(t=>(0,oI.I0)(e)&&t.plugins_whitelist_enforced||(0,oI.xQ)(e)&&t.widgets_whitelist_enforced);me&&!(0,ow.Qo)(e)&&!("is_private"in r&&r.is_private)&&(0,p.kc)().cmty_deprecate_browse_as_admin&&c&&(l=o.createElement(me,{resource:e,viewContext:i}));let d=o.createElement(cg,{"data-onboarding-key":"save-button",resource:e,viewContext:i}),m=l?null:o.createElement(sH.Q,{resource:e,viewContext:i}),u=o.createElement(sX,{resource:e});return a?o.createElement("div",{className:"basic_resource_header--resourcePageHeaderSticky--z2Rga"},o.createElement("div",{className:"basic_resource_header--resourcePageHeaderStickyContainer--XiXE-"},o.createElement("div",{className:"basic_resource_header--headerStickyLeftSide--OkZLQ"},o.createElement("h1",{className:"basic_resource_header--stickyTitle--oG0u0 ellipsis--ellipsis--Tjyfa text--fontPos18--rYXJb text--_fontBase--QdLsd"},r.name),o.createElement(mn,{resource:e})),o.createElement("div",{className:cI},t,l,m,d))):o.createElement(ma,{resource:e,CTAButton:t,approveButton:l,likeButton:m,saveButton:d,headerBadges:u,viewContext:i})}function ma({resource:e,CTAButton:t,title:a,description:r,approveButton:n,likeButton:i,saveButton:l,learnMore:s,headerBadges:c,openInNewTab:d=!1,viewContext:m}){let u=(0,ow.qD)(e),_=e.community_publishers.accepted,p=[..._.filter(e=>(0,sW.J3)(e.badges)),..._.filter(e=>!(0,sW.J3)(e.badges))];return o.createElement("div",{className:"basic_resource_header--headerContainer--YYSPX"},o.createElement("div",{className:"basic_resource_header--authors--1PIBq text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement(sA.L,{publishers:p,showFigmaPartnerBadge:!0}),o.createElement(sA.I,{publishers:p,openInNewTab:d,useSmallWidth:!0,removeByLabel:!0})),o.createElement("div",{className:"basic_resource_header--title_badge_container--vH8BZ"},o.createElement("div",{className:"basic_resource_header--title--9jW4i text--fontPos24--YppUD text--_fontBase--QdLsd ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k"},o.createElement("h1",null,a??u.name)),c),o.createElement(cS,{resource:e,viewContext:m}),!!r&&o.createElement("div",{className:"basic_resource_header--description--718b9 text--fontPos13--xW8hS text--_fontBase--QdLsd"},r),o.createElement("div",{className:cI},t,s,n,i,l))}function mr({resource:e,hasScrolled:t}){let a=(0,ow.qD)(e),r=e.community_publishers.accepted;return t?o.createElement("div",{className:"basic_resource_header--mobileResourcePageHeaderSticky--k2EHs basic_resource_header--mobileResourcePageHeader--EgM2G"},o.createElement("div",{className:cy},o.createElement("div",{className:cN},o.createElement("h1",{className:cv},o.createElement("span",{className:cb},a.name))),o.createElement(d7,{resource:e}),o.createElement(mn,{resource:e}))):o.createElement("div",{className:"basic_resource_header--resourcePageHeaderMobile--pJLU0 basic_resource_header--mobileResourcePageHeader--EgM2G"},o.createElement("div",{className:cy},o.createElement("div",{className:cN},o.createElement("h1",{className:cv},o.createElement("span",{className:cb},a.name)),o.createElement("div",{className:"basic_resource_header--mobileAttributionLine--SVYDo basic_resource_header--attributionLine--3-ssm text--fontPos13--xW8hS text--_fontBase--QdLsd","data-testid":"mobile-header-attribution"},o.createElement(sX,{resource:e}),o.createElement(cS,{resource:e}),o.createElement("div",{className:"basic_resource_header--attributionCreator--rV-9C"},o.createElement(sA.L,{publishers:r}),o.createElement(sA.I,{publishers:r})))),o.createElement(d7,{resource:e}),o.createElement(mn,{resource:e})))}function mn({resource:e}){let[t,a]=(0,C.fp)(sV);o.useEffect(()=>{let e=()=>{let e=document.getElementById(sU.$O.CommentsView);if(e){let t=e.getBoundingClientRect().top;(0,ow._m)(t,window.innerHeight,window.scrollY)?a(sU.$O.CommentsView):a(sU.$O.DescriptionView)}};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[a]);let r=(e,t)=>{if(e.preventDefault(),t===sU.$O.DescriptionView){window.scrollTo({top:0,behavior:"smooth"});return}let a=document.getElementById(t);if(a){let e=sU.bK,t=a.getBoundingClientRect().top+window.scrollY+e;window.scrollTo({top:t,behavior:"smooth"})}};return o.createElement("div",{className:"basic_resource_header--anchorLinkContainer--UaF3S"},o.createElement("button",{onClick:e=>r(e,sU.$O.DescriptionView)},o.createElement("div",{className:O()(cw,{[cT]:t===sU.$O.DescriptionView})},(0,A.t)("community.resource_page.about"))),(0,nX.e5)(e)&&o.createElement("button",{onClick:e=>r(e,sU.$O.CommentsView)},o.createElement("div",{className:O()(cw,{[cT]:t===sU.$O.CommentsView})},(0,A.tx)("community.resource_page.comments",{numComments:o.createElement("span",{className:O()(dq,{[dJ]:t===sU.$O.CommentsView})},e.comment_count)}))))}var mi=a(61714),ml=a(547733),mo=a(183846);function ms({button:e,subtext:t}){return o.createElement("div",{className:mo.uu},e,t&&o.createElement("div",{className:mo.BE},t))}function mc({resource:e}){let t=(0,oI.PM)(e),a=(0,sj.I)(e);if((0,sG._K)(e,a))return o.createElement(d9.I,{resource:e,context:oI.aL.DETAIL});if((0,ow.Qo)(e))return(0,ow.cX)(e)?o.createElement(d6,{resource:e}):o.createElement(cR,{hubFile:e});{let a=t?o.createElement(ml.Cg,{resource:e,showCaret:!1}):(0,oI.zF)(e)?o.createElement(ml.Gb,null):void 0;return o.createElement(ms,{button:o.createElement(mi.d,{resource:e,context:oI.aL.DETAIL}),subtext:a})}}var md=a(560945);let mm=(0,nN.eU)(!1);var mu=a(491679);function m_(e){return`${(0,ow.qD)(e).name} preview`}var mp=a(302510);function mg({thumbnailUrls:e,resource:t,size:a,tileAspectRatio:r="16 / 9"}){let n=0;e.length>12&&(n=e.length-12,e=e.slice(0,12));let i=o.useMemo(()=>{let[t,a]=e.length>8?[4,3]:e.length>4?[4,2]:[2,2];return r9.sx.add({gridTemplateColumns:`repeat(${t}, 1fr)`,gridTemplateRows:`repeat(${a}, 1fr)`}).$},[e.length]),l=o.useMemo(()=>{switch(a){case"thumbnail":return"grid_view--carouselGridViewThumbnail--VQ4Aa grid_view--carouselGridView--kG9U6";case"hero":return"grid_view--carouselGridViewHero--fJM2n grid_view--carouselGridView--kG9U6 text--fontNeg20--h0WuY text--_fontBase--QdLsd text--_negText--j9g-L";case"fullscreen_hero":return"grid_view--carouselGridViewFullscreenHero--wJryP grid_view--carouselGridView--kG9U6 text--fontNeg40--v1X92 text--_fontBase--QdLsd text--_negText--j9g-L";default:(0,x.xb)(a)}},[a]),s=o.useMemo(()=>r9.sx.if(!!r,{aspectRatio:r}).$,[r]);return o.createElement("div",{className:O()("grid_view--carouselGridViewContainer--LoaLV",{[mp.mH]:"fullscreen_hero"===a})},o.createElement("div",{"aria-label":m_(t),style:i,className:l},e.map((e,t,r)=>o.createElement("div",{key:e,style:s,"aria-hidden":!0,className:"grid_view--carouselGridImageContainer--e2OUP"},o.createElement("img",{src:e,draggable:!1}),"thumbnail"!==a&&t===r.length-1&&n>0&&o.createElement("div",{className:"grid_view--overflowThumbnailCount--2YPuu"},o.createElement("span",null,`+${n}`))))))}let mf="hero--lightboxButton--5mIOs";function mE({children:e,showLetterbox:t=!1}){let a=o.useRef(null),[r,n]=(0,C.fp)(mm);return o.useEffect(()=>{let e=a.current;if(e){let t=e=>{"Escape"===e.key&&n(!1)};return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}}},[n]),o.createElement("div",{ref:a,className:t?"hero--heroImageWrapperWithLetterbox--68M0e hero--heroImageWrapper--Tr0mE":"hero--heroImageWrapper--Tr0mE",onClick:()=>n(!0),role:"button",tabIndex:-1},o.createElement("div",{className:"hero--heroImage--fwiPW"},e),o.createElement("div",{className:"hero--heroImageFullScreenIcon--Mn7mU"},o.createElement(Q.In,{icon:"full-screen-enter-32",fill:"menu"})))}function mh({children:e,is16to9AspectRatio:t}){let[a,r]=(0,C.fp)(mm),n=e=>{e.stopPropagation(),r(!1)};return a?o.createElement("div",{className:"hero--modalBackground--zjoAE",onClick:n,role:"button",tabIndex:-1},o.createElement("div",{className:t?"hero--rdpImageCloseupModal--7mxym":"hero--rdpImageCloseupModal2to1AspectRatio---JVP8 hero--rdpImageCloseupModal--7mxym",onClick:n,role:"button",tabIndex:-1},e,o.createElement("div",{className:"hero--heroImageExitFullScreenIcon--OjJSh hero--heroImageFullScreenIcon--Mn7mU"},o.createElement(Q.In,{icon:"full-screen-exit-32",fill:"menu"})))):null}function my({children:e,currentIndex:t,totalItems:a,onPrev:r,onNext:n,onRestart:i,imageAspectRatio:l="16 / 9",showLetterbox:s=!1}){let c=o.useRef(null),d=o.useRef(null),m=o.useMemo(()=>0===t,[t]),u=o.useMemo(()=>t===a-1,[t,a]),[_,p]=(0,C.fp)(mm),g=o.useCallback(()=>{d.current?.focus({preventScroll:!0})},[]);o.useEffect(()=>{let e=c.current;if(_&&e){g();let t=e=>{"ArrowLeft"===e.key?r():"ArrowRight"===e.key?n():"Escape"===e.key&&p(!1)};return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}}},[g,n,r,p,_]);let f=o.useCallback(e=>{e.stopPropagation(),p(!1)},[p]),E=o.useMemo(()=>r9.sx.if(!!l,{aspectRatio:l}).$,[l]);return _?o.createElement("div",{ref:c,className:"hero--lightboxContainer--c8JpB hero--modalBackground--zjoAE"},o.createElement("div",{className:"hero--lightboxTopRow---zayD"},o.createElement("button",{onClick:f,className:mf},o.createElement(Q.In,{icon:"x-32",fill:"menu"}))),o.createElement("div",{className:"hero--lightboxMediumRow---Gopf",onBlur:g},o.createElement("button",{className:mf,disabled:m,onClick:r},o.createElement(Q.In,{icon:"chevron-left-32",fill:m?"menu-disabled":"menu"})),o.createElement("div",{ref:d,style:E,className:s?"hero--lightboxHeroImageWithLetterbox--0kTBx hero--lightboxHeroImage--3orhF":"hero--lightboxHeroImage--3orhF",role:"button",tabIndex:0,onClick:u?i:n},s?o.createElement("div",{className:"hero--lightboxHeroImageWithLetterboxInnerContainer--buJug"},e):e),o.createElement("button",{className:mf,disabled:u,onClick:n},o.createElement(Q.In,{icon:"chevron-right-32",fill:u?"menu-disabled":"menu"}))),o.createElement("div",{className:"hero--lightboxBottomRow--wnrYI"},o.createElement("div",{className:"hero--lightboxControlsContainer--9MZdh"},o.createElement("button",{className:"hero--lightboxControlsRestartButton--mVitF hero--lightboxControlsButton--Ve597 text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",disabled:m,onClick:i},o.createElement(Q.In,{icon:"return-32",fill:m?"menu-disabled":"menu"}),(0,A.tx)("community.resource_page.media_carousel.restart")),o.createElement("button",{className:"hero--lightboxControlsButton--Ve597",disabled:m,onClick:r},o.createElement(Q.In,{icon:"navigate-back-32",fill:m?"menu-disabled":"menu"})),o.createElement("span",{className:"hero--lightboxProgressIndicator--w-JVT text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L"},`${t+1} / ${a}`),o.createElement("button",{className:"hero--lightboxControlsButtonMirrored--8Ljmt hero--lightboxControlsButton--Ve597",disabled:u,onClick:n},o.createElement(Q.In,{icon:"navigate-back-32",fill:u?"menu-disabled":"menu"}))))):null}var mv=a(197979),mb=a(582493);let mw=o.forwardRef(({index:e,selectedIndex:t,onClick:a,children:r},n)=>o.createElement("div",{ref:n,role:"button",tabIndex:e,onClick:a,className:e===t?"thumbnail--carouselThumbnailSelected--htIXX thumbnail--carouselThumbnailBase--WdkqA":"thumbnail--carouselThumbnail--Gr5mS thumbnail--carouselThumbnailBase--WdkqA"},r));function mT({thumbnailUrl:e,resizedThumbnailUrls:t,resource:a,isVideo:r}){return o.createElement(o.Fragment,null,o.createElement(mv.F5,{thumbnailUrl:e,resourceId:a.id,altText:m_(a),thumbnailContext:o6.O7.DETAIL,resizedThumbnailUrls:t}),r&&o.createElement("div",{className:"thumbnail--carouselThumbnailOverlayForVideo--pfKHV"},o.createElement(mb.p,null)))}function mI({resource:e,is16to9AspectRatio:t}){let a=o.useRef(null),r=o.useRef(null),[n,i]=o.useState(!1),[l,s]=o.useState(0),[c,d]=o.useState(!1),[m,u]=o.useState(!0),_=o.useMemo(()=>(0,ow.N6)(e),[e]),p=function(e,t,a=!1){let r=(0,mu.fq)((0,ow.cX)(e)?e.library_key:void 0);return o.useMemo(()=>{let e=void 0===r,n=e?t:r.length;if(n<=1)return[];let i=a?function(e){let t=e,a=[];for(;t>16;)a.push(12),t-=12;return t>12&&(a.push(8),t-=8),t>0&&a.push(t),a}(n):[n],l=[];return i.reduce((t,a)=>{let n=e?[]:r.slice(t,t+a);return l.push({type:"grid",thumbnailUrls:n}),t+a},0),l},[a,t,r])}(e,_.length),g=o.useMemo(()=>[...p,..._],[_,p]),f=o.useRef([]);o.useEffect(()=>{s(p.length)},[p.length,e]);let E=o.useCallback(()=>{a.current&&i(a.current.scrollWidth>a.current.clientWidth)},[]);o.useEffect(E,[E,g.length]),(0,md.w)(a,E);let h=o.useCallback(()=>{let e=a.current,t=f.current[g.length-1];if(e&&t){let a=e.getBoundingClientRect(),r=t.getBoundingClientRect();d(e.scrollLeft>0),u(Math.abs(r.right-a.right)>1)}},[g.length]);o.useEffect(()=>{let e=a.current,t=f.current[l];if(e&&t){let a=e.getBoundingClientRect(),r=t.getBoundingClientRect(),n=(()=>{let e=parseInt(mp.lp)/2+parseInt(mp.v$),t=0===l,n=a.left+(t?0:e);if(r.left<n)return r.left-n;let i=l===g.length-1,o=a.right-(i?0:e);return r.right>o?r.right-o:0})();0!==n&&e.scrollBy({left:n,behavior:"smooth"})}},[g.length,l]);let y=o.useCallback(()=>{s(e=>Math.max(0,e-1))},[]),v=o.useCallback(()=>{s(e=>Math.min(g.length-1,e+1))},[g.length]),b=o.useCallback(()=>{s(0)},[]),[w,T]=(0,C.fp)(mm);o.useEffect(()=>{let e=r.current;if(!w&&e){f.current[l]?.focus({preventScroll:!0});let t=e=>{let t=!0;"ArrowLeft"===e.key?y():"ArrowRight"===e.key?v():"Enter"===e.key?T(!0):t=!1,t&&e.preventDefault()};return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}}},[v,y,l,T,w]);let I=(0,s2.J)(),N=(0,ow.z$)(e),S=(0,ow.cX)(e);if(N!==cG.Z4.CURATED_IMAGE||0===g.length)return o.createElement(mN,{resource:e,heroType:N,is16to9AspectRatio:t});let k=l<g.length?g[l]:g[0],A=Object.keys(g).length>1;return o.createElement(o.Fragment,null,function(a){switch(a.type){case"image":let[r,n]=(0,mv.P)(a);return o.createElement(o.Fragment,null,o.createElement(mE,{showLetterbox:S},o.createElement(mv.F5,{thumbnailUrl:r,resourceId:e.id,altText:m_(e),thumbnailContext:o6.O7.DETAIL,resizedThumbnailUrls:n,resourceHeroType:N})),S?o.createElement(my,{currentIndex:l,totalItems:g.length,onPrev:y,onNext:v,onRestart:b,showLetterbox:S},o.createElement(mv.ru,{thumbnailUrl:r,altText:m_(e),resourceId:e.id})):o.createElement(mh,{is16to9AspectRatio:t},o.createElement(mv.ru,{thumbnailUrl:r,altText:m_(e),resourceId:e.id})));case"video":return o.createElement("div",{className:"hero--heroVideo--XAdfp hero--heroImage--fwiPW"},o.createElement(mb.A,{src:(0,mv.Mf)(a,e),fallbackSrc:a.url,useHLS:!0,autoPlay:!0,muted:!0,onEnded:()=>{(0,V.sx)("rdp_video_ended",{community_resource_id:e.id,resouce_type:(0,ow.Vm)(e),searchSessionId:I})}}));case"grid":return o.createElement(o.Fragment,null,o.createElement(mE,null,o.createElement(mg,{thumbnailUrls:a.thumbnailUrls,resource:e,size:"hero"})),S?o.createElement(my,{currentIndex:l,totalItems:g.length,onPrev:y,onNext:v,onRestart:b},o.createElement(mg,{thumbnailUrls:a.thumbnailUrls,resource:e,size:"fullscreen_hero"})):o.createElement(mh,{is16to9AspectRatio:t},o.createElement(mg,{thumbnailUrls:a.thumbnailUrls,resource:e,size:"fullscreen_hero"})));default:(0,x.xb)(a)}}(k),A&&o.createElement("div",{ref:r,className:mp.xW},o.createElement("div",{ref:a,className:n?mp.UY:mp.Ec,onScroll:h},Object.values(g).map(function(t,a){let r=null;if("image"===t.type||"video"===t.type){let[a,n]=(0,mv.P)(t);r=o.createElement(mT,{thumbnailUrl:a,resizedThumbnailUrls:n,resource:e,isVideo:"video"===t.type})}else"grid"===t.type?r=o.createElement(mg,{thumbnailUrls:t.thumbnailUrls,resource:e,size:"thumbnail"}):(0,x.xb)(t);return o.createElement(mw,{ref:e=>{f.current[a]=e},key:a,index:a,selectedIndex:l,onClick:()=>{s(a),(0,V.sx)("CTA Clicked",{name:"Resource Carousel Thumbnail Clicked",community_resource_id:e.id,index:a,media_type:t.type,resouce_type:(0,ow.Vm)(e),searchSessionId:I})}},r)})),n&&c&&o.createElement(o.Fragment,null,o.createElement("div",{className:mp.sp}),o.createElement("div",{className:mp.T9,role:"button",tabIndex:0,onClick:y},o.createElement(Q.In,{icon:"chevron-left-32"}))),n&&m&&o.createElement(o.Fragment,null,o.createElement("div",{className:mp.jp}),o.createElement("div",{className:mp.aT,role:"button",tabIndex:0,onClick:v},o.createElement(Q.In,{icon:"chevron-right-32"})))))}function mN({resource:e,heroType:t,is16to9AspectRatio:a}){if(t===cG.Z4.THUMBNAIL){let r=e.thumbnail_url??void 0,n=(0,oI.U)(e)?e.resized_thumbnail_urls:void 0;return o.createElement(o.Fragment,null,o.createElement(mE,null,o.createElement(mv.F5,{thumbnailUrl:r,resourceId:e.id,altText:m_(e),thumbnailContext:o6.O7.DETAIL,resizedThumbnailUrls:n,resourceHeroType:t})),o.createElement(mh,{is16to9AspectRatio:a},o.createElement(mv.ru,{thumbnailUrl:r,altText:m_(e),resourceId:e.id})))}return o.createElement("div",{className:mp.Wf},o.createElement(c0,{enableEmbedOnSmallScreens:!0,resource:e}))}var mx=a(335666);function mC({title:e,description:t,children:a}){let r=(0,oT.kk)();return o.createElement("section",{className:O()("collection_section--section--RLij0",{"collection_section--breadcrumbsPadding--JYTAp":r()})},o.createElement("div",{className:"collection_section--title--tNWji text--fontPos24--YppUD text--_fontBase--QdLsd"},e),!!t&&o.createElement("div",{className:"collection_section--description--UH-JN text--fontPos16--oMC-G text--_fontBase--QdLsd"},t),o.createElement("div",{className:"collection_section--content--rIF8z"},a))}var mS=a(375360);let mk="two_column_resource_page--leftSideRedesign--W3m0M",mA="two_column_resource_page--rightSideRedesignCarousel--d7GTz two_column_resource_page--rightSideRedesign--KsU3v",mR="two_column_resource_page--rightSideRedesignFallbackThumbnail--Ydb1e two_column_resource_page--rightSideRedesign--KsU3v";function mL({title:e,resource:t,meta:a,showCTA:r=!0}){let n=(0,st.N)(`(max-width: ${cj.YW}px)`),i=(0,mx.C)(t),l=(0,ow.z$)(t),s=oW(t,a),c=r?o.createElement(mc,{resource:t}):null,d=(0,ow._t)({resource:t}),m=o.createElement(eg.o3,{className:"hero_section--learnMore--a7m3e text--fontPos13--xW8hS text--_fontBase--QdLsd",to:d,trackingEventName:"community_collections",trackingProperties:{href:d},target:"_blank"},(0,A.tx)("community.collections.learn_more"));return o.createElement(mC,{title:e},n?o.createElement("div",null,o.createElement(mS.rS,{resource:t,title:s?.title,description:s?.description})):o.createElement("div",{className:"hero_section--section--xyS5J"},o.createElement(n_.Y,{width:"100%",direction:"horizontal",height:"hug-contents",verticalAlignItems:"center",horizontalAlignItems:"center",spacing:"auto"},o.createElement("div",{className:mk},o.createElement(ma,{resource:t,CTAButton:c,learnMore:m,title:s?.title,description:s?.description,openInNewTab:!0})),o.createElement("div",{className:l!==cG.Z4.THUMBNAIL||i?mA:mR},o.createElement(mI,{resource:t,is16to9AspectRatio:i})))))}var mD=a(407844),mP=a(164795),mF=a(967063);function mO(){let e={id:mP.om.communityResourceInReviewBanner,bannerType:mP.x1.WARN,icon:mF.A,mainText:(0,A.t)("community.collections.unpublished_banner.this_page_is_not_published"),description:(0,A.t)("community.collections.unpublished_banner.only_admins_can_see_this_page"),dismissible:!1,positionStatic:!0};return o.createElement(mD.C,{content:e,onDismiss:f.lQ})}let mM=a(501708).i,mB="resource_bundle_section--resources--h-L7L";function mU({title:e,description:t,resources:a,meta:r}){let n=a.filter(e=>!!e);return n.length?o.createElement(mC,{title:e,description:t},o.createElement("div",{className:mB},n.map(e=>{let t=oW(e,r);return o.createElement(mS.rS,{resource:e,title:t?.title,description:t?.description,key:e.id})}))):null}function mV({title:e,description:t,meta:a,preview:r=!1}){return o.createElement(mC,{title:e,description:t},o.createElement("div",{className:mB},r?"Preview not supported":(a.figjam_ai??[]).map(e=>o.createElement(mM,{title:e.title,description:e?.description??"",imageUrl:e.imageUrl,prompt:e.prompt,promptCategory:e.category,key:`${e.title}-${e.prompt}`}))))}function mH(){let{urlSlug:e}=(0,od.g)(),[{data:t,status:a}]=(0,g.IT)(o5({urlSlug:e,isTemplateUrl:function(e){try{return/^\/community\/templates\/.+$/.test(new URL(e).pathname)}catch{return!1}}(m.Ay.location.href)}));return((0,o.useLayoutEffect)(()=>{let t=oj[e];(0,sD.N)(t,so.LJ)&&m.Ay.replace(new ss.IE({categorySlug:t}).href);let a=oG[e];a&&m.Ay.replace(`/community/collections/${a}`)},[e]),"loading"===a)?null:t?(document.title=t.meta_title||"Collection | Figma",o.createElement(o.Fragment,null,o.createElement(mW,{collection:t}),!(0,d.y3)()&&o.createElement("div",{className:"collection_page--footerContainer--Y-BuI collection_page--pageSections--mndLy"},o.createElement(su,null)))):o.createElement(sw,null)}function mW({collection:e,preview:t=!1}){let a=(0,oT.kk)();return o.createElement(eg.fu,{name:"community_collections",properties:{urlSlug:e.url_slug,title:e.title}},!("published"===e.publishing_status&&e.latest_published_at)&&o.createElement(mO,null),o.createElement("div",{className:"collection_page--page--XgZLM"},a()?o.createElement(sL,{collection:e,preview:t}):o.createElement("section",{className:"collection_page--headerSection--qYnly"},o.createElement("div",{className:"collection_page--header--XaFVY"},o.createElement("div",{className:"collection_page--headerInfo--VzudZ"},!t&&o.createElement(sO,{pathname:m.Ay.location.pathname,overrideText:e.meta.breadcrumb_text}),o.createElement("h1",{className:"collection_page--title--gNu9m text--fontPos48Whyte--uSU-k text--_fontBaseWhyte--efAjI"},e.title),o.createElement(sR,{collection:e}),o.createElement("div",{className:"collection_page--description--xFS-k text--fontPos16--oMC-G text--_fontBase--QdLsd"},e.description)),o.createElement("div",{className:"collection_page--headerImage--gReUX"},!!e.header_img_url&&o.createElement("img",{src:e.header_img_url,alt:"collection header"})))),!!e.sections.length&&o.createElement("section",{className:a()?"collection_page--pageSectionsRedesign--CwAe3":"collection_page--pageSections--mndLy"},e.sections.map((e,a)=>e.section_type===oD.BUNDLE_SECTION&&e.resources?o.createElement(mU,{title:e.title||"",description:e.description||"",resources:e.resources,meta:e.meta,key:a}):e.section_type===oD.HERO_SECTION&&e.resource?o.createElement(mL,{title:e.title||"",resource:e.resource,meta:e.meta,showCTA:!t,key:a}):e.section_type===oD.BUNDLE_SECTION&&e.meta.figjam_ai?o.createElement(mV,{title:e.title||"",description:e.description||"",meta:e.meta,preview:t,key:a}):void 0)),!!e.faqs&&o.createElement(sB,{faqs:e.faqs})))}function mj(){let e=(0,s2.J)(),[t,a]=o.useState();return o.useEffect(()=>m.Ay.listen(()=>{a(e)}),[e]),o.useEffect(()=>{t&&!m.Ay.location.state?.searchSessionId&&m.Ay.replace(null,{...m.Ay.location.state,searchSessionId:t})},[t]),null}function mG(){return(0,o.useEffect)(()=>m.Ay.listen(e=>{"PUSH"===e&&window.scrollTo(0,0)}),[]),null}var m$=a(62589),mz=(e=>(e.COLLECTIONS="collections",e.TEMPLATES="templates",e))(mz||{});class mY extends m$.nS{constructor(e){super(e)}}mY.path="/community/:collectionType(collections|templates)/:urlSlug",mY.parseQueryString=()=>({});class mK extends m$.nS{}mK.path="/community/collections",mK.parseQueryString=()=>({});var mQ=a(417659),mX=a(697170),mq=a(211916),mJ=a(343427),mZ=a(232655);let m0="mobile_flyout_item--mobileFlyoutItem--7KYhr text--fontPos20--Bcz97 text--_fontBase--QdLsd";function m1({navItem:e,onClose:t}){let a={trackingEventName:"mobile_flyout_item_select",trackingProperties:{path:e.path},...e.trackingProps};return o.createElement("div",{className:m0},o.createElement(eg.o3,{key:e.key,to:e.path,onClick:a=>{e.onClick&&e.onClick(a),t()},className:O()(k.cx.colorText.block.$,e.className??""),...a},e.text))}function m2({isExpanded:e,toggleExpanded:t,navItemGroup:a,onClose:r}){let n=o.useRef(null);return o.useEffect(()=>{if(e&&n.current?.style.maxHeight==="0px"){let e=0;n.current.childNodes.forEach(t=>{t instanceof HTMLElement&&(e+=t.offsetHeight)}),n.current.style.maxHeight=`${e}px`}else!e&&n.current&&(n.current.style.maxHeight="0px")},[e]),o.createElement("div",{className:m0},o.createElement("button",{onClick:t,className:k.cx.flex.justifyStart.alignLeft.colorText.itemsCenter.$},a.text,o.createElement(t_.B,{svg:rL.A,className:O()("mobile_flyout_item_group--mobileFlyoutItemGroupCaret--lbbaU",{"mobile_flyout_item_group--mobileFlyoutItemGroupCaretExpanded--P269f":e}),svgClassName:k.cx.w8.h8.$,style:{fill:(0,mZ.TD)("default")}})),o.createElement("div",{ref:n,className:"mobile_flyout_item_group--mobileFlyoutSubItems--Ze8c7"},a.children.map(e=>o.createElement(m1,{key:e.key,navItem:e,onClose:r}))))}var m8=a(234269),m4=a(137466);function m3({navItems:e,onClose:t,trackingContext:a}){let[r,n]=o.useState(!1);o.useEffect(()=>{let e=document.body.style.overflow;return document.body.style.overflow="hidden",n(!0),()=>{document.body.style.overflow=e}},[]);let[i,l]=o.useState(null),s={name:"mobile_flyout",...a};return o.createElement(o.Fragment,null,o.createElement("div",{className:"mobile_flyout--mobileFlyoutContainer--Z9i-T",onClick:e=>{e.stopPropagation(),t()}},o.createElement("div",{className:O()("mobile_flyout--mobileFlyout--YX14z",{"mobile_flyout--mobileFlyoutMounted--RUFmS":r}),onClick:e=>e.stopPropagation()},o.createElement(eg.fu,{...s},o.createElement("div",{className:k.cx.flex.justifyBetween.itemsCenter.$},o.createElement(t_.B,{svg:m8.A,className:"mobile_flyout--communitySvgContainer--R6Qs9",style:{fill:(0,mZ.TD)("default")},svgClassName:k.cx.w32.h32.$,onClick:e=>{(0,dR.qG)("/community",e,!1),t()}}),o.createElement(t_.B,{svg:m4.A,svgWidth:"18px",onClick:t,style:{fill:(0,mZ.TD)("default")}})),o.createElement("div",{className:k.cx.flex.flexWrap.flexColumn.gap2.pt32.$},e.map(e=>"children"in e?o.createElement(m2,{key:e.key,isExpanded:i===e.key,toggleExpanded:()=>l(i===e.key?null:e.key),navItemGroup:e,onClose:t}):o.createElement(m1,{key:e.key,navItem:e,onClose:t})))))))}function m5({showNewIcon:e}){let t=function(){let e=c4();return(0,o.useMemo)(()=>[e.libraries,e.designTemplates,e.designTools,e.visualAssets,e.whiteboarding,e.icons,e.development,e.education],[e])}(),[a,r]=o.useState(!1),n=t.reduce((e,{category:t,dropdownCategories:a})=>{if(!("urlSlug"in t))return e;if(a&&a.length>0){let r=a.map(e=>({key:e.urlSlug,text:e.text,path:new ss.IE({categorySlug:e.urlSlug}).href,trackingProps:{trackingEventName:"community_mobile_nav_category_clicked",trackingProperties:{slug:e.urlSlug}}}));return r.push({key:t.urlSlug,text:t.allText?t.allText:(0,A.t)("categories.all"),path:new ss.IE({categorySlug:t.urlSlug}).href,className:k.cx.underline.$,trackingProps:{trackingEventName:"community_mobile_nav_category_clicked",trackingProperties:{slug:t.urlSlug}}}),[...e,{key:t.urlSlug,text:t.text,children:r}]}return[...e,{key:t.urlSlug,text:t.text,path:new ss.IE({categorySlug:t.urlSlug}).href}]},[{key:"home",text:(0,A.t)("community.view_bar.home"),path:"/community"}]);return o.createElement("div",{"data-testid":"flyout-category-selector",className:k.cx.p12.flexShrink0.$},a&&o.createElement(m3,{navItems:n,onClose:()=>{r(!1)},trackingContext:{name:"community_mobile_nav_flyout"}}),o.createElement("button",{className:k.cx.flex.gap6.flexNowrap.fontMedium.colorText.itemsCenter.$,onClick:()=>r(!0)},e?o.createElement(mJ.Z,null):o.createElement(Q.In,{icon:"workspace-16"}),o.createElement("span",{className:k.cx.font13.$},(0,A.tx)("community.view_bar.browse"))))}let m9="nav_dropdown_card--linearGradientBackground--lJEst",m6="nav_dropdown_card--animatedImage--K1GI2",m7="nav_dropdown_card--icon--i86uY",ue="nav_dropdown_card--card--byB-G",ut="nav_dropdown_card--smallCard---QRv1",ua=e=>e.backgroundDotted&&e.backgroundFading?m9:e.backgroundDotted?"nav_dropdown_card--dottedBackground--JKonD":e.backgroundDottedSmall?"nav_dropdown_card--dottedBackgroundSmall--SQfOI":e.backgroundFading?m9:void 0,ur={scaleOut:"nav_dropdown_card--scaleOut--qGBOE",slideLeft:"nav_dropdown_card--slideLeft--TxPHT",shuffle:"nav_dropdown_card--shuffle--1xZAE",slideUp:"nav_dropdown_card--slideUp--ihkWb",iconFan:"nav_dropdown_card--iconFan--ujwnb",cardFan:"nav_dropdown_card--cardFan--AxUDL",accordian:"nav_dropdown_card--accordian--vOvt0"};var un=(e=>(e.HALF="HALF",e.FULL="FULL",e))(un||{});function ui(e){let{cardSize:t,title:a,subtitle:r,url:n,animation:i,backgroundColor:l}=e;return o.createElement(eg.jm,{className:"nav_dropdown_card--navDropdownCard--MAs6u","data-card-size":t,trackingEventName:"community_global_nav_category_clicked",trackingProperties:{url:n},onClick:()=>m.Ay.push(n)},o.createElement("div",{className:"nav_dropdown_card--titleAndSubtitle--gq1Eu"},o.createElement("a",{className:"nav_dropdown_card--title--ytbFI text--fontPos13--xW8hS text--_fontBase--QdLsd",href:n,onClick:e=>e.preventDefault()},a),r&&o.createElement("div",{className:"nav_dropdown_card--subTitle--Z3jMj text--fontPos11--2LvXf text--_fontBase--QdLsd"},r)),o.createElement("div",{className:O()("nav_dropdown_card--imagesContainer--BXAtR",ua(e),ur[i]),style:{backgroundColor:l},"data-card-size":t},"accordian"===i&&o.createElement(o.Fragment,null,o.createElement("div",{"data-animation-index":"2",className:m6}),o.createElement("div",{"data-animation-index":"1",className:m6,style:{backgroundColor:e.middleCardColor}}),o.createElement("img",{alt:a,"data-animation-index":"0",...e.images[0],className:O()(e.images[0].className,m6)})),!!i&&"accordian"!==i&&e.images.map((e,t)=>o.createElement("img",{key:t,alt:a,"data-animation-index":t,...e,className:O()(e.className,m6)}))))}function ul(e){return({[so.LJ.visualAssets]:(0,A.t)("community.categories.visual_assets"),[so.LJ.development]:(0,A.t)("community.categories.development"),[so.LJ.accessibility]:(0,A.t)("categories.accessibility"),[so.LJ.brainstorming]:(0,A.t)("categories.brainstorming"),[so.LJ.classroomActivities]:(0,A.t)("categories.classroom_activities"),[so.LJ.designTemplates]:(0,A.t)("community.categories.design_templates"),[so.LJ.designTools]:(0,A.t)("community.categories.design_tools"),[so.LJ.desktopAppsWebsites]:(0,A.t)("categories.desktop_apps_websites"),[so.LJ.diagramming]:(0,A.t)("categories.diagramming"),[so.LJ.editingEffects]:(0,A.t)("categories.editing_effects"),[so.LJ.education]:(0,A.t)("community.categories.education"),[so.LJ.fileOrganization]:(0,A.t)("categories.file_organization"),[so.LJ.fontsTypography]:(0,A.t)("categories.fonts_typography"),[so.LJ.funGames]:(0,A.t)("categories.fun_games"),[so.LJ.icons]:(0,A.t)("community.categories.icons"),[so.LJ.illustrations]:(0,A.t)("categories.illustrations"),[so.LJ.importExport]:(0,A.t)("categories.import_export"),[so.LJ.libraries]:(0,A.t)("categories.libraries"),[so.LJ.mobileApps]:(0,A.t)("categories.mobile_apps"),[so.LJ.portfolios]:(0,A.t)("categories.portfolios"),[so.LJ.calendarTemplates]:(0,A.t)("categories.calendar_templates"),[so.LJ.presentations]:(0,A.t)("categories.presentations"),[so.LJ.prototypingAnimation]:(0,A.t)("categories.prototyping_animation"),[so.LJ.resumes]:(0,A.t)("categories.resumes"),[so.LJ.shapesColors]:(0,A.t)("categories.shapes_colors"),[so.LJ.stockPhotography]:(0,A.t)("categories.stock_photography"),[so.LJ.strategicPlanning]:(0,A.t)("categories.strategic_planning"),[so.LJ.teamMeetings]:(0,A.t)("categories.team_meetings"),[so.LJ.tutorials]:(0,A.t)("categories.tutorials"),[so.LJ.uiKits]:(0,A.t)("categories.ui_kits"),[so.LJ.wireframes]:(0,A.t)("categories.wireframes"),[so.LJ.whiteboarding]:(0,A.t)("community.categories.whiteboarding")})[e]}function uo({links:e}){return o.createElement("div",{className:"nav_dropdown_list--navDropdownList--WMnxk"},e.map(({route:e,textOverride:t,isBold:a})=>{let r=ul(e.params.categorySlug);return o.createElement(eg.o3,{trackingEventName:"community_global_nav_category_clicked",to:e.href,key:e.pathname,trackingProperties:{slug:e.params.categorySlug}},o.createElement("div",{className:a?"nav_dropdown_list--navDropdownListLinkBold--TAZNI nav_dropdown_list--navDropdownListLink--fjC8M text--fontPos13--xW8hS text--_fontBase--QdLsd":"nav_dropdown_list--navDropdownListLink--fjC8M text--fontPos13--xW8hS text--_fontBase--QdLsd"},t||r))}))}let us="nav_category_selector_2--navDropdownContainer--qK25n",uc="nav_category_selector_2--navDropdownCardColumn--bCxFr";function ud(){let{uikitRoute:e,wireframesRoute:t,designTemplatesRoute:a,desktopAppRoute:r,mobileAppRoute:n,portfolioRoute:i,resumeRoute:l,visualAssetsRoute:s,illustrationsRoute:c,iconsRoute:d,shapesColorsRoute:m}=(0,o.useMemo)(()=>({uikitRoute:new ss.IE({categorySlug:so.LJ.uiKits}),wireframesRoute:new ss.IE({categorySlug:so.LJ.wireframes}),designTemplatesRoute:new ss.IE({categorySlug:so.LJ.designTemplates}),desktopAppRoute:new ss.IE({categorySlug:so.LJ.desktopAppsWebsites}),mobileAppRoute:new ss.IE({categorySlug:so.LJ.mobileApps}),portfolioRoute:new ss.IE({categorySlug:so.LJ.portfolios}),resumeRoute:new ss.IE({categorySlug:so.LJ.resumes}),visualAssetsRoute:new ss.IE({categorySlug:so.LJ.visualAssets}),illustrationsRoute:new ss.IE({categorySlug:so.LJ.illustrations}),iconsRoute:new ss.IE({categorySlug:so.LJ.icons}),shapesColorsRoute:new ss.IE({categorySlug:so.LJ.shapesColors})}),[]);return o.createElement("div",{className:us},o.createElement(cW.Ay,{mediaQuery:`(min-width: ${iT.U1R})`},o.createElement(ui,{cardSize:un.FULL,title:(0,A.t)("categories.ui_kits"),subtitle:(0,A.t)("categories.navbar.ui_kits.subtitle"),url:e.href,animation:"cardFan",images:[{src:"https://static.figma.com/uploads/c9620888b341fdf8bfcb6cb53ef798b8efd27159",className:ue},{src:"https://static.figma.com/uploads/f5921b0ab0398572836ad5724607bab4431bb730",className:ue}]})),o.createElement(cW.Ay,{mediaQuery:`(min-width: ${iT.U1R})`},o.createElement(ui,{cardSize:un.FULL,title:(0,A.t)("categories.wireframes"),subtitle:(0,A.t)("categories.navbar.wireframes.subtitle"),url:t.href,animation:"cardFan",images:[{src:"https://static.figma.com/uploads/da71ee40d7bcd76b5f8857c1694056d19da681b2",className:ue},{src:"https://static.figma.com/uploads/d50b185c8aba27a30207c8d938fcd13faadf9f32",className:ue}]})),o.createElement(cW.Ay,{mediaQuery:`(max-width: ${(0,n5.jz)(iT.U1R)-1}px)`},o.createElement("div",{className:uc},o.createElement(ui,{cardSize:un.HALF,title:(0,A.t)("categories.ui_kits"),subtitle:(0,A.t)("categories.navbar.ui_kits.subtitle"),url:e.href,animation:"slideUp",images:[{src:"https://static.figma.com/uploads/c9620888b341fdf8bfcb6cb53ef798b8efd27159",className:ut}]}),o.createElement(ui,{cardSize:un.HALF,title:(0,A.t)("categories.wireframes"),subtitle:(0,A.t)("categories.navbar.wireframes.subtitle"),url:t.href,animation:"slideUp",images:[{src:"https://static.figma.com/uploads/d50b185c8aba27a30207c8d938fcd13faadf9f32",className:ut}]}))),o.createElement(uo,{links:[{route:a,isBold:!0},{route:r},{route:n},{route:i},{route:l}]}),o.createElement(uo,{links:[{route:s,textOverride:(0,A.t)("categories.assets"),isBold:!0},{route:c},{route:d},{route:m}]}))}function um(){let e=(0,ia.DP)(),{editingEffectsRoute:t,fileOrganizationRoute:a,developmentRoute:r,widgetsRoute:n,pluginsRoute:i,importExportRoute:l,accessibilityRoute:s,prototypingAnimationRoute:c}=(0,o.useMemo)(()=>({editingEffectsRoute:new ss.IE({categorySlug:so.LJ.editingEffects},{resource_type:"plugins"}),fileOrganizationRoute:new ss.IE({categorySlug:so.LJ.fileOrganization},{resource_type:"plugins"}),developmentRoute:new ss.IE({categorySlug:so.LJ.development},{resource_type:"plugins"}),widgetsRoute:new ss.IE({categorySlug:so.LJ.whiteboarding},{resource_type:"widgets"}),pluginsRoute:new ss.IE({categorySlug:so.LJ.designTools},{resource_type:"plugins"}),importExportRoute:new ss.IE({categorySlug:so.LJ.importExport},{resource_type:"plugins"}),accessibilityRoute:new ss.IE({categorySlug:so.LJ.accessibility},{resource_type:"plugins"}),prototypingAnimationRoute:new ss.IE({categorySlug:so.LJ.prototypingAnimation},{resource_type:"plugins"})}),[]);return o.createElement("div",{className:us},o.createElement(cW.Ay,{mediaQuery:`(min-width: ${iT.U1R})`},o.createElement(ui,{cardSize:un.FULL,title:(0,A.t)("categories.editing_effects"),subtitle:(0,A.t)("categories.navbar.editing_effects.subtitle"),url:t.href,animation:"slideLeft",images:[{src:"dark"===e?"https://static.figma.com/uploads/c55e977611400609a084e5620d40edc6c50a9a1b":"https://static.figma.com/uploads/5c737368bdd000ee52eb78e6424e14baeded37fb",className:ue,style:{boxShadow:"none"}}]})),o.createElement("div",{className:uc},o.createElement(ui,{cardSize:un.HALF,title:(0,A.t)("categories.file_organization"),subtitle:(0,A.t)("categories.navbar.file_organization.subtitle"),url:a.href,animation:"scaleOut",images:[{src:"https://static.figma.com/uploads/ea10da5555080d6f61eceb6403aa7c1cef613347",className:m7}]}),o.createElement(ui,{cardSize:un.HALF,title:(0,A.t)("categories.development"),subtitle:(0,A.t)("categories.navbar.development.subtitle"),url:r.href,animation:"iconFan",images:[{src:"https://static.figma.com/uploads/33deabb795dc9e08a039e2f0994d68dfb5770cbc",className:m7},{src:"https://static.figma.com/uploads/48bc4dd034de8b31df987fa89dbf6a1faa65c194",className:m7}]})),o.createElement(cW.Ay,{mediaQuery:`(min-width: ${iT.U1R})`},o.createElement(ui,{cardSize:un.FULL,title:(0,A.t)("categories.widgets"),subtitle:(0,A.t)("categories.navbar.widgets.subtitle"),url:n.href,animation:"shuffle",images:[{src:"https://static.figma.com/uploads/b1db3193a01e80c6c6875e569a65db5785d85903"},{src:"https://static.figma.com/uploads/859671379f19079b85b3611c4934611a1c915174"}],backgroundDotted:!0,backgroundFading:!0})),o.createElement(cW.Ay,{mediaQuery:`(max-width: ${(0,n5.jz)(iT.U1R)-1}px)`},o.createElement("div",{className:uc},o.createElement(ui,{cardSize:un.HALF,title:(0,A.t)("categories.editing_effects"),subtitle:(0,A.t)("categories.navbar.editing_effects.subtitle"),url:t.href,animation:"iconFan",images:[{src:"https://static.figma.com/uploads/9fed7cff708002c2773ec818595f3c9e6cdd86e6",className:m7},{src:"https://static.figma.com/uploads/d32402204d96164f250d67fea5576b7175b3b663",className:m7}]}),o.createElement(ui,{cardSize:un.HALF,title:(0,A.t)("categories.widgets"),subtitle:(0,A.t)("categories.navbar.widgets.subtitle"),url:n.href,animation:"scaleOut",images:[{src:"https://static.figma.com/uploads/b1db3193a01e80c6c6875e569a65db5785d85903",style:{width:"64px"}}],backgroundDottedSmall:!0}))),o.createElement(uo,{links:[{route:i,textOverride:(0,A.t)("categories.more_plugins"),isBold:!0},{route:l},{route:s},{route:c}]}))}var uu=a(357611);function u_(){let e=new ss.IE({categorySlug:so.LJ.presentations},{editor_type:uu.k.Editors.SLIDES}),[t,a]="staging"===(0,p.Ay)().cluster_name?[{route:new c3.ax({resourceId:"1380690018201193525",apiResourceType:c3.Uo.FILE}),text:(0,A.t)("categories.presentations.pitch_deck"),subText:(0,A.t)("categories.presentations.pitch_deck.description")},{route:new c3.ax({resourceId:"1380614040001429551",apiResourceType:c3.Uo.FILE}),text:(0,A.t)("categories.presentations.product_roadmap"),subText:(0,A.t)("categories.presentations.product_roadmap.description")},{route:new c3.ax({resourceId:"1380608789812079661",apiResourceType:c3.Uo.FILE}),text:(0,A.t)("categories.presentations.research_readout")},{route:new c3.ax({resourceId:"1380608691855352876",apiResourceType:c3.Uo.FILE}),text:(0,A.t)("categories.presentations.all_hands_meeting")},{route:new c3.ax({resourceId:"1380280625154305056",apiResourceType:c3.Uo.FILE}),text:(0,A.t)("categories.presentations.design_review")}]:"prod"===(0,p.Ay)().cluster_name?[{route:new c3.ax({resourceId:"1382483546106051977",apiResourceType:c3.Uo.FILE}),text:(0,A.t)("categories.presentations.pitch_deck"),subText:(0,A.t)("categories.presentations.pitch_deck.description")},{route:new c3.ax({resourceId:"1382445842871959915",apiResourceType:c3.Uo.FILE}),text:(0,A.t)("categories.presentations.product_roadmap"),subText:(0,A.t)("categories.presentations.product_roadmap.description")},{route:new c3.ax({resourceId:"1382481559228932486",apiResourceType:c3.Uo.FILE}),text:(0,A.t)("categories.presentations.research_readout")},{route:new c3.ax({resourceId:"1382859851486347871",apiResourceType:c3.Uo.FILE}),text:(0,A.t)("categories.presentations.all_hands_meeting")},{route:new c3.ax({resourceId:"1383475610293894214",apiResourceType:c3.Uo.FILE}),text:(0,A.t)("categories.presentations.design_review")}]:"local"===(0,p.Ay)().cluster_name?[{route:new ss.IE({categorySlug:so.LJ.uiKits}),text:(0,A.t)("categories.presentations.pitch_deck"),subText:(0,A.t)("categories.presentations.pitch_deck.description")},{route:new ss.IE({categorySlug:so.LJ.uiKits}),text:(0,A.t)("categories.presentations.product_roadmap"),subText:(0,A.t)("categories.presentations.product_roadmap.description")},{route:new ss.IE({categorySlug:so.LJ.uiKits}),text:(0,A.t)("categories.ui_kits")},{route:new ss.IE({categorySlug:so.LJ.uiKits}),text:(0,A.t)("categories.ui_kits")},{route:new ss.IE({categorySlug:so.LJ.uiKits}),text:(0,A.t)("categories.ui_kits")}]:[];return o.createElement("div",{className:us},o.createElement(ui,{cardSize:un.FULL,title:t.text,subtitle:t.subText,url:t.route.href,animation:"accordian",images:[{src:"https://static.figma.com/uploads/b88b1be49cdff971481ddb424741db908d32e124"}],middleCardColor:"#FFFAD0"}),o.createElement(ui,{cardSize:un.FULL,title:a.text,subtitle:a.subText,url:a.route.href,animation:"accordian",images:[{src:"https://static.figma.com/uploads/0386cedef8498e1adb43cd3d338558dba27e0961"}],middleCardColor:"#F5F0EC"}),o.createElement(ui,{cardSize:un.FULL,title:(0,A.t)("categories.more_presentations"),subtitle:(0,A.t)("categories.more_presentations.subheader"),url:e.href,animation:"cardFan",images:[{src:"https://static.figma.com/uploads/c798a639e2b774985f1fcc4677d056b62e9d070d",className:ue,style:{borderRadius:"4px"}},{src:"https://static.figma.com/uploads/550755dd0003cb7431de9233c72a37f7569ecad9",className:ue,style:{borderRadius:"4px"}}]}))}function up(){let{brainstormingRoute:e,diagrammingRoute:t,funGamesRoute:a,teamMeetingsRoute:r,whiteboardingRoute:n,strategicPlanningRoute:i}=(0,o.useMemo)(()=>({brainstormingRoute:new ss.IE({categorySlug:so.LJ.brainstorming}),diagrammingRoute:new ss.IE({categorySlug:so.LJ.diagramming}),funGamesRoute:new ss.IE({categorySlug:so.LJ.funGames}),teamMeetingsRoute:new ss.IE({categorySlug:so.LJ.teamMeetings}),whiteboardingRoute:new ss.IE({categorySlug:so.LJ.whiteboarding}),strategicPlanningRoute:new ss.IE({categorySlug:so.LJ.strategicPlanning})}),[]);return o.createElement("div",{className:us},o.createElement(cW.Ay,{mediaQuery:`(min-width: ${iT.U1R})`},o.createElement(ui,{cardSize:un.FULL,title:(0,A.t)("categories.brainstorming"),subtitle:(0,A.t)("categories.navbar.brainstorming.subtitle"),url:e.href,animation:"cardFan",images:[{src:"https://static.figma.com/uploads/60a2ac68e6705460d12ac34906f51091a7873a9c",className:ue},{src:"https://static.figma.com/uploads/8c15440f329bf3dc8940ad1d2267c4a67e592964",className:ue}]})),o.createElement("div",{className:uc},o.createElement(ui,{cardSize:un.HALF,title:(0,A.t)("categories.diagramming"),subtitle:(0,A.t)("categories.navbar.diagramming.subtitle"),url:t.href,animation:"slideUp",images:[{src:"https://static.figma.com/uploads/881b987a3b8af1a1ee08a8316f7688e1bf34376c",className:ut}],backgroundDottedSmall:!0}),o.createElement(ui,{cardSize:un.HALF,title:(0,A.t)("categories.fun_games"),subtitle:(0,A.t)("categories.navbar.fun_games.subtitle"),url:a.href,animation:"slideUp",images:[{src:"https://static.figma.com/uploads/7b72cc0729e30a7918fceeb4b4b3a86b4a900e18",className:ut}],backgroundColor:"#FFE9F2"})),o.createElement(cW.Ay,{mediaQuery:`(min-width: ${iT.U1R})`},o.createElement(ui,{cardSize:un.FULL,title:(0,A.t)("categories.team_meetings"),subtitle:(0,A.t)("categories.navbar.team_meetings.subtitle"),url:r.href,animation:"cardFan",images:[{src:"https://static.figma.com/uploads/24ec653794817747706ab7225c4c200e599fc7f8",className:ue},{src:"https://static.figma.com/uploads/fcbfaf7de5395838863bf7d8dd3dc5805bb509d6",className:ue}]})),o.createElement(cW.Ay,{mediaQuery:`(max-width: ${(0,n5.jz)(iT.U1R)-1}px)`},o.createElement("div",{className:uc},o.createElement(ui,{cardSize:un.HALF,title:(0,A.t)("categories.brainstorming"),subtitle:(0,A.t)("categories.navbar.brainstorming.subtitle"),url:e.href,animation:"slideUp",images:[{src:"https://static.figma.com/uploads/8c15440f329bf3dc8940ad1d2267c4a67e592964",className:ut}]}),o.createElement(ui,{cardSize:un.HALF,title:(0,A.t)("categories.team_meetings"),subtitle:(0,A.t)("categories.navbar.team_meetings.subtitle"),url:r.href,animation:"slideUp",images:[{src:"https://static.figma.com/uploads/fcbfaf7de5395838863bf7d8dd3dc5805bb509d6",className:ut}]}))),o.createElement(uo,{links:[{route:n,textOverride:(0,A.t)("categories.more_whiteboarding"),isBold:!0},{route:i}]}))}function ug(){return o.createElement("div",{"data-testid":"nav-category-selector",className:"nav_category_selector_2--categorySelector--b-k5b"},o.createElement(uf,{text:(0,A.t)("community.homepage.figma_section.header"),slug:"design_template"},o.createElement(ud,null)),o.createElement(uf,{text:(0,A.t)("categories.plugins"),slug:"plugins"},o.createElement(um,null)),o.createElement(uf,{text:(0,A.t)("categories.whiteboarding"),slug:"whiteboarding"},o.createElement(up,null)),o.createElement(uf,{text:(0,A.t)("categories.presentations"),slug:"presentations",showNewBadge:!0},o.createElement(u_,null)))}function uf({text:e,slug:t,children:a,showNewBadge:r}){let[n,i]=o.useState(!1),l=o.useRef(null);return(0,o.useLayoutEffect)(()=>{if(l.current){let e=l.current.getBoundingClientRect().width,t=`${Math.min(150,(document.documentElement.clientWidth-e)/2)}px`;l.current.style.left=t}}),o.createElement("div",{onMouseEnter:()=>{i(!0)},onMouseMove:()=>{n||i(!0)},onMouseLeave:()=>{i(!1)},role:"button",tabIndex:0,className:k.cx.flex.itemsCenter.$},o.createElement(eg.fu,{name:"Global Nav Category",properties:{slug:t}},o.createElement("div",{className:n?"nav_category_selector_2--navCategorySelectorTextHover--viMyk nav_category_selector_2--navCategorySelectorText--Tkc7a text--fontPos13--xW8hS text--_fontBase--QdLsd":"nav_category_selector_2--navCategorySelectorText--Tkc7a text--fontPos13--xW8hS text--_fontBase--QdLsd"},e,r&&o.createElement("div",{className:"nav_category_selector_2--newBadge--3isz- text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,A.t)("community.badge.new")),o.createElement(t_.B,{svg:i4.A,style:{fill:(0,mZ.TD)("default")}})),o.createElement("div",{className:O()("nav_category_selector_2--navDropdownWrapper--UbL1U",{"nav_category_selector_2--navDropdownWrapperHover--SJqCp":n}),onClick:e=>{e.stopPropagation(),i(!1)},ref:l},a)))}var uE=a(209552);let uh=(0,nN.eU)(!1);var uy=a(582064);let uv=(0,nN.eU)({}),ub=(0,nN.eU)({idx:-1}),uw=(0,nN.eU)({}),uT=(0,nN.eU)({idx:-1});function uI(e){let t=e===so.PF.LANDING?uw:uv,a=e===so.PF.LANDING?uT:ub,[r,n]=(0,C.fp)(t),[i,l]=(0,C.fp)(a),s=o.useMemo(()=>["files","plugins","widgets","creators"].reduce((e,t)=>{let a=(r?.[t]??[]).map((e,a)=>({type:t,idx:a})).slice(0,4);return e.concat(a)},[]),[r]),c=o.useMemo(()=>s.findIndex(e=>e.type===i?.type&&e.idx===i?.idx),[s,i]);return{renderedOrder:s,renderedSelectedIdx:c,resources:r,setResources:n,selectedIdx:i,setSelectedIdx:l}}var uN=a(440248),ux=a(159696);function uC({query:e,inSearchPath:t,onChange:a,onSubmit:r,inputPlaceholder:n,context:i,className:l,searchIconClassName:c,closeIconClassName:d}){let m=(0,s.wA)(),u=(0,s2.J)(!0),_=(0,o.useRef)(null),{renderedOrder:p,renderedSelectedIdx:g,resources:f,setResources:E,selectedIdx:h,setSelectedIdx:y}=uI(i),v=(0,o.useCallback)(()=>{y({idx:-1})},[y]);return o.createElement("div",{className:l,tabIndex:0,onFocus:()=>{null!==_.current&&_.current.focus(),m(uy.Dy({entryPoint:"community"}))}},o.createElement(t_.B,{svg:uN.A,className:c}),o.createElement("input",{type:"text",value:e,spellCheck:!1,placeholder:n??(0,A.t)("community.search.search_community"),ref:_,onChange:e=>{let n=e.currentTarget.value;a(n),t&&n&&r(n)},onBlur:v,onKeyDown:n=>{let i=n.currentTarget.value.trim();if("Enter"===n.key){if(n.preventDefault(),g>=0&&h.type){let t=f[h.type]?.[h.idx],r="model"in t?new mQ.xn({profileHandle:t.model.profile_handle}).href:(0,ow._t)({resource:t});(0,dR.VJ)(r),_.current?.blur(),a(""),E({}),m(uy.ky()),(0,V.sx)("search_result_clicked",{query:e,resourceType:p[g]?.type,scope:"community",is_preview:!0,index:g,entry_point:"community_via_enter",searchSessionId:u})}else r(i),t&&!i?m(uy.ky()):!t&&i&&m(uy.Je({entryPoint:"community"}))}else if("Escape"===n.key)_.current?.blur();else if(n.keyCode===D.Uz.DOWN_ARROW||n.keyCode===D.Uz.UP_ARROW){n.preventDefault();let e=g===p.length-1?g:g+1,t=g<=0?g:g-1;switch(n.keyCode){case D.Uz.DOWN_ARROW:y(p[e]||{idx:-1});break;case D.Uz.UP_ARROW:y(p[t]||{idx:-1})}}},required:!0}),e&&e.length>0&&o.createElement(t_.B,{svg:ux.A,className:d,onClick:()=>{a(""),t&&r(""),m(uy.ky())}}))}var uS=a(792199),uk=a(709495),uA=a(367935),uR=a(56714);let uL="search_dropdown--meta--a-aV4",uD="search_dropdown--pluginOrWidgetTilePreview--Rfef1",uP="search_dropdown--section--VJbkB",uF="search_dropdown--sectionTitle--x7FyO",uO="search_dropdown--title--eiIIy",uM="search_dropdown--authorRow--Uk00Y",uB="search_dropdown--authorRowText--vsAii",uU="search_dropdown--authorRowAvatar--jFZyx",uV="search_dropdown--resourceRowExtension--v4dY8 search_dropdown--resourceRow--P-Lig",uH="search_dropdown--hover--stEGe";function uW({profiles:e,onResourceClick:t,onResourceHover:a,selectedIdx:r}){return e&&0!==e.length?o.createElement("div",{className:uP},o.createElement("div",{className:uF},(0,A.tx)("community.view_bar.creators")),o.createElement(uj,{profiles:e.map(e=>e.model),onResourceClick:t,onResourceHover:a,selectedIdx:r})):null}function uj({profiles:e,onResourceClick:t,onResourceHover:a,selectedIdx:r}){return o.createElement("div",{className:"search_dropdown--resourceRowProfiles--bz2ck"},e.map((e,n)=>o.createElement("div",{onMouseEnter:()=>a(n),key:e.id,className:O()({[uH]:r===n})},o.createElement(uG,{profile:e,onResourceClick:t}))))}function uG({profile:e,onResourceClick:t}){return o.createElement("div",{className:"search_dropdown--profile--HRd2s",key:e.id},o.createElement(ob.N_,{to:new mQ.xn({profileHandle:e.profile_handle}).to,className:"search_dropdown--resourceRowProfile--HScpw",onClick:()=>{document.activeElement.blur(),t()}},o.createElement(l7.e,{adtlClassName:"search_dropdown--profileRowAvatar--TOSBT",entity:e,size:40}),o.createElement("div",{className:"search_dropdown--profileRowName--oRTAf ellipsis--ellipsis--Tjyfa text--fontPos12--YsUAh text--_fontBase--QdLsd"},e.name),o.createElement("div",{className:"search_dropdown--profileRowProfileHandle--DuEYR ellipsis--ellipsis--Tjyfa text--fontPos12--YsUAh text--_fontBase--QdLsd"},"@",e.profile_handle)))}function u$({resources:e,onResourceClick:t,onResourceHover:a,selectedIdx:r}){let n=(0,s.d4)(e=>e.authedActiveCommunityProfile);return e&&0!==e.length?o.createElement("div",{className:uP},o.createElement("div",{className:uF},(0,A.tx)("community.view_bar.widgets")),e.slice(0,4).map((e,i)=>{let l=(0,ow.qD)(e);return o.createElement("div",{onMouseEnter:()=>a(i),key:e.id,className:O()({[uH]:r===i})},o.createElement(dR.A6,{to:(0,ow._t)({resource:e}),className:uV,onClick:()=>{document.activeElement.blur(),t()}},o.createElement(dA.V,{plugin:l,className:uD,alt:l.name,onError:e=>e.target.src=ow.ZD}),o.createElement("div",{className:uL},o.createElement("div",{className:uO},l.name),o.createElement("div",{className:uM},e.community_publishers.accepted.map(e=>o.createElement(l7.e,{key:e.id,entity:e,size:16,adtlClassName:uU})),o.createElement("div",{className:uB},(0,o7.Lj)(e)))),(0,sz.$3)({resource:e,authedActiveCommunityProfile:n})))})):null}function uz({resources:e,onResourceClick:t,onResourceHover:a,selectedIdx:r}){let n=(0,s.d4)(e=>e.authedActiveCommunityProfile);return e&&0!==e.length?o.createElement("div",{className:uP},o.createElement("div",{className:uF},(0,A.tx)("community.view_bar.plugins")),e.slice(0,4).map((e,i)=>{let l=(0,ow.qD)(e);return o.createElement("div",{onMouseEnter:()=>a(i),key:e.id,className:O()({[uH]:r===i})},o.createElement(dR.A6,{to:(0,ow._t)({resource:e}),className:uV,onClick:()=>{document.activeElement.blur(),t()}},o.createElement("img",{src:l.redirect_icon_url,className:uD,alt:l.name,onError:e=>e.target.src=ow.ZD}),o.createElement("div",{className:uL},o.createElement("div",{className:uO},l.name),o.createElement("div",{className:uM},e.community_publishers.accepted.map(e=>o.createElement(l7.e,{key:e.id,entity:e,size:16,adtlClassName:uU})),o.createElement("div",{className:uB},(0,o7.Lj)(e)))),(0,sz.$3)({resource:e,authedActiveCommunityProfile:n})))})):null}function uY({resources:e,onResourceClick:t,onResourceHover:a,selectedIdx:r}){let n=(0,s.d4)(e=>e.authedActiveCommunityProfile);if(!e||0===e.length)return null;let i=(0,p.kc)().cmty_thumbnail_16x9_ar;return o.createElement("div",{className:uP},o.createElement("div",{className:uF},(0,A.tx)("community.view_bar.files")),e.slice(0,4).map((e,l)=>{let s=(0,ow.qD)(e);return o.createElement("div",{onMouseEnter:()=>a(l),key:e.id,className:O()({[uH]:r===l})},o.createElement(dR.A6,{to:(0,ow._t)({resource:e}),className:"search_dropdown--resourceRow--P-Lig",onClick:()=>{document.activeElement.blur(),t()}},o.createElement("img",{src:e.thumbnail_url,className:i?"search_dropdown--fileTilePreview16x9---1A4y":"search_dropdown--fileTilePreview--uCbva",alt:s.name,onError:e=>e.target.src=ow.ZD}),o.createElement("div",{className:uL},o.createElement("div",{className:uO},s.name),o.createElement("div",{className:uM},e.community_publishers.accepted.map(e=>o.createElement(l7.e,{key:e.id,entity:e,size:16,adtlClassName:uU})),o.createElement("div",{className:uB},(0,o7.Lj)(e)))),(0,sz.$3)({resource:e,authedActiveCommunityProfile:n})))}))}let uK=function(e,t){let a;return(...t)=>new Promise(r=>{clearTimeout(a),a=setTimeout(()=>{r(e.apply(e,t))},250)})}((e,t)=>t((0,uS.nC)().filter({query:e,sort_by:uk.e.Search.RELEVANCY}).searchResourcesAndProfiles({resourceType:"mixed",limit:(0,p.kc)().ext_plugin_skip_size_multiplier?12:8,isPreview:!0,profileLimit:3})),0);function uQ(e){let{query:t,context:a,width:r,clearSearchInput:n}=e,{resources:i,setResources:l,selectedIdx:c,setSelectedIdx:d}=uI(a),m=(0,s.wA)(),u=(0,s2.J)(!0),_=o.useCallback(()=>{m(uy.Pj({})),(0,V.sx)("search_show_all_clicked",{query:t,scope:"community",entry_point:"community",searchSessionId:u})},[m,t,u]);o.useEffect(()=>{t&&uK(t,m).then(([e,r])=>{let n=e.data.meta.results.map(e=>e.model),i=n.filter(e=>(0,uA.zj)(e)),o=n.filter(e=>(0,uA.bT)(e)).map(uR.I$),s=n.filter(e=>(0,uA.AS)(e)).map(uR.I$);l({files:i,plugins:o,widgets:s,creators:r.data.meta.results.slice(0,3)}),d({idx:-1});let c=a===so.PF.LANDING?"searchPreviewLanding":"searchPreview",m=o.filter(e=>void 0!==e.roles&&e.roles.is_public).length,_=s.filter(e=>void 0!==e.roles&&e.roles.is_public).length;(0,V.sx)("search_query_result",{query:t,responseCounts:n.length,scope:"community",entry_point:"community",context:c,searchSessionId:u,files:i.length,private_plugins:o.length-m,private_widgets:s.length-_,public_plugins:m,public_widgets:_,projects:0,teams:0,users:r.data.meta.results.length})}).catch(()=>{})},[t,m,u,a,l,d]);let p=o.useCallback(e=>{(0,V.sx)("search_result_clicked",{query:t,resourceType:e,scope:"community",is_preview:!0,entry_point:"community",searchSessionId:u}),n(),l({}),m(uy.ky())},[t,m,u,l,n]),g=o.useCallback((e,t)=>{i[t]&&!((i[t]??[]).length<e)&&d({idx:e,type:t})},[i,d]);if(!t)return null;let f=i.files?.length||i.widgets?.length||i.plugins?.length||i.creators?.length,E=(0,nD.Mc)({...nD.qd,query:t});return o.createElement("div",{className:O()("search_dropdown--searchDropdown--HqMrn",{"search_dropdown--searchDropdownLanding--HJ002":a===so.PF.LANDING,"search_dropdown--categoryNavDropdownResponsiveWidth--HzoIl":"small-responsive"===r}),style:"small-responsive"!==r?{width:`${r}px`}:void 0},o.createElement(uY,{resources:i.files,onResourceClick:()=>p("files"),onResourceHover:e=>g(e,"files"),selectedIdx:c?.type==="files"?c?.idx:null}),o.createElement(uz,{resources:i.plugins,onResourceClick:()=>p("plugins"),onResourceHover:e=>g(e,"plugins"),selectedIdx:c?.type==="plugins"?c?.idx:null}),o.createElement(u$,{resources:i.widgets,onResourceClick:()=>p("widgets"),onResourceHover:e=>g(e,"widgets"),selectedIdx:c?.type==="widgets"?c?.idx:null}),o.createElement(uW,{profiles:i.creators,onResourceClick:()=>p("profiles"),onResourceHover:e=>g(e,"creators"),selectedIdx:c?.type==="creators"?c?.idx:null}),f?o.createElement("div",{className:"search_dropdown--searchAllLink--VCaxM text--fontPos12--YsUAh text--_fontBase--QdLsd"},o.createElement(dR.A6,{to:E,onClick:_},(0,A.tx)("community.search.show_all_search_results"))):null)}var uX=a(639685);function uq({query:e,inSearchPath:t,onChange:a,onSubmit:r,inputPlaceholder:n}){let i=o.useRef(null),l=(0,s.wA)(),[c,d]=o.useState(!1);return o.createElement("div",{className:"search_input_mobile--mobileSearchContainer--VsAJK text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement("button",{className:"search_input_mobile--searchIconButton--jvchC",onClick:()=>{c?l(uy.ky()):(i.current?.focus(),l(uy.Dy({entryPoint:"community"}))),d(!c)}},o.createElement(t_.B,{className:"search_input_mobile--searchIcon--ExTte",svg:uX.A})),o.createElement("div",{className:"search_input_mobile--searchInput--bt9OT"},o.createElement("input",{type:"text",value:e,spellCheck:!1,ref:i,placeholder:n??(0,A.t)("community.search.search_community"),onChange:e=>{let n=e.currentTarget.value;a(n),t&&n&&r(n)},onKeyDown:e=>{let a=e.currentTarget.value.trim();"Enter"===e.key?(e.preventDefault(),r(a),i.current?.blur(),t&&!a?l(uy.ky()):!t&&a&&l(uy.Je({entryPoint:"community"}))):"Escape"===e.key&&i.current?.blur()},required:!0}),o.createElement("button",{className:"search_input_mobile--clearInputButton--cjPyc",onClick:e=>{a(""),e.preventDefault()}},"\xd7")))}function uJ({onSubmit:e,pathname:t,isMobile:a}){let r=(0,nD.zX)(t)===nD.hX.SEARCH,[n,i]=o.useState(""),l=(0,C.md)(uh);o.useEffect(()=>{let e=(0,nD.wl)();e&&(0,so.OE)(e)&&e.query&&i(e.query)},[]);let s=(0,lC.A)(e,a?600:400),c=o.useCallback(()=>{i("")},[]);if(!function(e,t){let a=(0,_.ZC)(e);o.useEffect(()=>{e!==nD.hX.SEARCH&&a!==e&&t()},[e,t,a])}(t,c),l&&!n)return null;if(a)return o.createElement(uq,{onChange:i,onSubmit:s,query:n,inSearchPath:r,inputPlaceholder:(0,A.t)("community.search.placeholder")});{let e=n&&!r&&window.innerWidth>800?o.createElement(uQ,{query:n,clearSearchInput:c,context:so.PF.NAV,width:(0,n5.jz)(iT.h63)}):null;return o.createElement(uE.ms,{preview:e,className:"dropdown_search_input--dropdown--fBh7I dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd",disableRepositioning:!0},o.createElement(uC,{onChange:i,onSubmit:s,query:n,inSearchPath:r,inputPlaceholder:(0,A.t)("community.search.placeholder"),context:so.PF.NAV,className:"dropdown_search_input--searchInput--ALtDK text--fontPos13--xW8hS text--_fontBase--QdLsd",searchIconClassName:"dropdown_search_input--searchIcon--edfC0",closeIconClassName:"dropdown_search_input--closeIcon--Zfoh0"}))}}function uZ(){let e=(0,nD.UH)(),t=!!(e&&(0,so.OE)(e));return{onSubmit:a=>{a.length?m.Ay.push(function({query:e,view:t,inSearchPath:a}){let r={...nD.qd,editor_type:t?.editor_type||nD.qd.editor_type,resourceType:t?.resourceType||nD.qd.resourceType,price:t?.price||nD.qd.price,query:e};return a&&(r.sort_by=t?.sort_by||nD.qd.sort_by),(0,nD.Mc)(r)}({query:a,view:e,inSearchPath:t})):t&&m.Ay.push("/community")},inSearchPath:t}}function u0(e){let{pathname:t}=(0,od.zy)(),{onSubmit:a}=uZ(),r=e.isMobile??E.Ay.mobile;return o.createElement(uJ,{isMobile:r,onSubmit:a,pathname:t})}var u1=a(167139);function u2({parentBackgroundColor:e}){let t=o.useRef(window.history.length-1),[a,r]=o.useState(t.current);return o.useEffect(()=>m.Ay.listen(e=>{"PUSH"===e&&r(e=>e+1)}),[]),o.createElement(u1.f,{onLeftClick:()=>{m.Ay.back(),r(e=>e-1)},onRightClick:()=>{m.Ay.forward(),r(e=>e+1)},isLeftEnabled:a>t.current,isRightEnabled:a<window.history.length-1,parentBackgroundColor:e})}var u8=a(127122),u4=a(63397),u3=a(950142);function u5(){let e=(0,s.wA)(),t=(0,nX.kc)();return t?.primary_user_id?o.createElement(o.Fragment,null):o.createElement("div",{className:"admin_profile_banner--root--HDfDA"},o.createElement("span",{className:"admin_profile_banner--text--cpDIW text--fontNeg13--7Ebf5 text--_fontBase--QdLsd text--_negText--j9g-L"},t?.org_id?(0,A.tx)("community.banner.browsing_community_as_the_current_profile_name_organization",{profileName:t?.name}):(0,A.tx)("community.banner.browsing_community_as_the_current_profile_name_team",{profileName:t?.name})),o.createElement("div",{className:"admin_profile_banner--closeIconContainer--bm5wf",onClick:()=>{e((0,u4.rO)())}},o.createElement(t_.B,{svg:u3.A,className:"admin_profile_banner--close--ib2wO"})))}var u9=a(624538);function u6(){return o.createElement("div",{className:k.cx.flex.flexShrink0.alignCenter.alignCenter.gap16.$},o.createElement(eg.$z,{className:"auth_buttons--logInButton--ln482 shared--_button--qcVz- text--fontPos11--2LvXf text--_fontBase--QdLsd",trackingProperties:{trackingDescriptor:tZ.c.LOGGED_OUT_NAV_LOGIN},onClick:()=>(0,s1.FL)(s0.qB.SIGN_IN,{preventDefaultRedirect:!0}),type:"button"},(0,A.t)("community.signed_out_modal.log_in")),o.createElement(eg.$z,{className:"auth_buttons--signUpButton--lM9GB shared--_button--qcVz- text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:()=>(0,s1.FL)(s0.qB.SIGN_UP,{preventDefaultRedirect:!0}),trackingProperties:{trackingDescriptor:tZ.c.LOGGED_OUT_NAV_SIGN_UP},type:"button"},(0,A.t)("community.signed_out_modal.sign_up")))}function u7(){return o.createElement("svg",{className:"svg",width:"38",height:"57",viewBox:"0 0 38 57",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M19 28.5c0-5.247 4.253-9.5 9.5-9.5 5.247 0 9.5 4.253 9.5 9.5 0 5.247-4.253 9.5-9.5 9.5-5.247 0-9.5-4.253-9.5-9.5z",fillRule:"nonzero",fillOpacity:"1",fill:"#1abcfe",stroke:"none"}),o.createElement("path",{d:"M0 47.5C0 42.253 4.253 38 9.5 38H19v9.5c0 5.247-4.253 9.5-9.5 9.5C4.253 57 0 52.747 0 47.5z",fillRule:"nonzero",fillOpacity:"1",fill:"#0acf83",stroke:"none"}),o.createElement("path",{d:"M19 0v19h9.5c5.247 0 9.5-4.253 9.5-9.5C38 4.253 33.747 0 28.5 0H19z",fillRule:"nonzero",fillOpacity:"1",fill:"#ff7262",stroke:"none"}),o.createElement("path",{d:"M0 9.5C0 14.747 4.253 19 9.5 19H19V0H9.5C4.253 0 0 4.253 0 9.5z",fillRule:"nonzero",fillOpacity:"1",fill:"#f24e1e",stroke:"none"}),o.createElement("path",{d:"M0 28.5C0 33.747 4.253 38 9.5 38H19V19H9.5C4.253 19 0 23.253 0 28.5z",fillRule:"nonzero",fillOpacity:"1",fill:"#a259ff",stroke:"none"}))}function _e({showCommunityText:e}){return o.createElement("div",{className:O()("homepage_link--homepageLinkContainer---EZRJ",{"homepage_link--rightBorder--hQMW-":!e})},o.createElement(eg.o3,{trackingEventName:"community_nav_click_communitiy_heading",to:"/community",className:k.cx.font14.fontSemiBold.lh24.flex.flexNowrap.$},o.createElement("div",{className:"homepage_link--logoLinkWrapper---5vec"},o.createElement(u7,null)),e&&(0,A.t)("community.community")))}let _t=a(20130).i,_a=a(111075).Xg;function _r({}){let e=(0,cL.M)(),t=!!d.eD||(0,c.ce)(),a=(0,st.N)(`(max-width: ${iT._C6})`),r=(0,u8.To)(e),n=(0,C.md)(s1.U8).mounted,i=(0,n5.jz)(iT.qvA)+(t?(0,n5.jz)(iT.ngI):0),l=(0,st.N)(`(max-width: ${i}px)`),u=(0,st.N)(`(max-width: ${iT.g8m})`),_=o.useRef(null),p=(0,so.OE)((0,nD.wl)(location.pathname)),g=!1,f=o.useCallback(e=>{},[]),E=null;return p=(0,s.d4)(e=>e?.selectedView?.view==="search"),g=(0,s.d4)(e=>e.communityHub.showingCommunityAdminBanner),f=(0,C.fp)(mq.A)[1],E=(0,nX.kc)(),o.useLayoutEffect(()=>{f(_.current?.getBoundingClientRect())},[f]),o.createElement(o.Fragment,null,o.createElement("div",{className:"navbar--navbarContainer--4keOh",id:"cmty-consolidated-navbar","data-redesigned-navbar":!0},n&&r()&&o.createElement(u9.P,{origin:mX.DT.COMMUNITY,iFrameHandler:e=>{(0,s1.I9)({name:s0.mK,options:{redirectUrl:m.Ay.location.pathname+m.Ay.location.search}}),(0,s1.I9)({name:mX.aL,userInfo:e,redirectUrl:m.Ay.location.pathname,origin:mX.DT.COMMUNITY})}}),o.createElement("div",{className:"navbar--leftNav--ndjh7"},e&&o.createElement("div",{className:"navbar--accountAndNotificationsContainer--P-BiH"},o.createElement(_a,{hideNotifications:a})),t&&o.createElement("div",{className:"navbar--navigationChevronsContainer--RLmsc"},o.createElement(u2,null)),o.createElement(_e,{showCommunityText:!1}),u?o.createElement(m5,{showNewIcon:!0}):o.createElement("div",{className:"navbar--navCategoriesContainer--PN1Ov"},o.createElement(ug,null))),o.createElement("div",{className:"navbar--rightNav--Shg9M"},o.createElement("div",{className:"navbar--searchInputContainer--wsxXk"},o.createElement(u0,{isMobile:l})),e?o.createElement(o.Fragment,null,E&&!a&&o.createElement(_t,null)):o.createElement(u6,null))),g&&!p&&o.createElement(u5,null))}var _n=a(566083),_i=a(580857);let _l="feed_controls--feedFilterDropdown--0rv-X dropdown--selectDropdown--Lqj6J dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd";function _o({onUpdate:e,value:t,isSearch:a}){return o.createElement(uE.A5,{name:(0,A.t)("community.landing_page.dropdown_filter__creators"),onUpdate:([t])=>{e(t)},options:[function(e){let t=!e&&(0,cL.M)();return[{key:_i.Z.ALL,label:(0,A.t)("community.view_bar.all_creators")},t?{key:_i.Z.FOLLOWING,label:(0,A.t)("community.view_bar.following")}:null,{key:_i.Z.FIGMA_PARTNER,label:(0,A.t)("community.view_bar.figma_partners_only")}].filter(Boolean)}(!!a)],initialValues:[t],adtlClassName:_l})}var _s=a(251960);function _c({onUpdate:e,editorType:t,resourceType:a,allowedEditorTypes:r}){let n,i,l,s,c;return r&&1===r.length?null:o.createElement(uE.A5,{name:(0,A.t)("community.landing_page.dropdown_filter__editor"),onUpdate:([t])=>{e(t)},initialValues:[t],adtlClassName:_l,dataOnboardingKey:"community_feed_product_filter",onClick:()=>{(0,V.sx)("editor_type_filter_clicked")},options:[(n=!0,i=!0,l=a===dV.L.BrowseResourceTypes.MIXED||a===dV.L.BrowseResourceTypes.FILES,s=!1,c=!1,(0,oT.Oh)()?r&&r.length>0&&(n=r.includes(uu.k.Editors.FIGMA),i=r.includes(uu.k.Editors.FIGJAM),l=r.includes(uu.k.Editors.SLIDES)&&l):(s=a===dV.L.BrowseResourceTypes.MIXED||a===dV.L.BrowseResourceTypes.PLUGINS,c=a===dV.L.BrowseResourceTypes.FILES),[{key:uu.k.Editors.ALL,label:(0,A.t)("community.landing_page.sort.all_products")},n?{key:uu.k.Editors.FIGMA,label:(0,A.t)("general.figma_design")}:null,s?{key:uu.k.Editors.DEV_MODE,label:(0,A.t)("community.view_bar.dev_mode")}:null,c?{key:uu.k.Editors.PROTOTYPE,label:(0,A.t)("community.view_bar.figma_prototype")}:null,i?{key:uu.k.Editors.FIGJAM,label:(0,A.t)("community.view_bar.fig_jam")}:null,l?{key:uu.k.Editors.SLIDES,label:(0,A.t)("community.view_bar.slides")}:null].filter(Boolean))]})}function _d({onUpdate:e,value:t}){return o.createElement(uE.A5,{name:(0,A.t)("community.landing_page.dropdown_filter__paid"),onUpdate:([t])=>{e(t)},adtlClassName:_l,initialValues:[t],options:[[{key:_n.C.ALL,label:(0,A.t)("community.landing_page.sort.paid_and_free")},{key:_n.C.PAID,label:(0,A.t)("community.landing_page.sort.paid")},{key:_n.C.FREE,label:(0,A.t)("community.landing_page.sort.free")}]]})}function _m({onUpdate:e,resourceType:t,isSearch:a,editorType:r}){return o.createElement(uE.A5,{name:(0,A.t)("community.landing_page.dropdown_filter__resource_type"),onUpdate:([t])=>{e(t)},initialValues:[t],adtlClassName:_l,options:[function(e,t){if(!e&&t===uu.k.Editors.DEV_MODE)return[{key:dV.L.BrowseResourceTypes.PLUGINS,label:(0,A.t)("community.view_bar.plugins")}];if(!e&&t===uu.k.Editors.PROTOTYPE||!e&&t===uu.k.Editors.SLIDES)return[{key:dV.L.BrowseResourceTypes.FILES,label:(0,A.t)("community.view_bar.files")}];let a=[{key:dV.L.BrowseResourceTypes.MIXED,label:(0,A.t)("community.view_bar.all_resources")},{key:dV.L.BrowseResourceTypes.FILES,label:(0,A.t)("community.view_bar.files")},{key:dV.L.BrowseResourceTypes.PLUGINS,label:(0,A.t)("community.view_bar.plugins")},{key:dV.L.BrowseResourceTypes.WIDGETS,label:(0,A.t)("community.view_bar.widgets")}];return e&&a.push({key:"profiles",label:(0,A.t)("community.view_bar.creators")}),a}(a,r)]})}function _u({onUpdate:e,value:t,isSearch:a,price:r}){return o.createElement(uE.A5,{name:(0,A.t)("community.curated_page.sort"),onUpdate:([t])=>e(t),initialValues:[t],options:[function(e,t){let a=[{key:uk.e.Shared.POPULAR,label:(0,A.t)("community.landing_page.sort.trending")},{key:uk.e.Shared.ALL_TIME,label:(0,A.t)("community.curated_page.popular")},{key:uk.e.Shared.PUBLISHED_AT,label:(0,A.t)("community.landing_page.sort.recent")}];return e&&(a.unshift({key:uk.e.Search.RELEVANCY,label:(0,A.t)("community.landing_page.sort.relevancy")}),t!==_n.C.FREE&&a.push({key:uk.e.Search.PRICE_DESC,label:(0,A.t)("community.landing_page.sort.price_high_to_low")},{key:uk.e.Search.PRICE_ASC,label:(0,A.t)("community.landing_page.sort.price_low_to_high")})),a}(a,r)]})}function __({filterState:e,onUpdate:t,containerRef:a,context:r,allowedEditorTypes:n}){let{resourceType:i,editorType:l=uu.k.Editors.ALL,price:s,sortBy:c,creators:d=_i.Z.ALL}=e,m=(0,st.N)(`(max-width: ${iT._C6})`);return o.createElement("div",{className:"feed_controls--feedFilterControls--eiYSY","data-resource-type":i,ref:a,"data-feed-filter-context":r},o.createElement("div",{className:"feed_controls--leftSideControls--Xr-DO"},"category"===r&&o.createElement("div",{className:k.cx.flex.itemsCenter.font14.fontMedium.$},(0,A.tx)("categories.filter_by")),o.createElement(cW.Ay,{mediaQuery:`(min-width: ${iT.glm})`},"profiles"!==i&&o.createElement(_c,{onUpdate:e=>{let a=[{key:"editorType",value:e}];(0,oT.Oh)()||"search"===r||(e===uu.k.Editors.DEV_MODE?a.push({key:"resourceType",value:dV.L.BrowseResourceTypes.PLUGINS}):(e===uu.k.Editors.SLIDES||e===uu.k.Editors.PROTOTYPE)&&a.push({key:"resourceType",value:dV.L.BrowseResourceTypes.FILES})),"search"!==r&&e===uu.k.Editors.SLIDES&&a.push({key:"resourceType",value:dV.L.BrowseResourceTypes.FILES}),t(a),(0,V.sx)("editor_type_filter_changed",{editor_type:e,from:l})},editorType:l,resourceType:i,allowedEditorTypes:(0,oT.Oh)()?n:void 0})),("explore"===r||"redesigned-homepage"===r||"category"===r||m)&&(l!==uu.k.Editors.SLIDES?o.createElement(_m,{onUpdate:e=>{let a=[{key:"resourceType",value:e}];l===uu.k.Editors.PROTOTYPE&&e!==dV.L.BrowseResourceTypes.FILES&&a.push({key:"editorType",value:uu.k.Editors.ALL}),t(a),(0,V.sx)("resource_type_filter_changed",{resource_type:e,from:i})},resourceType:i,isSearch:"search"===r,editorType:l}):l===uu.k.Editors.SLIDES&&i!==dV.L.BrowseResourceTypes.FILES?(t([{key:"resourceType",value:dV.L.BrowseResourceTypes.FILES}]),null):void 0),o.createElement(_d,{onUpdate:e=>{let a=[{key:"price",value:e}];e===_n.C.FREE&&(c===uk.e.Search.PRICE_ASC||c===uk.e.Search.PRICE_DESC)&&a.push({key:"sortBy",value:uk.e.Shared.POPULAR}),t(a),(0,V.sx)("price_filter_changed",{price:e,from:s})},value:s}),"category"!==r&&o.createElement(cW.Ay,{mediaQuery:`(min-width: ${iT.ltq})`},o.createElement(_o,{onUpdate:e=>{t([{key:"creators",value:e}]),(0,V.sx)("creators_filter_changed",{creators:e,from:d})},value:d,isSearch:"search"===r}))),"category"!==r&&"profiles"!==i&&o.createElement(_u,{onUpdate:e=>{t([{key:"sortBy",value:e}]),(0,V.sx)("ranking_type_filter_changed",{ranking_type:e})},value:c,isSearch:"search"===r,price:s}))}a(218997),a(15839);var _p=a(976999);function _g(){return o.createElement("div",{className:"resource_loading_row--loadingRow--o1YwH","data-testid":"resource-loading-row"},o.createElement(_p.Qp,{className:"resource_loading_row--loadingRowImage--KGDsz",animationType:_p.JR.NO_SHIMMER}),o.createElement("div",{className:"resource_loading_row--loadingRowMeta--T19Be"},o.createElement(_p.Wi,{className:"resource_loading_row--loadingTitleText--qN-3G",animationType:_p.JR.NO_SHIMMER}),o.createElement(_p.Wi,{className:"resource_loading_row--loadingSubTitleText--26zTk",animationType:_p.JR.NO_SHIMMER})))}function _f({plugins:e,onIntersectionChange:t,isOrgTeamBrowsing:a,isLoading:r,loadingRowCount:n=10}){return o.createElement("div",{className:k.cx.wFull.$,"data-testid":"plugin-list"},r?(0,l1.range)(n).map(e=>o.createElement(_g,{key:e})):e.map((e,r)=>o.createElement(oC.mb,{key:`plugin-row-${e.id}`,resource:e,onIntersectionChange:a=>t(e,a.isIntersecting),isOrgTeamBrowsing:a,index:r})))}function _E(){return o.createElement("div",{className:k.cx.flex.flexColumn.gap12.$,"data-testid":"resource-loading-tile"},o.createElement("div",{className:"resource_loading_tile--loadingImageWrapper--J9BDB"},o.createElement(_p.Qp,{className:"resource_loading_tile--loadingImage--yFmKa",animationType:_p.JR.NO_SHIMMER})),o.createElement("div",{className:k.cx.flex.flexColumn.gap4.$},o.createElement(_p.Wi,{className:"resource_loading_tile--loadingTitleText--osfVq",animationType:_p.JR.NO_SHIMMER}),o.createElement(_p.Wi,{className:"resource_loading_tile--loadingSubTitleText--B4vzW",animationType:_p.JR.NO_SHIMMER})))}let _h="resource_tile_group--resourceTileGroup--gpDUh",_y="resource_tile_group--resourceTileGroupCarousel--Cy8Oc",_v="resource_tile_group--carouselCardWrapper--xwpG5";function _b({showCarousel:e,loadingTileCount:t}){return o.createElement(o.Fragment,null,(0,l1.range)(t).map(t=>o.createElement("div",{key:t,className:O()({[_v]:e},k.cx.p1.$)},o.createElement(_E,{key:t}))))}function _w({resources:e,showCarousel:t,onIntersectionChange:a}){return o.createElement(o.Fragment,null,e.map((e,r)=>o.createElement("div",{key:e.id,className:O()({[_v]:t},k.cx.p1.$)},o.createElement(oC.fz,{resource:e,index:r,onIntersectionChange:t=>a(e,t.isIntersecting),subView:"communityHomepage"}))))}function _T({resources:e,maxGridDim:t,mobileMaxGridDim:a={rows:1},onIntersectionChange:r,mobileBreakpoint:n=iT.ikM,xScrollLocked:i=!0,isLoading:l,loadingTileCount:s=6}){let c=(0,st.N)(`(max-width: ${n})`),{rows:d,cols:m}=c&&a?a:t,u=l?s:e.length;if(!u)return null;m&&!d?d=Math.floor(u/m):d&&!m&&(m=Math.floor(u/d));let _=(m=m||1)*(d=d||1);u<_&&(d=Math.ceil(u/m),_=m*d);let p=e.slice(0,_),g=!!(c&&m&&m>1);if(i)return o.createElement("div",{className:O()(_h,{[_y]:g}),style:{gridTemplateColumns:`repeat(${m}, 1fr)`,gridTemplateRows:`repeat(${d}, 1fr)`},"data-testid":"resource-tile-group"},l?o.createElement(_b,{showCarousel:g,loadingTileCount:_}):o.createElement(_w,{resources:p,showCarousel:g,onIntersectionChange:r}));let f=p.reduce((e,t,a)=>(Math.floor(a/m)>e.length-1&&e.push([]),e[e.length-1].push(t),e),[]);return o.createElement("div",{className:"resource_tile_group--nestedResourceTileGroup--PFO-3"},(0,l1.range)(d).map(e=>o.createElement("div",{key:e,className:O()(_h,{[_y]:g}),style:{gridTemplateColumns:`repeat(${m}, 1fr)`,gridTemplateRows:"1"},"data-testid":"resource-tile-group"},l?o.createElement(_b,{showCarousel:g,loadingTileCount:m}):o.createElement(_w,{resources:f[e],showCarousel:g,onIntersectionChange:r}))))}var _I=a(897088);function _N({editorType:e,resourceType:t,price:a,sortBy:r,limit:n,creators:i,category:l,tags:s},c=!0){let[d,m]=o.useState([]),[u,_]=o.useState(!1),[p,g]=o.useState(null),[f,E]=o.useState(),h=o.useRef((0,uS.nC)()),y=(0,o.useCallback)(async()=>{if(f?.next_page){_(!0),g(null);try{let e=await (0,eG.GD)(f.next_page);m(t=>[...t,...e.data.meta.resources]),E(e.data.pagination)}catch(e){console.error("Error fetching popular resources",e),g(e)}finally{_(!1)}}},[f]);return o.useEffect(()=>{let o=async()=>{_(!0),g(null);try{var o;let c=await h.current.filter({editor_type:(o={editorType:e,resourceType:t,price:a,sortBy:r,limit:n,creators:i,category:l,tags:s}).editorType,price:o.price,creators:o.creators,sort_by:o.sortBy,category:o.category,tags:o.tags}).browse(t,n??_I.b);m(c.data.meta.resources),E(c.data.pagination)}catch(e){console.error("Error fetching popular resources",e),g(e)}finally{_(!1)}};c&&o()},[t,e,a,r,n,i,l,c,s]),{resources:d,loading:u,error:p,loadMore:y,canLoadMore:h.current.isMoreToFetch(f)&&d.length>0}}let _x=()=>({sortBy:(0,uk.H)(),editorType:uu.k.Editors.ALL,price:_n.C.ALL,resourceType:dV.L.BrowseResourceTypes.MIXED});function _C({onIntersectionChange:e}){let t=(0,st.N)(`(max-width: ${iT.ikM})`),a=(0,st.N)(`(max-width: ${iT.g8m})`),[r,n]=(0,o.useState)(!0),[i,l]=(0,o.useState)(_x());(0,o.useEffect)(()=>{t&&l(_x())},[t]);let{resources:c,loadMore:d,canLoadMore:m,loading:u}=_N(i),_=(0,o.useRef)(null),p=(0,s.d4)(e=>!!(e.authedActiveCommunityProfile?.team_id||e.authedActiveCommunityProfile?.org_id));(0,o.useEffect)(()=>{r&&!u&&n(!1)},[r,u]);let g=i.resourceType===dV.L.BrowseResourceTypes.PLUGINS&&c.every(e=>"is_widget"in e&&!e.is_widget);return o.createElement("div",{className:"all_resources--allResources--vIYK6"},!t&&o.createElement(__,{containerRef:_,filterState:i,onUpdate:e=>{let t={};e.forEach(({key:e,value:a})=>{t[e]=a}),l(e=>({...e,...t}))},context:"redesigned-homepage"}),g?o.createElement(_f,{plugins:c,onIntersectionChange:e,isOrgTeamBrowsing:p,isLoading:r}):o.createElement(_T,{resources:c,maxGridDim:a?{cols:2}:{cols:3},mobileMaxGridDim:{cols:1},onIntersectionChange:e,isLoading:r}),m&&!t&&o.createElement(sp,{onClick:e=>{e.preventDefault(),d()},isLoading:u,isMoreToFetch:m}))}var _S=a(711117),_k=a(646240);function _A({isRedesignedHomepage:e}){let t=(0,st.N)(`(max-width: ${iT.Ero})`),a=(0,st.N)(`(max-width: ${iT.ikM})`),{onSubmit:r,inSearchPath:n}=uZ(),[i,l]=o.useState(""),s=(0,lC.A)(r,400),c=o.useCallback(()=>{l("")},[]),d=!i||n||(e?a:t)?null:o.createElement("div",{className:e?"homepage_dropdown_search_input--redesignedHomepageDropdownContentsPositionWrapper--qJcZD":void 0},o.createElement(uQ,{query:i,clearSearchInput:c,context:so.PF.LANDING,width:(0,n5.jz)(iT.eZi)}));return o.createElement("div",{className:e?"homepage_dropdown_search_input--redesignedHomepageSearchContainer--x42a- text--fontPos13--xW8hS text--_fontBase--QdLsd":"homepage_dropdown_search_input--homepageDropdownSearchContainer--OEViU"},o.createElement(uE.ms,{preview:d,className:e?"homepage_dropdown_search_input--redesignedHomepageDropdown--AsdzI dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd":"homepage_dropdown_search_input--dropdown--qY5GH dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd",disableRepositioning:!0},o.createElement(uC,{onChange:l,onSubmit:s,query:i,inSearchPath:n,inputPlaceholder:e?(0,A.t)("community.search.placeholder.search_for_a_resource"):(0,A.t)("community.search.search_everything_in_community"),context:so.PF.LANDING,className:e?"homepage_dropdown_search_input--redesignedSearchInput--CoAYJ text--fontPos11--2LvXf text--_fontBase--QdLsd":"homepage_dropdown_search_input--searchInput--8x2Cp text--fontPos13--xW8hS text--_fontBase--QdLsd",searchIconClassName:e?"homepage_dropdown_search_input--redesignedHomepageSearchIcon--RcD8I":"homepage_dropdown_search_input--searchIcon--55Xdx",closeIconClassName:e?"homepage_dropdown_search_input--redesignedHomepageCloseIcon--8bE70":"homepage_dropdown_search_input--closeIcon--iurnp"})))}let _R="hero--pluginImg--OXkw4",_L="hero--header--PlMZA text--fontPos24--YppUD text--_fontBase--QdLsd",_D="hero--themedIcon--EfFFN";var _P=a(165690),_F=a(505045),_O=a(288495),_M=a(360957),_B=a(945111),_U=a(261595),_V=a(353917),_H=a(763939),_W=a(962888),_j=a(746510),_G=a(181865),_$=a(156564),_z=a(18412),_Y=a(69969),_K=a(793445);let _Q={colorIllustration:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:-431.2,y:48,rotate:0},hover:{opacity:1,scale:1.15,x:-448.8,y:48,rotate:0}},transition:{delay:.05,type:"spring",bounce:.4,duration:.25},element:o.createElement(t_.B,{className:"hero--colorIllustrations--SS5zw",svg:_M.A})},colorsIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:-374,y:-8,rotate:0},hover:{opacity:1,scale:1.15,x:-391.6,y:-8,rotate:0}},transition:{delay:0,type:"spring",bounce:.4,duration:.25},element:o.createElement(t_.B,{className:_D,svg:_B.A,style:{fill:(0,mZ.TD)("default")}})},variableIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:-440,y:-16,rotate:0},hover:{opacity:1,scale:1.15,x:-457.6,y:-16,rotate:0}},transition:{delay:.075,type:"spring",bounce:.4,duration:.25},element:o.createElement(t_.B,{className:_D,svg:_K.A,style:{fill:(0,mZ.TD)("default")}})},designLibraryIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:169.4,y:-16,rotate:0},hover:{opacity:1,scale:1.15,x:187,y:-16,rotate:0}},transition:{delay:.075,type:"spring",bounce:.4,duration:.25},element:o.createElement(t_.B,{className:_D,svg:_j.A,style:{fill:(0,mZ.TD)("default")}})},typeIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:105.6,y:-8,rotate:0},hover:{opacity:1,scale:1.15,x:123.2,y:-8,rotate:0}},transition:{delay:0,type:"spring",bounce:.4,duration:.25},element:o.createElement(t_.B,{className:_D,svg:_Y.A,style:{fill:(0,mZ.TD)("default")}})},componentIllustration:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:123.2,y:48,rotate:0},hover:{opacity:1,scale:1.15,x:140.8,y:48,rotate:0}},transition:{delay:.05,type:"spring",bounce:.4,duration:.25},element:o.createElement(t_.B,{svg:_U.A,useOriginalSrcFills_DEPRECATED:!0,className:"hero--colorSwatches--Vz0OG"})}},_X={pluginIconTopLeft:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:-96.8,y:-24,rotate:16},hover:{opacity:1,scale:1.1,x:-114.4,y:-40,rotate:16}},transition:{delay:0,type:"spring",bounce:.4,duration:.25},element:o.createElement("img",{alt:"PluginIcon",className:_R,src:"https://static.figma.com/uploads/ebe89d33f7040c60d83a01887800a522babf7de7"})},pluginIconMiddleLeft:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:-171.6,y:-16,rotate:-16},hover:{opacity:1,scale:1.1,x:-180.4,y:-32,rotate:-16}},transition:{delay:.075,type:"spring",bounce:.4,duration:.25},element:o.createElement("img",{alt:"PluginIcon",className:_R,src:"https://static.figma.com/uploads/65c3bfafc5758245135ea68c46bf8649e08fc682"})},pluginIconBottomLeft:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:-110,y:16,rotate:-8},hover:{opacity:1,scale:1.1,x:-127.6,y:16,rotate:-8}},transition:{delay:.05,type:"spring",bounce:.4,duration:.25},element:o.createElement("img",{alt:"PluginIcon",className:_R,src:"https://static.figma.com/uploads/4c694b59552bdaf728d6bbad5c5603c08e768dde"})},pluginIconTopRight:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:393.8,y:-24,rotate:-16},hover:{opacity:1,scale:1.1,x:400.4,y:-40,rotate:-16}},transition:{delay:0,type:"spring",bounce:.4,duration:.25},element:o.createElement("img",{alt:"PluginIcon",className:_R,src:"https://static.figma.com/uploads/2a50b4b29af5a21bde6c7b4ef8cdfd97a2b16a39"})},pluginIconMiddleRight:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:448.8,y:-16,rotate:16},hover:{opacity:1,scale:1.1,x:466.4,y:-32,rotate:16}},transition:{delay:.075,type:"spring",bounce:.4,duration:.25},element:o.createElement("img",{alt:"PluginIcon",className:_R,src:"https://static.figma.com/uploads/0d28516cbda0bfcf87b214c919c6ed52f3358efb"})},pluginIconBottomRight:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:400.4,y:16,rotate:8},hover:{opacity:1,scale:1.1,x:418,y:16,rotate:8}},transition:{delay:.05,type:"spring",bounce:.4,duration:.25},element:o.createElement("img",{alt:"PluginIcon",className:_R,src:"https://static.figma.com/uploads/34cf09b757fec1181abee8d8ece8a06ee0383408"})}},_q={heartIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:48.4,y:-76,rotate:0},hover:{opacity:1,scale:1,x:48.4,y:-88,rotate:0}},transition:{delay:.075,type:"spring",bounce:.4,duration:.25},element:o.createElement(t_.B,{svg:_H.A,style:{fill:"none",stroke:(0,mZ.TD)("default")}})},libraryIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:-8.8,y:-64,rotate:-8.5},hover:{opacity:1,scale:1,x:-26.4,y:-72,rotate:-8.5}},transition:{type:"spring",bounce:.4,duration:.25},element:o.createElement(t_.B,{svg:_W.A,style:{fill:"none",stroke:(0,mZ.TD)("default")}})},emojiIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:96.8,y:-64,rotate:6},hover:{opacity:1,scale:1,x:114.4,y:-72,rotate:6}},transition:{delay:.05,type:"spring",bounce:.4,duration:.25},element:o.createElement(t_.B,{svg:_V.A,style:{fill:"none",stroke:(0,mZ.TD)("default")}})},chatIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:158.4,y:-80,rotate:0},hover:{opacity:1,scale:1,x:178.2,y:-88,rotate:0}},transition:{delay:.125,type:"spring",bounce:.4,duration:.25},element:o.createElement(t_.B,{svg:_O.A,style:{fill:"none",stroke:(0,mZ.TD)("default")}})},profileIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:-79.2,y:-80,rotate:0},hover:{opacity:1,scale:1,x:-96.8,y:-88,rotate:0}},transition:{delay:.125,type:"spring",bounce:.4,duration:.25},element:o.createElement(t_.B,{svg:_$.A,style:{fill:"none",stroke:(0,mZ.TD)("default")}})},mentionIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:-162.8,y:12,rotate:0},hover:{opacity:1,scale:1,x:-180.4,y:20,rotate:0}},transition:{delay:.075,type:"spring",bounce:.4,duration:.25},element:o.createElement(t_.B,{svg:_G.A,style:{fill:"none",stroke:(0,mZ.TD)("default")}})},asterikIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:-187,y:-32,rotate:0},hover:{opacity:1,scale:1,x:-215.6,y:-32,rotate:0}},transition:{delay:.15,type:"spring",bounce:.4,duration:.25},element:o.createElement(t_.B,{svg:_P.A,style:{fill:"none",stroke:(0,mZ.TD)("default")}})},settingsIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:237.6,y:12,rotate:0},hover:{opacity:1,scale:1,x:255.2,y:20,rotate:0}},transition:{delay:.0725,type:"spring",bounce:.4,duration:.25},element:o.createElement(t_.B,{svg:_z.A,style:{fill:"none",stroke:(0,mZ.TD)("default")}})},bookmarkIcon:{variants:{hidden:{mouseEvents:"none",opacity:0,scale:.5,x:281.6,y:-32,rotate:0},hover:{opacity:1,scale:1,x:299.2,y:-32,rotate:0}},transition:{delay:.15,type:"spring",bounce:.4,duration:.25},element:o.createElement(t_.B,{svg:_F.A,style:{fill:"none",stroke:(0,mZ.TD)("default")}})}};function _J({elements:e,elementWrapperClassname:t,text:a,onMouseEnter:r,onMouseLeave:n,isActive:i}){return o.createElement(_S.P.span,{className:k.cx.colorTextBrand.$,variants:{hidden:{opacity:.9},hover:{opacity:1}},initial:"hidden",animate:i?"hover":"hidden"},o.createElement("span",{className:O()("hero--textElement--lpZt8",{"hero--highlightedTextElement--Z3Qhc":i}),onMouseEnter:r,onMouseLeave:n},a),o.createElement("div",{className:t,"aria-hidden":!0},Object.entries(e).map(([e,t])=>o.createElement(_S.P.span,{className:k.cx.absolute.top0.left0.eventsNone.$,key:e,variants:t.variants,transition:t.transition},t.element))))}let _Z=(e,t)=>{r=setTimeout(()=>{e(e=>(e+1)%6),_0(e)},t??500)},_0=e=>{r=setTimeout(()=>{e(e=>(e+1)%6),_Z(e)},3e3)};function _1(){let e=(0,st.N)(`(max-width: ${(0,n5.jz)(iT.ikM)-1}px)`),[t,a]=o.useState(2*Math.floor(3*Math.random())),[n,i]=o.useState(null);(0,o.useEffect)(()=>(_Z(a),()=>{clearTimeout(r)}),[]),(0,o.useEffect)(()=>{null!==n?(clearTimeout(r),r=void 0,a(e=>e%2==1?(e+1)%6:e)):r||_Z(a,3e3)},[n]);let l=t%2==0?null:Math.ceil(t/2),s=n??l;return e?o.createElement(o.Fragment,null,o.createElement("h1",{className:_L},(0,A.tx)("community.homepage.mobile_header")),o.createElement("div",{className:"hero--subHeader--74gIe text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,A.tx)("community.homepage.mobile_subheader"))):o.createElement("h1",{className:_L},(0,A.tx)("community.homepage.header",{librariesLink:o.createElement(_J,{elements:_Q,elementWrapperClassname:"hero--libraryElementsWrapper--8uOC3",text:(0,A.t)("community.homepage.header_libraries"),onMouseEnter:()=>i(1),onMouseLeave:()=>i(null),isActive:1===s}),pluginsLink:o.createElement(_J,{elements:_X,elementWrapperClassname:"hero--pluginElementsWrapper--E7QTs",text:(0,A.t)("community.homepage.header_plugins"),onMouseEnter:()=>i(2),onMouseLeave:()=>i(null),isActive:2===s}),iconSetsLink:o.createElement(_J,{elements:_q,elementWrapperClassname:"hero--iconElementWrapper--UvEtl",text:(0,A.t)("community.homepage.header_icon_sets"),onMouseEnter:()=>i(3),onMouseLeave:()=>i(null),isActive:3===s})}))}function _2(){let e=(0,_k.Xr)(uh);return o.createElement("div",{className:"hero--hero--a1ML6"},o.createElement(_1,null),o.createElement(_A,{isRedesignedHomepage:!0}),o.createElement(oN.a,{callback:(0,o.useCallback)(t=>{e(t[0].isIntersecting)},[e]),cleanupCallback:(0,o.useCallback)(()=>e(!1),[e])}))}let _8=(0,o.forwardRef)(({href:e,navigate:t,title:a,onClick:r,categoryHighlight:n},i)=>{let l=(0,st.N)(`(max-width: ${iT.ikM})`);return o.createElement("div",{ref:i,key:n.category,className:"homepage_categories_highlight--homepageCategoriesHighlightItemWrapper--iQwAJ"},o.createElement("div",{className:"homepage_categories_highlight--homepageCategoriesHighlightItem--peoMf",onClick:e=>{r&&r(e),t()},tabIndex:0,role:"link","aria-label":a},o.createElement("div",{className:"homepage_categories_highlight--homepageCategoryHighlightCard--25fAI"},o.createElement("div",{className:"homepage_categories_highlight--homepageCategoryHighlightCardTitleAndSubtitle--T8YwD"},o.createElement("a",{className:"homepage_categories_highlight--homepageCategoryHighlightCardTitle--9FmzL text--fontPos13--xW8hS text--_fontBase--QdLsd",href:e,onClick:e=>{e.preventDefault()}},a),o.createElement("div",{className:"homepage_categories_highlight--homepageCategoryHighlightCardSubheader--EXycZ text--fontPos11--2LvXf text--_fontBase--QdLsd"},n.text)),o.createElement("div",{className:"homepage_categories_highlight--homepageCategoryHighlightCardImageContainer--lOChl"},o.createElement("img",{alt:a,src:l&&n.mobileSrc?n.mobileSrc:n.src,className:O()("homepage_categories_highlight--homepageCategoryHighlightCardImage--HD0cW"),"data-category":n.category})))))});function _4({categoryHighlights:e}){return o.createElement("div",{className:"homepage_categories_highlight--homepageCategoriesHighlight--XCng9"},e.map(e=>{let t=new ss.IE({categorySlug:e.category});return o.createElement(eg.o3,{key:e.category,to:t.href,trackingEventName:"community_homepage_category_highlight_clicked",trackingProperties:{slug:e.category},title:ul(e.category),href:t.href,categoryHighlight:e,component:_8})}))}var _3=a(171603);function _5({buttonLabel:e,route:t}){return o.createElement(eg.o3,{className:"homepage_section--viewAllLinks--ZxJcd text--fontPos13--xW8hS text--_fontBase--QdLsd",to:t.to,trackingEventName:"community_homepage_section_link_clicked",trackingProperties:{slug:t.pathname}},e,o.createElement(t_.B,{svg:_3.A,className:"homepage_section--chevron--alHAr"}))}function _9({header:e,subHeader:t,buttonLabel:a,route:r,content:n}){return o.createElement("div",{className:k.cx.wFull.$},o.createElement("div",{className:k.cx.alignLeft.pb16.$},o.createElement("h3",{className:k.cx.fontMedium.font15.lh24.$},e),o.createElement("div",{className:"homepage_section--subheaderAndLink---Rv7r"},t&&o.createElement("div",{className:k.cx.font13.colorTextSecondary.lh24.pt4.$},t),a&&r&&o.createElement(_5,{buttonLabel:a,route:r}))),n)}let _6=(0,t2.Fu)(nP.E_);function _7(){let e=(0,s.wA)(),t=(0,C.md)(_6);return t?.status!=="loaded"||t?.status==="loaded"&&t?.data?null:o.createElement(eg.fu,{name:"cmty_slides_promo_banner"},o.createElement("div",{className:"slides_promo_banner--banner--C7dcs","data-editor-theme":"piper"},o.createElement("div",{className:"slides_promo_banner--iconContainer--HC1lS"},o.createElement(rc.oS,{type:rc.y1.SLIDES,size:rc.LE.MEDIUM})),o.createElement("div",{className:"slides_promo_banner--description--DybQR text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,A.tx)("community.homepage.slides_promo_banner")),o.createElement(eg.L0,{name:"slides_promo_banner_cta",className:"slides_promo_banner--ctaButton--g9W36 text--fontPos11--2LvXf text--_fontBase--QdLsd",href:"https://www.figma.com/slides/",target:"_blank"},(0,A.tx)("community.learn_more")),o.createElement(ne.Jn,{onClick:()=>{e(tS.b({[nP.E_]:!0}))},className:"slides_promo_banner--dismissButton--8RidG","aria-label":(0,A.t)("banner.shared.close_banner")})))}let pe=e=>`${e.id}---${(0,ow.Vm)(e)}`,pt=e=>{let[t,a]=e.split("---");return{id:t,type:a}};function pa({debounceWaitInMs:e=1e3,extraProperties:t={}}={}){let{name:a=eD.e0.COMMUNITY_HUB,properties:r}=(0,eg.j6)(),n=(0,o.useRef)([]),i=(0,o.useRef)(new Set),l=(0,o.useCallback)(e=>{if(0===n.current.length)return;let i=[],l=[];n.current.forEach(e=>{let{id:t,type:a}=pt(e);i.push(t),l.push(a)}),(0,V.sx)("hub_impressed_resources",{impressedItems:i,impressedItemTypes:l,trackingContext:a,...r,...t},{sendAsBeacon:e}),n.current=[]},[t,a,r]),s=(0,o.useMemo)(()=>(0,tl.s)(l,e),[e,l]);return(0,o.useEffect)(()=>s.flush,[s]),(0,o.useEffect)(()=>{let e=()=>{"hidden"===document.visibilityState&&l(!0)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[l]),{trackResourceImpression:(0,o.useCallback)(e=>{let t=pe(e);i.current.has(t)||(i.current.add(t),n.current.push(t),s())},[s]),flushAndResetResourceImpressions:(0,o.useCallback)(()=>{s.flush(),i.current.clear()},[s])}}function pr(){let e=(0,st.N)(`(max-width: ${iT.g8m})`)?{rows:3,cols:2}:{rows:2,cols:3},{trackResourceImpression:t}=pa(),{resources:a,loading:r}=function({limit:e}={limit:_I.b}){let[t,a]=(0,o.useState)([]),[r,n]=(0,o.useState)(!1),[i,l]=(0,o.useState)(null),s=(0,o.useRef)((0,uS.nC)());return(0,o.useEffect)(()=>{n(!0),l(null),s.current.filter({editor_type:uu.k.Editors.SLIDES,sort_by:(0,uk.H)()}).browse(dV.L.BrowseResourceTypes.FILES,e).then(e=>{a(e.data.meta.resources)}).catch(e=>{console.error("Error fetching popular slide templates",e),l(e)}).finally(()=>n(!1))},[e]),{resources:t,loading:r,error:i}}(),{resources:n,loading:i}=function({limit:e}={limit:_I.b}){let[t,a]=(0,o.useState)([]),[r,n]=(0,o.useState)(!1),[i,l]=(0,o.useState)(null),s=(0,o.useRef)((0,uS.nC)());return(0,o.useEffect)(()=>{n(!0),l(null),s.current.filter({editor_type:uu.k.Editors.FIGMA,sort_by:(0,uk.H)()}).browse(dV.L.BrowseResourceTypes.FILES,e).then(e=>{a(e.data.meta.resources)}).catch(e=>{console.error("Error fetching popular figma files",e),l(e)}).finally(()=>n(!1))},[e]),{resources:t,loading:r,error:i}}(),{resources:l,loading:s}=function({limit:e}={limit:_I.N}){let[t,a]=(0,o.useState)([]),[r,n]=(0,o.useState)(!1),[i,l]=(0,o.useState)(null),s=(0,o.useRef)((0,uS.nC)());return(0,o.useEffect)(()=>{n(!0),l(null),s.current.filter({category:so.LJ.designTools,sort_by:(0,uk.H)()}).browse(dV.L.BrowseResourceTypes.PLUGINS,e).then(e=>{a(e.data.meta.resources)}).catch(e=>{console.error("Error fetching popular plugins",e),l(e)}).finally(()=>n(!1))},[e]),{resources:t,loading:r,error:i}}(),{resources:c,loading:d}=function({limit:e}={limit:_I.b}){let[t,a]=(0,o.useState)([]),[r,n]=(0,o.useState)(!1),[i,l]=(0,o.useState)(null),s=(0,o.useRef)((0,uS.nC)());return(0,o.useEffect)(()=>{n(!0),l(null),s.current.filter({editor_type:uu.k.Editors.FIGJAM,sort_by:(0,uk.H)()}).browse(dV.L.BrowseResourceTypes.FILES,e).then(e=>{a(e.data.meta.resources)}).catch(e=>{console.error("Error fetching popular figjam files",e),l(e)}).finally(()=>n(!1))},[e]),{resources:t,loading:r,error:i}}(),{resources:m,loading:u}=function({limit:e}={limit:_I.b}){let[t,a]=(0,o.useState)([]),[r,n]=(0,o.useState)(!1),[i,l]=(0,o.useState)(null),s=(0,o.useRef)((0,uS.nC)());return(0,o.useEffect)(()=>{n(!0),l(null),s.current.filter({category:so.LJ.whiteboarding,sort_by:(0,uk.H)()}).browse(dV.L.BrowseResourceTypes.WIDGETS,e).then(e=>{a(e.data.meta.resources)}).catch(e=>{console.error("Error fetching popular widgets",e),l(e)}).finally(()=>n(!1))},[e]),{resources:t,loading:r,error:i}}(),{slideTemplatesRoute:_,designResourcesRoute:g,pluginsRoute:f,figjamAssetsRoute:E,widgetsRoute:h}=(0,o.useMemo)(()=>({slideTemplatesRoute:new ss.IE({categorySlug:so.LJ.presentations}),designResourcesRoute:new ss.IE({categorySlug:so.LJ.designTemplates}),pluginsRoute:new ss.IE({categorySlug:so.LJ.designTools},{resource_type:"plugins"}),figjamAssetsRoute:new ss.IE({categorySlug:so.LJ.whiteboarding}),widgetsRoute:new ss.IE({categorySlug:so.LJ.whiteboarding},{resource_type:dV.L.BrowseResourceTypes.WIDGETS})}),[]),y=(0,o.useCallback)((e,a)=>{a&&t(e)},[t]);return o.createElement("div",{className:"homepage--homepageContainer--q0JuX"},o.createElement("div",{className:"homepage--homepageContent--XDBs9"},o.createElement(_2,null),(0,p.kc)().piper_cmty_home_banner&&o.createElement(_7,null),o.createElement("div",{className:"homepage--homepageSectionsContainer--rXSN9"},o.createElement(_9,{header:(0,A.t)("community.homepage.slides_section.header"),subHeader:(0,A.t)("community.homepage.slides_section.sub_header"),buttonLabel:(0,A.t)("community.homepage.slides_section.browse_all"),route:_,content:o.createElement(_T,{resources:a,maxGridDim:e,onIntersectionChange:y,isLoading:r,loadingTileCount:6})}),o.createElement(_9,{header:(0,A.t)("community.homepage.figma_section.header"),subHeader:(0,A.t)("community.homepage.figma_section.sub_header"),buttonLabel:(0,A.t)("community.homepage.figma_section.browse_all"),route:g,content:o.createElement(_T,{resources:n,maxGridDim:e,onIntersectionChange:y,isLoading:i,loadingTileCount:6})}),o.createElement(_9,{header:(0,A.t)("community.view_bar.plugins"),subHeader:(0,A.t)("community.homepage.plugins_section.sub_header"),buttonLabel:(0,A.t)("community.homepage.plugins_section.browse_all"),route:f,content:o.createElement(_f,{plugins:l,onIntersectionChange:y,isOrgTeamBrowsing:!1,isLoading:s,loadingRowCount:10})}),o.createElement(_9,{header:(0,A.t)("community.homepage.figjam_section.header"),subHeader:(0,A.t)("community.homepage.figjam_section.sub_header"),buttonLabel:(0,A.t)("community.homepage.figjam_section.browse_all"),route:E,content:o.createElement(_T,{resources:c,maxGridDim:e,onIntersectionChange:y,isLoading:d,loadingTileCount:6})}),o.createElement(_9,{header:(0,A.t)("community.view_bar.widgets"),subHeader:(0,A.t)("community.homepage.widgets.sub_header"),buttonLabel:(0,A.t)("community.homepage.widgets.browse_all"),route:h,content:o.createElement(_T,{resources:m,maxGridDim:e,onIntersectionChange:y,isLoading:u,loadingTileCount:6})}),o.createElement(_9,{header:(0,A.t)("community.homepage.categories_section.header"),subHeader:(0,A.t)("community.homepage.categories_section.sub_header"),content:o.createElement(_4,{categoryHighlights:[{category:so.LJ.designTemplates,src:"https://static.figma.com/uploads/f35144ac6be1301b0c300fdb5ba0761f85d610da",mobileSrc:"https://static.figma.com/uploads/d09077ccb81fdbb9d927f28eab6d6aff62def241",text:(0,A.t)("categories.homepage_highlight.design_templates")},{category:so.LJ.uiKits,src:"https://static.figma.com/uploads/6b7af7165268ef5a4d90fc48f1a9d311bb52780a",mobileSrc:"https://static.figma.com/uploads/bbe5c1f9cc2c99dce19c64a5c3667bac836def1d",text:(0,A.t)("categories.homepage_highlight.ui_kits")},{category:so.LJ.icons,src:"https://static.figma.com/uploads/12cea3d845a2aebb7027af6890160caeb7e4ce9f",mobileSrc:"https://static.figma.com/uploads/478f606904a2341a2b01fb2ef3cafb9f63b29f79",text:(0,A.t)("categories.homepage_highlight.icons")},{category:so.LJ.designTools,src:"https://static.figma.com/uploads/404bbfd2c09daf145970196f3d762807fd711299",text:(0,A.t)("categories.homepage_highlight.design_tools")},{category:so.LJ.visualAssets,src:"https://static.figma.com/uploads/8857bb67fa108380ce502139054754c89feb9f3e",mobileSrc:"https://static.figma.com/uploads/3a887f58127d5e03c61c7884b9fce47ae6c6c16b",text:(0,A.t)("categories.homepage_highlight.visual_assets")},{category:so.LJ.whiteboarding,src:"https://static.figma.com/uploads/e1915a29a858e7c0d717471cf0108aeba02c7dbe",mobileSrc:"https://static.figma.com/uploads/bfeb514427f6279d7e6b4902a38fd7f576b394e4",text:(0,A.t)("categories.homepage_highlight.whiteboarding")}]})}),o.createElement(_9,{header:(0,A.t)("community.view_bar.all_resources"),content:o.createElement(_C,{onIntersectionChange:y})}),o.createElement("div",{className:k.cx.wFull.$},o.createElement(su,null)))))}var pn=a(740222),pi=a.n(pn),pl=a(135876),po=a(746058),ps=a(291129),pc=a(336599),pd=a(163056);let pm=[{img:"https://static.figma.com/uploads/49e43aec887df7422ff9643d11465bcdeded548e",color:sg.WGG},{img:"https://static.figma.com/uploads/c00f8b3e0cd9a66eb8c4ee4e6d307fff82c9ab27",color:sg.WGG},{img:"https://static.figma.com/uploads/3f772c66c1cddf1d0b6c5f8f41395bcafd135566",color:sg.WGG},{img:"https://static.figma.com/uploads/960d3a00ab8d8c4db2f27b7814c911ae974c770b",color:sg.BYv},{img:"https://static.figma.com/uploads/cda2753116908ec0abf57b611934479cebbcdbeb",color:sg.BYv},{img:"https://static.figma.com/uploads/37f4db88a8104a239f3d761763f8d7e0826d7765",color:sg.BYv}],pu=function({profile:e,onImageUploaded:t}){let a=o.useRef(null),r=(0,s.wA)(),n=(0,s.d4)(e=>e.loadingState),i=u4.Ai.loadingKeyForPayload({profileId:e.id}),l=(0,pc.VP)(n,i),c=o.useCallback(()=>{a.current?.click()},[]),d=o.useCallback(a=>{null!=a&&r(u4.Ai({profileId:e.id,file:a,onSuccessCallback:t}))},[r,t,e.id]),m=o.useCallback(async()=>{try{let e=a.current?.files;if(!e||0===e.length||!e[0])throw Error("File not found");let t=e[0];(0,nX.YU)(t);let r=await (0,cO.l8)(URL.createObjectURL(t));if(r.width>nX.M0||r.height>nX.Zs)throw Error((0,A.t)("community.profiles.cover_image_must_be_less_than_dimensions",{PROFILE_COVER_IMAGE_MAX_WIDTH:nX.M0,PROFILE_COVER_IMAGE_MAX_HEIGHT:nX.Zs}));if(r.width<nX.gZ||r.height<nX.xj)throw Error((0,A.t)("community.profiles.cover_image_must_be_at_least_dimensions",{PROFILE_COVER_IMAGE_MIN_WIDTH:nX.gZ,PROFILE_COVER_IMAGE_MIN_HEIGHT:nX.xj}));d(t)}catch(e){r(e$.s.error(e.message))}a.current&&(a.current.value="")},[r,d]);return o.createElement(o.Fragment,null,o.createElement("input",{type:"file",accept:"image/*",ref:a,onChange:m,style:{display:"none"}}),o.createElement(t_.B,{svg:pd.A,className:"profile_header--uploadIcon--FFtoL",onClick:c}),l&&o.createElement(td.qc,null))};function p_({profile:e}){let t=(0,s.d4)(t=>(0,nX.jG)(e,t)),a=(0,nX.si)(e),r=(0,p.kc)().cmty_deprecate_browse_as_admin?a:t,[n,i]=o.useState((0,sZ.g)()),l=o.useCallback(()=>{i((0,sZ.g)())},[]),c=o.useMemo(()=>e.redirect_cover_image_url?{backgroundColor:sg.Bj4,backgroundImage:`url(${e.redirect_cover_image_url}?${n})`}:function(e){if(null==e||!e.id)return;let t=pm[parseInt(e.id.length>=4?e.id.slice(e.id.length-4):"0")%pm.length];return{backgroundImage:`url(${t.img})`,backgroundColor:t.color}}(e),[e,n]);return o.createElement("div",{className:"profile_header--profileHeaderContainer--C-0mY",key:e?.cover_image_path,style:c},o.createElement("div",{className:"profile_header--profileHeaderAvatarContainer--1REx-"},o.createElement(tq.Ro,{entity:{...e,img_url:e?.img_urls["500_500"]||e?.img_url||void 0},size:96,className:"profile_header--avatarBackground--5XTWL"})),r&&o.createElement(pu,{profile:e,onImageUploaded:l}))}var pp=a(183297),pg=a(107897),pf=a(153234),pE=a(91271);let ph=/(https?:\/\/)?(www\.)?figma.com\/@/;function py(e){return o.createElement(pg.A,{options:{target:{url:"_blank"},attributes:{rel:"noopener nofollow ugc",onMouseDown:e=>{e.preventDefault(),e.stopPropagation()}},className:"formatted_expanding_textarea--blueLink--GWaek blue_link--blueLink--9rlnd",format:e=>e.replace(ph,"@")}},e)}class pv extends pf.uA{constructor(e){super(e),this.onChange=e=>{this.setState({value:e.target.value})},this.onMouseDown=e=>{this.props.readOnly||e.preventDefault(),this.setState({isEditing:!0})},this.onFocus=()=>{this.state.isEditing||this.setState({isEditing:!0})},this.onSubmit=e=>{this.props.submit&&this.props.submit(e)},this.onBlur=()=>{this.setState({isEditing:!1})},this.state={value:this.props.value,isEditing:!1}}componentDidUpdate(e){this.props.value!==e.value&&this.setState({value:this.props.value})}renderFormattedValue(){return o.createElement("div",{dir:"auto",className:"formatted_expanding_textarea--value--XJ2Gh"},this.props.formatter?this.props.formatter(this.state.value):this.state.value)}renderPlaceholder(){return o.createElement("div",{className:"formatted_expanding_textarea--placeholder--JJ8AZ"},this.props.readOnly?"":this.props.placeholder)}render(){let e=!this.props.readOnly&&this.state.isEditing,t=["formatted_expanding_textarea--container--3NuYC text--fontPos13--xW8hS text--_fontBase--QdLsd",e?"formatted_expanding_textarea--editMode--wvP9s":"formatted_expanding_textarea--viewMode--GHMnM",this.props.readOnly?"formatted_expanding_textarea--readOnly--w19iZ":"formatted_expanding_textarea--canEdit--UVjHq",this.props.className||""].join(" ");return o.createElement("div",{className:t,onMouseDown:this.onMouseDown,onFocus:this.onFocus,tabIndex:0},!e&&(this.state.value?this.renderFormattedValue():this.renderPlaceholder()),e&&o.createElement(pE.v,{maxLength:this.props.maxLength||1e4,onChange:this.onChange,value:this.state.value,placeholder:this.props.placeholder,submit:this.onSubmit,onBlur:this.onBlur,selectOnMount:!0,className:"formatted_expanding_textarea--expandingTextarea--LLtsJ"}))}}pv.displayName="FormattedExpandingTextarea";var pb=a(752207),pw=a(361656),pT=a(370855),pI=a(709595),pN=a(410424),px=a(941381),pC=a(301400),pS=a(93623),pk=a(492330),pA=a(354438),pR=a(746738);function pL(){return o.createElement(o.Fragment,null,o.createElement("div",{className:"monetization_metrics_tab_onboarding_modal--title--IfgQI text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,A.t)("community.seller.profiles.check_out_your_stats")),o.createElement("div",{className:"monetization_metrics_tab_onboarding_modal--description--2j8hj"},(0,A.t)("community.seller.profiles.added_some_metrics")))}let pD="metrics_tab_onboarding_key",pP="community_hub_view_bar--stickyHeaderIsSticky--jlnEf";class pF extends o.PureComponent{render(){return o.createElement("div",{className:`community_hub_view_bar--viewBar--T8-MS ${this.props.className||""}`},this.props.children)}}let pO=(0,s.Ng)(e=>({user:e.user||null}))(pF);class pM extends o.PureComponent{constructor(){super(...arguments),this.headerContentRef=o.createRef(),this.onIntersectionChange=e=>{this.node&&(e.isIntersecting?this.node.classList.remove(pP):e.boundingClientRect.y<window.innerHeight&&this.node.classList.add(pP))}}render(){return o.createElement("div",{className:["community_hub_view_bar--container--PBrf3",this.props.user?"community_hub_view_bar--viewBarSignedInSticky--swRMi":"community_hub_view_bar--viewBarSignedOutSticky--fpGkz"].join(" "),ref:e=>this.node=e},o.createElement(tu.a,{onIntersectionChange:this.onIntersectionChange,className:this.props.user?"community_hub_view_bar--scrollSentinelSignedIn--u73PI":"community_hub_view_bar--scrollSentinelSignedOut--9xL9d"}),o.createElement(pO,null,o.createElement("div",{ref:this.headerContentRef},this.props.children)))}}var pB=a(402609),pU=a(147829),pV=a(746806),pH=a(63666);let pW=(0,t2.r1)(nP.e9);function pj({onboardingKey:e}){let t=(0,C.md)(pW),a=(0,t0.e)({overlay:t5.O9D,priority:t8.N.SECONDARY_MODAL},[t]);return(0,u.h)(()=>{a.show({canShow:e=>!e})}),(0,_s.E)(a.uniqueId,"profile-metrics-tab-clicked",()=>{a.isShowing&&a.complete()}),o.createElement(pU.M,{isShowing:a.isShowing,userFlagOnShow:nP.e9},o.createElement(eg.fu,{name:"Community monetization creator dashboard onboarding"},o.createElement(pH.NJ,{targetKey:e,width:300,topPadding:16,shouldCenterArrow:pV.EL.FALLBACK,dismissModal:a.complete},o.createElement(pL,null))))}var pG=a(677664),p$=a(320741);let pz=(0,ez.nF)(async(e,t,{loadingKey:a})=>{try{let r=eG.Ay.post("/api/community/seller/stripe_dashboard");(0,p$.N)(r,e,a);let n=await r;if(!n?.data?.meta){t?.callback(!1);return}let i=n.data.meta;e.dispatch((0,pG.RK)({rawInput:i})),setTimeout(()=>{t?.callback(!0)},1e3)}catch(e){t?.callback(!1)}});var pY=a(583894),pK=a(607121),pQ=a(596578),pX=a(139387);let pq=(0,ad.Ju)(function(){let e=(0,s.wA)(),t=(0,eN.iZ)(),[a,r]=o.useState([]),[n,i]=o.useState(!0),[l,c]=o.useState(!0),[d,m]=o.useState(!1),[_,p]=o.useState(!1),g=o.useRef(null);(0,u.h)(()=>{pQ.C.getCmtyCreatorPayoutStatements({userId:t?.id}).then(({data:e})=>{i(!1),r(e.meta)}).catch(()=>{e(aD.F.enqueue({type:"get-payout-statements-error",message:(0,A.t)("community.seller.payout_statement_error"),error:!0}))})});let E=e=>new Date(e.year,e.month-1).toLocaleDateString(void 0,{year:"numeric",month:"long"}),h="creator_payout_statements_modal--scrollContainer--8j6P4";return _&&(l||(h+=" creator_payout_statements_modal--topBorder--OHBCp"),d||(h+=" creator_payout_statements_modal--bottomBorder--tNtIc")),o.createElement(am.Rw,{title:(0,A.t)("community.seller.community_payout_statements"),titleClassName:"creator_payout_statements_modal--title--t9wed",confirmText:(0,A.t)(0===a.length?"general.got_it":"general.done"),onConfirm:f.lQ,hideConfirmationTitle:!0,hideCancel:!0},n?o.createElement("div",{className:"creator_payout_statements_modal--loadingSpinner--HMTTZ"},o.createElement(td.kt,null)):o.createElement("div",null,0===a.length&&o.createElement("div",null,(0,A.tx)("community.seller.no_payout_statements_yet")),a.length>0&&o.createElement(o.Fragment,null,o.createElement("div",null,(0,A.tx)("community.seller.click_to_download_statements")),o.createElement(tm.P,{className:h,ref:g,onCanScrollChange:e=>{p(e)},onScroll:(e,t)=>{c(0===e),m(e+t.trackHeight>=t.scrollHeight)}},a.map(e=>o.createElement("a",{className:"creator_payout_statements_modal--payoutStatementRow--4fDH3",key:`payout-statement-${e.year}-${e.month}`,href:e.signed_s3_url,download:`payout_statement_${e.year}_${e.month}.csv`},o.createElement(t_.B,{svg:pX.A}),E(e)))))))},"CreatorPayoutStatementsModal");var pJ=a(647079);let pZ="profile_resources_grid--tabContainer--UsmoU",p0="profile_resources_grid--tabLink--8x9Of text--fontPos14--OL9Hp text--_fontBase--QdLsd",p1="profile_resources_grid--tabBadge--l97Nx",p2="profile_resources_grid--labelBadgeContainer--gc9j0",p8="profile_resources_grid--selected--6CtGL",p4="profile_resources_grid--newBadge--LOtSf",p3="profile_resources_grid--profileData--yzCa5 text--fontPos13--xW8hS text--_fontBase--QdLsd",p5="profile_resources_grid--profileDataReadOnly--Juje2 profile_resources_grid--profileData--yzCa5 text--fontPos13--xW8hS text--_fontBase--QdLsd",p9="profile_resources_grid--followsData--WkXSx",p6="profile_resources_grid--followsDataClickable--PHNwr",p7="profile_resources_grid--followsDataCount--MoS2I",ge="profile_resources_grid--loadingContainer--hsPEQ",gt="profile_resources_grid--loadingMoreContainer--jp4W1 profile_resources_grid--loadingContainer--hsPEQ",ga="profile_resources_grid--profileResourcesGridOuterContainer--ynOxv",gr="profile_resources_grid--profileMetricsStatsOuterContainer--FAXLb",gn="profile_resources_grid--profileMetricsTabLoadingButtonContent--lkd-l",gi="profile_resources_grid--profileMetricsTabLoadingButton--6tsqO",gl="profile_resources_grid--profileResourcesGridAndDataContainer--2gQaO",go="profile_resources_grid--emptyStateContainer--EJug9",gs="profile_resources_grid--emptyStateHeader--c9srx text--fontPos14--OL9Hp text--_fontBase--QdLsd",gc="profile_resources_grid--emptyStateText--oEJHa",gd="profile_resources_grid--emptyStateMetricLabel--XqzzA",gm="profile_resources_grid--bannerContainer--eb6mO",gu="profile_resources_grid--stripeDashboardButtonContainer--1DAQE",g_="profile_resources_grid--metricContainer--SuhZ3",gp="profile_resources_grid--creatorLink--Rmyz- text--fontPos13--xW8hS text--_fontBase--QdLsd",gg="profile_resources_grid--lockIcon--4VJCL",gf="profile_metrics_stats--divider--U2a8K";var gE=a(419902);let gh=(0,n5.jz)(iT.dxy);function gy({tooltipText:e}){return o.createElement(n9.z,{query:`(min-width: ${gh}px)`},o.createElement("span",{className:"profile_metrics_stats--infoTooltipContainer---MeEH","data-tooltip-type":ei.Ib.TEXT,"data-tooltip":e,"data-tooltip-max-width":"250"},o.createElement(t_.B,{svg:gE.A,className:"profile_metrics_stats--infoTooltip--lsZkn"})))}function gv({valueClassName:e,value:t,labelClassName:a,label:r,children:n}){return o.createElement("div",{className:g_},o.createElement("div",{className:e},t),o.createElement("div",{className:"profile_metrics_stats--metricLabelContainer--24AJ-"},o.createElement("span",{className:a},r),n))}function gb(){return o.createElement("div",{className:g_},o.createElement("div",{className:"profile_resources_grid--emptyStateMetric--ktaw6"}),o.createElement("div",{className:gd}))}function gw({children:e}){return o.createElement("div",{className:gr},o.createElement(gb,null),o.createElement("div",{className:gf}),o.createElement(gb,null),o.createElement("div",{className:gf}),o.createElement(gb,null),e)}function gT({totalViewCount:e,metricValueStyle:t,metricLabelStyle:a,totalPurchases:r,totalEarned:n,children:i}){return o.createElement("div",{className:gr},o.createElement(gv,{valueClassName:t,value:e,labelClassName:a,label:(0,A.t)("community.seller.total_views")}),o.createElement("div",{className:gf}),o.createElement(gv,{valueClassName:t,value:r,labelClassName:a,label:(0,A.t)("community.seller.total_purchases")},o.createElement(gy,{tooltipText:(0,A.t)("community.seller.total_purchases_includes")})),o.createElement("div",{className:gf}),o.createElement(gv,{valueClassName:t,value:n,labelClassName:a,label:(0,A.t)("community.seller.total_earned")},o.createElement(gy,{tooltipText:(0,A.t)("community.seller.all_sales_before_figmas_fees")})),i)}var gI=a(820113);let gN="resource_stat_row--rowContainer--rapbF",gx="resource_stat_row--resourceMetadataContainer--bdvI3",gC="resource_stat_row--allStatContainer--vXmae",gS="resource_stat_row--statContainer--gp6KZ",gk="resource_stat_row--statValue--69Rff text--fontPos24--YppUD text--_fontBase--QdLsd",gA="resource_stat_row--statLabel--bgvwH text--fontPos13--xW8hS text--_fontBase--QdLsd",gR="resource_stat_row--verticalDivider--Whn5d",gL="resource_stat_row--textMetadataContainer--oQv9J",gD=(0,n5.jz)(iT.ZI8);function gP({resource:e}){return(0,ow.Qo)(e)?o.createElement(oC.Cv,{resource:e,isMetaHidden:!0}):"plugin"===(0,ow.Vm)(e)?o.createElement(oC.cS,{resource:e,isMetaHidden:!0}):o.createElement(oC.bN,{resource:e,isMetaHidden:!0})}function gF({resource:e}){let{name:t,created_at:a}=(0,ow.qD)(e),r=new Date(a).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}),n=e.monetized_resource_metadata?(0,sG.bV)(e.monetized_resource_metadata):"",i=`/community/${(0,ow.ss)(e)}/${e.id}`;return o.createElement("div",{className:gx},o.createElement("div",{className:"resource_stat_row--thumbnailWrapper--M0vtN"},o.createElement(gP,{resource:e})),o.createElement(n9.z,{query:`(min-width: ${gD}px)`},o.createElement("div",{className:gL},o.createElement("div",null,o.createElement(dR.A6,{to:i,className:"resource_stat_row--resourceName--LFWUk text--fontPos14--OL9Hp text--_fontBase--QdLsd"},t),o.createElement("div",{className:"resource_stat_row--publishDate--oDkDH text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,A.t)("community.seller.last_updated_on",{date:r}))),o.createElement("div",{className:"resource_stat_row--price--1YYVn text--fontPos14--OL9Hp text--_fontBase--QdLsd"},n))))}function gO({value:e,label:t}){return o.createElement("div",{className:gS},o.createElement("span",{className:gk},e),o.createElement("span",{className:gA},t))}function gM(){return o.createElement("div",{className:gS},o.createElement("span",{className:gk},o.createElement("div",{className:"profile_resources_grid--emptyStateStatsMetric--qs3QD"})),o.createElement("span",{className:gA},o.createElement("div",{className:gd})))}function gB(){return o.createElement("div",{className:gx},o.createElement("div",{className:"resource_stat_row--emptyThumbnailWrapper--NNO1Y resource_stat_row--thumbnailWrapper--M0vtN"},o.createElement(td.kt,null)),o.createElement(n9.z,{query:`(min-width: ${gD}px)`},o.createElement("div",{className:gL},o.createElement("div",null,o.createElement("div",{className:"resource_stat_row--emptyResourceName--gZCwX"}),o.createElement("div",{className:"resource_stat_row--emptyPublishDate--WVyqw"})),o.createElement("div",{className:"resource_stat_row--emptyPrice--HlOMG"}))))}function gU({resource:e}){return o.createElement("div",{className:gN},o.createElement(gB,null),o.createElement("div",{className:gC},o.createElement(gM,null),o.createElement("div",{className:gR}),o.createElement(gM,null),o.createElement("div",{className:gR}),o.createElement(gM,null),o.createElement("div",{className:gR}),o.createElement(gM,null)))}function gV({resource:e}){let t=(0,s.wA)(),{id:a,is_subscription:r}=e.monetized_resource_metadata,n=(0,J.Rs)(ee.aom,{monetizedResourceMetadataId:a}),i=new gI.vr("usd");if("loading"===n.status)return o.createElement(gU,{resource:e});if("loaded"!==n.status||n.errors?.length)return t(aD.F.enqueue({message:(0,A.t)("community.actions.unable_to_load_stats_for_a_resource"),error:!0})),o.createElement(gU,{resource:e});{let t=n.data.communityM10nResourceStat,a={monetized_resource_metadata_id:t?.monetizedResourceMetadataId,all_time_total_earned:parseInt(t?.allTimeTotalEarned||"0"),monthly_total_earned:parseInt(t?.monthlyTotalEarned||"0"),num_purchases:parseInt(t?.numPurchases||"0")};return o.createElement("div",{className:gN},o.createElement(gF,{resource:e}),o.createElement("div",{className:gC},o.createElement(gO,{label:(0,A.t)("community.seller.views_label",{num:e.view_count}),value:e.view_count.toLocaleString()}),o.createElement("div",{className:gR}),r?o.createElement(gO,{label:(0,A.t)("community.seller.subscribers_label",{num:a.num_purchases}),value:a.num_purchases.toLocaleString()}):o.createElement(gO,{label:(0,A.t)("community.seller.purchases_label",{num:a.num_purchases}),value:a.num_purchases.toLocaleString()}),o.createElement("div",{className:gR}),o.createElement(gO,{label:(0,A.t)("community.seller.total_earned"),value:i.formatMoney(a.all_time_total_earned)}),o.createElement("div",{className:gR}),o.createElement(gO,{label:(0,A.t)("community.seller.earned_this_month"),value:i.formatMoney(a.monthly_total_earned)})))}}function gH({paidResources:e}){return(0,p.kc)().cmty_m10n_turn_creator_dash_off?o.createElement(o.Fragment,null):o.createElement("div",{className:"resource_stats_list--resourceStatsListContainer--3Xmb3"},o.createElement("p",{className:"resource_stats_list--resourceCount--SHJGY text--fontPos14--OL9Hp text--_fontBase--QdLsd"},(0,A.tx)("community.seller.resources_for_sale",{numResources:e.length})),e.map((e,t,a)=>o.createElement("div",{key:e.id,className:"resource_stats_list--resourceStatContainer--GxfxK"},o.createElement(gV,{resource:(0,oI.Ch)(e)}),t<a.length-1&&o.createElement("div",{key:`${e.id}-divider`,className:"resource_stats_list--divider--F4HpT"}))))}function gW(){return o.createElement("svg",{width:"274",height:"133",viewBox:"0 0 274 133",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M124.179 65.3591C125.935 65.3591 127.359 63.9355 127.359 62.1795C127.359 60.4235 125.935 59 124.179 59C122.423 59 121 60.4235 121 62.1795C121 63.9355 122.423 65.3591 124.179 65.3591Z",fill:"var(--color-icon-disabled, #D9D9D9)"}),o.createElement("path",{d:"M149.861 62.1795C149.861 63.9355 148.437 65.3591 146.681 65.3591C144.925 65.3591 143.502 63.9355 143.502 62.1795C143.502 60.4235 144.925 59 146.681 59C148.437 59 149.861 60.4235 149.861 62.1795Z",fill:"var(--color-icon-disabled, #D9D9D9)"}),o.createElement("path",{d:"M123.092 73.4119V71.9119H120.092V73.4119C120.092 81.9723 127.032 88.9119 135.592 88.9119C144.152 88.9119 151.092 81.9723 151.092 73.4119V71.9119H148.092V73.4119C148.092 80.3154 142.496 85.9119 135.592 85.9119C128.688 85.9119 123.092 80.3154 123.092 73.4119Z",fill:"var(--color-icon-disabled, #D9D9D9)"}),o.createElement("path",{d:"M232.862 51.8912L214.45 64.9049L240.999 74.0556L209.704 95.1483L208.027 92.6606L234.332 74.931L207.938 65.8337L231.13 49.4413L232.862 51.8912Z",fill:"var(--color-icon-disabled, #D9D9D9)"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M82.2828 0H148.05L185.283 38.0308V47.1645L188.993 45.3563L196.545 23.4452L218.456 30.9974L239.307 20.8359L249.468 41.6862L271.414 49.2505L263.85 71.1971L274 92.0236L253.173 102.174L245.609 124.12L223.663 116.556L202.812 126.717L192.651 105.867L185.283 103.327V133H82.2828V109.541L31.3574 128.076C27.4651 129.493 23.1613 127.486 21.7446 123.593L16.9646 110.46C16.4165 108.954 17.1953 107.612 18.0665 106.887C18.9369 106.163 20.3041 105.686 21.6406 106.175C24.3362 107.162 27.171 107.252 29.8132 106.29C36.5897 103.824 40.064 94.9827 36.8557 86.168C33.6474 77.3533 25.303 72.8139 18.5265 75.2803C15.8843 76.242 13.7706 78.1332 12.3398 80.6217C11.6304 81.8554 10.2763 82.3687 9.14412 82.3734C8.01076 82.3782 6.55152 81.8507 6.00341 80.3447L1.22339 67.2118C-0.193304 63.3194 1.8136 59.0156 5.70593 57.5989L18.1219 53.0799C18.1237 53.0772 18.1258 53.0738 18.1282 53.0695C18.1529 53.0257 18.1896 52.9235 18.1889 52.7663C18.1882 52.6115 18.1509 52.4593 18.0918 52.3414C18.0341 52.2263 17.9741 52.1774 17.9418 52.1588C14.9078 50.4143 12.5056 47.7738 11.2767 44.3974C8.07639 35.6046 14.0889 25.815 23.9574 22.2231C33.8259 18.6313 44.7244 22.2658 47.9247 31.0587C49.1536 34.435 49.0107 38.0019 47.8079 41.2884C47.7951 41.3234 47.7805 41.3994 47.8104 41.5248C47.8409 41.653 47.9101 41.7936 48.0091 41.9127C48.1096 42.0335 48.2035 42.0882 48.2505 42.1059C48.2551 42.1076 48.2589 42.1089 48.262 42.1098L62.0875 37.0777C65.9798 35.661 70.2836 37.6679 71.7003 41.5603L82.2828 70.6354V0ZM182.283 40.1429V48.6266V56.5V76.5V98V102.293V130H85.2828V108.449V107C85.2828 107 85.2828 102.5 85.2828 98.5V78.8779V3H145.919V40.1429H182.283ZM185.283 50.5018V100.154L194.803 103.435L204.195 122.706L223.466 113.314L243.75 120.306L250.742 100.021L269.989 90.6411L260.609 71.3943L267.601 51.1092L247.316 44.1175L237.924 24.847L218.654 34.2385L198.404 27.2591L191.424 47.5087L185.283 50.5018ZM68.8813 42.5863L82.2828 79.4069V106.348L30.3314 125.257C27.996 126.107 25.4137 124.903 24.5637 122.567L19.7881 109.447C19.789 109.443 19.7903 109.44 19.792 109.435C19.8097 109.388 19.8644 109.294 19.9852 109.194C20.1043 109.095 20.2449 109.025 20.3731 108.995C20.4985 108.965 20.5745 108.98 20.6095 108.992C23.896 110.195 27.4629 110.338 30.8392 109.109C39.6321 105.909 43.2666 95.0105 39.6748 85.1419C36.0829 75.2734 26.2933 69.2609 17.5005 72.4613C14.1241 73.6901 11.4836 76.0923 9.7391 79.1263C9.72052 79.1586 9.67163 79.2186 9.55647 79.2764C9.43858 79.3354 9.28639 79.3728 9.13155 79.3734C8.97443 79.3741 8.87215 79.3374 8.82842 79.3127C8.82414 79.3103 8.82071 79.3082 8.81802 79.3064L4.04247 66.1857C3.19245 63.8503 4.39659 61.268 6.73199 60.418L19.1602 55.8945C20.6662 55.3464 21.1936 53.8871 21.1889 52.7538C21.1841 51.6216 20.6709 50.2675 19.4371 49.5581C16.9487 48.1273 15.0575 46.0135 14.0958 43.3714C11.6294 36.5949 16.1688 28.2505 24.9835 25.0422C33.7981 21.8339 42.6392 25.3082 45.1057 32.0847C46.0673 34.7269 45.9772 37.5617 44.9907 40.2573C44.5015 41.5938 44.9788 42.961 45.7029 43.8314C46.4278 44.7026 47.7698 45.4814 49.2758 44.9333L63.1136 39.8968C65.449 39.0468 68.0312 40.2509 68.8813 42.5863ZM148.919 5.17631L180.215 37.1429H148.919V5.17631Z",fill:"var(--color-icon-disabled, #D9D9D9)"}))}function gj({paidResources:e,primaryUserId:t}){let a=(0,s.wA)(),r=(0,eN.iZ)(),[n,i]=o.useState(!1),[l,c]=o.useState(!1),d=(0,J.Rs)(ee.wW7,{userId:t}),m=()=>{c(!0),a((0,ep.to)({type:pK.s,data:{setupStripeCallback:e=>{i(!1),c(!1),e||a(e$.s.error((0,A.t)("community.seller.unable_to_launch_stripe_onboarding_please_check_your_details")))}}}))},u=()=>{i(!0),(0,tt.Cu)({user_id:r.id},"stripe_dasbhboard_link_clicked"),a(pz({callback:e=>{i(!1),e||a(e$.s.error((0,A.t)("community.seller.unable_to_open_stripe_dashboard")))}}))};function _(){return r?.stripe_account_status===pY.P5.ENABLED||r?.stripe_account_status===pY.P5.DISABLED?o.createElement("div",{className:gu},o.createElement("button",{className:"profile_resources_grid--stripeDashboardButton--LHyS8 profile_resources_grid--stripeSetupButton--HNei8 profile_resources_grid--stripeSetupButtonDisabled--EUiQo text--fontPos13--xW8hS text--_fontBase--QdLsd",onClick:u},o.createElement("div",{className:gn},n&&o.createElement("div",{className:gi},o.createElement(td.kt,{shouldMatchTextColor:!0})),(0,A.tx)("community.seller.view_stripe_dashboard"))),o.createElement("button",{className:"profile_resources_grid--blueLink--WjRaq blue_link--blueLink--9rlnd",onClick:()=>{a((0,ep.to)({type:pq,data:{}}))}},(0,A.tx)("community.seller.view_payout_statements"))):o.createElement("div",{className:gu},o.createElement("button",{className:"profile_resources_grid--stripeSetupButton--HNei8 profile_resources_grid--stripeSetupButtonDisabled--EUiQo text--fontPos13--xW8hS text--_fontBase--QdLsd",disabled:n,onClick:m},o.createElement("div",{className:gn},n&&o.createElement("div",{className:gi},o.createElement(td.kt,{shouldMatchTextColor:!0})),o.createElement("div",null,g))),o.createElement("div",{className:"profile_resources_grid--creatorAgreement--seV1h text--fontPos11--2LvXf text--_fontBase--QdLsd"},f))}let g=(0,A.tx)("community.seller.set_up_stripe"),f=(0,A.tx)("community.seller.agree_to_figma_terms_of_service",{link:pJ.Hl});n?g=(0,A.tx)("community.seller.stripe_loading_text"):r?.stripe_account_status===pY.P5.STARTED_ONBOARDING&&(g=(0,A.tx)("community.seller.finish_stripe_setup_button"));let E="profile_resources_grid--metricValue--w627p text--fontPos48--H177Q text--_fontBase--QdLsd",h="profile_resources_grid--metricLabel--1bOis text--fontPos13--xW8hS text--_fontBase--QdLsd",y=(0,A.tx)("community.seller.resource_metrics_coming_soon"),v=(0,A.tx)("community.seller.working_on_bringing_you_more_in_depth_metrics");r?.stripe_account_status!==pY.P5.ENABLED&&(E="profile_resources_grid--metricValueDisabled--mYlXF profile_resources_grid--metricValue--w627p text--fontPos48--H177Q text--_fontBase--QdLsd",h="profile_resources_grid--metricLabelDisabled--dTvu- profile_resources_grid--metricLabel--1bOis text--fontPos13--xW8hS text--_fontBase--QdLsd");let b=e.length>0,w=e.reduce((e,t)=>e+t.view_count,0);return y=(0,A.tx)("community.seller.youre_all_set_up_to_sell_on_community"),v=(0,A.tx)("community.seller.to_publish_your_first_resource"),r?.stripe_account_status!==pY.P5.ENABLED&&(y=(0,A.tx)("community.seller.resources_youre_selling_will_appear_here"),v=(0,A.tx)("community.seller.well_show_you_stripe_metrics")),o.createElement("div",{className:"profile_resources_grid--profileMetricsTabOuterContainer--d-PPR"},o.createElement("div",{className:"profile_resources_grid--stripeBannerContainer--xRX1g"},o.createElement(ov.S,{isFirstTimeLoading:l})),(()=>{let e=o.createElement(gw,null,o.createElement(_,null));if((0,p.kc)().cmty_m10n_turn_creator_dash_off||"loading"===d.status)return e;if("loaded"!==d.status||d.errors?.length)return a(aD.F.enqueue({message:(0,A.t)("community.actions.unable_to_load_creator_stats"),error:!0})),e;{let e=d.data.userMonetizationMetadata?.stripeCmtyCreatorStatsMeta,t={num_purchases:e?.numPurchases||e?.num_purchases||0,all_time_total_earned:e?.allTimeTotalEarned||e?.all_time_total_earned||0};return o.createElement(gT,{totalViewCount:w,metricValueStyle:E,metricLabelStyle:h,totalPurchases:t[pY.VU.NUM_PURCHASES],totalEarned:(0,sG.up)(t[pY.VU.ALL_TIME_TOTAL_EARNED])},o.createElement(_,null))}})(),o.createElement("div",{className:"profile_resources_grid--divider--GZynB"}),b?o.createElement(gH,{paidResources:e}):o.createElement("div",{className:go},o.createElement("div",{className:"profile_resources_grid--profileMetricsStatsEmptyStateIcon--DvLAr"},o.createElement(gW,null)),o.createElement("div",{className:gs},y),o.createElement("div",{className:gc},v)))}var gG=a(239671),g$=a(217288);let gz=(0,t2.r1)(nP.cX);function gY({profile:e}){let[t,a]=o.useState(!1),r=(0,C.md)(gz),n=(0,s.wA)();if(t||r.data)return o.createElement(o.Fragment,null);let i=o.createElement("div",null,(0,A.tx)("community.profile.creator_banner.you_can_now_add_image_and_video_previews"),o.createElement(eg.L0,{href:"https://help.figma.com/hc/en-us/articles/22166943560983-Grow-your-audience-on-Community#mediapreviews",trackingProperties:{profileId:e.id},target:"_blank"},(0,A.tx)("community.learn_more"))),l={id:mP.om.CommunityResourceCreatorBanner,bannerType:mP.x1.INFO,icon:g$.A,iconSize:"large",mainText:(0,A.t)("community.profile.creator_banner.lets_spruce_things_up"),description:i,dismissible:!0,positionStatic:!0};return o.createElement(eg.fu,{name:"Profile Creator Upsell Banner",properties:{name:"profile_creator_upsell_banner",profileId:e.id}},o.createElement(mD.C,{content:l,editorType:gG.nT.Design,onDismiss:()=>{n(tS.b({[nP.cX]:!0})),a(!0),(0,V.sx)("cmty_profile_creator_upsell_banner_dismissed",{profileId:e.id})}}))}var gK=a(560718),gQ=a(688734),gX=(e=>(e.COPY_LINK="Copy profile link",e.RESTRICT_USER="Restrict user",e.UNRESTRICT_USER="Unrestrict user",e))(gX||{});let gq=e=>{switch(e){case"Copy profile link":return(0,A.t)("community.profiles.copy_profile_link");case"Restrict user":return(0,A.t)("community.profiles.restrict_user");case"Unrestrict user":return(0,A.t)("community.profiles.unrestrict_user");default:return""}};function gJ(){let e=(0,s.wA)(),t=(0,eN.iZ)(),a=(0,s.d4)(e=>e.dropdownShown?.data?.profile),r=(0,s.d4)(e=>e.dropdownShown?.data?.targetRect);if(!a)return o.createElement(o.Fragment,null);let n=a.is_restricted_by_current_user,i=()=>{e(aU.lW({stringToCopy:`${window.location.origin}${(0,mQ.bL)(a.profile_handle)}`}))},l=a=>{e(u4._8({blockedProfileId:a,profileId:t?.community_profile_id||"",onSuccess:()=>{e(aD.F.enqueue({message:"Restricted this user's comments",type:"profile-restricted-change",button:{text:"Undo",action:()=>{m(a)}}})),(0,V.sx)("comment_profile_restricted",{restricted_by_profile_id:t?.community_profile_id,restricted_profile_id:a,entry_point:"profile_page"})}}))},c=()=>{e((0,ep.to)({type:gQ.H,data:{onBlock:()=>l(a.id),confirmationTitle:`Restrict ${a.name}?`,confirmButtonText:"Restrict"}}))},d=a=>{e(u4._8({blockedProfileId:a,profileId:t?.community_profile_id||"",onSuccess:()=>{e(aD.F.enqueue({message:"Restricted this user's comments",type:"profile-restricted-change",button:{text:"Undo",action:()=>{m(a)}}})),(0,V.sx)("comment_profile_restricted",{restricted_by_profile_id:t?.community_profile_id,restricted_profile_id:a,entry_point:"profile_page"})}}))},m=a=>{e(u4.dL({blockedProfileId:a,profileId:t?.community_profile_id||"",onSuccess:()=>{e(aD.F.enqueue({message:"Unrestricted this user's comments",type:"profile-restricted-change",button:{text:"Undo",action:()=>{d(a)}}})),(0,V.sx)("comment_profile_unrestricted",{unrestricted_by_profile_id:t?.community_profile_id,unrestricted_profile_id:a,entry_point:"profile_page"})}}))},u=[{displayText:gq("Copy profile link")}];return(t?.community_profile_id&&a.entity_type===oL.o1.USER&&(n?u.push({displayText:gq("Unrestrict user")}):u.push({displayText:gq("Restrict user")})),r)?o.createElement(a_.j,{dispatch:e,items:u,showPoint:!0,parentRect:r,onSelectItem:(e,t)=>{"Copy profile link"===e.displayText?i():"Restrict user"===e.displayText?c():"Unrestrict user"===e.displayText&&m(a.id)},minWidth:96}):null}gJ.displayName="ProfileMoreActionsDropdown";var gZ=a(728859);function g0(e){let t=(0,ev.Um)(),a=o.useRef(null),r=!!(t&&t.type===gK.N9),n=(0,s.wA)(),i=o.useCallback(()=>{n(ea.oB())},[n]);return o.useEffect(()=>(window.addEventListener("scroll",i,!1),()=>{window.removeEventListener("scroll",i,!1)}),[i]),o.createElement("div",null,o.createElement(el.K0,{svg:gZ.A,ref:a,onClick:r=>{r.stopPropagation();let l=a.current;t?i():l&&n(ea.j7({type:gK.N9,data:{profile:e.profile,targetRect:l.getBoundingClientRect()}}))},className:r?"profile_more_actions_button--iconButtonSelected--d85bU profile_more_actions_button--iconButton--RVCRS raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6":"profile_more_actions_button--iconButton--RVCRS raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6","data-tooltip-type":ei.Ib.TEXT,"data-tooltip":(0,A.t)("community.profiles.profile_actions")}),r&&o.createElement(gJ,null))}g0.displayName="ProfileMoreActionsButton";var g1=a(708389);let g2=new class{constructor(){this.CommunityResourceSavesSchemaValidator=(0,o8.ch)(),this.getCommunityResourceSaves=e=>this.CommunityResourceSavesSchemaValidator.validate(({xr:t})=>t.getPaginated("/api/resource_saves",o8.td.toAPIParameters(e))),this.CommunityUserResourceInstallsSchemaValidator=(0,o8.ch)(),this.getCommunityUserResourceInstalls=e=>this.CommunityUserResourceInstallsSchemaValidator.validate(({xr:t})=>t.getPaginated("/api/resources/installed/user",o8.td.toAPIParameters(e))),this.ProfileHasLikesSchemaValidator=(0,o8.vh)(),this.profileHasLikes=()=>this.ProfileHasLikesSchemaValidator.validate(async({xr:e})=>await e.get("/api/profile/has_likes"))}},g8=g1.f.byProperty("saved_at",g1.f.BY_DATETIME);function g4(){let[e,t]=o.useState([]),[a,r]=o.useState([]),[n,i]=o.useState([]),[l,s]=o.useState([]),[c,d]=o.useState(void 0),[m,_]=o.useState(void 0),[p,g]=o.useState(!1),[f,E]=o.useState(!1),h=l=>{Promise.all([y(l),v(l)]).then(([o,c])=>{let d=o?.meta.hub_files||[],m=c?.meta.plugins||[],u=c?.meta.widgets||[],_=e,p=a,g=n;l?.reset&&(_=[],p=[],g=[]);let{mergedResults:f,unmergedResultsList:[E,h,y]}=(0,pp.n0)([[..._,...d],[...p,...m],[...g,...u]],g8);l?.reset?s(f):s(e=>[...e,...f]),t(E),r(h),i(y)})},y=e=>{let t=c;if(e?.reset&&(t=void 0),null!==t&&!p)return g(!0),g2.getCommunityResourceSaves({cursor:t,pageSize:30}).then(e=>(d(e.data.pagination.nextPage),e.data)).finally(()=>{g(!1)})},v=e=>{let t=m;if(e?.reset&&(t=void 0),null!==t&&!f)return E(!0),g2.getCommunityUserResourceInstalls({cursor:t,pageSize:30}).then(e=>(_(e.data.pagination.nextPage),e.data)).finally(()=>{E(!1)})};(0,u.h)(()=>{h()});let b=p||f;return o.createElement(o.Fragment,null,o.createElement("div",{className:ge},o.createElement("div",{className:ga},b||0!==l.length?o.createElement(oR,{adtlClassName:oA("profile"),resources:l,viewContext:"ProfileSavesView",showMoreCallback:h}):o.createElement("div",{className:"profile_resources_grid--emptySavesTabContainer--4oQx-"},o.createElement(g5,null)),o.createElement("div",{className:gt},b&&o.createElement(td.kt,null)))))}function g3(){return o.createElement("svg",{width:"86",height:"126",viewBox:"0 0 86 126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M46.1772 97.1417L43 94.6L39.8228 97.1417L38.5735 95.58L43 92.0388L47.4266 95.58L46.1772 97.1417ZM36.6457 99.6835L35.3963 98.1217L29.042 103.205L30.2914 104.767L36.6457 99.6835ZM27.1142 107.309L25.8648 105.747L19.5105 110.83L20.7599 112.392L27.1142 107.309ZM17.5827 114.934L16.3333 113.372L9.97901 118.456L11.2284 120.017L17.5827 114.934ZM8.05125 122.559L6.80185 120.997L3.62469 123.539C2.96993 124.063 2 123.597 2 122.758V118.933H0V122.758C0 125.274 2.90979 126.672 4.87408 125.101L8.05125 122.559ZM0 115.108H2V107.457H0V115.108ZM0 103.632H2V95.9812H0V103.632ZM0 92.156H2V84.5054H0V92.156ZM0 80.6801H2V73.0296H0V80.6801ZM0 69.2043H2V61.5538H0V69.2043ZM0 57.7285H2V50.078H0V57.7285ZM0 46.2527H2V38.6022H0V46.2527ZM0 34.7769H2V27.1263H0V34.7769ZM0 23.3011H2V15.6505H0V23.3011ZM0 11.8253H2V8C2 6.90362 2.29224 5.88157 2.80175 5.00098L1.07063 3.99936C0.389718 5.1762 0 6.54259 0 8V11.8253ZM3.99936 1.07063L5.00097 2.80175C5.88157 2.29224 6.90362 2 8 2H11.8889V0H8C6.54259 0 5.1762 0.389719 3.99936 1.07063ZM15.7778 0V2H23.5556V0H15.7778ZM27.4444 0V2H35.2222V0H27.4444ZM39.1111 0H46.8889V2H39.1111V0ZM50.7778 0V2H58.5556V0H50.7778ZM62.4444 0V2H70.2222V0H62.4444ZM74.1111 0V2H78C79.0964 2 80.1184 2.29224 80.999 2.80175L82.0006 1.07063C80.8238 0.389718 79.4574 0 78 0H74.1111ZM84.9294 3.99936L83.1983 5.00097C83.7078 5.88157 84 6.90362 84 8V11.8253H86V8C86 6.54259 85.6103 5.1762 84.9294 3.99936ZM86 15.6505H84V23.3011H86V15.6505ZM86 27.1264H84V34.7769H86V27.1264ZM86 38.6022H84V46.2527H86V38.6022ZM86 50.078H84V57.7285H86V50.078ZM86 61.5538H84V69.2043H86V61.5538ZM86 73.0296H84V80.6802H86V73.0296ZM86 84.5054H84V92.156H86V84.5054ZM86 95.9812H84V103.632H86V95.9812ZM86 107.457H84V115.108H86V107.457ZM86 118.933H84V122.758C84 123.597 83.0301 124.063 82.3753 123.539L79.1981 120.997L77.9488 122.559L81.1259 125.101C83.0902 126.672 86 125.274 86 122.758V118.933ZM74.7716 120.017L76.021 118.456L69.6667 113.372L68.4173 114.934L74.7716 120.017ZM65.2401 112.392L66.4895 110.83L60.1352 105.747L58.8858 107.309L65.2401 112.392ZM55.7086 104.767L56.958 103.205L50.6037 98.1217L49.3543 99.6835L55.7086 104.767Z",fill:"var(--color-icon-tertiary, $figmaFGBlack3Opaque)"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M42 49V60H44V49H55V47H44V36H42V47H31V49H42Z",fill:"var(--color-icon-tertiary, $figmaFGBlack3Opaque)"}))}function g5(){return o.createElement("div",{className:k.cx.flex.itemsCenter.flexColumn.gap16.$},o.createElement(g3,null),o.createElement("div",{className:k.cx.flex.flexColumn.gap8.alignCenter.$},o.createElement("h2",{className:k.cx.font14.fontMedium.$},(0,A.tx)("community.saves.no_saves_title")),o.createElement("p",{className:k.cx.font11.$},(0,A.tx)("community.saves.no_saves_subtitle"))),o.createElement(ts.nR,{target:"_blank",onClick:()=>{m.Ay.push("/community")}},(0,A.tx)("community.explore_resources")))}var g9=a(348425),g6=a(727475),g7=a(26096),fe=a(327115);class ft extends o.Component{constructor(){super(...arguments),this.getProfileLink=()=>{if(this.props.profile&&this.props.profile.profile_handle)return`figma.com/@${this.props.profile.profile_handle}`;let e=this.props.profile.id;return`figma.com/profile/${e}`},this.getProfileLinkText=()=>{let e=this.getProfileLink(),t=o.createElement(ts.N_,{href:`https://${e}`,className:g6.nf,trusted:!0},e);return this.props.profile.primary_user_id?(0,A.tx)("community.profiles.your_profile_is_visible_to_the_public_at",{link:t}):this.props.profile.entity_type===oL.o1.TEAM?(0,A.tx)("community.profiles.your_teams_profile_is_visible_to_the_public_at",{link:t}):this.props.profile.entity_type===oL.o1.ORG?(0,A.tx)("community.profiles.your_organizations_profile_is_visible_to_the_public_at",{link:t}):void 0}}render(){return this.props.profile?o.createElement("div",{className:this.props.className||""},o.createElement("div",{className:g6.cI},o.createElement(g9.t,{svg:g7.A,fallbackSvg:fe.A,useOriginalSrcFills_DEPRECATED:!0,className:g6.q3}),o.createElement("span",{className:g6._M},this.getProfileLinkText()))):null}}ft.displayName="PublicProfileBanner";var fa=a(157285),fr=a(754961),fn=a(573812);let fi=(0,n5.jz)(iT.d8i),fl=(0,n5.jz)(iT.wOr);function fo(e){let{canEdit:t,canSellOnCommunity:a}=e,r=(0,eN.iZ)(),n=o.useCallback(()=>{if(r)return(0,pI.tx)(r)},[r]);return r&&t?o.createElement(o.Fragment,null,a?o.createElement("div",{role:"link",tabIndex:0,onClick:n,className:gp},(0,A.tx)("community.profiles.contact_creator_support")):o.createElement("div",{className:"profile_resources_grid--sellOnCommunity--7r6cV"},o.createElement(ts.CY,{href:"https://www.figma.com/community-creators",className:gp,target:"_blank",trusted:!0},(0,A.tx)("community.profiles.interested_in_selling_your_resources")))):o.createElement(o.Fragment,null)}function fs(e){let{updateProfile:t,canEdit:a,isViewingCurrentUserProfile:r,showFollowsModal:n}=e,i=(0,pT.t)(e.profile.id),l=(0,nX.si)(i),s=(0,p.kc)().cmty_deprecate_browse_as_admin?l:a;return i?o.createElement(fc,{profile:i,canEdit:s,updateProfile:t,isViewingCurrentUserProfile:r,showFollowsModal:n}):o.createElement(o.Fragment,null)}function fc(e){let{profile:t,canEdit:a,updateProfile:r,isViewingCurrentUserProfile:n}=e,i=e.profile.name,l=t.profile_handle||null,s=e=>a=>{e in t&&t[e]!==a&&r({[e]:a})},c=(a||t.description)&&o.createElement(pv,{value:t.description||"",placeholder:(0,A.t)("community.profiles.add_a_description"),className:a?p3:p5,submit:s("description"),formatter:py,readOnly:!a,maxLength:160}),d=(a||t.location)&&o.createElement(pv,{value:t.location||"",placeholder:(0,A.t)("community.profiles.add_a_location"),className:a?p3:p5,submit:s("location"),readOnly:!a,maxLength:30}),m=(a||t.website)&&o.createElement(pv,{value:t.website||"",placeholder:(0,A.t)("community.profiles.add_website_url"),className:a?p3:p5,submit:s("website"),formatter:py,readOnly:!a,maxLength:100}),u=(a||t.twitter)&&o.createElement(pv,{value:t.twitter||"",placeholder:(0,A.t)("community.profiles.add_x_handle"),className:a?p3:p5,submit:s("twitter"),formatter:e=>ow.HD.test(e)?py(`https://twitter.com/${e}`):py(e),readOnly:!a,maxLength:100}),_=(a||t.instagram)&&o.createElement(pv,{value:t.instagram||"",placeholder:(0,A.t)("community.profiles.add_instagram_handle"),className:a?p3:p5,submit:s("instagram"),formatter:e=>ow.Co.test(e)?py(`https://www.instagram.com/${e}`):py(e),readOnly:!a,maxLength:100}),p=o.createElement(pR.W,{profile:t,followClassName:"profile_resources_grid--followButton--iTOYw text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",followingClassName:"profile_resources_grid--followingButton--1oSba profile_resources_grid--followButton--iTOYw text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L text--fontPos11--2LvXf text--_fontBase--QdLsd",unfollowClassName:"profile_resources_grid--unfollowButton--MmYUn profile_resources_grid--followingButton--1oSba profile_resources_grid--followButton--iTOYw text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L text--fontPos11--2LvXf text--_fontBase--QdLsd",trackingProperties:{viewingProfileId:t.id}}),g=(0,sP.$M)(t.follower_count),f=(0,sP.$M)(t.following_count),E=o.createElement("div",{className:"profile_resources_grid--followsDataContainer--TnbJI"},o.createElement("div",{className:O()(p9,{[p6]:!0}),onClick:()=>e.showFollowsModal(mQ.g3.FOLLOWERS)},(0,A.tx)("community.profiles.follower_count",{followerCount:g,formattedFollowerCount:o.createElement("span",{className:p7},g)})),t.primary_user_id&&o.createElement("div",{className:O()(p9,{[p6]:!0}),onClick:()=>e.showFollowsModal(mQ.g3.FOLLOWING)},(0,A.tx)("community.profiles.following_count",{followingCount:o.createElement("span",{className:p7},f)}))),h=o.createElement("div",{className:"profile_resources_grid--profileDataHandleAndFollow--6kpYs"},o.createElement("div",{className:"profile_resources_grid--profileDataHandle--DB20D"},"@",l),t.current_user_is_followed&&o.createElement(cY.v_,null)),y=o.createElement(g0,{profile:t}),v=n?null:o.createElement("div",{className:"profile_resources_grid--followMoreActionsContainer--uQNdm"},p,y),b=o.createElement(fo,{canEdit:a,canSellOnCommunity:(0,ow.kf)(t)});return o.createElement("div",null,o.createElement("h1",{className:"profile_resources_grid--profileDataName--xw46b text--fontPos24Whyte--gYiFz text--_fontBaseWhyte--efAjI"},o.createElement(pb.G,{truncate:"end",text:i,className:"profile_resources_grid--profileNameText--WdY6t"}),o.createElement(pw.l,{profile:t,tooltip:!0})),l&&h,v,c,E,d,m,u,_,b)}(e=>{let t={resources:null,loading:!1};class a extends o.Component{constructor(e){super(e),this.isLoading=()=>{let e=this.props.tab===mQ.g3.LIKES&&null===this.state.likedResourcesState.resources&&this.state.likedResourcesState.loading;return null===this.props.resources||e},this.redirectToLanding=()=>{m.Ay.push("/community")},this.filterPaidResources=e=>!!e.monetized_resource_metadata,this.state={likedResourcesState:t,didFetchFail:!1,isLoadingStripe:!1}}componentDidUpdate(e){e.tab===this.props.tab||this.props.tab!==mQ.g3.LIKES||null!==this.state.likedResourcesState.resources||this.state.likedResourcesState.loading||this.fetchNextLikedResources(),this.props.tab===mQ.g3.SAVES&&this.props.authedActiveCommunityProfileId!==this.props.profile.id&&this.props.dispatch(ea.$T({...this.props.currentSelectedView,profileTab:mQ.g3.RESOURCES}))}componentDidMount(){this.props.tab!==mQ.g3.LIKES||null!==this.state.likedResourcesState.resources||this.state.likedResourcesState.loading||this.fetchNextLikedResources()}async fetchNextLikedResources(){if((0,pp.u9)(this.state.likedResourcesState)){this.setState({likedResourcesState:{...this.state.likedResourcesState,loading:!0},didFetchFail:!1});try{let e=await (0,pp.En)(`/api/profile/${this.props.profile.id}/likes`,pp.vs,this.state.likedResourcesState,pp.AS),t=[],a=[],r=[];e.resources.forEach(e=>{e.type===oI.vt.HUB_FILE?t.push(e):e.type===oI.vt.PLUGIN?a.push(e):e.type===oI.vt.WIDGET&&r.push(e)}),this.props.dispatch(pN.D3(t)),this.props.dispatch(px.Vx(a)),this.props.dispatch(px.uV(r)),this.setState({likedResourcesState:{resources:[...this.state.likedResourcesState.resources||[],...e.resources],loading:!1,pagination:e.pagination},didFetchFail:!1})}catch{this.setState({didFetchFail:!0}),this.props.dispatch(e$.s.error((0,A.t)("community.error.an_error_has_occurred_please_refresh_the_page_and_try_again")))}}}renderEmptyState(){let e,t,a,r;return this.props.tab===mQ.g3.LIKES?(e=(0,A.t)("community.profiles.nothing_liked_yet"),t=(0,A.t)("community.profiles.see_whats_being_created_in_figma"),a=o.createElement(ts.nR,{target:"_blank",onClick:this.redirectToLanding},(0,A.tx)("community.landing_page.explore")),r=fa.A):(e=(0,A.t)("community.profiles.nothing_published_yet"),t=(0,A.t)("community.profiles.see_whats_being_created_in_figma"),a=o.createElement(ts.nR,{target:"_blank",onClick:this.redirectToLanding},(0,A.tx)("community.profiles.explore")),r=fr.A),o.createElement("div",{className:go},o.createElement(t_.B,{svg:r,useOriginalSrcFills_DEPRECATED:!0}),o.createElement("div",{className:gs},e),o.createElement("div",{className:gc},t),a)}render(){let e=[mQ.g3.RESOURCES,mQ.g3.FOLLOWERS,mQ.g3.FOLLOWING,mQ.g3.METRICS].includes(this.props.tab)?this.props.resources:this.state.likedResourcesState.resources||[],t=((0,p.kc)().cmty_rdp_creator_nudge_email||(0,p.kc)().cmty_rdp_creator_modal)&&this.props.authedActiveCommunityProfileId===this.props.profile.id;return this.props.tab===mQ.g3.METRICS?o.createElement(pl.x,{isLoading:this.isLoading(),className:ge},()=>((0,x.B1)(e),o.createElement(gj,{paidResources:e.filter(this.filterPaidResources),primaryUserId:this.props.profile.primary_user_id}))):this.props.tab===mQ.g3.SAVES?o.createElement(g4,null):o.createElement(pl.x,{isLoading:this.isLoading(),className:ge},()=>((0,x.B1)(e),e.length>0)?o.createElement("div",{className:ga},t&&o.createElement("div",{className:"profile_resources_grid--profileResourcesGridBanner--6L4qI"},o.createElement(gY,{profile:this.props.profile})),o.createElement(oR,{adtlClassName:oA("profile"),resources:e,viewContext:eD.e0.COMMUNITY_HUB_PROFILE,showMoreCallback:()=>{this.props.tab===mQ.g3.LIKES&&this.fetchNextLikedResources()}}),this.props.tab===mQ.g3.LIKES&&(0,pp.u9)(this.state.likedResourcesState)&&!this.state.didFetchFail&&o.createElement("div",{className:gt},o.createElement(td.kt,null))):this.renderEmptyState())}}a.displayName="PublicProfileResourcesGrid",e.ConnectedPublicProfileResourcesGrid=(0,s.Ng)((e,t)=>{let a=t.profile;return{currentUser:e.user||null,isWithinProfileScope:(0,nX.E1)(a,e),currentOrgId:e.currentUserOrgId||null,authedActiveCommunityProfileId:e.authedActiveCommunityProfile?.id||null,currentSelectedView:e.selectedView}})(a);let r=e=>{let t=e.current_hub_file_version_id?e.current_hub_file_version_id:e.current_plugin_version_id||"";return e.versions[t].created_at},n=aq.M4.Query({fetch:async e=>{let{profileId:t}=e,[a,r,n,i,l]=await Promise.all([pC.H.getProfile({profileId:t}),pS.V.getProfile({profileId:t,currentOrgId:void 0}),pk.U.getProfile({profileId:t,currentOrgId:void 0}),(0,uR.UM)(t),(0,uR.Jr)(t)]);return{hubFiles:a.data.meta,pluginsAndWidgets:[...r.data.meta,...n.data.meta,...i,...l]}},output:e=>{let{profileId:t,currentOrgId:a}=e.args,n=(0,s$.$2)((0,s$.i8)(e.data.pluginsAndWidgets),a),i=Object.values((0,s$.xK)(n,t)),l=(0,cM.uj)(e.data.hubFiles,t);return(0,M.sortByDateFn)([...l,...i],r)}});e.PublicProfileResourcesGrid=function(t){let a=(0,eb.dq)(),[r]=(0,aq.IT)(n({profileId:t.profile.id,currentOrgId:a}));return o.createElement(e.ConnectedPublicProfileResourcesGrid,{...t,resources:r.data})}})(i||(i={}));let fd=i.PublicProfileResourcesGrid;(e=>{class t extends o.Component{constructor(){super(...arguments),this.updateProfile=e=>{this.props.dispatch(u4.aP({profileId:this.props.profileId,...e}))},this.onFilesPluginsTabClick=()=>{(0,V.sx)("Profile Resources Tab Clicked",{tabName:"resources",profileId:this.props.profileId,viewingUserId:this.props.currentUser?.id}),this.props.dispatch(ea.$T({...this.props.currentSelectedView,profileTab:mQ.g3.RESOURCES}))},this.onMetricsTabClick=()=>{(0,V.sx)("Profile Resources Tab Clicked",{tabName:"metrics",profileId:this.props.profileId,viewingUserId:this.props.currentUser?.id}),(0,ao.YQ)({id:"profile-metrics-tab-clicked"}),this.props.dispatch(ea.$T({...this.props.currentSelectedView,profileTab:mQ.g3.METRICS}))},this.onSavesTabClick=()=>{(0,ao.YQ)({id:"cmty-profile-saves"}),(0,V.sx)("Profile Resources Tab Clicked",{tabName:mQ.g3.SAVES,profileId:this.props.profileId,viewingUserId:this.props.currentUser?.id}),this.props.dispatch(ea.$T({...this.props.currentSelectedView,profileTab:mQ.g3.SAVES}))},this.showFollowsModal=e=>{this.props.dispatch(ea.$T({...this.props.currentSelectedView,profileTab:e}))}}render(){let e=o.createElement(fd,{...this.props,tab:this.props.profileTab}),t=this.props.profile.primary_user_id&&this.props.authedActiveCommunityProfileId===this.props.profile.id?o.createElement(o.Fragment,null,o.createElement("button",{className:O()(p0,p1,{[p8]:this.props.profileTab===mQ.g3.SAVES}),onClick:this.onSavesTabClick,tabIndex:0,"data-onboarding-key":"cmty-profile-save-tab"},(0,A.tx)("community.profiles.saved"),o.createElement(t_.B,{svg:fn.A,className:gg,"data-tooltip-type":ei.Ib.TEXT,"data-tooltip":(0,A.t)("community.only_visible_to_you")}))):o.createElement(o.Fragment,null),a=o.createElement("div",{className:"profile_resources_grid--profileDataContainer--e4QVX text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement(fs,{profile:this.props.profile,canEdit:this.props.canEdit,updateProfile:this.updateProfile,isViewingCurrentUserProfile:this.props.authedActiveCommunityProfileId===this.props.profile.id,showFollowsModal:this.showFollowsModal}),this.props.isWithinProfileScope&&this.props.communityStatusOnProfile!==cO.Cw.ADMIN_IN_DIFFERENT_WORKSPACE&&o.createElement(n9.z,{query:`(min-width: ${fl}px)`},o.createElement(ft,{profile:this.props.profile,className:gm})),!this.props.isWithinProfileScope&&o.createElement(pA.H,{profile:this.props.profile,className:gm})),r=!!(this.props.isWithinProfileScope&&(0,ow.af)(this.props.currentUser))||!!(0,p.kc)().cmty_expand_extension_m10n&&!!this.props.profile.associated_users?.find(e=>e.user_id===this.props.currentUser?.id&&!0===e.is_primary_user),n=o.createElement(pM,{user:this.props.currentUser},o.createElement("div",{className:pZ},o.createElement("div",{className:O()(p0,p1,{[p8]:this.props.profileTab===mQ.g3.RESOURCES}),onClick:this.onFilesPluginsTabClick,role:"button",tabIndex:0},(0,A.tx)("community.profiles.resources")),t,r&&o.createElement(eg.fu,{name:eD.e0.COMMUNITY_PROFILE_METRICS_TAB},o.createElement("div",{className:p2},o.createElement("div",{className:O()(p0,p1,p4,{[p8]:this.props.profileTab===mQ.g3.METRICS}),onClick:this.onMetricsTabClick,role:"button",tabIndex:0},(0,A.tx)("community.seller.profiles.metrics"),o.createElement(t_.B,{svg:fn.A,className:gg,"data-tooltip-type":ei.Ib.TEXT,"data-tooltip":(0,A.t)("community.only_visible_to_you")})))))),i=o.createElement("div",{className:pZ},o.createElement("div",{className:O()(p0,p1,{[p8]:this.props.profileTab===mQ.g3.RESOURCES}),onClick:this.onFilesPluginsTabClick,role:"button",tabIndex:0},(0,A.tx)("community.profiles.resources")),t,r&&o.createElement(eg.fu,{name:eD.e0.COMMUNITY_PROFILE_METRICS_TAB},o.createElement(pB.p,null,o.createElement(pj,{onboardingKey:pD})),o.createElement("div",{className:p2},o.createElement("div",{className:O()(p0,p1,p4,{[p8]:this.props.profileTab===mQ.g3.METRICS}),onClick:this.onMetricsTabClick,role:"button",tabIndex:0},o.createElement("span",{"data-onboarding-key":pD},(0,A.tx)("community.seller.profiles.metrics")),o.createElement(t_.B,{svg:fn.A,className:gg})))));return o.createElement(o.Fragment,null,o.createElement(n9.z,{query:`(min-width: ${fi}px)`},i,o.createElement("div",{className:gl},a,e)),o.createElement(n9.z,{query:`(max-width: ${fi-1}px)`},o.createElement("div",{className:gl},a,n,e)))}}t.displayName="PublicProfileResourcesGridAndData",e.ConnectedPublicProfileResourcesGridAndData=(0,s.Ng)((e,t)=>{let a=t.profile,r=mQ.g3.RESOURCES,n=!1;if("selectedView"in e){let t=e.selectedView?.profileTab;n=(0,nX.E1)(a,e),t&&(t!==mQ.g3.METRICS||n)&&(r=t)}return{profileId:a.id,currentUser:"user"in e?e.user:null,canEdit:(0,nX.jG)(a,e),isWithinProfileScope:n,currentSelectedView:"selectedView"in e?e.selectedView:null,profileTab:r,communityStatusOnProfile:(0,cO.kJ)(e,a),authedActiveCommunityProfileId:"authedActiveCommunityProfile"in e?e.authedActiveCommunityProfile?.id??null:null}})(t)})(l||(l={}));let fm=l.ConnectedPublicProfileResourcesGridAndData;function fu({currentUser:e,currentSelectedView:t,authedActiveCommunityProfileId:a,currentProfile:r,dispatch:n}){let i=(0,oT.o5)(),l=(0,sD.S)(t?.profileTab,fp);return o.useEffect(()=>{if(r&&l)return n((0,ep.to)({type:ps.w,data:{currentSelectedView:t,profile:r,currentUserProfileId:e?.community_profile_id||null,authedActiveCommunityProfileId:a,dispatch:n}})),()=>{n(ep.Ce())}},[a,l,r,t,e?.community_profile_id,n]),o.createElement(pl.x,{className:"community_hub_public_profile--loadingContainer--GUi6s",isLoading:!r},()=>o.createElement(eg.fu,{name:eD.e0.COMMUNITY_HUB_PROFILE,properties:{handle:r.profile_handle,profileId:r.id}},o.createElement("div",{className:e?"community_hub_public_profile--signedInProfileContainer--8jWX9":"community_hub_public_profile--signedOutProfileContainer--nIxAf"},o.createElement("div",null,o.createElement(p_,{profile:r}),o.createElement(fm,{profile:r})),i()&&!(0,d.y3)()&&o.createElement("div",{className:"community_hub_public_profile--footerContainer--L38Gh"},o.createElement(su,null)),o.createElement(s1.Ay,null))))}fu.displayName="CommunityHubProfile";let f_=(0,s.Ng)(e=>({currentUser:"user"in e?e.user:null,currentSelectedView:"selectedView"in e?e.selectedView:null,authedActiveCommunityProfileId:"authedActiveCommunityProfile"in e?e.authedActiveCommunityProfile?.id??null:null}))(fu),fp=pi()(mQ.g3,["FOLLOWERS","FOLLOWING"]),fg=aq.M4.Query({fetch:async e=>(await po.s.getHandle({handle:e})).data.meta});function ff(){let{profileHandle:e}=(0,m$.Rd)(mQ.xn),[t]=(0,aq.IT)(fg(e)),a=(0,s.wA)();return o.useEffect(()=>{"errors"===t.status&&(404===t.errors.status&&m.Ay.redirect("/404"),a(e$.s.error((0,A.t)("community.actions.error_fetching_profile_information"))))},[a,t]),o.createElement(f_,{currentProfile:t.data?.profile??null})}var fE=a(30970),fh=a(157663);let fy={All:({active:e})=>o.createElement("svg",{width:"19",height:"19",viewBox:"-1 -1 21 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e?o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 6V2H6V6H2ZM0 1C0 0.447715 0.447715 0 1 0H7C7.55228 0 8 0.447715 8 1V7C8 7.55228 7.55228 8 7 8H1C0.447715 8 0 7.55228 0 7V1ZM2 17V13H6V17H2ZM0 12C0 11.4477 0.447715 11 1 11H7C7.55228 11 8 11.4477 8 12V18C8 18.5523 7.55228 19 7 19H1C0.447715 19 0 18.5523 0 18V12ZM13 13V17H17V13H13ZM12 11C11.4477 11 11 11.4477 11 12V18C11 18.5523 11.4477 19 12 19H18C18.5523 19 19 18.5523 19 18V12C19 11.4477 18.5523 11 18 11H12ZM12 0C11.4477 0 11 0.447715 11 1V7C11 7.55228 11.4477 8 12 8H18C18.5523 8 19 7.55228 19 7V1C19 0.447715 18.5523 0 18 0H12Z",fill:"var(--color-icon-selected, #0D99FF)"}):o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 6V2H6V6H2ZM0 1C0 0.447715 0.447715 0 1 0H7C7.55228 0 8 0.447715 8 1V7C8 7.55228 7.55228 8 7 8H1C0.447715 8 0 7.55228 0 7V1ZM2 17V13H6V17H2ZM0 12C0 11.4477 0.447715 11 1 11H7C7.55228 11 8 11.4477 8 12V18C8 18.5523 7.55228 19 7 19H1C0.447715 19 0 18.5523 0 18V12ZM13 13V17H17V13H13ZM12 11C11.4477 11 11 11.4477 11 12V18C11 18.5523 11.4477 19 12 19H18C18.5523 19 19 18.5523 19 18V12C19 11.4477 18.5523 11 18 11H12ZM13 6V2H17V6H13ZM11 1C11 0.447715 11.4477 0 12 0H18C18.5523 0 19 0.447715 19 1V7C19 7.55228 18.5523 8 18 8H12C11.4477 8 11 7.55228 11 7V1Z",fill:"var(--color-icon, rgba(0, 0, 0, 0.8))"})),Files:e=>o.createElement("svg",{width:"18",height:"23",viewBox:"0 0 18 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M-0.000976562 0.00390625H11.4132L17.999 6.58969V22.0039H-0.000976562V0.00390625ZM1.99902 2.00391V20.0039H15.999V8.00391H9.99902V2.00391H1.99902ZM11.999 3.41812L14.5848 6.00391H11.999V3.41812Z",fill:"var(--color-icon, rgba(0, 0, 0, 0.8))"})),Plugins:e=>o.createElement("svg",{width:"18",height:"24",viewBox:"0 0 18 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 2C7.12831 2 6 3.10615 6 4.29412C6 4.80364 6.18423 5.32346 6.52975 5.77907C6.86869 6.22599 6.8635 6.76903 6.69667 7.1662C6.52648 7.57138 6.10414 8 5.46502 8H1.99902V21.9961H16V19.6417C15.4694 19.8705 14.8924 20 14.2942 20C11.6161 20 10 17.5466 10 15C10 12.4534 11.6161 10 14.2942 10C14.8924 10 15.4694 10.1295 16 10.3583V8H12.535C11.8959 8 11.4735 7.57138 11.3033 7.1662C11.1365 6.76903 11.1313 6.22599 11.4703 5.77907C11.8158 5.32346 12 4.80364 12 4.29412C12 3.10615 10.8717 2 9 2ZM4 4.29412C4 1.61609 6.45341 0 9 0C11.5466 0 14 1.61609 14 4.29412C14 4.89237 13.8705 5.46938 13.6417 6H16.125C17.1605 6 18 6.83947 18 7.875V11.465C18 12.1041 17.5714 12.5264 17.1662 12.6966C16.769 12.8635 16.226 12.8687 15.7791 12.5297C15.3235 12.1842 14.8037 12 14.2942 12C13.1062 12 12 13.1283 12 15C12 16.8717 13.1062 18 14.2942 18C14.8037 18 15.3235 17.8158 15.7791 17.4703C16.226 17.1313 16.769 17.1365 17.1662 17.3034C17.5714 17.4736 18 17.8959 18 18.535V22.1211C18 23.1566 17.1605 23.9961 16.125 23.9961H1.87402C0.838488 23.9961 -0.000976562 23.1566 -0.000976562 22.1211V7.875C-0.000976562 6.83947 0.838488 6 1.87402 6H4.35834C4.12951 5.46938 4 4.89237 4 4.29412Z",fill:"var(--color-icon, rgba(0, 0, 0, 0.8))"})),Widgets:e=>o.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.41421 10.5854L3.5146 8.485V5.51451V3.51451H5.5146H8.48509L10.5854 1.41421L11.9996 0L13.4138 1.41421L15.5141 3.51451H18.4846H20.4846V5.51451V8.485L22.585 10.5854L23.9992 11.9996L22.585 13.4138L20.4846 15.5142V18.4845V20.4845H18.4846H15.5143L13.4138 22.585L11.9996 23.9992L10.5854 22.585L8.48491 20.4845H5.5146H3.5146V18.4845V15.5142L1.41421 13.4138L0 11.9996L1.41421 10.5854ZM5.5146 8.485V5.51451H8.48509H9.31352L9.8993 4.92872L11.9996 2.82843L14.0999 4.92872L14.6857 5.51451H15.5141H18.4846V8.485V9.31343L19.0704 9.89921L21.1708 11.9996L19.0704 14.1L18.4846 14.6858V15.5142V18.4845H15.5143H14.6859L14.1001 19.0703L11.9996 21.1708L9.89912 19.0703L9.31334 18.4845H8.48491H5.5146V15.5142V14.6858L4.92882 14.1L2.82843 11.9996L4.92882 9.89921L5.5146 9.31343V8.485ZM13.2526 8.65802L13.9111 7.90544L12.4059 6.58843L11.7474 7.34101L8.24742 11.341L6.79623 12.9995H9H12.7962L10.7474 15.341L10.0889 16.0936L11.5941 17.4106L12.2526 16.658L15.7526 12.658L17.2038 10.9995H15H11.2038L13.2526 8.65802Z",fill:"var(--color-icon, rgba(0, 0, 0, 0.8))"})),Union:e=>o.createElement("svg",{width:"20",height:"24",viewBox:"0 0 20 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 6C14 8.20914 12.2091 10 10 10C7.79086 10 6 8.20914 6 6C6 3.79086 7.79086 2 10 2C12.2091 2 14 3.79086 14 6ZM16 6C16 9.31371 13.3137 12 10 12C6.68629 12 4 9.31371 4 6C4 2.68629 6.68629 0 10 0C13.3137 0 16 2.68629 16 6ZM2.25203 22C3.14012 18.5495 6.27232 16 10 16C13.7277 16 16.8599 18.5495 17.748 22H2.25203ZM10 14C14.8379 14 18.8734 17.4355 19.8 22C19.9311 22.6462 20 23.3151 20 24H18H2H0C0 23.3151 0.0688605 22.6462 0.200036 22C1.12658 17.4355 5.16208 14 10 14Z",fill:"var(--color-icon, rgba(0, 0, 0, 0.8))"}))};function fv({category:e,rdpImpressionId:t}){let a=(0,st.N)(`(max-width: ${iT._C6})`),{parent_category:r}=e||{parent_category:null},n=(0,sD.S)(r?.url_slug,so.LJ),i=(0,sD.S)(e.url_slug,so.LJ),l=!!t,s=[r&&n&&{text:r?.title,linkProps:{to:new ss.IE({categorySlug:n}).to,trackingEventName:"cmty_breadcrumbs_category",trackingProperties:{name:"category_breadcrumb_clicked",category_slug:n,category_text:r.title,rdpImpressionId:t,is_mobile:a}}},i&&{text:(0,A.Yd)(e.i18n_meta.title,e.title),linkProps:{to:new ss.IE({categorySlug:i}).to,trackingEventName:"cmty_breadcrumbs_category",trackingProperties:{name:"category_breadcrumb_clicked",category_slug:i,category_text:e.title,rdpImpressionId:t,is_mobile:a}}}].filter(Boolean);return o.createElement(sn,{breadcrumbs:s,surface:l?"resource_page":"category"})}function fb({category:e,showTags:t=!1}){let a=(0,sD.S)(e.url_slug,so.LJ);if(!a||e.selected_tag)return null;let r=t?e.tags.map(e=>({to:new ss.IE({categorySlug:a}).href+`/${e.url_slug}`,title:e.text,translatedTitle:(0,A.Yd)(e.i18n_meta.text,e.text),urlSlug:e.text})):e.child_categories?e.child_categories.filter(e=>(0,sD.N)(e.url_slug,so.LJ)&&"other"!==e.title.toLowerCase()).map(e=>({to:new ss.IE({categorySlug:e.url_slug}).href,title:e.title,translatedTitle:(0,A.Yd)(e.i18n_meta.title,e.title),urlSlug:e.url_slug})):[];return 0===r.length?null:o.createElement("div",{className:"category_links_container--subcategoriesContainer--6e1tK"},r.map(({to:e,title:a,translatedTitle:r,urlSlug:n})=>o.createElement(eg.o3,{key:e,trackingEventName:"cmty_category",trackingProperties:{name:t?"tag_link_clicked":"subcategory_link_clicked",category_slug:n,text:a,to:e},to:e,className:"category_links_container--subcategory--Wzmn3 text--fontPos13--xW8hS text--_fontBase--QdLsd"},r)))}var fw=a(890710);function fT({categorySlug:e,category:t,isTagsEnabled:a,isFeedPage:r=!1}){let n=(0,st.N)(`(max-width: ${iT._C6})`),{parent_category:i}=t||{parent_category:null},l=(0,sD.S)(i?.url_slug,so.LJ),s=(0,oT.kk)(),c=(r||!s())&&i&&l;return t?o.createElement("div",{className:"category_banner--categoryBannerRedesign--Ri6Fg"},o.createElement("div",{className:O()("category_banner--headerContainer--Wysim",{"category_banner--breadcrumbsPadding--o8hp4":s()})},s()&&o.createElement(fv,{category:t}),o.createElement("div",{className:O()("category_banner--categoryHeaderRedesign--NN5On text--fontPos24Whyte--gYiFz text--_fontBaseWhyte--efAjI",{[k.cx.flexColumn.$]:n})},c&&o.createElement(o.Fragment,null,o.createElement(eg.o3,{to:new ss.IE({categorySlug:l}).to,trackingEventName:"cmty_category",trackingProperties:{name:"category_breadcrumb_clicked",category_slug:i.url_slug,from_category_slug:e,is_mobile:n},className:"category_banner--categoryBannerParent--bx7AV"},n?o.createElement("div",{className:"category_banner--mobileBackButton--hZ3hI"},o.createElement(t_.B,{svg:fw.A,style:{fill:(0,mZ.TD)("default")}})):(0,A.Yd)(i.i18n_meta.title,i.title)),!n&&o.createElement(t_.B,{svg:_3.A,style:{fill:(0,mZ.TD)("default")}})),o.createElement("h1",null,function(e){let t=e.selected_tag,a=t?.i18n_meta.h1_title||e.i18n_meta.title,r=t?.h1_title||e.title;return(0,A.Yd)(a,r)}(t))),o.createElement("p",{className:"category_banner--categoryDescriptionRedesign--chvSi text--fontPos13--xW8hS text--_fontBase--QdLsd"},function(e){let t=e.selected_tag,a=t?.i18n_meta.description||e.i18n_meta.description,r=t?.description||e.description;return(0,A.Yd)(a,r)}(t))),o.createElement(fb,{category:t,showTags:a&&!!t.tags.length}),(0,p.kc)().piper_cmty_home_banner&&e===so.LJ.presentations&&o.createElement("div",{className:"category_banner--categorySlidesPromoBanner--itNB4"},o.createElement(_7,null))):null}function fI({category:e}){return e&&e.extended_description?o.createElement("div",{className:"category_extended_description--extendedDescriptionContainer--TTPGo"},o.createElement("div",{className:"category_extended_description--title--hucIj text--fontPos24--YppUD text--_fontBase--QdLsd"},(0,A.tx)("categories.about")),o.createElement("p",{className:"category_extended_description--extendedDescription--KngAg text--fontPos13--xW8hS text--_fontBase--QdLsd"},function(e){let t=e.selected_tag,a=t?.i18n_meta.extended_description||e.i18n_meta.extended_description,r=t?.extended_description||e.extended_description;return(0,A.Yd)(a,r)}(e))):null}var fN=a(927092),fx=a(117688),fC=a(236705),fS=a(83958);let fk={files:fx.A,plugins:fC.A,widgets:fS.A,profiles:fN.A,mixed:fr.A};function fA(e){if(e.isError)return null;let t=o.createElement("span",{className:"empty_search_state--bold--s4eFD"},e.query);switch(e.resourceType){case dV.L.SearchResourceTypes.FILES:if(e.view.price===_n.C.FREE)return(0,A.tx)("community.search.empty_state_hub_files_free",{query:t});if(e.view.price===_n.C.PAID)return(0,A.tx)("community.search.empty_state_hub_files_paid",{query:t});return(0,A.tx)("community.search.empty_state_hub_files",{query:t});case dV.L.SearchResourceTypes.PLUGINS:if(e.view.price===_n.C.FREE)return(0,A.tx)("community.search.empty_state_public_plugins_free",{query:t});if(e.view.price===_n.C.PAID)return(0,A.tx)("community.search.empty_state_public_plugins_paid",{query:t});return(0,A.tx)("community.search.empty_state_public_plugins",{query:t});case dV.L.SearchResourceTypes.WIDGETS:if(e.view.price===_n.C.FREE)return(0,A.tx)("community.search.empty_state_public_widgets_free",{query:t});if(e.view.price===_n.C.PAID)return(0,A.tx)("community.search.empty_state_public_widgets_paid",{query:t});return(0,A.tx)("community.search.empty_state_public_widgets",{query:t});case dV.L.SearchResourceTypes.PROFILES:return(0,A.tx)("community.search.empty_state_creators",{query:t});case dV.L.SearchResourceTypes.MIXED:default:if(e.view.price===_n.C.FREE)return(0,A.tx)("community.search.no_resources_matching_free",{query:t});if(e.view.price===_n.C.PAID)return(0,A.tx)("community.search.no_resources_matching_paid",{query:t});return(0,A.tx)("community.search.no_resources_matching",{query:t})}}function fR(e){return o.createElement("div",{className:"empty_search_state--emptyState--2TAUS search_results_view--emptyState--HtHm1 tiles_view--emptyState--jfzsE text--fontPos11--2LvXf text--_fontBase--QdLsd"},o.createElement(t_.B,{className:"empty_search_state--emptyStateIllustrations--BnydB search_results_view--emptyStateIllustrations--CN9Y8",svg:fk[e.resourceType],useOriginalSrcFills_DEPRECATED:!0}),o.createElement("div",{className:"empty_search_state--emptyStateTextWrapper--n2j3d search_results_view--emptyStateTextWrapper--zg-Cu"},o.createElement("div",{className:"empty_search_state--emptyStateText--Bv9hN search_results_view--emptyStateText---YT8b ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},o.createElement(fA,{...e}))))}var fL=a(592597);function fD(){var e;let t;let a=(0,oT.YQ)()(),{categorySlug:r,tagSlug:n}=(0,m$.Rd)(ss.IE),i=(0,m$.vA)(ss.IE),l=(0,o.useMemo)(()=>(r===so.LJ.presentations&&void 0===i.resource_type&&(i.editor_type=uu.k.Editors.SLIDES,i.resource_type=dV.L.BrowseResourceTypes.FILES),{resourceType:i.resource_type??dV.L.BrowseResourceTypes.MIXED,editorType:i.editor_type??uu.k.Editors.ALL,price:i.price??_n.C.ALL,sortBy:i.sort_by??(0,uk.H)()}),[i,r]),{trackResourceImpression:c,flushAndResetResourceImpressions:u}=pa({extraProperties:{sort:i.sort_by,resourceType:i.resource_type}}),[_,p]=(0,o.useState)(!0),[g,f]=(0,o.useState)(!1),E=(0,oT.o5)(),h=(0,st.N)(`(max-width: ${iT.d8i})`),y=(0,st.N)(`(max-width: ${iT.g8m})`),[v]=(0,aq.IT)((0,fL.Zp)({categorySlug:r,tagSlug:n})),[b]=(0,aq.IT)((0,fL.R5)(r));o.useEffect(()=>{u()},[r,u]);let w="loaded"!==v.status?null:v.data,T=n||"loaded"!==b.status?null:b.data,{resources:I,loadMore:N,canLoadMore:x,loading:C}=_N((e=w?.editor_types[0],{...l,category:r,tags:n,editorType:e||l.editorType,limit:48}),"loaded"===v.status),S=(0,o.useMemo)(()=>{let e=new Set;return T&&T.shelf_content.forEach(t=>{e.add(t.id)}),e},[T]),A=(0,o.useMemo)(()=>I.filter(e=>!S.has(e.id)),[I,S]),R=(0,o.useMemo)(()=>T?(0,ow.o7)(T.shelf_content,{editor_type:l.editorType,price:l.price,resourceType:l.resourceType}):[],[T,l.editorType,l.price,l.resourceType]),L=(0,o.useMemo)(()=>[...R,...A],[R,A]),D=(0,o.useRef)(null),P=(0,s.d4)(e=>!!(e.authedActiveCommunityProfile?.team_id||e.authedActiveCommunityProfile?.org_id));(0,o.useEffect)(()=>{C||(_&&p(!1),f(!1))},[_,C]);let F=w?.meta_title;if((0,o.useEffect)(()=>{F&&(document.title=F)},[F]),!w)return null;if(_&&(C||"loading"===v.status||"loading"===b.status))return o.createElement("div",{className:k.cx.p10.$},o.createElement(o7.y$,null));let O=!C&&0===L.length,M=C&&!g,B=l.resourceType===dV.L.BrowseResourceTypes.PLUGINS&&(M||L.every(oI.I0));return t=O?o.createElement(fR,{resourceType:l.resourceType,query:r,view:l}):B?o.createElement(_f,{plugins:L,onIntersectionChange:(e,t)=>{t&&c(e)},isOrgTeamBrowsing:P,isLoading:M}):o.createElement(_T,{resources:L,maxGridDim:{cols:y?2:h?3:4},mobileMaxGridDim:{cols:1},onIntersectionChange:(e,t)=>{t&&c(e)},isLoading:M,loadingTileCount:8}),o.createElement(o.Fragment,null,o.createElement(fT,{category:w,categorySlug:r,isTagsEnabled:a}),o.createElement("div",{className:"category_page--feedContainer--9f3SB text--fontPos15--IR8IB text--_fontBase--QdLsd"},o.createElement(__,{allowedEditorTypes:w.editor_types,containerRef:D,filterState:l,onUpdate:e=>{let t={};e.forEach(({key:e,value:a})=>{t[e]=a});let a={...l,...t};w.editor_types[0]&&(a.editorType=w.editor_types[0]),m.Ay.replace(new ss.IE({categorySlug:r,tagSlug:n},{resource_type:a.resourceType,editor_type:a.editorType,price:a.price}).href)},context:"category"}),o.createElement("div",{className:"category_page--feed--j1AWz text--fontPos13--xW8hS text--_fontBase--QdLsd"},t,x&&o.createElement(sp,{onClick:e=>{e.preventDefault(),N(),f(!0)},isLoading:g,isMoreToFetch:x}),o.createElement(fI,{category:w}),E()&&!(0,d.y3)()&&o.createElement("div",{className:"category_page--footerContainer--RNpoP"},o.createElement(su,null)))))}function fP(){let{categorySlug:e,tagSlug:t}=(0,m$.Rd)(ss.IE);return o.createElement(eg.fu,{name:eD.e0.COMMUNITY_HUB_CATEGORY,properties:{category:e,tag:t}},o.createElement(fD,null))}var fF=a(178466);function fO(e){let t=fF.Gq()?.getPrimaryLocale(!1);if(t&&["ja","fr","de"].includes(t)){let a=fF.Gq()?.getDictionary(t),r=a?.getDynamicString(e.i18n_meta.title),n=a?.getDynamicString(e.i18n_meta.description);if(e.title&&!r||e.description&&!n)return!1}return!0}var fM=a(28567);let fB="tag_and_search_header--tagOrSearchHeaderContainer--i-UIA text--fontPos16--oMC-G text--_fontBase--QdLsd",fU="tag_and_search_header--tagOrSearchHeaderInnerWrapper--Pb-dS",fV=(e,t)=>e.resourceType===dV.L.SearchResourceTypes.MIXED?(0,A.tx)("community.landing_page.query_header__mixed",{query:t}):e.resourceType===dV.L.SearchResourceTypes.PLUGINS?(0,A.tx)("community.landing_page.query_header__plugins",{query:t}):e.resourceType===dV.L.SearchResourceTypes.FILES?(0,A.tx)("community.landing_page.query_header__files",{query:t}):e.resourceType===dV.L.SearchResourceTypes.WIDGETS?(0,A.tx)("community.landing_page.query_header__widgets",{query:t}):e.resourceType===dV.L.SearchResourceTypes.PROFILES?(0,A.tx)("community.landing_page.query_header__profiles",{query:t}):(0,A.tx)("community.landing_page.query_header",{query:t});function fH({tags:e,view:t}){let a=fV(t,e.map(e=>o.createElement("strong",{key:e},"#",e)));return o.createElement("div",{className:fB},o.createElement("h1",{className:fU},a))}function fW({query:e,view:t,error:a}){return o.createElement("div",{className:O()({[fB]:!0,"tag_and_search_header--mobileSearchHeaderContainer--gWJWx":E.Ay.mobile})},o.createElement("h1",{className:fU},a?(0,A.tx)("community.error.could_not_complete_search",{error:o.createElement("strong",null,a)}):fV(t,o.createElement("strong",null,e))))}let fj={resourceType:"resourceType",editorType:"editor_type",price:"price",creators:"creators",sortBy:"sort_by"},fG=e=>({resourceType:e.resourceType,editorType:e.editor_type,price:e.price,creators:e.creators,sortBy:e.sort_by}),f$=(e,t)=>{let a=t.getBoundingClientRect(),r=t.closest(`.${oS.pz}`).getBoundingClientRect();e.style.width=a.width+"px",e.style.height=a.height+"px",e.style.top=a.y-r.y+"px"};function fz({view:e,resourceCounts:t}){(0,p.kc)().statsig_aa_flag_web_cmtysidebar;let a=[fy.All,fy.Files,fy.Plugins,fy.Widgets,fy.Union],r=o.useRef(null);o.useEffect(()=>{if(r.current&&e.resourceType){let e=r.current.parentNode.querySelector(`.${oS.vu}`);f$(r.current,e)}},[e.resourceType]);let n=[[dV.L.BrowseResourceTypes.MIXED,(0,A.t)("community.view_bar.all")],[dV.L.BrowseResourceTypes.FILES,(0,A.t)("community.view_bar.files_and_templates")],[dV.L.BrowseResourceTypes.PLUGINS,(0,A.t)("community.view_bar.plugins")],[dV.L.BrowseResourceTypes.WIDGETS,(0,A.t)("community.view_bar.widgets")]];return"string"==typeof e.query&&n.push(["profiles",(0,A.t)("community.view_bar.creators")]),o.createElement("div",{className:oS.pz},o.createElement("div",{className:oS.w,ref:r}),o.createElement("ul",null,n.map(([r,n],i)=>{let l=(0,nD.MU)({...(0,nD.wl)(),resourceType:r}),s=a[i],c="query"in e?o.createElement("span",{className:oS.fw},t[r]??0):null;return o.createElement("a",{key:r,href:l,onClick:t=>{t.preventDefault(),m.Ay.push(l),(0,V.sx)("resource_type_filter_changed",{resource_type:r,from:e.resourceType})}},o.createElement("li",{className:e.resourceType===r?oS.vu:""},o.createElement(s,{active:e.resourceType===r}),o.createElement("span",{className:oS.rt},n),c))})))}let fY={files:0,plugins:0,widgets:0,mixed:0,profiles:0},fK=function(){let e=[],t={};return{push:(a,r)=>{let n=a.pathname+a.search,i=t[n];if(i||e.push(n),t[n]={...i||{},state:r},e.length>10){let a=e.shift();delete t[a]}},get:e=>{let a=t[e.pathname+e.search];if(a)return a}}}();function fQ({onClick:e,isLoading:t,isMoreToFetch:a}){let r=(0,oT.o5)();return t?o.createElement("div",{className:oS.V3},o.createElement(o7.y$,null)):r()?o.createElement(sp,{onClick:e,isLoading:!1,isMoreToFetch:a}):null}class fX extends o.Component{constructor(e){super(e),this.feedAppWrapper=null,this.hasLoadedFirstTimeForView=!1,this.impressedResourcesForView=new Set,this.impressedResourcesLoggingBuffer=[],this.state={resources:[],resourceCounts:fY,searchResponse:void 0,searchError:void 0,shelves:void 0,pagination:void 0,profiles:[],isActivelyLoadingRequest:!1,category:void 0},this.feedContentRef=o.createRef(),this.filterControlsRef=o.createRef(),(0,nD.QN)(this.props.view)||(document.title=(0,ow.vC)(this.props.view)),this.sendResourceImpressions=(0,tl.s)(()=>{if(0===this.impressedResourcesLoggingBuffer.length)return;let{view:e}=this.props,{trackingContext:t,properties:a}=this.getTrackingProps();(0,V.sx)("hub_impressed_resources",{impressedItems:this.impressedResourcesLoggingBuffer.map(({id:e})=>e),impressedItemTypes:this.impressedResourcesLoggingBuffer.map(({type:e})=>e),sort:e.sort_by,resourceType:e.resourceType,trackingContext:t,...a}),this.impressedResourcesLoggingBuffer=[]},1e3)}componentDidMount(){this.resetScrollPosition(),this.queryWithParamsAndUpdateState(void 0),(0,so.OE)(this.props.view)&&this.props.dispatch(uy.Dy({entryPoint:"community"}))}showFeedAsTable(){return this.props.view?.resourceType===dV.L.BrowseResourceTypes.PLUGINS||this.props.view?.resourceType===dV.L.SearchResourceTypes.PROFILES}componentDidUpdate(e,t){(0,s.bN)(this.props.view,e.view)?fK.push(this.props.location,this.state):(this.hasLoadedFirstTimeForView=!1,this.queryWithParamsAndUpdateState(e.view),(0,nD.QN)(this.props.view)||(document.title=(0,ow.vC)(this.props.view)),this.sendAndResetResourceImpressions()),this.state.category?.meta_title!==t.category?.meta_title&&(document.title=(0,ow.vC)(this.props.view,this.state.category?.meta_title))}componentWillUnmount(){(0,so.OE)(this.props.view)&&this.props.dispatch(uy.ky()),this.sendAndResetResourceImpressions()}isMoreToFetch(){return!this.hasLoadedFirstTimeForView||(0,uS.nC)().filter(this.props.view).isMoreToFetch(this.state.pagination)}parseSearchResponse([e,t]){let a;let r=e.map(e=>{let t=e.model;return"is_widget"in t?(t.is_widget,(0,uR.I$)(t)):t}),n={files:[],plugins:[],widgets:[],mixed:r};r.forEach(e=>{"is_widget"in e?e.is_widget?n.widgets.push(e):n.plugins.push(e):n.files.push(e)}),a=this.props.view.resourceType===dV.L.SearchResourceTypes.PROFILES?t:n[this.props.view?.resourceType??dV.L.BrowseResourceTypes.MIXED];let i=Object.keys(n).reduce((e,t)=>(e[t]=n[t].length,e),{});return i.profiles=t.length,{resources:a,resourceCounts:i}}asyncFetchAdditionalSearchResources(){let{dispatch:e,view:t,searchSessionId:a}=this.props;Promise.all([e((0,uS.nC)().filter(t).searchResources({resourceType:"files"})),e((0,uS.nC)().filter(t).searchResources({resourceType:"plugins"})),e((0,uS.nC)().filter(t).searchResources({resourceType:"widgets"}))]).then(([e,r,n])=>{if(!this.state.searchResponse)return;let i=[...e.data.meta.results,...r.data.meta.results,...n.data.meta.results],l=this.state.searchResponse[0].reduce((e,t)=>(e[t.model.id]=!0,e),{});i=i.filter(e=>!l[e.model.id]).sort((e,t)=>e.score>t.score?-1:1),this.state.searchResponse[0]=[...this.state.searchResponse[0],...i];let{resources:o,resourceCounts:s}=this.parseSearchResponse(this.state.searchResponse),c=r.data.meta.results.filter(e=>{let t=e.model.roles;return void 0!==t&&t.is_public}).length,d=n.data.meta.results.filter(e=>{let t=e.model.roles;return void 0!==t&&t.is_public}).length;(0,V.sx)("search_query_result",{query:t.query,responseCounts:this.state.searchResponse[0].length,scope:"community",entry_point:"community",context:"searchView",searchSessionId:a,files:s.files,private_plugins:s.plugins-c,private_widgets:s.widgets-d,public_plugins:c,public_widgets:d,projects:0,teams:0,users:0}),this.setState({searchResponse:[this.state.searchResponse[0],this.state.searchResponse[1]],resources:o,resourceCounts:s})}).catch(()=>{})}querySearch(){let{view:e,dispatch:t}=this.props;return this.feedAppWrapper?.setAttribute("data-hide","true"),t((0,uS.nC)().filter(e).searchResourcesAndProfiles({resourceType:"mixed"})).then(e=>{let t=[e[0].data.meta.results,e[1].data.meta.results],{resources:a,resourceCounts:r}=this.parseSearchResponse(t);this.asyncFetchAdditionalSearchResources(),this.setState({searchResponse:t,searchError:void 0,resources:a,resourceCounts:r},()=>{this.feedAppWrapper?.removeAttribute("data-hide")})}).catch(e=>{(0,so.OE)(this.props.view)&&this.setState({searchError:e.message||(0,A.t)("community.error.search_request_failed"),resources:[]})})}queryBrowse(){let e;let{view:t,isFooterEnabled:a}=this.props,r=(0,uS.nC)().filter(t),n=t.category,i=Promise.resolve(this.state.shelves),l=Promise.resolve(this.state.category),o=this.hasLoadedFirstTimeForView&&this.state.pagination?.next_page;if(o)e=(0,eG.k9)(this.state.pagination?.next_page);else{this.feedAppWrapper?.setAttribute("data-hide","true");let o=a()?48:void 0;e=r.browse(t.resourceType,o);let s=n?{shelfType:oI.cS.CATEGORY_PAGE,categorySlug:n}:void 0;i=!this.state.shelves||n?se.A.getCommunityShelves(s).then(e=>e.data.meta):i,l=n?fM.c.getCategoryBySlug({slug:n}).then(e=>e.data.meta):l}return Promise.all([e,i,l]).then(e=>{let[t,a,r]=e;a&&a.length>0&&(0,tt.qD)({name:"community-landing-shelves-loaded"});let n=(a??[]).filter(fO);if(!t)throw Error("Error handling response");let{data:i}=t,{meta:l,pagination:s}=i,{resources:c}=l;this.setState({resources:o?[...this.state.resources,...c]:c,shelves:n,pagination:s,searchError:void 0,category:r},()=>{this.feedAppWrapper?.removeAttribute("data-hide")})}).catch(e=>{(0,sJ.$D)(r5.e.COMMUNITY,e)})}shouldSearch(e,t){return!(0,so.OE)(e)||e.resourceType===t.resourceType||(0,nD.Mc)({...e,resourceType:"profiles"})!==(0,nD.Mc)({...t,resourceType:"profiles"})}async queryWithParamsAndUpdateState(e){if(!this.props.view||this.state.isActivelyLoadingRequest||!this.isMoreToFetch())return;if(!(this.hasLoadedFirstTimeForView&&this.state.pagination?.next_page)){let e=fK.get(this.props.location);if(e){this.setState(e.state),this.feedAppWrapper?.removeAttribute("data-hide"),this.hasLoadedFirstTimeForView=!0;return}}this.setState({isActivelyLoadingRequest:!0});let t=(0,so.OE)(this.props.view);try{t?e&&!this.shouldSearch(e,this.props.view)&&this.state.searchResponse?this.setState({resources:this.parseSearchResponse(this.state.searchResponse).resources,searchError:void 0}):await this.querySearch():await this.queryBrowse(),this.hasLoadedFirstTimeForView=!0}catch(e){}this.setState({isActivelyLoadingRequest:!1})}resetScrollPosition(){let e=(this.feedContentRef.current?.getBoundingClientRect().top||0)-(this.filterControlsRef.current?this.filterControlsRef.current.getBoundingClientRect().top+this.filterControlsRef.current.getBoundingClientRect().height:0);e<0&&window.scrollTo({top:window.scrollY+e,behavior:"smooth"})}addResourceImpression(e){let t=e.id,a=(0,ow.Vm)(e),r=`${t}-${a}`;this.impressedResourcesForView.has(r)||(this.impressedResourcesForView.add(r),this.impressedResourcesLoggingBuffer.push({id:e.id,type:(0,ow.Vm)(e)}),this.sendResourceImpressions())}sendAndResetResourceImpressions(){this.sendResourceImpressions.flush(),this.impressedResourcesForView.clear()}getTrackingProps(){let{view:e}=this.props,t=e.category,a=e.tags,r=!!a?.length,n=e.query;return"string"==typeof n?{trackingContext:eD.e0.COMMUNITY_HUB_SEARCH,properties:{searchQuery:n}}:t?{trackingContext:eD.e0.COMMUNITY_HUB_CATEGORY,properties:{category:t}}:r?{trackingContext:eD.e0.COMMUNITY_HUB_TAG,properties:{tags:a.join(",")}}:{trackingContext:eD.e0.COMMUNITY_HUB,properties:{}}}getShelfContentIds(){let e=this.state.shelves||[],t=new Set;return e.forEach(e=>{e.shelf_content.forEach(e=>{t.add(e.id)})}),t}render(){let{view:e,isFooterEnabled:t,isTagsFilteringEnabled:a}=this.props,{category:r}=this.state;if(!e)return o.createElement(o.Fragment,null);let n=e.category,i=(0,sD.S)(n,so.LJ),l=!!n,s=this.getShelfContentIds(),c=this.state.resources.filter(e=>!("id"in e&&s.has(e.id))),u=this.state.shelves&&this.state.shelves.length>0&&4===this.state.shelves[0].shelf_content.length?(0,ow.o7)(this.state.shelves[0].shelf_content,e):[],_=e.tags,p=!!_?.length,g=e.query,E="string"==typeof g,{resourceType:h}=e,y=(l||p||E)&&this.hasLoadedFirstTimeForView&&0===this.state.resources.length&&0===u.length,v="";y&&(v=n||g||_.join(", ")||"");let{trackingContext:b,properties:w}=this.getTrackingProps();return o.createElement(eg.fu,{name:b,properties:w},o.createElement(ov.S,null),o.createElement("div",{ref:e=>this.feedAppWrapper=e},i?o.createElement(fT,{category:r,categorySlug:i,isTagsEnabled:!!a,isFeedPage:!0}):null,p&&o.createElement(fH,{tags:_,view:e}),(0,so.OE)(e)&&o.createElement(fW,{query:e.query,view:e,error:this.state.searchError}),o.createElement("div",{className:O()(oS.IB,{[oS.j4]:l})},!l&&o.createElement(fz,{view:e,resourceCounts:this.state.resourceCounts}),o.createElement("div",{className:O()(oS.hm,{[oS.u8]:l})},o.createElement(__,{containerRef:this.filterControlsRef,filterState:fG(e),allowedEditorTypes:r?r.editor_types:void 0,onUpdate:e=>{let t={};e.forEach(({key:e,value:a})=>{t[fj[e]]=a}),m.Ay.replace((0,nD.MU)({...(0,nD.wl)(),...t})),this.resetScrollPosition()},context:(0,so.OE)(e)?"search":"category"}),o.createElement("div",{ref:this.feedContentRef},y?o.createElement(fR,{resourceType:h,query:v,view:e,isError:!!this.state.searchError}):o.createElement("div",{className:oS.E9},o.createElement(oR,{onIntersectionChange:(e,t)=>{t.isIntersecting&&this.addResourceImpression(e)},adtlClassName:oA(this.showFeedAsTable()?"rows":l?"normal":"compact"),resources:l?[...u,...c]:this.state.resources,showAsTable:this.showFeedAsTable(),showMoreCallback:t()?f.lQ:()=>this.queryWithParamsAndUpdateState(),viewContext:"communityFeed"}))),t()?o.createElement(fQ,{onClick:e=>{e.preventDefault(),this.queryWithParamsAndUpdateState()},isLoading:this.state.isActivelyLoadingRequest,isMoreToFetch:this.isMoreToFetch()}):this.state.isActivelyLoadingRequest&&o.createElement(o7.y$,null),l&&o.createElement(fI,{category:r}),t()&&!(0,d.y3)()&&o.createElement("div",{className:oS.xQ},o.createElement(su,null))))))}}function fq(){let e;let t=(0,od.zy)(),a=(0,nD.UH)(),r=(0,s.wA)(),n=(0,oT.o5)(),i=(0,s2.J)();if(!a)return fh.k.warn("This shouldn't happen: Community view is undefined in '<FeedView />'."),m.Ay.replace("/community"),null;let l=(0,nD.QN)(a),c=(0,oT.bk)();return e=l&&c?fP:fX,o.createElement(e,{view:a,location:t,dispatch:r,isFooterEnabled:n,searchSessionId:i})}fX.displayName="FeedPage";var fJ=a(843540);let fZ=a(699651).u;var f0=a(84336);let f1=aq.M4.Query({fetch:async({apiResourceType:e,id:t})=>{switch(e){case"file":return(await pC.H.getVersions({id:t})).data.meta;case"plugin":return(await pS.V.getVersions({pluginId:t})).data.meta.plugin;case"widget":return(await pk.U.getVersions({widgetId:t})).data.meta.plugin;default:(0,x.xb)(e,`Unknown resource type: ${e}`)}},output:({data:e,args:{apiResourceType:t}})=>"plugin"===t||"widget"===t?(0,uR.I$)(e):e}),f2=(0,ez.nF)((e,{pluginId:t,isWidget:a})=>eG.Ay.post(`/api/${a?"widgets":"plugins"}/${t}/view`,{pluginId:t}));var f8=a(941448),f4=a(323434);let f3="mobile_media_carousel--carouselItem--k7rAE",f5=(e,t)=>Math.abs(e)*t,f9=(e,t)=>{let a=[];return e===t[0]-1||e===t[1]+1?a.push("scale(0.6)"):e===t[0]-2||e===t[1]+2?a.push("scale(0.4)"):(e===t[0]-3||e===t[1]+3)&&a.push("scale(0)"),a},f6={enter:e=>({x:e>0?300:-300,opacity:0}),center:{zIndex:1,x:0,opacity:1},exit:e=>({zIndex:0,x:e<0?300:-300,opacity:0})};function f7({resource:e}){let t=(0,s2.J)(),[a,r]=o.useState(0),[n,i]=o.useState(0),l=(0,ow.z$)(e),s=(0,ow.N6)(e),c=s.length>1,d=s[a],[m,u]=(0,o.useState)([0,2]),[_,p]=(0,o.useState)(0);if(!c||!d)return o.createElement(Ee,{resource:e,selectedMedium:d});let[g,f]=(0,mv.P)(d),E=e=>{let t=(0,l1.clamp)(a+e,0,s.length-1);r(t),t>m[1]?(u(e=>[e[0]+1,e[1]+1]),p(_-10)):t<m[0]&&(u(e=>[e[0]-1,e[1]-1]),p(_+10))};return o.createElement(eg.fu,{name:eD.e0.COMMUNITY_MOBILE_RDP_CAROUSEL,properties:{resource_type:(0,ow.Vm)(e),resource_id:e.id,searchSessionId:t}},o.createElement("div",{className:"mobile_media_carousel--mobileMediaCarousel--AIpoz",onMouseDown:e=>{e.stopPropagation(),e.preventDefault()},role:"grid",tabIndex:0},o.createElement(f4.N,{mode:"popLayout",initial:!1,custom:n},o.createElement(_S.P.div,{key:a,custom:n,variants:f6,initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.05}},whileDrag:{cursor:"grabbing"},drag:"x",dragDirectionLock:!0,dragConstraints:{left:0,right:0},dragElastic:.5,onDragEnd:(r,{offset:n,velocity:l})=>{let o=f5(n.x,l.x);o<-500?(E(1),i(1),(0,V.sx)("community_mobile_rdp",{name:"mobile_rdp_carousel_swipe",community_resource_id:e.id,resource_type:(0,ow.Vm)(e),selectedIndex:a,searchSessionId:t})):o>500&&(E(-1),i(-1),(0,V.sx)("community_mobile_rdp",{name:"mobile_rdp_carousel_swipe",community_resource_id:e.id,resource_type:(0,ow.Vm)(e),selectedIndex:a,searchSessionId:t}))}},o.createElement("div",{className:f3},"video"===d.type?o.createElement(mb.A,{src:(0,mv.Mf)(d,e),fallbackSrc:d.url,useHLS:!0,autoPlay:!0,muted:!0,onEnded:()=>{(0,V.sx)("community_mobile_rdp",{name:"mobile_rdp_video_ended",community_resource_id:e.id,resource_type:(0,ow.Vm)(e),searchSessionId:t})}}):o.createElement(mv.F5,{thumbnailUrl:g,resourceId:e.id,altText:(0,ow.qD)(e).name+" preview",thumbnailContext:o6.O7.DETAIL,resizedThumbnailUrls:f,resourceHeroType:l,isMobileCarousel:!0})))),o.createElement("div",{className:"mobile_media_carousel--carouselIndicator--etWE0",style:{transform:`translateX(${-_}px)`}},(0,l1.range)(s.length).filter(e=>e<=m[1]+3&&e>=m[0]-3).map(e=>{let t=[`translateX(${_}px)`,...f9(e,m)].join(" ");return o.createElement("div",{key:e,className:O()("mobile_media_carousel--carouselDot--kqCx2",{"mobile_media_carousel--activeCarouselDot--dBLJE":e===a}),style:{transform:t}})}))))}function Ee({resource:e,selectedMedium:t}){let a=(0,s2.J)();if(t&&"video"===t.type)return o.createElement("div",{className:f3},o.createElement(mb.A,{src:(0,mv.Mf)(t,e),fallbackSrc:t.url,useHLS:!0,autoPlay:!0,muted:!0,onEnded:()=>{(0,V.sx)("community_mobile_rdp",{name:"mobile_rdp_video_ended",community_resource_id:e.id,resource_type:(0,ow.Vm)(e),searchSessionId:a})}}));let r=(0,oI.U)(e)?e.resized_thumbnail_urls:void 0;return o.createElement("div",{className:f3},o.createElement(mv.F5,{thumbnailUrl:e.thumbnail_url||"",resourceId:e.id,altText:(0,ow.qD)(e).name+" preview",thumbnailContext:o6.O7.DETAIL,resourceHeroType:(0,ow.z$)(e),resizedThumbnailUrls:r,isMobileCarousel:!0}))}var Et=a(520607);let Ea=(0,t2.r1)(nP.Xt);function Er(){let e=(0,C.md)(Ea),t=(0,eN.iZ)(),a=(0,s.d4)(e=>e.authedActiveCommunityProfile),r=(0,st.N)(`(max-width: ${cj.YW-1}px)`),{show:n,isShowing:i,complete:l}=(0,t0.e)({overlay:t5.cJy,priority:t8.N.DEFAULT_MODAL},[e]);return(0,u.h)(()=>{!r&&a&&a.has_published&&n({canShow:e=>!e})}),o.createElement(Et._l,{isShowing:i,title:(0,A.tx)("community.modal.creator_carousel_nux.add_image_and_video_previews"),description:(0,A.tx)("community.modal.creator_carousel_nux.drive_eyeballs_and_engagement"),media:o.createElement(Et.B$,{width:400,src:"https://static.figma.com/uploads/02d9c70dd6cacb66d38819ec23ce6f1b6202e13d",alt:"An illustration of a carousel of images and videos",aspectRatio:.82}),primaryCta:{type:"link",label:(0,A.tx)("community.modal.creator_carousel_nux.update_my_resources"),href:a?.profile_handle?new mQ.xn({profileHandle:a.profile_handle}).href:"",ctaTrackingDescriptor:tZ.c.UPDATE_MY_RESOURCES,trackingProperties:{userId:t?.id}},secondaryCta:{type:"link",label:(0,A.tx)("community.learn_more"),href:"https://help.figma.com/hc/en-us/articles/22166943560983-Grow-your-audience-on-Community#mediapreviews",ctaTrackingDescriptor:tZ.c.LEARN_MORE,trackingProperties:{userId:t?.id,profileId:a?.id}},trackingContextName:"community_creator_carousel_media_nux",userFlagOnShow:nP.Xt,clickOutsideToHide:!0,onClose:l,closeButtonColor:"dark"})}function En({resource:e}){return(0,cO.RB)(e)?null:o.createElement(o.Fragment,null,o.createElement(pB.p,{featureFlag:"cmty_rdp_creator_modal"},o.createElement(Er,null)))}function Ei({resource:e,hasScrolled:t}){let a=o.createElement(mc,{resource:e});return o.createElement(mt,{CTAButton:a,resource:e,hasScrolled:t})}function El({resource:e,rdpImpressionId:t,category:a}){let[r,n]=o.useState(!1),i=(0,mx.C)(e),l=(0,ow.z$)(e),s=(0,oT.kk)();return o.createElement("div",{className:"two_column_resource_page--autoLayoutContainer--odI-S"},s()&&a&&o.createElement(fv,{category:a,rdpImpressionId:t}),o.createElement(n_.Y,{width:"100%",direction:"horizontal",height:"hug-contents",verticalAlignItems:"center",horizontalAlignItems:"center",spacing:"auto"},o.createElement("div",{className:mk},o.createElement(Eo,{resource:e,hasScrolled:r})),o.createElement("div",{className:l!==cG.Z4.THUMBNAIL||i?mA:mR},o.createElement(mI,{resource:e,is16to9AspectRatio:i}),o.createElement(tu.a,{className:"two_column_resource_page--scrollSentinel--B3rnT",onIntersectionChange:e=>n(!e.isIntersecting)}))))}function Eo({resource:e,hasScrolled:t}){return o.createElement("div",{className:k.cx.relative.$},o.createElement(Ei,{hasScrolled:t,resource:e}))}function Es({resource:e,rdpImpressionId:t,category:a}){return o.createElement(o.Fragment,null,o.createElement(En,{resource:e}),o.createElement(fZ,{resource:e}),o.createElement(El,{resource:e,rdpImpressionId:t,category:a}),o.createElement(d5,{resource:e,rdpImpressionId:t}))}function Ec({resource:e,rdpImpressionId:t,isMobileSize:a,category:r}){let[n,i]=o.useState(!1),l=(0,oT.kk)();return o.createElement(o.Fragment,null,r&&l()&&o.createElement(fv,{category:r,rdpImpressionId:t}),o.createElement(f7,{resource:e}),o.createElement(mr,{resource:e,hasScrolled:n}),o.createElement("div",{className:"resource_page--mobileScrollSentinelContainer--AkI9N"},o.createElement(tu.a,{className:"resource_page--scrollSentinel--yWuQV",onIntersectionChange:e=>i(!e.isIntersecting)})),o.createElement(d5,{resource:e,rdpImpressionId:t,isMobileSize:a}))}function Ed(){let[{apiResourceType:e,resourceId:t},a]=o.useState({apiResourceType:(0,ow.eD)()[0],resourceId:(0,ow.eD)()[1]}),r=(0,s.wA)(),n=(0,st.N)(`(max-width: ${cj.YW-1}px)`),i=(0,oT.o5)();o.useEffect(()=>{let e=m.Ay.listen(()=>{let[e,t]=(0,ow.eD)();sU.S.hasOwnProperty(e)&&(a(a=>a.apiResourceType===e&&a.resourceId===t?a:{apiResourceType:e,resourceId:t}),setTimeout(()=>window.scrollTo(0,0),100))});return()=>{e(),document.body.removeAttribute("data-hide")}},[]);let[l]=(0,g.IT)(f1({apiResourceType:e,id:t})),c=l.data,u=!!c?.category_slug,[_]=(0,g.IT)((0,fL.Zp)({categorySlug:c?.category_slug??""}),{enabled:u}),p=_.data??void 0;o.useEffect(()=>{e&&t&&c&&((0,oI.U)(c)?r((0,pN.Sb)({hubFiles:[c],src:"resourcePage"})):r((0,f0.Qi)({publishedPlugins:[c],src:"resourcePage"})),document.title=(0,ow.qD)(c).name+"\xa0| Figma",document.body.removeAttribute("data-hide"))},[e,t,r,c]);let f=o.useRef(null),E=o.useCallback(()=>{f.current&&f.current.scrollIntoView({behavior:"smooth"})},[f]);if(o.useEffect(()=>{c&&r((0,oI.U)(c)?(0,pN.vr)({hubFileId:c.id}):f2({pluginId:c.id,isWidget:(0,oI.xQ)(c)}))},[r,c]),!c)return o.createElement(o.Fragment,null);let h=(0,f8.Ay)(c),y=(0,sZ.g)();return o.createElement("div",{className:"resource_page--resourcePage--n6Aio text--fontPos14--OL9Hp text--_fontBase--QdLsd"},o.createElement(eg.fu,{name:h.name,properties:h.properties},o.createElement(cP.H.Provider,{value:{onScrollToRatings:E,externalCommentScrollRef:f}},o.createElement(cW.Ay,{mediaQuery:`(min-width: ${cj.EX}px)`},o.createElement(Es,{resource:c,rdpImpressionId:y,category:p})),o.createElement(cW.Ay,{mediaQuery:`(min-width: ${cj.YW}px) and (max-width: ${cj.EX-1}px)`},o.createElement(Es,{resource:c,rdpImpressionId:y,category:p})),o.createElement(cW.Ay,{mediaQuery:`(max-width: ${cj.YW-1}px)`},o.createElement(Ec,{resource:c,rdpImpressionId:y,category:p,isMobileSize:n}))),i()&&!(0,d.y3)()&&o.createElement("div",{className:"resource_page--footerContainer--bAm54"},o.createElement(su,null))))}function Em(){return o.useEffect(()=>{fE.X.initialRenderDurationMs=Math.round(window.performance.now()-fE.X.domContentLoadedMs),fE.X.timeToLoadMs=Math.round(performance.now()),fE.X.report(V.sx),(0,tt.qD)({name:"Community Hub"})},[]),o.createElement("div",{"data-testid":"community-app",className:"community_app--communityApp--kXC00"},o.createElement(_r,null),o.createElement(od.dO,null,o.createElement(od.qh,{path:mY.path},o.createElement(mH,null)),o.createElement(od.qh,{path:mK.path},o.createElement(sI,null)),o.createElement(od.qh,{path:c3.ax.path},o.createElement(mj,null),o.createElement(Ed,null)),o.createElement(od.qh,{path:"/community/tag/"},o.createElement(fq,null)),o.createElement(od.qh,{path:"/community/search"},o.createElement(mj,null),o.createElement(fq,null)),o.createElement(od.qh,{path:ss.m5},o.createElement(fq,null)),o.createElement(od.qh,{path:"/community*"},o.createElement(od.rd,{to:"/community",from:"/community*"}),o.createElement(mG,null),o.createElement(pr,null)),o.createElement(od.qh,{path:mQ.xn.path},o.createElement(ff,null))),o.createElement(oy,null),!1,o.createElement(s1.Ay,null))}function Eu(e){return"communityHub"!==e.view||"plugin"===e.subView||"widget"===e.subView||"hubFile"===e.subView||"landing"===e.subView||"searchAndBrowse"===e.subView||"handle"===e.subView?{content:o.createElement(Em,null),key:"searchAndBrowse"}:"hubFileEmbed"===e.subView||"monetizationRedirectView"===e.subView?{content:null,key:void 0}:(0,x.xb)(e)}function E_(e){return o.createElement("div",{className:"community_layout--communityPageViewContainer--aBk-9"},e.children,o.createElement(fJ.Ay,null))}fE.X.domContentLoadedMs=Math.round(window.performance.now());var Ep=a(763223),Eg=a(945020),Ef=a(668526),EE=a(324666),Eh=a(896026),Ey=a(260302),Ev=a(94503),Eb=(e=>(e.NEW_SLIDES_FILE="NEW_SLIDES_FILE",e))(Eb||{});function Ew(e){let t=(0,Ev.$)(ex._Y.SLIDES,e.from,"toolbar_slides_created"),a=(0,te.Yz)()(!!e.isTeamLocked),r=!!e.disabled||a;return o.createElement(iQ.K,{action:function(e,t){let a=t?Ey.NY:Ey.k3,r=t?Ey.ts:Ey.sI,n=t?(0,A.t)("locked_team.label.tooltip"):void 0,i=t?ei.Ib.TEXT:void 0;return{kind:iQ.A.ICON_TEXT_BUTTON,key:"NEW_SLIDES_FILE",displayText:(0,A.t)("file_browser.tool_bar.new_slide_deck"),onClick:t?f.lQ:e,icon:i3.A,styleClass:a,svgStyleClass:r,dataTestId:"new-slides-file-button",editorThemeMode:"piper","data-tooltip":n,"data-tooltip-type":i}}(t,r)})}function ET(e){let t=(0,Ev.$)(ex._Y.SLIDES,e.from,"toolbar_slides_created"),a=(0,te.Yz)()(!!e.isTeamLocked),r=!!e.disabled||a,n=r?(0,A.t)("locked_team.label.tooltip"):void 0,i=r?ei.Ib.TEXT:void 0,l=r?f.lQ:t;return{disabled:r,onClick:l,dataTooltip:n,dataTooltipType:i,displayText:(0,A.t)("file_browser.tool_bar.new_slide_deck"),dataTestId:"new-slides-file-button",editorThemeMode:"piper",key:"NEW_SLIDES_FILE",listOptionType:Eh.R.SLIDES}}var EI=a(261076),EN=a(729064),Ex=a(569172),EC=a(103271);let ES=new class{markFeedVisited(e){return eG.Ay.post(`/api/feed_visited/${e.currentOrgId}`)}};var Ek=a(679736),EA=a(118143),ER=a(563288),EL=a(919960),ED=a(52678),EP=a(934480),EF=a(671072),EO=a(654034),EM=a(416822),EB=a(988771),EU=a(400333),EV=a(527429),EH=a(126674),EW=a(160156),Ej=a(339617),EG=a(531398),E$=a(430811);let Ez="feed_tile--commentPillText--goQ26",EY="feed_tile--feedPostHoverContainerSelectable--rhPI9";var EK=a(122975);function EQ(e){let t=(0,s.wA)(),a=o.useRef(null),[r,n]=(0,l3.M)(),[i,l]=(0,l3.M)(),{requestToOpenPostByFeedIdx:c}=e,d=o.useCallback((a,r)=>{a?.stopPropagation();let n=e.itemIdx+1;(0,V.sx)("Team Feed Tile Clicked",{postUuid:e.post.publicUuid,feedRank:n}),t((0,ep.to)({type:ED.K,data:{postUuid:e.post.publicUuid,initialPreloadedPost:e.post,feedIdx:e.feedIdx,requestToOpenPostByFeedIdx:c,autofocusCommentInput:r?.autofocusCommentInput,selectedContentIdx:r?.selectedContentIdx,onSetSelectedContentIdx:r?.onSetSelectedContentIdx}}))},[e.itemIdx,e.post,t,e.feedIdx,c]),m=o.useCallback(()=>{t((0,ep.to)({type:(0,Ek.t1)(),data:{preloadedFeedPost:e.post,entryPoint:Ek.M2.FEED}}))},[t,e.post]),{refSetter:u}=function(e){let t=o.useRef(null),a=o.useRef(e);a.current=e;let r=o.useMemo(()=>new ResizeObserver(()=>{a.current(t.current)}),[]);return o.useEffect(()=>()=>{r.disconnect()},[r]),{refSetter:o.useCallback(e=>{null!==t.current&&r.unobserve(t.current),t.current=e,null!==t.current&&r.observe(t.current)},[r])}}(e.virtualRowItem.measureRef),_={position:"absolute",top:e.virtualRowItem.start,left:0,right:0},p=e.feedListRef.current?.getBoundingClientRect().left??0,g=Math.max(0,(a.current?.getBoundingClientRect().left??0)-p),f=o.createElement("div",{className:"feed_tile--caughtUpContainer--5uyiy"},o.createElement("div",{className:"feed_tile--caughtUpTitle--PVabL"},(0,A.t)("fig_feed.youre_all_caught_up")),o.createElement("div",{className:"feed_tile--caughtUpSubtitle--j2qKn"},(0,A.t)("fig_feed.come_back_later_for_more_posts")));return o.createElement("div",{className:"feed_tile--postContainer--jD-OA",ref:e=>{u(e),e&&(a.current=e,r(e))},style:_},o.createElement("div",{className:"feed_tile--hoverExtension--aYeAh",ref:i}),o.createElement("div",{className:"feed_tile--tileContainer---NbBK"},o.createElement(EX,{feedPost:e.post,feedIdx:e.feedIdx,onTileMouseDown:d,onEditClick:m,horizontalMargin:g,isHovered:n||l}),e.mostRecentUnviewed&&f))}function EX(e){let t=parseInt(e.feedPost.numComments,10),a=(0,EO.o8)(e.feedPost.descriptionMeta),r=[...new Map(e.feedPost.comments.map(e=>[e.user.id,e.user])).values()],n=o.createElement("div",{className:"feed_tile--commentPill--ZWfdc feed_reactions_section--reactionPill--qE8nJ reactions--reaction--BGfYE text--fontPos11--2LvXf text--_fontBase--QdLsd",onMouseDown:t=>e.onTileMouseDown(t,{autofocusCommentInput:!0}),role:"button",tabIndex:0},t>0?o.createElement(o.Fragment,null,o.createElement(EF.u,{users:r,totalNum:r.length,numAvatarsToDisplay:4}),o.createElement("div",{className:Ez},(0,A.tx)("fig_feed.num_comments",{numComments:t}))):o.createElement("div",{className:Ez},(0,A.tx)("fig_feed.add_comment"))),[i,l]=o.useState(!1),s=o.useRef(null);o.useEffect(()=>{let e=s.current;e&&l(e.scrollHeight>e.offsetHeight)},[]);let c=(0,ER.e3)(e.feedPost),d=o.useMemo(()=>(a.length>0&&(a[0].t=a[0].t?.trimStart(),a[a.length-1].t=a[a.length-1].t?.trimEnd()),a),[a]),m=(0,EM.q)(),u=o.useCallback((e=[],t)=>e?e.map((e,a)=>{let r=(e.user_annotated?e.user_annotated.handle:e.t)||"",n=(0,l5.F)(r),i=null,l=e.link&&(0,EU.xT)(e.link);if(e.user_annotated&&n)i=o.createElement("span",{onMouseDown:e=>e.stopPropagation(),role:"link",tabIndex:0},o.createElement(EU.E4,{href:`/files${m}/user/${e.user_id}`,userId:e.user_annotated.id,handle:n,imgUrl:e.user_annotated.img_url}));else if(l&&n&&(0,EV.$)(l))i=o.createElement("span",{onMouseDown:e=>e.stopPropagation(),role:"link",tabIndex:0},o.createElement(EU.Rk,{text:n,hyperlink:l}));else{let e=(0,EP.x6)(n?.replace(/\n\s*\n/g,"\n").split("\n").join(" ")||"");i=o.createElement("span",null,e)}return o.createElement(o.Fragment,{key:`${t}-${a}`},i,e.children?.length&&e.styles?.length&&e.children.map((r,n)=>o.createElement(o.Fragment,{key:`${t}-${a}-${n}`}," ",e.styles.includes("ol")?`${n+1}. `:"\u2022 ",u(r.children,`${t}-${a}-${n}`)," ")))}):[o.createElement(o.Fragment,null)],[m]),_=o.useMemo(()=>u(d,e.feedPost.id),[d,u,e.feedPost.id]),{onTileMouseDown:p}=e,g=o.useMemo(()=>o.createElement("div",{className:"feed_tile--postDescriptionContainer--xP5Fz",onMouseDown:p,role:"button",tabIndex:0},o.createElement("div",{className:"feed_tile--postTitle--DY-Hh"},e.feedPost.title),o.createElement("div",{className:"feed_tile--postDescription--PiaCx","data-testid":"feed-post-description",ref:s},o.createElement("div",{className:O()("feed_tile--postDescriptionMessage--6ThT1 comment_message--commentMessage--kZCzD","feed_tile--collapsed--ruER6",i&&"feed_tile--hasShowMore--6Nm-e")},_),i&&o.createElement("div",{onMouseDown:e=>{e.stopPropagation(),p()},className:"feed_tile--viewMore--o-NxF",role:"button",tabIndex:0},o.createElement("div",{className:"feed_tile--viewMoreEllipsis--k1nCe"},"..."),o.createElement("div",{className:"feed_tile--viewMoreText--WpL2K"},(0,A.t)("fig_feed.see_more"))))),[i,s,e.feedPost,p,_]),f=(0,EH.DG)(e.feedPost.publicUuid,EH.dy.TILE),E=(0,ev.Um)(),h=e.isHovered||E?.type===(0,E$.j8)(E$.Hx.USER,e.feedPost.publicUuid,EH.Zp.TILE);return o.createElement(o.Fragment,null,o.createElement("div",{className:"feed_tile--topRowUGC--oWJxs"},o.createElement("div",{className:"feed_tile--avatarFloat--h-EFM"},o.createElement(Ej.A,{user:e.feedPost.creator,size:G.Pf.LARGE,noHandle:!0})),o.createElement(Ej.B,{user:e.feedPost.creator,date:e.feedPost.createdAt,onTileMouseDown:e.onTileMouseDown,containerInfo:c,noAvatar:!0}),o.createElement("div",{className:k.cx.flex.flexRow.$},o.createElement(E$.Wu,{hideTarget:!h,feedPost:e.feedPost,source:EH.Zp.TILE,onEditClick:e.onEditClick}),h&&o.createElement(el.K0,{"data-tooltip-type":ei.Ib.TEXT,"data-tooltip":(0,A.t)("fig_feed.copy_link_to_post"),onClick:f},o.createElement(Q.In,{icon:"hyperlink-32"})))),g,o.createElement(Eq,{feedPost:e.feedPost,feedIdx:e.feedIdx,backgroundColor:e.feedPost.backgroundColor,onTileMouseDown:e.onTileMouseDown,horizontalMargin:e.horizontalMargin}),o.createElement("div",{className:"feed_tile--bottomRow--CTXwC"},o.createElement(EG.Q$,{type:EG.Us.FULL,source:EG.zY.TILE_POST,postUuid:e.feedPost.publicUuid,postId:e.feedPost.id,feedReactions:e.feedPost.reactions,prependToList:[n]})))}function Eq(e){let t=o.useRef(null),a=e.feedPost.content.map(e=>JSON.parse(e)),[r,n]=o.useState(!1),[i,l]=o.useState(!1),[s,c]=o.useState(0);o.useEffect(()=>{0!==s&&EB.Y.markFeedViewed({publicUuid:e.feedPost.publicUuid})},[s,e.feedPost.publicUuid]);let d=(0,EG.mz)({type:"post",id:e.feedPost.publicUuid},EG.zY.TILE_CONTENT),m=a.length>1,u=O()(m?"feed_tile--feedPostHoverContainerWithThumbnails--pAnNB feed_tile--feedPostHoverContainer--238j6":"feed_tile--feedPostHoverContainer--238j6",!(r||i||d)&&"feed_tile--hidden--9bafI"),_={selectedContentIdx:s,onSetSelectedContentIdx:c},{fileData:p,fileIcon:g,fileLoaded:f,openFile:E}=(0,EH.rS)(e.feedPost.publicUuid,a,e.feedPost.fileKey);return o.createElement("div",{ref:e=>{e&&(t.current=e)},className:O()("feed_tile--fullHeightContentSection--qE0UO feed_tile--contentSection--1-urk",m&&"feed_tile--fullHeightContentSection_WithThumbnails--l-If7")},o.createElement(EW.xT,{contentItems:a,staticContent:!0,selectedContentIdx:s,setSelectedContentIdx:c,pageBackgroundColor:e.backgroundColor||void 0,onSelectedTileMouseDown:t=>e.onTileMouseDown(t,_),feedPostUuid:e.feedPost.publicUuid,feedPostIdx:e.feedIdx,source:EH.Zp.TILE,onContentHover:e=>n(e)}),f&&o.createElement("button",{className:O()(u,EY,"feed_tile--hoverTopLeft--zVWFQ"),onClick:E,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1)},o.createElement(rc.oS,{type:g,size:rc.LE.SMALL}),o.createElement("div",null,p.name)),o.createElement("button",{className:O()(u,EY,"feed_tile--hoverTopRight---lyoe"),onMouseDown:t=>e.onTileMouseDown(t,_),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1)},o.createElement(t_.B,{svg:EK.A})))}let EJ=(0,nN.eU)(!0),EZ=(0,nN.eU)(!1);function E0(e){let t=(0,s.wA)(),a=o.useRef(null),r=(0,eN.iZ)(),n=(0,s.d4)(e=>e.teamFeedRefreshNonce),{setHasLoaded:i}=e,[l,c]=o.useState(null),d=(0,eI._6)(),m="teamFeed"===d.view,u="user"===d.view;o.useEffect(()=>{m&&(ES.markFeedVisited({currentOrgId:e.currentOrgId}).then(e=>{c(e.data.meta?new Date(e.data.meta):null)}),t(tS.b({has_visited_feed:!0})))},[e.currentOrgId,n,t,m]);let p=!!(e.selectedContainer&&e.selectedContainer.id&&e.selectedContainer.type),g=(0,J.Rs)(ee.KhA,{orgId:e.currentOrgId,firstPageSize:50,feedFilter:JSON.stringify({creator_id:e.selectedUser?.id??null,container_type:p?(0,ER.FD)(e.selectedContainer.type):null,container_id:p?e.selectedContainer.id:null}),refreshNonce:n}),f=(0,_.ZC)(n);f&&f!==n&&a.current&&(a.current.scrollTop=0),o.useEffect(()=>{"errors"===g.status&&t(aD.F.enqueue({message:(0,A.t)("general.an_error_occurred"),error:!0}))},[t,g.status]);let E=o.useMemo(()=>"loaded"===g.status?{isLoadingNextPage:g.data.feedPosts.isLoadingNextPage,hasNextPage:g.data.feedPosts.hasNextPage,loadNext:g.data.feedPosts.loadNext}:null,[g]),h=o.useMemo(()=>"loaded"===g.status?{...g,data:g.data.feedPosts.filter(t=>!!t.feedPost&&(e.selectedTabKey!==EC.S8.ForYou||t.forYou))}:g,[g,e.selectedTabKey]),y="loaded"===h.status&&"loaded"===g.status;o.useEffect(()=>{i?.(y)},[y,i]);let v=o.useCallback(()=>512,[]),b=h.data?h.data.length:0,w=(0,EN.z)({size:b,parentRef:a,estimateSize:v,overscan:15,paddingStart:0}),T=o.useRef(0);o.useEffect(()=>{T.current=h.data?.length??0},[y,h.data?.length]),o.useEffect(()=>{y&&(0,V.sx)("Team Feed Posts Rendered",{tab:e.selectedTabKey,selectedContainerId:e.selectedContainer?.id,selectedContainerType:e.selectedContainer?.type,selectedUserId:e.selectedUser?.id,numPosts:T.current,view:d.view},{forwardToDatadog:!0})},[e.selectedTabKey,e.selectedContainer,e.selectedUser,T,y,d.view]);let[I,N]=o.useState(!1),[x,C]=o.useState(null),S=(0,_k.Xr)(EZ),R=o.useCallback((e,t)=>{e>0&&!I&&((0,V.sx)("Team Feed User Scrolled Down"),N(!0));let a=b/50,r=e+t.trackHeight,n=t.scrollHeight;1-(n-r)/(n/a)>=.5&&E&&!E.isLoadingNextPage&&E.hasNextPage()&&E.loadNext(50),C(t)},[I,E,b]);o.useEffect(()=>{if(!x)return;let{scrollTop:e}=x;e>=72?S(!0):S(!1)},[x,S]);let L=o.useMemo(()=>{let e={};return h.data&&h.data.forEach((t,a)=>{e[t.publicUuid]=a}),e},[h]),[D,P]=o.useState(void 0),F=o.useCallback(e=>{P(e)},[]);o.useEffect(()=>{if(void 0===D||(P(void 0),D<0)||(D>=.5*b&&E&&E.loadNext(50),D>=b))return;let e=h.data[D];t(ep.hm({type:ED.K.type,data:{postUuid:e.publicUuid,initialPreloadedPost:e.feedPost,feedIdx:D,requestToOpenPostByFeedIdx:F}}))},[D,t,h,F,E,b]);let M=o.useMemo(()=>{if(!l||!h.data)return null;let e=0,t=h.data.length-1,a=-1,n=0;for(;e<=t;){let r=Math.floor((e+t)/2);if(new Date(h.data[r].createdAt)>l?(a=r,e=r+1):t=r-1,(n+=1)>50)break}for(;a>=0&&r&&h.data[a].feedPost?.creator.id===r.id;)a-=1;return a},[l,h.data,r]),B=y&&h.data&&0===h.data.length&&e.selectedTabKey===EC.S8.All&&(e.selectedUser||e.selectedContainer);return o.createElement(tm.P,{scrollContainerRef:a,className:"feed_list_view--scrollContainer--84INP main_feed_view--scrollContainer--BunJg",innerClassName:O()("feed_list_view--scrollContainerInner--8Le-r",u&&"feed_list_view--scrollContainerInnerProfile--izApr"),onScroll:R},o.createElement("div",{className:"feed_list_view--feedListContainer--2BMds"},e.scrollHeaders,B?o.createElement("div",{className:"feed_list_view--noPostsFound--COpgM"},o.createElement("div",{className:k.cx.fontMedium.$},(0,A.tx)("fig_feed.no_posts_found_title")),o.createElement("div",{className:k.cx.colorTextSecondary.$},(0,A.tx)("fig_feed.no_posts_found_description"))):o.createElement("div",{style:{margin:"0 8px",height:`${w.totalSize}px`,position:"relative"}},w.virtualItems.map(e=>{let t=e.index;if(!h.data||!h.data[t].feedPost)return null;let r=h.data[t].feedPost;return o.createElement(EQ,{post:r,key:e.key,virtualRowItem:e,feedListRef:a,itemIdx:t,feedIdx:L[r.publicUuid],requestToOpenPostByFeedIdx:F,mostRecentUnviewed:m&&L[r.publicUuid]===M})}))))}function E1(e){let t=(0,s.wA)(),[a,r]=(0,C.fp)(EJ),[n,i]=o.useState(!1),l=(0,s.d4)(e=>e.teamFeedRefreshNonce);o.useEffect(()=>{t(Ex.yu({orgId:e.currentOrgId,bellActive:!1}))},[t,l,e.currentOrgId]);let c=o.useMemo(()=>[{key:EC.S8.ForYou,label:(0,A.t)("fig_feed.tab.for_you")},{key:EC.S8.All,label:(0,A.t)("fig_feed.tab.all")}],[]),[d,m]=o.useState(null),[u,_]=o.useState(null),{setSelectedTabKey:p}=e,g=o.useCallback(e=>{e===EC.S8.ForYou&&(_(null),m(null)),p(e),t(ea.$T({view:"teamFeed",feedTab:e}))},[t,p]),f=o.createElement(o.Fragment,null,o.createElement(EA.CreateFeedPostContent,{entryPoint:Ek.My.FEED_HEADER,onSubmitSuccess:e.onNewPostSubmitSuccess,disabled:!n,minimized:a,setMinimized:r,uploadInfo:e.uploadInfo}),o.createElement(EL.Qn,{orgId:e.currentOrgId,tabs:c,selectedTabKey:e.selectedTabKey,setSelectedTabKey:g,selectedContainer:d,setSelectedContainer:m,selectedUser:u,setSelectedUser:_}));return o.createElement(E0,{...e,scrollHeaders:f,setHasLoaded:i,selectedContainer:d,selectedUser:u})}var E2=a(238472);function E8(){let e=(0,C.md)(EI.T),t=(0,C.md)(EZ),a=(0,_k.Xr)(EJ),[r,n]=o.useState(!1);return(o.useEffect(()=>{t&&n(!0)},[t]),r)?o.createElement(rH.$$,{className:O()("create_feed_post_button--container--gokzc",t?"create_feed_post_button--fadeInOnMount--QLi5F":"create_feed_post_button--fadeOut--D6C6X"),onMouseDown:()=>a(!1)},o.createElement(t_.B,{svg:i3.A,className:"create_feed_post_button--plusIcon--DCzT2"}),(0,A.t)("fig_feed.new_post"),e&&o.createElement(t_.B,{svg:E2.A})):null}var E4=a(395900),E3=a(43325);let E5="new_post_indicator--icon--uvRMg";var E9=a(884114);function E6(e){return o.createElement("div",{className:"new_post_indicator--notification--NxIRJ text--_negText--j9g-L _overlayBase--_overlayBase--Rkj8l"},o.createElement("div",{className:"new_post_indicator--leftSide--Y7k6-",onClick:e.onRefresh,role:"button",tabIndex:0},o.createElement(t_.B,{svg:E9.A,className:E5}),(0,A.tx)("fig_feed.new_posts")),o.createElement("div",{className:"new_post_indicator--dismiss--BAIvc",onClick:e.onDismiss,role:"button",tabIndex:0},o.createElement(t_.B,{svg:nz.default,className:E5})))}function E7(e){let t=(0,s.wA)();o.useEffect(()=>((0,V.sx)("Team Feed Posts List View Visited"),t(Ex.yu({orgId:e.currentOrgId,bellActive:!1})),()=>{(0,V.sx)("Team Feed List View Closed")}),[t,e.currentOrgId]);let a=o.useCallback(()=>t(Ex.Y9()),[t]),r=o.useCallback(e=>{e||a()},[a]),[n,i]=o.useState(e.feedTab??EC.S8.ForYou),l=o.useCallback(()=>{a(),i(EC.S8.All)},[a]),c=(0,s.d4)(t=>t.teamFeedBellStates[e.currentOrgId]),[d,m]=o.useState(!1),u=(0,_.ZC)(c);o.useEffect(()=>{c&&!1===u?m(!0):u&&!1===c&&m(!1)},[c,u,t]),o.useEffect(()=>{e.initialPostUuidToShow&&t((0,ep.to)({type:ED.K,data:{postUuid:e.initialPostUuidToShow}}))},[t,e.initialPostUuidToShow]);let[p,g]=o.useState(!1),[f,E]=o.useState(null),[h,y]=(0,C.fp)(EJ),v=o.useCallback(e=>{h&&(E(e.files),g(!1))},[h]);return o.createElement(o.Fragment,null,o.createElement(B.Y,{isDragTarget:()=>!0,onTargetDragEnter:()=>g(!0),onTargetDragLeave:()=>g(!1),onTargetDrop:v,className:"main_feed_view--contentLayout--HPUlv"},d&&o.createElement(E6,{onRefresh:l,onDismiss:()=>m(!1)}),o.createElement(E1,{currentOrgId:e.currentOrgId,onNewPostSubmitSuccess:r,uploadInfo:f??void 0,selectedTabKey:n,setSelectedTabKey:i}),h&&p&&o.createElement("div",{className:"main_feed_view--dragOverlay--e78e2"})),o.createElement(E3.cx,null))}function he(e){let t=(0,s.d4)(e=>e.currentUserOrgId),a=o.useRef(new E4.M4);return(o.useEffect(()=>{a.current.start()},[]),t)?o.createElement(E7,{currentOrgId:t,initialPostUuidToShow:e.postUuid,creatorId:e.creatorId,feedViewTimer:a.current,feedTab:e.feedTab}):null}var ht=a(93484);let ha=[t5.Wb3,t5.KoA,t5.Ult,t5.kmq,t5.USq,t5.DKo,t5.jQF,t5.Ob5,t5.s7O,t5.Qlc,t5.I$z,t5.X5_,t5.RJL,t5.LB2,t5.I5n,t5.n0G,t5.Msu,t5.UmN,t5.nIZ,t5.Ql8,t5.pIP,t5.Q16,t5.O5v,t5.rQs,t5.YHe,t5.hxO,t5.sqw,t5.Duq,t5.yjU,t5.BTz,t5.I3H,t5._9u,t5.jVB,t5.syA,t5.cJy,t5.tUL,t5.zMZ,t5.tBR,t5.K69,t5.Tp6,t5.fz8,t5.XIg,t5.fQh,t5.O9D,t5.c6t,t5.r3Y].map(e=>e.id);function hr({children:e}){return o.createElement(ht.A,{name:"FileBrowser",order:ha},e)}var hn=a(386079),hi=a(394828),hl=a(813803);let ho="has_seen_jamboard_importer_callout",hs=(0,t2.r1)(ho),hc=(0,t2.r1)("signed_up_from_figjam_jamboard");function hd(){let e=(0,s.wA)(),t=(0,C.md)(hs),a=(0,C.md)(hc),r=(0,C.md)(t1.mp),n=(0,C.md)(t1.zN),{isShowing:i,complete:l}=(0,t0.e)({overlay:t5.DKo,priority:t8.N.HIGH_PRIORITY_MODAL},[t,a,r,n]);return o.createElement(t4.rq,{isShowing:i,trackingContextName:"Jamboard Importer Button Callout",targetKey:hn._s,userFlagOnShow:ho,onTargetLost:l,onClose:l,primaryCta:{label:(0,A.tx)("rcs.jamboard.importer_callout.primary_cta"),type:"button",onClick:()=>{l(),e((0,ep.to)({type:hl.Qn}))},ctaTrackingDescriptor:tZ.c.GET_STARTED},secondaryCta:{label:(0,A.tx)("rcs.jamboard.importer_callout.secondary_cta"),type:"button",onClick:l,ctaTrackingDescriptor:tZ.c.NOT_NOW},title:(0,A.tx)("rcs.jamboard.importer_callout.title"),media:o.createElement(hi.y,{src:"https://static.figma.com/uploads/0d827f2ef59eca7e23348ab3935984c306b2ed8d",alt:"",aspectRatio:300/146}),description:(0,A.tx)("rcs.jamboard.importer_callout.desc"),disableHighlight:!0})}var hm=a(886653);let hu=e=>{switch(e){case lQ.t2.DESIGN:return"design";case lQ.t2.FIGJAM:return"whiteboard";case lQ.t2.PROTOTYPE:return"prototype";case lQ.t2.SITES:return"sites";case lQ.t2.SLIDES:return"slides";case lQ.t2.ANY:return"";default:(0,x.xb)(e)}},h_=e=>{switch(e){case lQ.C0.NAME:return"name";case lQ.C0.CREATED_AT:return"created_at";case lQ.C0.TOUCHED_AT:return"updated_at";default:return(0,sJ.$D)(r5.e.WAYFINDING,Error(`Attempting to sort by an unsupported sort key: ${e}`)),"created_at"}};var hp=a(406941),hg=a(344780),hf=a(716475),hE=a(803258);function hh(){let e=o.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 311 213",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("rect",{x:"0",y:"0",width:"310",height:"212",rx:"5.5",stroke:"#E5E5E5",strokeDasharray:"5 6"}),o.createElement("rect",{width:"100%",height:"100%",fill:"url(#paint0_linear_1701_4654)"}),o.createElement("defs",null,o.createElement("linearGradient",{id:"paint0_linear_1701_4654",x1:"0",y1:"0",x2:"0",y2:"100%",gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"var(--color-bg, white)",stopOpacity:"0"}),o.createElement("stop",{offset:"0.661458",stopColor:"var(--color-bg, white)"}))));return o.createElement("div",{className:hE.kL},o.createElement("div",{className:hE.yl},o.createElement("div",{className:hE._h},e)))}function hy({text:e,tooltipText:t,currentProgress:a,totalProgress:r}){return o.createElement(n_.Y,{direction:"vertical",height:"hug-contents",spacing:"7px"},o.createElement(n_.Y,{horizontalAlignItems:"space-between"},o.createElement(n_.Y,{spacing:4},o.createElement(R.E,{fontSize:13,fontWeight:"medium"},e),o.createElement("div",{"data-tooltip-type":ei.Ib.TEXT,"data-tooltip":t,"data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,"data-tooltip-tip-align-left":!0,"data-tooltip-text-left":!0},o.createElement(Q.In,{icon:"info-16",fill:"secondary"}))),o.createElement(R.E,{fontSize:13,fontWeight:"medium"},a,"/",r)),o.createElement("div",{className:k.cx.relative.wFull.$},o.createElement("div",{className:k.cx.absolute.wFull.$},o.createElement(n_.Y,{cornerRadius:5,height:5,backgroundColor:"disabled"})),o.createElement("div",{className:k.cx.absolute.wFull.$},o.createElement(n_.Y,{cornerRadius:5,height:5,width:`${Math.min(a/r*100,100)}%`,backgroundColor:a>=r?"warning":"brand"}))))}function hv({canEditTeam:e,isDraftsFolder:t}){let a=(0,s.wA)(),r=(0,tf.ol)(),n=(0,eI._6)(),i=(0,te.PP)();return t||!r||(0,er.w5)(r)||"folder"!==n.view||!i()?null:o.createElement(hb,{folderId:n.folderId,showPlanComparisonModal:()=>{a((0,ep.to)({type:z.V,data:{upsellSource:eA.b.STARTER_LIMIT_OVERVIEW,teamId:r.id}}))},canEditTeam:e})}function hb({folderId:e,showPlanComparisonModal:t,canEditTeam:a}){let r=(0,J.Rs)(ee.yU5,{projectId:e}),n=ef.h.useTrackingContext({trigger:eA.b.STARTER_LIMIT_OVERVIEW});if("loaded"!==r.status)return null;let i=r.data.project?.team?.projectsCount.status==="loaded"?r.data.project?.team?.projectsCount.data??1:1,l=r.data.project?.team?.teamFileCounts?.designFileCount??0,s=r.data.project?.team?.teamFileCounts?.whiteboardFileCount??0,c=l>=er.WW||s>=er.WW;return o.createElement(eg.fu,{name:"Starter Limit Overview",properties:n},o.createElement("div",{className:O()(k.cx.cursorDefault.mr32.maxW300.colorBg.$,"starter_limit_overview--responsiveHide--tahPL"),style:r9.sx.sticky.add({alignSelf:"flex-start",top:"128px"}).$},o.createElement(n_.Y,{direction:"vertical",padding:32,spacing:24,cornerRadius:8,strokeWidth:1,strokeColor:"default",height:"hug-contents"},o.createElement(R.E,{fontSize:14,fontWeight:"semi-bold"},(0,A.tx)("file_browser.starter_limit.your_starter_team_overview")),o.createElement(hw,{numProjects:i,numFigmaFilesUsed:l,numFigjamFilesUsed:s}),a?o.createElement(n_.Y,{direction:"vertical",spacing:"12px"},o.createElement(R.E,{fontSize:13},(0,A.tx)(c?"file_browser.starter_limit.running_out_of_files":"file_browser.starter_limit.enough_for_you_to_get_started")),o.createElement(rH.vd,{onClick:t,trackingProperties:{trackingDescriptor:tZ.c.VIEW_PLANS}},(0,A.tx)("upgrade.view_plans"))):o.createElement(R.E,{fontSize:13},(0,A.tx)("file_browser.starter_limit.trying_things_out")))))}function hw({numProjects:e,numFigmaFilesUsed:t,numFigjamFilesUsed:a}){return o.createElement(n_.Y,{direction:"vertical",spacing:24,width:234},o.createElement(hy,{text:(0,A.t)("file_browser.starter_limit.projects"),tooltipText:(0,A.t)("file_browser.starter_limit.projects.tooltip"),currentProgress:e,totalProgress:er.Wf}),o.createElement(hy,{text:(0,A.t)("file_browser.starter_limit.design_files"),tooltipText:(0,A.t)("file_browser.starter_limit.design_files.tooltip"),currentProgress:t,totalProgress:er.WW}),o.createElement(hy,{text:(0,A.t)("file_browser.starter_limit.figjam_boards"),tooltipText:(0,A.t)("file_browser.starter_limit.figjam_boards.tooltip"),currentProgress:a,totalProgress:er.WW}))}var hT=a(321747),hI=a(119198),hN=a(296559),hx=a(835156),hC=a(974105),hS=a(857766),hk=a(779709),hA=a(707465),hR=a(565167),hL=a(567088),hD=a(723127),hP=a(828702);let hF="tiles_view--tilesGrid--gtDcv tiles_view--tiles--PQRwh",hO="tiles_view--container--u00AG",hM="tiles_view--emptyStateContainer--eoExf",hB="tiles_view--emptyState--jfzsE text--fontPos11--2LvXf text--_fontBase--QdLsd",hU={metaContainer:320,sidebar:241,tileGridOuterPadding:32,singleTile:272,singleTileWithPadding:304},hV=256/192;function hH({tile:e,index:t,dispatch:a,selectedView:r,currentPlanFilter:n,currentSharedByFilter:i,isListView:l}){e.type===az.nb.FILE&&(a(e_.UN({fileKey:e.file.key,entrypoint:"file tile",currentPlanFilter:n,currentSharedByFilter:i,viewMode:void 0!==l?l?"list":"grid":void 0})),(0,hA.K)(r)&&a(e_.T5({index:t})),d.eD&&(0,V.sx)("Open File Click",{fileKey:e.file.key,fileRepoId:e.file.file_repo_id,uiSelectedView:JSON.stringify(r)}))}let hW=()=>Math.max(Math.floor((window.innerWidth-hU.sidebar-hU.metaContainer-hU.tileGridOuterPadding)/hU.singleTileWithPadding),0),hj=(e,t)=>{let a=az.Tf.getName(e)||"",r=az.Tf.getName(t)||"";return M.INTL_COLLATOR.compare(a,r)},hG=(e,t)=>{let a=(az.Tf.getName(e)||"").toLowerCase(),r=(az.Tf.getName(t)||"").toLowerCase();return a===r?0:a<r?-1:1},h$=(e,t)=>{if(e.type!==az.nb.FILE||t.type!==az.nb.FILE)return 0;let a=e.file,r=t.file;return a.created_at<r.created_at?1:-1},hz=(e,t)=>e.type!==az.nb.PROTOTYPE||t.type!==az.nb.PROTOTYPE?0:e.prototype.file_key<t.prototype.file_key?-1:1,hY=(e,t)=>{let a=az.Tf.getAccessedAt(e),r=az.Tf.getAccessedAt(t);return a&&r?a>r?1:-1:r?-1:a?1:0},hK=(e,t)=>az.Tf.getCreatedAt(e)>az.Tf.getCreatedAt(t)?1:-1,hQ=(e,t)=>{let a=az.Tf.getTouchedAt(e),r=az.Tf.getTouchedAt(t);return null===a||null===r?0:a>r?1:-1},hX=(e,t)=>e.type!==az.nb.FILE&&e.type!==az.nb.REPO||t.type!==az.nb.FILE&&t.type!==az.nb.REPO?0:(e.type===az.nb.FILE?e.file.trashed_at:e.repo.trashed_at)>(t.type===az.nb.FILE?t.file.trashed_at:t.repo.trashed_at)?1:-1;function hq(e){let t=o.useRef(null),a=o.useRef(null),r=o.useRef(null),n=(0,eN.iZ)(),i=(0,eI._6)(),l="folder"===i.view?i.folderId:null,c=aq.M4.Folder.useValue(l).data,u=[n?.drafts_folder_id,n?.personal_drafts_folder_id].includes(c?.id),{showing:_,show:g,data:f}=(0,lz.L)();o.useEffect(()=>{let e="page_selected_view",t=hg.sn.get(e);if(t&&t.isRunning&&!t.isUnreliable){let t=hg.sn.tryStop(e);t&&(0,V.sx)("File Browser Tab Switch Page Load Time",{elapsedMs:t,selectedView:i.view},{forwardToDatadog:!0,batchRequest:!0})}},[i.view,l]);let h=(0,ew.FC)(),{userStateLoaded:y,userExternallyRestricted:v,selectedBranchKeyByRepoId:b,upsellData:w}=(0,nI.R)(e=>{let t=null,a=(0,hC.e9)(e),r=a&&a.team_id&&e.teams[a.team_id];return a&&r&&(0,en.canEditTeam)(r.id,e)&&(t={team:r,folderId:a.id,isAtFileLimit:[ex.P4.FILES_LIMITED,ex.P4.FILES_LIMITED_LEGACY,ex.P4.WHITEBOARD_FILES_LIMITED,ex.P4.WHITEBOARD_FILES_LIMITED_BETA].some(e=>!!r.restrictions_list?.includes(e))}),{userFlags:e.userFlags,userStateLoaded:e.userStateLoaded,userExternallyRestricted:(0,en.isOrgUserExternallyRestrictedFromState)(h),selectedBranchKeyByRepoId:e.selectedBranchKeyByRepoId,upsellData:t}}),T=(0,s.wA)(),I=(0,te.PP)(),N=(0,tf.ol)(),S=!!N&&!!e.eligibleForLockedStateRedesign,[R,L]=o.useState(()=>hW()),D=e.sortFilterOptions.tileSortFilterConfig.viewMode===lQ.XU.LIST,P="recentsAndSharing"===i.view&&i.tab===tN.G.SHARED_FILES,F=(e,t,a)=>e===lQ.rJ.ANY||e===lQ.rJ.SELF&&a.type===az.nb.FILE&&a.file.creator_id===t||e===lQ.rJ.SELF&&a.type===az.nb.REPO&&a.branches[0].creator_id===t||e===lQ.rJ.OTHER&&a.type===az.nb.FILE&&a.file.creator_id!==t||e===lQ.rJ.OTHER&&a.type===az.nb.REPO&&a.branches[0].creator_id!==t,B=(e,t)=>{let a="design";switch(t.type===az.nb.FILE?a=t.file.editor_type:t.type===az.nb.PINNED_FILE?a=t.file.editorType:t.type===az.nb.OFFLINE_FILE&&(a=t.file.editorType),e){case lQ.t2.ANY:return!0;case lQ.t2.DESIGN:if(t.type===az.nb.FILE||t.type===az.nb.REPO||t.type===az.nb.PINNED_FILE||t.type===az.nb.OFFLINE_FILE)return"design"===a;return!1;case lQ.t2.FIGJAM:if(t.type===az.nb.FILE||t.type===az.nb.PINNED_FILE||t.type===az.nb.OFFLINE_FILE)return"whiteboard"===a;return!1;case lQ.t2.PROTOTYPE:return t.type===az.nb.PROTOTYPE;case lQ.t2.SLIDES:if(t.type===az.nb.FILE||t.type===az.nb.PINNED_FILE||t.type===az.nb.OFFLINE_FILE)return"slides"===a;return!1;case lQ.t2.SITES:if(t.type===az.nb.FILE||t.type===az.nb.PINNED_FILE||t.type===az.nb.OFFLINE_FILE)return"sites"===a;return!1;default:(0,x.xb)(e)}},U=(e,t)=>!e||e===`${az.Tf.getSharedBy(t)}`,H=o.useCallback((e,t)=>{if("sharedWithYou"===i.view||"recentsAndSharing"===i.view&&i.tab===tN.G.SHARED_FILES||!e||!e.planId)return!0;let a=e.planId;switch(t.type){case az.nb.FILE:return("org"===e.planType?t.file.parent_org_id:t.file.team_id)===a;case az.nb.REPO:return("org"===e.planType?t.repo.parent_org_id:t.repo.team_id)===a;case az.nb.PROTOTYPE:return("org"===e.planType?t.prototype.parent_org?.id:t.prototype.parent_team?.id)===a;case az.nb.OFFLINE_FILE:return"org"===e.planType&&t.file.orgId===a;default:return!1}},[i]),W=o.useCallback((t,a)=>{let r,n,l;let o=t.filter(e=>U(a.filters.sharedBy,e)&&B(a.filters.fileType,e)&&F(a.filters.creator,h.user?.id,e)&&H(a.filters.plan,e));if(r=P?o.filter(e=>e.type===az.nb.FILE||e.type===az.nb.PROTOTYPE||e.type===az.nb.REPO):o.filter(e=>e.type===az.nb.FILE||e.type===az.nb.REPO||e.type===az.nb.OFFLINE_FILE),"recentsAndSharing"===i.view&&i.tab===tN.G.SHARED_FILES)return o;let s=a.sort.dir===lQ.ue.DESC;switch(a.sort.key){case lQ.C0.SEARCH_RELEVANCE:return t;case lQ.C0.ACCESSED_AT:n=g1.f.byComparators(hY),l=o;break;case lQ.C0.CREATED_AT:n=g1.f.byComparators(hK),l=o;break;case lQ.C0.TOUCHED_AT:n=g1.f.byComparators(hQ),l=r;break;case lQ.C0.NAME:if(u){n=g1.f.byComparators(hj,g1.f.byProperty("type")),l=o;break}let c=o.length<M.REASONABLE_LOCALE_SORT_CUTOFF;n=g1.f.byComparators(c?hj:hG,g1.f.byProperty("type"),h$,hz),l=o;break;case lQ.C0.TRASHED_AT:n=g1.f.byComparators(hX),l=r;break;case lQ.C0.SHARED_AT:return o;default:return console.error("Unknown sort key",a.sort.key),[]}if(n=s?g1.f.reverse(n):n,l.sort(n),e.isDataPartial)for(;l[l.length-1]?.type===az.nb.OFFLINE_FILE;)l.pop();return l},[P,H,e.isDataPartial,u,i,h.user?.id]),j=o.useMemo(()=>W(e.tiles,e.sortFilterOptions.tileSortFilterConfig),[W,e.tiles,e.sortFilterOptions.tileSortFilterConfig]),G=o.useMemo(()=>{if("deletedFiles"===i.view)return[];let e=[];return j.forEach(t=>{switch(t.type){case az.nb.FILE:e.push({fileKey:t.file.key});break;case az.nb.REPO:e.push(...t.branches.map(e=>({fileKey:e.key})))}}),e},[i.view,j]),$=(0,J.p)(ee.hqi,G);o.useEffect(()=>{for(let{result:e,args:t}of $)if("loaded"===e.status&&e.data){let a=(0,hx.Z)(e.data);T(aV.Lk({fileKey:t.fileKey,users:a}))}},[$,T]);let Y=(0,C.md)(az.Y6),K=o.useCallback((t,a,r)=>{hH({tile:t,index:r,dispatch:T,selectedView:i,currentPlanFilter:e.currentPlanFilter,currentSharedByFilter:e.currentSharedByFilter,isListView:D}),function({tile:e,e:t,dispatch:a,selectedView:r,permissionsState:n,selectedBranchKeyByRepoId:i,renamingItem:l}){if(az.Tf.isRenaming(e,l)||e.type===az.nb.FILE&&e.file.trashed_at||e.type===az.nb.REPO&&e.repo.trashed_at){t.preventDefault(),t.stopPropagation();return}let o=E.Ay.mac?t.metaKey:t.ctrlKey,s=null;o&&t.shiftKey?s=d.aw.FOCAL_TAB:o?s=d.aw.BACKGROUND_TAB:t.shiftKey&&(s=d.aw.NEW_WINDOW);let c=n.user;if(d.eD){let r;switch(s=s??d.aw.FOCAL_TAB,t.preventDefault(),t.stopPropagation(),e.type){case az.nb.FILE:r=!!(e.file.is_team_template&&(0,tk.LQ)(n)),d.eD.openFile({fileKey:e.file.key,title:e.file.name||"Untitled",editorType:e.file.editor_type,target:s,isBranch:(0,hS.Xm)(e.file),isLibrary:!!e.file.last_published_at,isTeamTemplate:r,userId:c?.id});break;case az.nb.PINNED_FILE:r=!!(e.file.isTeamTemplate&&(0,tk.LQ)(n)),d.eD.openFile({fileKey:e.file.key,title:e.file.name||"Untitled",editorType:e.file.editorType,isTeamTemplate:r,target:s,userId:c?.id});break;case az.nb.PROTOTYPE:d.eD.openPrototype(e.prototype.file_key,e.prototype.page_id,e.prototype.name||"",s,c?.id);break;case az.nb.REPO:let l=(0,hS.mr)(e.repo,e.branches,i);d.eD.openFile({fileKey:l.key,title:l.name,editorType:l.editor_type,target:s,isBranch:(0,hS.Xm)(l),isLibrary:!!l.last_published_at,userId:c?.id});break;case az.nb.PROJECT:(0,x.KF)(!0,"Do not expec to be rendering project tiles here");break;case az.nb.OFFLINE_FILE:a(hI.NA({file:e.file,openNewFileIn:Eg.ai.NEW_TAB,source:hR.U.OFFLINE_FILE_TILE}));break;default:(0,x.xb)(e)}return}if(null!=s){if(a(ea.oB()),e.type===az.nb.OFFLINE_FILE){a(hI.NA({file:e.file,openNewFileIn:Eg.ai.NEW_TAB,source:hR.U.OFFLINE_FILE_TILE})),t.preventDefault(),t.stopPropagation();return}if(t instanceof KeyboardEvent){let a=az.Tf.getUrl(e,i);m.Ay.redirect(a,"_blank"),t.preventDefault(),t.stopPropagation()}return}t.preventDefault(),t.stopPropagation();let u=n.currentUserOrgId,_=n.currentTeamId,g="recentsAndSharing"===r.view||"folder"===r.view?r:void 0,f=(0,p.kc)().ps_benchmark;switch(a(f?hN.c5({planId:u||_,planType:u?hL.O.ORG:hL.O.TEAM}):hN.p4({planId:u||hD.P})),e.type){case az.nb.FILE:{let t=e.file;(0,l4.N7)(u,t.parent_org_id,_,t.team_id)?(0,l4.QV)(e.file.key,c,u,f?_:null,r,e.file.editor_type||void 0):a(ea.$T({view:"fullscreen",fileKey:e.file.key,editorType:hk.z4.getIsExtension()?gG.nT.DevHandoff:e.file.editor_type?(0,gG.wN)(e.file.editor_type):gG.nT.Design,prevSelectedView:g}));break}case az.nb.PINNED_FILE:(0,l4.N7)(u,e.file.parentOrgId,_,e.file.teamId)?(0,l4.QV)(e.file.key,c,u,f?_:null,r,e.file.editorType):a(ea.$T({view:"fullscreen",fileKey:e.file.key,editorType:e.file.editorType?(0,gG.wN)(e.file.editorType):gG.nT.Design,prevSelectedView:g}));break;case az.nb.PROTOTYPE:let h=e.prototype.fig_file;(0,l4.N7)(u,h.parent_org_id,_,h.team_id)?(0,l4.QV)(h.key,c,u,f?_:null,r,h.editor_type||void 0,"proto"):a(ea.$T({view:"prototype",file:h,nodeId:e.prototype.page_id,prevSelectedView:g}));break;case az.nb.REPO:{let t=(0,hS.mr)(e.repo,e.branches,i);if(!t)throw Error(`Branch not found for repo ${e.repo.id}`);let n=t.key;(0,l4.N7)(u,t.parent_org_id,_,t.team_id)?(0,l4.QV)(n,c,u,f?_:null,r):a(ea.$T({view:"fullscreen",fileKey:n,editorType:gG.nT.Design,prevSelectedView:g}));break}case az.nb.PROJECT:(0,x.KF)(!0,"Do not expect to be rendering project tiles here");break;case az.nb.OFFLINE_FILE:a(hI.NA({file:e.file,openNewFileIn:Eg.ai.SAME_TAB,source:hR.U.OFFLINE_FILE_TILE}));break;default:(0,x.xb)(e)}}({tile:t,e:a,dispatch:T,selectedView:i,permissionsState:h,selectedBranchKeyByRepoId:b,renamingItem:Y})},[D,e.currentPlanFilter,e.currentSharedByFilter,T,h,b,i,Y]),Q=o.useCallback((t,a,r)=>{hH({tile:t,index:r,dispatch:T,selectedView:i,currentPlanFilter:e.currentPlanFilter,currentSharedByFilter:e.currentSharedByFilter,isListView:D})},[D,e.currentPlanFilter,e.currentSharedByFilter,i,T]),X=o.useCallback((e,t,a)=>{g({data:{tile:e,targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:a,enableRestore:t.shiftKey&&t.altKey}})},[g]),q=(0,az.nw)(e.tiles);o.useEffect(()=>{let e=()=>{L(hW())};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),o.useEffect(()=>{if(E.Ay.mobile&&E.Ay.safari&&t.current){let e=t.current.className,a=()=>{t.current&&(t.current.className=""),setTimeout(()=>{t.current&&(t.current.className=e)},500)};return window.addEventListener("load",a),()=>window.removeEventListener("load",a)}},[]);let Z=o.createElement("div",{className:k.cx.flex.alignCenter.$},o.createElement(nM.$c,{initialViewMode:e.sortFilterOptions.tileSortFilterConfig.viewMode,onViewModeChange:t=>{(0,V.sx)("file view toggle",{viewType:t===lQ.XU.GRID?"grid":"list"}),T(ea.JF({selectedView:i,config:{...e.sortFilterOptions.tileSortFilterConfig,viewMode:t}}))}})),et=(0,en.canEditTeam)(c?.team_id||N?.id||"",h),er=o.createElement("div",null),ei=o.createElement(nM.$f,{options:e.sortFilterOptions,selectedView:i,dispatch:T}),el=o.createElement("div",{className:k.cx.flex.$},ei,Z),eo=o.createElement(nM.C9,{options:e.sortFilterOptions,selectedView:i,dispatch:T,sharedWithYouFilters:e.sharedWithYouFilters});er=o.createElement("div",{className:O()(!e.isFolder||et?"tiles_view--viewBarWrapper--AR2zB":"tiles_view--viewBarWrapperWithTopPadding--4zGHb","tiles_view--viewBarWrapperNoExtraLeftPadding--L4Ueu")},o.createElement(nM.lU,{leftSide:eo,rightSide:el}));let[es,ec]=o.useState([]);if((0,hf.Cm)(es),0===j.length){let t="";if(e.emptyStateText?t=e.emptyStateText:(E.Ay.mobile||E.Ay.tablet)&&(t=(0,A.t)("file_browser.folder.this_project_is_empty")),t)return o.createElement("div",{className:hM},!e.hideSorter&&er,o.createElement("div",{className:k.cx.flex.$},o.createElement("div",{className:hB},t),S&&o.createElement("div",{className:k.cx.mr32.$},o.createElement(hP.R,{teamId:N.id,canEditTeam:et}))));if(e.emptyStateContent)return o.createElement("div",{className:hM},e.emptyStateContent)}let ed=hO+(D?` ${hE._O} `:` ${hE.CK} `),em=e.tiles.length>0;if(!y)return o.createElement("div",{className:"tiles_view--loading--6rn3X"},o.createElement(td.kt,null));let eu=!D&&R>0&&w?.isAtFileLimit&&!(0,p.kc)().fbg_starter_project_redesign&&!I(),e_=eu?(()=>{if(0===R)return 0;let e=window.innerWidth-hU.sidebar-hU.metaContainer,t=hU.singleTileWithPadding-hU.singleTile;return Math.max((e-hU.tileGridOuterPadding-R*t)/R/hV+hU.tileGridOuterPadding,0)})():void 0;return o.createElement("div",{className:hO,ref:t},o.createElement("div",{className:ed,ref:a},!e.hideSorter&&er,o.createElement("div",{className:k.cx.flex.$},em&&o.createElement(hT.d,{sortConfig:e.sortFilterOptions.tileSortFilterConfig.sort,handleOpenTile:Q,items:j,sortBy:t=>{let a=e.sortFilterOptions.tileSortFilterConfig,r=a.sort.dir===lQ.ue.DESC?lQ.ue.ASC:lQ.ue.DESC;T(ea.JF({selectedView:i,config:{...a,sort:{key:t,dir:t===a.sort.key?r:a.sort.dir}},tab:"recentsAndSharing"===i.view?i.tab:void 0}))},viewType:D?lQ.XU.LIST:lQ.XU.GRID,updateRenderedItems:ec,handleOpenDropdown:X,checksForViewOnlyLabels:S?{teamId:N.id,isLockedTeam:S}:void 0}),em&&(S?o.createElement("div",{className:k.cx.mr32.$},o.createElement(hP.R,{teamId:N.id,canEditTeam:et})):o.createElement(hv,{canEditTeam:et,isDraftsFolder:u}))),eu&&o.createElement(eg.fu,{name:"Tiles View Upsell",properties:{buttonColor:"blue"}},o.createElement("div",{className:hF},[...Array(R)].map((e,t)=>o.createElement(hh,{key:t}))),o.createElement("div",{className:"tiles_view--upgradeOverlay--ZwyMN",style:{marginTop:`-${e_}px`,height:`${e_}px`}},o.createElement("p",{className:"tiles_view--upgradeTitle--PFF3i text--fontPos20--Bcz97 text--_fontBase--QdLsd"},(0,A.tx)("file_browser.folder.ready_for_an_upgrade")),o.createElement("p",{className:"tiles_view--upgradeText--ApEbY text--fontPos14--OL9Hp text--_fontBase--QdLsd"},(0,A.tx)("file_browser.folder.do_more_paid_plan",{lineBreak:o.createElement("br",null)})),o.createElement(ts.vd,{onClick:()=>{if(w){let e=eA.b.TILES_VIEW_UPSELL;T((0,ep.to)({type:z.V,data:{upsellSource:e,teamId:w.team.id}}))}},trackingProperties:{trackingDescriptor:tZ.c.VIEW_PLANS}},(0,A.tx)("file_browser.folder.view_plans")))),!(E.Ay.mobile||E.Ay.tablet)&&e.newFileTile&&!v&&!em&&!eu&&o.createElement("div",{className:k.cx.flex.$},o.createElement("div",{className:"tiles_view--importPrompt--srrJn",ref:e=>{e&&(r.current=l0.findDOMNode(e))}},o.createElement("div",{className:hB},o.createElement("div",{className:"tiles_view--emptyTitle--3Vwmu"},e.isFolder?(0,A.t)("file_browser.folder.this_project_doesn_t_have_any_files"):(0,A.t)("file_browser.folder.no_files_yet")),(0,A.tx)("file_browser.folder.create_a_new_file_to_start_from_scratch_lucid",{lineBreak:o.createElement("br",null)}))),S?o.createElement("div",{className:k.cx.mr32.$},o.createElement(hP.R,{teamId:N.id,canEditTeam:et})):o.createElement(hv,{canEditTeam:et,isDraftsFolder:u}))),(()=>{let t=f?.tile??null,a=f?.index;return o.createElement(eg.fu,{name:e.isFolder?eD.e0.PROJECT_TILES_VIEW_DROPDOWN:eD.e0.TILES_VIEW_DROP_DOWN,enabled:_,properties:{tileType:t?.type,tileFileId:t?.type===az.nb.FILE?t?.file.key:void 0}},o.createElement(lY.i,{...e,tile:t,selectedTiles:q,openTile:e=>{t&&K(t,e,a)},dropdownVisible:_}))})())}function hJ(e){return o.createElement("div",{className:hM},o.createElement("div",{className:hB},e.emptyStateText,o.createElement("div",{onMouseDown:e.onClaimClick},o.createElement(ts.cw,{className:"tiles_view--emptyButton--oAaGe"},(0,A.tx)("tile.empty.join_as_owner")))))}var hZ=a(788811),h0=a(181912),h1=a(439729),h2=a(995852),h8=a(760824),h4=a(596607),h3=a(802026),h5=a(986060),h9=a(454984),h6=a(127987),h7=a(659969);let ye=(0,ad.Ju)(function(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.teams)[e.teamId].subscription,r=e.paymentRequiresAction;return(0,o.useEffect)(()=>{h7.T.getHostedInvoicesPage({teamId:e.teamId}).then(({data:e})=>{(0,l4.FJ)(e.meta.hosted_invoice_url,"_blank","noopener")})},[e.teamId]),(0,o.useEffect)(()=>{r||a===ex.Qh.INCOMPLETE||t(ep.ES({type:ye.type}))},[a,t,r]),o.createElement(r$.Eo,{title:(0,A.t)("payments.pending_subscription_modal_header"),hideCancel:!0,confirmText:(0,A.t)("payments.got_it"),trackedConfirmationProperties:{trackingDescriptor:tZ.c.CONFIRM_VERIFY_PAYMENT,trackingContextName:"Confirm Verify Payment"}},(0,A.tx)("payments.pending_subscription_modal_description"))},"PENDING_SUBSCRIPTION_CHANGE_MODAL");var yt=a(999394);let ya="banners--warn--bC4ke",yr="banners--primaryCtaButton--tyhCJ",yn="banners--content--ciED3",yi="banners--titleSmall--ceZgU",yl="banners--bold--qt00U",yo="banners--message--9BMLM",ys="banners--messageSmall--YT-82",yc="banners--secondaryCtaButton--uYrvi",yd="banners--ctaButtonGroup--r8cfU",ym="banners--closeButton--IXY-V",yu="banners--teamBannerWithBackground--CwS6V banners--banner--l8udl",y_="banners--teamUpgradeNotice--gqc9c",yp="banners--softWarningBanner--QK9Y5",yg="banners--softWarningBannerBlue--uQmhb";var yf=a(677050),yE=a(403262),yh=a(169321),yy=a(123243);function yv(e,t){let a;if(!e.currentUserOrgId||!(0,er.wn)(e.currentUserOrgId,e))return null;let r=e.orgById[e.currentUserOrgId],n=(0,en.canAdminOrg)(e.currentUserOrgId,e),i=r.past_due_at&&(0,h0.A)(r.past_due_at).add(2,"weeks")>(0,h0.A)(new Date);if(!n&&i)return null;let l=(0,h4.zR)(e.orgUsersByOrgId[e.currentUserOrgId]).map(e=>o.createElement("span",{key:e.id,className:yl},e.user.handle," (",e.user.email,")"));return a=n?r.billing===h3.EZ.CHARGE_IMMEDIATELY?(0,A.tx)("payments.org_past_due_on_payment",{invoice:o.createElement("a",{onClick:()=>{t?.(ea.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:tU.J7.BILLING}))}},(0,A.tx)("payments.outstanding_invoice")),orgName:r.name}):(0,A.tx)("payments.org_past_due_on_payment_invoiced",{email:o.createElement("b",{className:yl},(0,p.W4)()),orgName:r.name}):(0,A.tx)("payments.please_reach_out_to_org_admins",{orgName:r.name,admins:(0,en.canMemberOrg)(e.currentUserOrgId,e)&&o.createElement("span",null," ",o.createElement(h1.T,{formatType:"disjunction"},l)),numAdmins:l.length}),{severity:yt.c.WARN,title:(0,A.t)("payments.payment_not_received"),message:a,cta:null,onClickCta:null}}function yb(e,t,a,r,n){let i=a?r.teams[a]:null;if(a&&!i||"file"===e)return null;let l=r.currentTeamId,s=i&&i.subscription===ex.Qh.GRACE_PERIOD,c=r.billingSummary,d=i?.subscription===ex.Qh.INCOMPLETE,u=!!i?.org_id,_=!!i?.subscription,g=e=>e?.status==="open"&&e?.payment_intent?.status===a0.pk.REQUIRES_SOURCE_ACTION,f=(0,p.kc)().requires_action_3ds_banner&&s&&!u&&_&&(g(c?.last_monthly_invoice)||g(c?.last_annual_invoice)),h=i&&(d||f),y=i&&i.subscription===ex.Qh.PAST_DUE,v=i&&i.subscription===ex.Qh.NO_MONTHLY_SUB_EDITOR_COUNT_EXCEEDED,b=a&&(0,en.canOwnTeam)(a,r),w=a&&(0,en.canAdminTeam)(a,r),T=a&&(0,en.canEditTeam)(a,r),I=i&&(0,er.oc)(i.id,r),N=i&&!(0,er.n0)(i)&&!i.student_team&&I,x=i&&(i.student_team_state===a0.kU.STUDENT_TEAM_CURRENT||i.student_team_state===a0.kU.STUDENT_TEAM_EXPIRED),C="folder"===e?t:null,S=0,k={showReminder:!1,showAccessRestricted:!1},R=a||C?.team_id,L="folder"===e&&!C;if(r.user){let t=R?(0,en.getRolesForUserAndTeam)(R,r):[],a=R&&(0,en.hasMinRole)(t,eL.e6.EDITOR),n=["folder","team"].includes(e)&&a,{ps_benchmark:i}=(0,p.kc)(),o=(0,H.cn)(r.user),s=r.userEduGracePeriods;L?(i&&l&&(0,H.hP)(r.user.id,r.roles.byTeamId,r.teams[l])||!i&&(0,H.ej)(r.user.id,r.roles.byTeamId,r.teams))&&(k=(0,H.df)(s,o),S=(0,H.Me)(s)):R&&n&&(k=(0,H.GU)(s,o,R,!!r.teams[R].student_team),S=(0,H.qS)(s,R))}let D=i&&!(0,er.n0)(i)&&!i.student_team&&C&&!(0,r_.Gi)(C),P=D&&C.is_invite_only,F=D&&C.is_view_only,O=C&&(0,r_.sp)(C),M=!O&&!i&&C&&(0,er.ZZ)(C,r),B=()=>n?.(h2.WX({teamId:i.id,selectedView:r.selectedView})),U=e=>{e.preventDefault(),n?.(ep.to({type:h6.v,data:{teamId:a}}))},V=()=>{n?.(ea.$T({view:"teamAdminConsole",teamId:a,teamAdminConsoleViewTab:Ef.I.SETTINGS}))},W=()=>m.Ay.redirect("/education/apply",E.Ay.isIpadNative?void 0:"_blank"),j=()=>n?.(h2.WX({teamId:i.id,openInNewTab:!1,selectedView:{view:"team",teamId:i.id}})),G=()=>n?.(ep.to({type:z.V,data:{upsellSource:eA.b.BANNER}})),$=yv(r,n);if($)return $;let Y=(0,er._b)(i),K=i&&i.subscription_raw!==ex.Qh.OK&&(0,er.WQ)(i)&&w&&eS.ng.getProTrialStatus(i)!==h5.a.IN_TRIAL&&Y,Q=["team","folder"].includes(e)&&T&&(0,tf.cU)(i),X=T&&function(e,t){let a=e&&t[e.id]?.dismissed_legacy_team_upgrade_notice_banner;return(0,tf.zs)(e)&&!a}(i,r.userTeamFlags),q=(0,eC.R$)(r.user,r.currentUserOrgId),J=eS.ng.canSeeExpiredProTrialBanner(r.userTeamFlags,i,r),Z=i&&r.userTeamFlags[i.id]?.[eS.lg],ee=J&&(I||T&&!Z),et=r.user?(0,H.x$)(r.eduPeriodEnd,(0,H.cn)(r.user)):1/0,ei=et>0&&et!==1/0,el=0===et,eo=i&&i.student_team_state===a0.kU.STUDENT_TEAM_CURRENT,es=i&&i.student_team_state===a0.kU.STUDENT_TEAM_EXPIRED&&I,ec=ei&&b&&eo,ed=el&&b&&es,em=ei&&T&&eo,eu=el&&!T&&eo,e_=(0,p.kc)().edu_offboarding_experience&&(ec||ed||em||eu),ef=(0,p.kc)().edu_offboarding_experience&&es;if(s&&!f)return{severity:yt.c.WARN,title:(0,A.t)("payments.payment_failed"),message:(0,A.t)("payments.payment_failed_explanation"),cta:w?(0,A.t)("payments.update_payment"):(0,A.t)("payments.contact_admin"),ctaTrackingProperties:w?{trackingDescriptor:tZ.c.UPDATE_PAYMENT}:void 0,onClickCta:w?V:null};if(y)return{severity:yt.c.WARN,title:(0,A.t)("payments.locked"),message:(0,A.t)("payments.locked_description",{teamName:i.name}),cta:w?(0,A.t)("payments.update_payment"):(0,A.t)("payments.contact_admin"),ctaTrackingProperties:w?{trackingDescriptor:tZ.c.UPDATE_PAYMENT}:void 0,onClickCta:w?V:null};if(v)return{severity:yt.c.WARN,title:(0,A.t)("payments.locked"),message:w?o.createElement("span",null,(0,A.tx)("payments.no_monthly_sub_over_editor_limit_admin.seat_rename",{contactSupport:o.createElement("a",{href:`mailto:${(0,p.W4)()}`},(0,A.tx)("payments.contact_support"))})):o.createElement("span",null,(0,A.tx)("payments.no_monthly_sub_over_editor_limit.seat_rename")),cta:w?(0,A.t)("payments.manage_plan"):null,onClickCta:w?()=>{n?.(ea.$T({view:"teamAdminConsole",teamId:a,teamAdminConsoleViewTab:Ef.I.SETTINGS}))}:null};if(ee){let e,t,r,l;return I?(e=T?(0,A.tx)("payments.pro_trial_expiry.locked_description_on_team",{teamName:i.name,lowerUsageLink:o.createElement(eg.$z,{onClick:U},(0,A.tx)("payments.pro_trial_expiry.lower_usage"))}):(0,A.tx)("payments.pro_trial_expiry.locked_description_for_viewer_on_team",{teamName:i.name}),t=T?(0,A.tx)("payments.pro_trial_upgrade_cta.upgrade"):null,r=`${yp} `,l="Pro Trial Expiry Banner Locked"):(e=i?(0,A.tx)("payments.pro_trial.trial_ended_banner_message",{teamName:i.name}):(0,A.tx)("payments.pro_trial.trial_ended_banner_message.no_name"),t=(0,A.tx)("payments.pro_trial.trial_ended_banner_upgrade_cta"),r=`${yp} ${yg}`,l="Pro Trial Expiry Banner Unlocked"),{severity:yt.c.WARN_SOFT,title:(0,A.t)("payments.pro_trial.trial_ended_banner_title"),message:e,cta:t,onClickCta:T?j:void 0,svg:yE.A,bannerClassName:r,trackingContextName:l,dismissible:!I,onClose:I?void 0:()=>{a&&n?.(h8.bE({all_team_flags:[{team_id:a,flags:{[eS.lg]:!0}}]}))}}}if(e_){let e=()=>n?.(ep.to({type:h9.ZL,data:{team:i}}));if(ec||em)return{severity:yt.c.WARN_SOFT,title:(0,A.tx)("edu.banner.your_education_status_is_expiring_soon"),message:(0,A.tx)("edu.banner.to_keep_collaborating_upgrade_team",{teamName:i.name,verify:o.createElement(ts.Us,{href:"/education/apply",target:"_blank",trusted:!0},(0,A.tx)("edu.banner.verify_your_education_status"))}),cta:(0,A.tx)("edu.banner.learn_more"),onClickCta:e,svg:yf.A,bannerClassName:`${yp} ${yg}`,trackingContextName:"Edu Offboarding Banner"};if(ed)return{severity:yt.c.WARN_SOFT,title:(0,A.tx)("edu.banner.your_education_plan_has_expired"),message:(0,A.tx)("edu.banner.team_is_now_view_only_for_all_members",{teamName:i.name}),cta:(0,A.tx)("edu.banner.learn_more"),onClickCta:e,svg:yf.A,bannerClassName:yp,trackingContextName:"Edu Offboarding Banner"};if(eu)return{severity:yt.c.WARN_SOFT,title:(0,A.tx)("edu.banner.your_education_plan_has_expired"),message:(0,A.tx)("edu.banner.you_can_no_longer_edit_files",{teamName:i.name}),cta:(0,A.tx)("edu.banner.learn_more"),onClickCta:e,svg:yf.A,bannerClassName:yp,trackingContextName:"Edu Offboarding Banner"}}else if(ef)return{severity:yt.c.WARN_SOFT,title:(0,A.tx)("edu.banner.team_s_education_status_has_expired",{teamName:i.name}),message:(0,A.tx)("edu.banner.move_or_duplicate_files_to_another_location_to_save_your_work"),cta:null,svg:yf.A,bannerClassName:yp,trackingContextName:"Edu Offboarding Banner"};else if(!N||r.checks&&r.checks.isEligibleForLockedRedesign&&r.checks.isEligibleForLockedRedesign(!x&&N)){if(q){let e=r.user.external_restricted_org_id,t=(0,A.t)("external_collaboration_restricted.banner.restriction_description.no_org");if(e&&r.orgById[e]){let a=r.orgById[e];t=(0,A.t)("external_collaboration_restricted.banner.restriction_description",{organizationName:a.name})}return{severity:yt.c.WARN,title:(0,A.t)("external_collaboration_restricted.banner.title"),message:t,cta:null,ctaTrackingProperties:void 0,onClickCta:null}}if(r.user&&["team","folder"].includes(e)&&k.showAccessRestricted){let e,t=(0,A.t)("banner.edu_grace_period.your_education_plan_has_expired");return i?(0,H.eB)(r.user.id,r.roles.byTeamId,i)?e=(0,A.t)("banner.edu_grace_period.team_is_now_view_only_for_all_members",{teamName:i.name}):(0,H.QS)(r.user.id,r.roles.byTeamId,i)?e=(0,A.t)("banner.edu_grace_period.you_can_no_longer_edit_files_in_team",{teamName:i.name}):(t=(0,A.t)("banner.edu_grace_period.your_education_plan_has_expired.is_member",{teamName:i.name}),e=(0,A.t)("banner.edu_grace_period.move_or_duplicate_files_to_another_location_to_save_your_work")):e=(0,A.t)("banner.edu_grace_period.education_team_members_need_to_verify_their_education_status"),{severity:yt.c.ANNOUNCEMENT,title:t,message:e,learnMoreUrl:"/education/",cta:(0,A.t)("banner.edu_grace_period.verify_status_button"),onClickCta:W,svg:yf.A,bannerClassName:y_}}if(["team","folder"].includes(e)&&k.showReminder)return{severity:yt.c.ANNOUNCEMENT,title:(0,A.t)("banner.edu_grace_period.only_edu_grace_period_days_left",{daysLeft:S}),message:(0,A.t)("banner.edu_grace_period.to_keep_collaborating_on_figma_s_education_plan_please_verify_your_status_soon"),cta:(0,A.t)("banner.edu_grace_period.verify_status_button"),onClickCta:W,svg:yy.A};else if(P||F)return{severity:yt.c.WARN,title:(0,A.t)("payments.folder_locked"),message:(0,A.t)("payments.folder_locked_description",{projectType:"Invite"==(P?"Invite":"View")?(0,A.t)("payments.invite_only_projects"):(0,A.t)("payments.view_only_projects"),teamName:i.name}),learnMoreUrl:"/pricing",cta:T?(0,A.t)("payments.upgrade_now"):(0,A.t)("payments.contact_admin_for_details"),ctaTrackingProperties:T?{trackingDescriptor:tZ.c.UPGRADE_NOW,upsellSource:eA.b.BANNER}:void 0,onClickCta:T?B:null};else if(M&&"folder"===e)return{severity:yt.c.WARN,title:(0,A.t)("payments.locked"),message:(0,A.t)("payments.projects_deprecated"),learnMoreUrl:"/pricing-faq#what-changes-for-me",cta:null,onClickCta:null};else if(O&&"folder"===e)return{severity:yt.c.WARN,title:(0,A.t)("payments.abandoned_project"),message:(0,A.t)("payments.abandoned_project_description"),cta:null,onClickCta:null};else if(X){let e=(0,A.t)("payments.file_limit_unified",{figmaFiles:er.WW,figjamFiles:er.WW});Q?X||(e=(0,A.t)("payments.file_limit_figjam",{figjamFiles:er.WW})):e=(0,A.t)("payments.file_limit_figma",{figmaFiles:er.WW});let t=()=>o.createElement("button",{type:"button",onClick:G,className:"banners--bannerInlineTextButton--GRx12"},(0,A.tx)("payments.check_out_our_paid_plans")),a=i?o.createElement("span",null,(0,A.tx)("payments.team_over_starter_team_limit_with_button.legacy_team",{fileLimitString:e,checkoutOurPlans:t(),teamName:i.name})):o.createElement("span",null,(0,A.tx)("payments.team_over_starter_team_limit_with_button.no_legacy_team_present",{fileLimitString:e,checkoutOurPlans:t()}));return{severity:yt.c.ANNOUNCEMENT,title:(0,A.t)("payments.team_over_starter_team_limit_title"),message:a,cta:(0,A.t)("payments.upgrade_now"),ctaTrackingProperties:{trackingDescriptor:tZ.c.UPGRADE_NOW,upsellSource:eA.b.BANNER},onClickCta:B,svg:yh.A,bannerClassName:y_,trackingContextName:"Unified Legacy / Beta File Limit Banner"}}else if(K){let e=(0,h0.A)(i.grace_period_end).toDate(),t=(0,A.tx)("payments.pro_plan_ends_relative_time_string",{relative_time_string:o.createElement(l9.h1,{date:e})});return Y||(t=(0,A.tx)("payments.pro_plan_ends_on_date",{end_date:new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)})),{severity:yt.c.ANNOUNCEMENT,title:t,message:(0,A.t)("payments.pro_plan_ends_for_team_description",{teamName:i.name}),cta:(0,A.t)("payments.pro_plan_ends_button"),onClickCta:j,svg:Y?yh.A:yE.A,trackingContextName:"Promo Code Expiration Banner",bannerClassName:Y?y_:void 0}}else if(h){let e=d?(0,A.t)("payments.complete_team_payment_description",{teamName:i.name}):(0,A.t)("payments.complete_team_renewal_payment_description");return{severity:yt.c.WARN,title:(0,A.t)("payments.complete_payment"),message:e,cta:o.createElement(i2.V,{trackingProperties:{trackingDescriptor:tZ.c.VERIFY_PAYMENT,trackingContextName:"Verify Payment Banner"},onClick:()=>n?.(ep.to({type:ye,data:{teamId:a,paymentRequiresAction:!!f}}))},(0,A.tx)("payments.complete_payment_cta")),onClickCta:null}}}else{let e;return e=w||T?o.createElement("span",null,o.createElement("b",{style:r9.sx.fontSemiBold.$},(0,A.tx)("payments.team_over_starter_team_limit",{teamName:i.name})," "),(0,A.tx)("payments.team_over_starter_team_limit_upgrade",{teamName:i.name,lowerYourUsage:o.createElement("a",{href:"#",onClick:U},(0,A.tx)("payments.team_over_starter_team_limit_lower_your_usage"))})):o.createElement("span",null,o.createElement("b",{style:r9.sx.fontSemiBold.$},(0,A.tx)("payments.team_over_starter_team_limit",{teamName:i.name})," "),(0,A.tx)("payments.contact_admin_for_details")),{severity:yt.c.WARN,title:(0,A.t)("payments.locked"),message:e,cta:T?(0,A.t)("payments.upgrade_now"):null,ctaTrackingProperties:T?{trackingDescriptor:tZ.c.UPGRADE_NOW,upsellSource:eA.b.BANNER}:void 0,onClickCta:T?B:null}}return null}function yw(e,t,a,r,n){return!!yb(t,a,r,{userFlags:e.userFlags,userTeamFlags:e.userTeamFlags,currentOrgId:e.currentUserOrgId,selectedView:e.selectedView,userEduGracePeriods:e.userEduGracePeriods,fileKeysByFolderId:e.fileKeysByFolderId,isFreeUser:e.isFreeUser,userAnalyticsData:e.userAnalyticsData,checks:n,...(0,en.getPermissionsState)(e)},null)}function yT(e){return(0,s.d4)(t=>yw(t,e.resourceType||ex.vt.FOLDER,e.resource||null,e.teamId||null,e.checks))}function yI(e,t){let a={...e};return"string"==typeof t.title&&(a.title=t.title),"string"==typeof t.message&&(a.message=t.message),a}var yN=a(114961),yx=a(702595);let yC=o.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M0 24C0 10.7452 10.7452 0 24 0V0C37.2548 0 48 10.7452 48 24V24C48 37.2548 37.2548 48 24 48V48C10.7452 48 0 37.2548 0 24V24Z",fill:"var(--color-bg-inverse, black)"}),o.createElement("mask",{id:"mask0_4:25",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"48",height:"48"},o.createElement("path",{d:"M0 24C0 10.7452 10.7452 0 24 0V0C37.2548 0 48 10.7452 48 24V24C48 37.2548 37.2548 48 24 48V48C10.7452 48 0 37.2548 0 24V24Z",fill:"var(--color-bg-inverse, black)"})),o.createElement("g",{mask:"url(#mask0_4:25)"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 20H17.5C16.1193 20 15 21.1193 15 22.5C15 23.8807 16.1193 25 17.5 25H20L20 20ZM21 19.9963L21 25H21.6738C23.3383 25 24.9874 25.3196 26.5314 25.9416L28 26.5333V17.7761L27.3548 18.1614C25.4287 19.3116 23.2393 19.9428 21 19.9963ZM17.5 19H20.6897C22.8561 19 24.9821 18.4135 26.8421 17.3028L28.2437 16.4658C28.5769 16.2668 29 16.507 29 16.8951V27.2737C29 27.628 28.6418 27.8699 28.3132 27.7375L26.1577 26.8692C24.7325 26.2951 23.2103 26 21.6738 26H21.3286L22.5613 29.698C22.7771 30.3455 22.2951 31.0142 21.6126 31.0142H20.4415C19.5807 31.0142 18.8164 30.4634 18.5442 29.6467L17.3333 26.0142L17.3272 25.9958C15.4745 25.9057 14 24.375 14 22.5C14 20.567 15.567 19 17.5 19ZM18.3874 26.0142L19.4928 29.3304C19.6289 29.7388 20.0111 30.0142 20.4415 30.0142H21.6126L20.2792 26.0142H18.3874Z",fill:"var(--color-icon-oninverse, white)"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32.5 22C32.5 21.1716 31.8284 20.5 31 20.5V19.5C32.3807 19.5 33.5 20.6193 33.5 22C33.5 23.3807 32.3807 24.5 31 24.5V23.5C31.8284 23.5 32.5 22.8284 32.5 22Z",fill:"var(--color-icon-oninverse, white)"}));function yS(e){let{title:t,message:a,cta:r,ctaTrackingProperties:n,learnMoreUrl:i,onClickCta:l,severity:s,secondaryCTA:c,secondaryOnClickCta:d,svg:m,trackingContextName:u="Banner",contentStyles:_,reverseCtas:p,dismissible:g,onClose:f}=e;return s===yt.c.ANNOUNCEMENT?o.createElement(eg.fu,{name:u,properties:{severity:s,...e.tracking}},o.createElement("div",{className:yn},m&&o.createElement(t_.B,{svg:m,useOriginalSrcFills_DEPRECATED:!0}),o.createElement("div",{className:yo},o.createElement("div",{className:yi},t),o.createElement("div",{className:ys},a)),o.createElement(ts.e2,{reversed:p,className:yd},l&&o.createElement(ts.vd,{className:yr,onClick:l,trackingProperties:n},r),d&&o.createElement(ts.tM,{className:yc,onClick:d},c),g&&f&&o.createElement(ne.Jn,{className:ym,onClick:f})))):s===yt.c.EVENT?o.createElement(eg.fu,{name:u,properties:{severity:s,...e.tracking}},o.createElement("div",{className:`${yn} ${_}`},o.createElement("div",{className:"banners--eventMegaphoneIcon--7J3rx"},yC),o.createElement("div",{className:yo},o.createElement("p",{className:yi},t),o.createElement("p",{className:ys},a)),o.createElement(ts.e2,{className:yd},l&&o.createElement(ts.vd,{className:yr,onClick:l,trackingProperties:n},r),d&&o.createElement(ts.tM,{className:yc,onClick:d},c),g&&f&&o.createElement(ne.Jn,{className:ym,onClick:f})))):o.createElement(eg.fu,{name:u,properties:{severity:s,...e.tracking}},o.createElement("div",{className:`${yn} ${_}`},o.createElement(t_.B,{svg:yx.A,className:"banners--warningIcon--A5YS-",autosize:s===yt.c.WARN_SOFT}),o.createElement("div",{className:yo},o.createElement("span",{className:"banners--title--OIA0P"},t),a,i&&o.createElement("span",null,"\xa0",o.createElement("a",{target:"_blank",rel:"noopener",href:i},(0,A.tx)("payments.learn_more")))),o.createElement(ts.e2,{reversed:p,className:yd},l&&o.createElement(ts.vd,{className:yr,onClick:l,trackingProperties:n},r),!l&&o.createElement("div",{className:"banners--ctaMessage--5MB88"},r),g&&f&&o.createElement(ne.Jn,{className:ym,onClick:f}))))}let yk=(0,s.Ng)(e=>({userFlags:e.userFlags,userTeamFlags:e.userTeamFlags,currentOrgId:e.currentUserOrgId,selectedView:e.selectedView,userEduValidated:!!e.user?.student_validated_at,userEduGracePeriods:e.userEduGracePeriods,fileKeysByFolderId:e.fileKeysByFolderId,isFreeUser:e.isFreeUser,userAnalyticsData:e.userAnalyticsData,...(0,en.getPermissionsState)(e)}))(function(e){let t;let a=(0,J.Rs)(ee.UpR,{}),r=(0,te.Yz)(),n=e.folderId?e.folders[e.folderId]:null,i=n?n.team_id:null,l=e.dispatch,c=i&&(0,en.canAdminTeam)(i,e),d=i?e.teams[i]:null,m=!!d?.org_id,u=!!d?.subscription;(0,o.useEffect)(()=>{(0,p.kc)().requires_action_3ds_banner&&i&&!m&&u&&c&&l(yN.Be({teamId:i}))},[l,i,m,u,c]);let _=(0,s.d4)(e=>e.teamBilling?.summary),g=yb(ex.vt.FOLDER,n??null,i,{eduPeriodEnd:a.data?.currentUser?.eduPeriodEnd,billingSummary:_,checks:{isEligibleForLockedRedesign:r},...e},e.dispatch);if(!g)return o.createElement("div",null);t=n?yI({resourceType:ex.vt.TEAM,teamId:i,folderId:n.id},g):yI({resourceType:"recents"},g);let f=g.severity===yt.c.WARN?ya:"",E=g.bannerClassName||"",h=`${yu} ${f} ${E}`;return o.createElement("div",{className:h},o.createElement(yS,{...g,tracking:t}))});var yA=a(841563),yR=a.n(yA),yL=a(347632);function yD(e){let t=(0,s.d4)(nZ.hK),a=(0,s.wA)(),r=e.tabs?o.createElement(yL.f,{tabs:e.tabs.map(e=>o.createElement(yL.r,{key:e.tabName,tab:null,onClick:()=>a(ea.$T(e.view)),tabName:e.tabName,isSelected:yR()(t,e.view),ariaLabel:e.ariaLabel}))}):o.createElement(o.Fragment,null);return o.createElement(nM.g2,{leftSide:r,rightSide:e.viewbarActions||[]})}let yP=e=>({tileSortFilterConfig:e.deletedFiles,sortKeys:[lQ.C0.TRASHED_AT,lQ.C0.NAME,lQ.C0.CREATED_AT,lQ.C0.TOUCHED_AT]});function yF(){let e=(0,s.wA)(),t=(0,s.d4)(e=>e.tileSortFilterStateByView),a=(0,eI._6)(),r=(0,hm.xx)(yP)(t);return o.createElement(yD,{viewbarActions:["deletedFiles"===a.view?o.createElement(nM.gr,{key:3,dispatch:e,options:r,selectedView:a}):null,o.createElement(nM.ye,{key:0,config:r.tileSortFilterConfig}),o.createElement(nM.mc,{key:1,dispatch:e,options:r,selectedView:a}),o.createElement(nM.$c,{key:2,initialViewMode:r.tileSortFilterConfig.viewMode,onViewModeChange:t=>{(0,V.sx)("file view toggle",{viewType:t===lQ.XU.GRID?"grid":"list"}),e(ea.JF({selectedView:a,config:{...r.tileSortFilterConfig,viewMode:t}}))}})]})}function yO(){let e;let t=(0,s.wA)(),a=(0,s.d4)(e=>e.currentUserOrgId),r=(0,s.d4)(e=>e.currentTeamId),n=(0,tn.S)();e=a?n?.currentUser.baseOrgUser?.draftsProject:(0,p.kc)().ps_benchmark&&r?n?.currentUser.currentTeamUser?.draftsProject:n?.currentUser.draftsProject;let i=(0,s.d4)(e=>e.tileSortFilterStateByView),l=(0,eI._6)();if(!n||!e)return o.createElement(yD,{tabs:[],viewbarActions:[]});let c="deletedFiles"===l.view?(0,hm.xx)(yP)(i):(0,hm.xx)(r_.ZN)(e.id,i);return o.createElement(yD,{tabs:(0,p.kc)().pdr_trashed_section?void 0:[{tabName:(0,A.t)("file_browser.tool_bar.drafts"),view:{view:"folder",folderId:e.id},ariaLabel:(0,A.t)("file_browser.tool_bar.drafts.aria_label")},{tabName:(0,A.t)("file_browser.tool_bar.deleted"),view:{view:"deletedFiles"},ariaLabel:(0,A.t)("file_browser.tool_bar.deleted.aria_label")}],viewbarActions:["deletedFiles"===l.view?o.createElement(nM.gr,{key:3,dispatch:t,options:c,selectedView:l}):null,o.createElement(nM.ye,{key:0,config:c.tileSortFilterConfig}),o.createElement(nM.mc,{key:1,dispatch:t,options:c,selectedView:l}),o.createElement(nM.$c,{key:2,initialViewMode:c.tileSortFilterConfig.viewMode,onViewModeChange:e=>{(0,V.sx)("file view toggle",{viewType:e===lQ.XU.GRID?"grid":"list"}),t(ea.JF({selectedView:l,config:{...c.tileSortFilterConfig,viewMode:e}}))}})]})}let yM={open:!0,openNewTab:!0,restoreFromVersion:!0,share:!0,copyLink:!0,rename:!0,duplicate:!0,delete:!0,createBranch:!0,moveFile:!0},yB=(0,hm.xx)(r_.ZN);function yU(e){let{sortFilterOptions:t,selectedBranchKeyByRepoId:a}=(0,nI.R)(t=>({sortFilterOptions:yB(e.folderId,t.tileSortFilterStateByView),selectedBranchKeyByRepoId:t.selectedBranchKeyByRepoId})),r=(0,hZ.Rp)(),n=(0,s.d4)(({currentUserOrgId:e})=>e);(0,h.I7)("exp_aa_test_org_drafts").getConfig();let i=()=>{},[l,c]=function(e){let t=(0,s.d4)(t=>t.tileSortFilterStateByView.folders.byId[e]??t.tileSortFilterStateByView.folders.default),a=(0,o.useMemo)(()=>({file_type:hu(t.filters.fileType),sort_order:t.sort.dir===lQ.ue.ASC?"asc":"desc",sort_column:h_(t.sort.key)}),[t.filters.fileType,t.sort.dir,t.sort.key]),[r,n]=(0,g.IT)((0,eK.BU)({folderId:e,...a}));return[r,(0,o.useCallback)(e=>{if("fetchNextPage"===e.type)return n.fetchNextPage();(0,x.xb)(e.type)},[n])]}(e.folderId),d=l.data?.folder,m=(0,te.Yz)(),u=(0,ti.vt)(d?.team_id),_=yT({resourceType:ex.vt.FOLDER,resource:d,teamId:d?.team_id||null,checks:{isEligibleForLockedRedesign:m}});i=o.useCallback(()=>{l.isFetchingNextPage||c({type:"fetchNextPage"})},[l.isFetchingNextPage,c]);let p=o.useMemo(()=>{let e=(l.data?.files||[]).map(e=>({type:az.nb.FILE,file:e})),t=l.data?.filesByRepoId||{};return[...e,...(l.data?.repos||[]).map(e=>({type:az.nb.REPO,repo:e,branches:t[e.id],selectedBranchKey:a[e.id]||""})),...Object.values(r).filter(e=>e.orgId===n).map(az.gB)]},[n,l.data?.files,l.data?.filesByRepoId,l.data?.repos,r,a]),f=!!d&&u,E=o.createElement(o.Fragment,null,o.createElement(hq,{newFileTile:!0,tiles:p,chunkSize:p.length,tileActions:yM,sortFilterOptions:t,emptyStateText:"",hideSorter:!0,isDataPartial:!!l.hasNextPage,eligibleForLockedStateRedesign:m(f)}),o.createElement(E3.cx,null)),y=o.createElement(tc.A,{loadingElementId:"loading-content-pane",loaded:"loaded"===l.status,loadingElementClassName:k.cx.pr32.$,backgroundColor:"default"},o.createElement(hp.B,{key:`${t.tileSortFilterConfig.filters.fileType}`,onShouldFetchNextPage:i},E));return(0,eg.T8)(o.createElement(i$.r,{viewBarSticky:!0,banner:_?o.createElement(yk,{folderId:e.folderId}):void 0,content:y,viewbar:o.createElement(yO,null)}),eD.e0.FILE_BROWSER,{view:"drafts"})}var yV=a(772841),yH=a(189430),yW=a(953993),yj=a(529982),yG=a(659838),y$=a(649433),yz=a(516056);let yY=(0,ad.Ju)(function(e){let t,a;let r=(0,s.wA)(),[n,i]=o.useState(""),l=(0,s.d4)(e=>e.deletedReposById),c=(0,s.d4)(e=>e.fileByKey),{reposToDelete:d,draftsToDelete:m,deleteAllDraftsAsync:u,isDeleteAll:_,isPermanentDeletion:g}=e,f=m.map(e=>e.name).concat(d.map(e=>e.name)),E=f.length>1;t=g?E?(0,A.t)("file_browser.draft_delete_modal.header_multiple_files_delete",{fileCount:f.length}):(0,A.t)("file_browser.draft_delete_modal.header_single_file_delete",{fileName:f[0]}):E?(0,A.t)("file_browser.draft_delete_modal.header_multiple_files_trash",{fileCount:f.length}):(0,A.t)("file_browser.draft_delete_modal.header_single_file_trash");let h=(t,a)=>{if(t.length>0){if(g){let a=t.reduce((e,t)=>(e[t.key]=!0,e),{});r(aV.YK({fileKeys:a,userInitiated:!0,onSuccessCallback:e.onDeleteSuccess}))}else{let a=t.reduce((e,t)=>(e[t.key]=t,e),{});r(aV.VK({fileKeys:a,userInitiated:!0,onSuccessCallback:e.onDeleteSuccess,hideVisualBell:!0}))}}let n={};a.forEach(e=>{let t=l[e.id];if(t)n[e.id]=t;else{let t=e.default_file_key&&c[e.default_file_key];t&&(n[e.id]={repo:e,main_file:t})}}),a.length>0&&(g?r((0,y$.YM)({repoIds:Object.keys(n),userInitiated:!0})):r((0,y$.hT)({reposById:n,userInitiated:!0})))},y=()=>yz.k.deleteAllPersonalDrafts().then(()=>r(aD.F.enqueue({message:(0,A.t)("file_browser.draft_delete_modal.async_delete_drafts_scheduled")}))).catch(()=>r(aD.F.enqueue({message:(0,A.t)("file_browser.draft_delete_modal.async_delete_drafts_scheduled_error")}))),v=()=>{let{draftsToDelete:t,reposToDelete:a}=e;t.length+a.length>100?r(e$.s.error((0,A.t)("file_browser.draft_delete_modal.unable_to_delete",{maxSize:100}))):(e.setSynchronousFileTransferInProgress(t.length>0),h(t,a))},b=()=>{u?y():v(),e.onClose()},w=o.useMemo(()=>n.trim().toLowerCase()!==(0,A.t)("file_browser.draft_delete_modal.button_delete").toLocaleLowerCase(),[n]);a=g?E?(0,A.t)("file_browser.draft_delete_modal.permanently_delete_multiple_drafts",{fileCount:f.length}):(0,A.t)("file_browser.draft_delete_modal.permanently_delete_one_draft"):E?(0,A.t)("file_browser.draft_delete_modal.you_are_about_to_delete_multiple_drafts",{fileCount:f.length}):(0,A.t)("file_browser.draft_delete_modal.you_are_about_to_delete_single_draft",{fileName:f[0]});let T=g?o.createElement(ts.qM,{onClick:b,disabled:w,trackingProperties:{isDeletingDraftFromDTM:!0,isPermanentDeletion:g},dataTestId:"draft-delete-confirmation-button"},o.createElement("span",{"data-tooltip":(0,A.t)("file_browser.draft_delete_modal.draft_deletion_tooltip",{deletionString:(0,A.t)("file_browser.draft_delete_modal.button_delete")}),"data-tooltip-type":w?ei.Ib.TEXT:null,"data-tooltip-max-width":180,"data-tooltip-show-above":!0},(0,p.kc)().ps_trashed_drafts_enabled?(0,A.t)("file_browser.draft_delete_modal.button_permanently_delete_files",{numFiles:f.length}):(0,A.t)("file_browser.draft_delete_modal.button_delete"))):o.createElement(rH.vd,{onClick:b,"data-testid":"draft-delete-confirmation-button",trackingProperties:{isDeletingDraftFromDTM:!0,isPermanentDeletion:g}},(0,A.tx)("file_browser.draft_delete_modal.button_delete_files",{numFiles:f.length}));return o.createElement(eg.fu,{name:"draftDeleteModal",properties:{itemCount:f.length,isDeleteAsync:!!u,isDeleteAll:!!_}},o.createElement(r$.XV,{title:t,minWidth:480,maxWidth:480,onClose:e.onClose,truncateTitleText:!0,fixedCenter:!0},o.createElement("div",{className:"draft_delete_modal--modalContent--QYGIS"},o.createElement("p",null,a," ",!g&&o.createElement("p",null,o.createElement("br",null),(0,A.tx)("file_browser.draft_delete_modal.you_can_access_drafts_from_deleted_drafts_section",{fileCount:f.length}))),o.createElement("p",{className:"draft_delete_modal--confirmationTextSpacing---MQEW"},g&&(0,A.tx)("file_browser.draft_delete_modal.permanently_delete_multiple_drafts_confirmation",{deletionString:(0,A.t)("file_browser.draft_delete_modal.button_delete")})),o.createElement("form",{onSubmit:b},g&&o.createElement("div",null,o.createElement(yG.L,{className:"draft_delete_modal--deleteDraftsInput--pCTUB",type:"text",dataTestId:"draft-delete-confirmation-input",value:n,onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()},onChange:e=>{i(e.currentTarget.value)},autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1})),o.createElement("div",{className:"draft_delete_modal--footer--SRSo6"},o.createElement(ts.nR,{onClick:e.onClose},(0,A.tx)("modal.cancel")),T)))))},"DraftDeleteModal");var yK=a(279358),yQ=a(70964),yX=a(255533),yq=a(821150);let yJ="drafts_to_move_page_view--fileCellDateSpan--xWiCm",yZ="drafts_to_move_page_view--dateColumn--V3e9G drafts_to_move_page_view--column--jpRzM table--column--974RA",y0="drafts_to_move_page_view--emptyContentContainer--w1lwc",y1="drafts_to_move_page_view--emptyContentHeader--35cXt",y2=(0,n5.jz)(iT.ISO);var y8=(e=>(e.DRAFT_FILES="draft-files",e.DELETED_DRAFT_FILES="deleted-draft-files",e))(y8||{}),y4=(e=>(e.NONE="NONE",e.SYNCHRONOUS_DELETION_OR_MIGRATION="SYNCHRONOUS_DELETION_OR_MIGRATION",e.ASYNC_FILE_MIGRATION="ASYNC_FILE_MIGRATION",e.ASYNC_FILE_DELETION="ASYNC_FILE_DELETION ",e.TRANSFER_COMPLETED="TRANSFER_COMPLETED",e))(y4||{});function y3(e){let t=e=>{switch(e){case"draft-files":return(0,A.t)("file_browser.drafts_to_move.drafts");case"deleted-draft-files":return(0,A.t)("file_browser.drafts_to_move.deleted_drafts");default:(0,x.xb)(e)}},a=t=>{let a=y8[t].replace(/-/g,"_");(0,tt.Cu)({text:a,name:"Drafts to move tab switch"},"cta_clicked"),e.setSelectedTab(y8[t])},r=Object.keys(y8).map(r=>o.createElement(yL.r,{tab:y8[r],onClick:()=>a(r),isSelected:e.selectedTab===y8[r],tabName:t(y8[r]),key:r}));return o.createElement(nM.g2,{leftSide:o.createElement(yL.f,{tabs:r}),rightSide:[]})}function y5(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.selectedView),r=(0,s.d4)(e=>e.selectedBranchKeyByRepoId),n=(0,l$.v)(),{item:i}=e,l=az.Tf.getFileKey(i)??"",c=(0,yW.Y)(l,az.Tf.getFavoritedResourceType(i),az.Tf.getOrgId(i),az.Tf.getFavoriteResourceTeamId(i)),d=o.useMemo(()=>"loaded"===c.status?!!c.favorite:az.Tf.getIsFavorited(i),[i,c]),m=e=>r=>{r.detail>1&&!az.Tf.getTrashedAt(i)&&(hH({tile:e,index:0,dispatch:t,selectedView:a}),n(e,r),r.stopPropagation())};return o.createElement("div",{className:k.cx.inlineFlex.minW0.$},o.createElement("button",{className:"drafts_to_move_page_view--draftThumbnail--whTtS",onClick:m(i),"data-testid":`fileTile-${l}`},o.createElement(rd.H5,{file:i.type===az.nb.FILE?i.file:(0,hS.mr)(i.repo,i.branches,r),noBorder:!0}),o.createElement("div",{className:"drafts_to_move_page_view--topLeftControls--kfCRe"},o.createElement(l6.x,{tile:i,iconSize:16})),d&&o.createElement("div",{className:"drafts_to_move_page_view--topRightControls--dD-Od"},o.createElement("div",{className:"drafts_to_move_page_view--control--W49tq"},o.createElement(rm.r,{setFavorite:f.lQ,favoriteType:(0,eh.UL)(i.type),resourceId:l,noHoverState:!0,size:rm.m.SMALL,orgId:az.Tf.getOrgId(i)??null,teamId:az.Tf.getFavoriteResourceTeamId(i),disableTooltip:!0})))),o.createElement("div",{className:k.cx.ml14.minW0.flex.flexColumn.itemSelfCenter.$},o.createElement("button",{className:"drafts_to_move_page_view--fileName--U3mn4",onClick:m(i)},az.Tf.getName(i)),e.shouldDisplayFileDates&&o.createElement("div",{className:"drafts_to_move_page_view--fileCellDatesSection--LFnvg"},o.createElement("span",{className:yJ},(0,A.tx)("file_browser.drafts_to_move.file_created_at_label",{timeDifference:o.createElement(l9.h1,{date:az.Tf.getCreatedAt(i)})})),o.createElement("span",{className:yJ},(0,A.tx)("file_browser.drafts_to_move.file_last_modified_at_label",{timeDifference:o.createElement(l9.h1,{date:az.Tf.getTouchedAt(i)??""})})))))}function y9({currentFileTransferState:e}){let t="dark"===(0,ia.DP)(),a=e=>o.createElement(o.Fragment,null,o.createElement(td.kt,{size:"large"}),o.createElement("p",{className:"drafts_to_move_page_view--transferContentHeader--ljikD"},(0,A.tx)("file_browser.drafts_to_move.file_transfer_header",{transferType:"ASYNC_FILE_MIGRATION"===e?(0,A.tx)("file_browser.drafts_to_move.file_transfer_migration_type"):(0,A.tx)("file_browser.drafts_to_move.file_transfer_deletion_type")})),o.createElement("p",null,(0,A.tx)("file_browser.drafts_to_move.file_transfer_description"))),r=()=>o.createElement("div",{className:"drafts_to_move_page_view--slideIn--c-NGK"},o.createElement("div",{className:"drafts_to_move_page_view--animatedContentContainer--z1sdh"},o.createElement(yQ.Gv,{src:t?"https://static.figma.com/uploads/c9f2d8cbce5754a2b6e3e3e81adf5fe313429577":"https://static.figma.com/uploads/6212099329ba7714b869112a09f8dfffce71edf5",containerClassName:"drafts_to_move_page_view--allDoneGif--mwZxC",height:100,width:100}),o.createElement("p",{className:y1},(0,A.tx)("file_browser.drafts_to_move.empty_header")),o.createElement("p",null,(0,A.tx)("file_browser.drafts_to_move.empty_body_text")))),n=()=>o.createElement(td.kt,{size:"large"});return o.createElement("div",{className:y0},(()=>{switch(e){case"ASYNC_FILE_MIGRATION":case"ASYNC_FILE_DELETION ":return a(e);case"TRANSFER_COMPLETED":return r();default:return n()}})())}function y6(){let e=(0,s.wA)(),t=(0,s.d4)(e=>e.user?.personal_drafts_folder_id),a=(0,s.d4)(e=>e.fileKeysByFolderId),r=(0,s.d4)(e=>e.fileKeysByRepoId),n=(0,s.d4)(e=>e.repoIdsByFolderId),i=(0,s.d4)(e=>e.repos),l=(0,s.d4)(e=>e.fileByKey),c=(0,s.d4)(e=>e.selectedView),d=(0,s.d4)(e=>e.selectedBranchKeyByRepoId),m=(0,s.d4)(e=>e.userFlags),u=m.personal_draft_migration_scheduled,_=m.personal_draft_migration_completed,g=m.personal_draft_deletion_scheduled,f=m.personal_draft_deletion_completed,E=(0,s.d4)(e=>e.loadedFolders),y=(0,s.d4)(e=>e.deletedFilesByKey),v=(0,s.d4)(e=>e.deletedReposById),{windowInnerWidth:b}=(0,yH.l)(),w=(0,J.Rs)(ee.vXh,{}),T=(0,J.Rs)(ee.Jzf,{projectId:t??""},{enabled:!!t}),I=(0,l$.v)(),[N,x]=o.useState("draft-files"),[C,S]=o.useState(!1),[R,L]=o.useState("NONE"),[D,P]=o.useState(!1),[F,M]=o.useState(!1);o.useEffect(()=>{u&&(0,rW.rO)(u.updatedAt,_?.updatedAt)?L("ASYNC_FILE_MIGRATION"):g&&(0,rW.rO)(g.updatedAt,f?.updatedAt)?L("ASYNC_FILE_DELETION "):D?L("SYNCHRONOUS_DELETION_OR_MIGRATION"):L("NONE")},[u,_,g,f,D]),o.useEffect(()=>{e(e_.h3({orgId:null}))},[e]);let B="loaded"===w.status,U=o.useMemo(()=>{if(!B)return[];let e=[];return w.data?.currentUser?.draftsFolderId&&e.push(w.data.currentUser.draftsFolderId),e},[B,w]),V=o.useMemo(()=>T.data?.project?.status!==yV.tT.Loaded?new Set:new Set((T.data?.project.data?.undeletedFilesHighLimit??[]).map(e=>e.key)),[T]),H=o.useMemo(()=>{if(T.data?.project?.status!==yV.tT.Loaded)return new Set;let e=new Set;return(T.data?.project.data?.undeletedFilesHighLimit??[]).forEach(t=>{t.fileRepoId&&e.add(t.fileRepoId)}),e},[T]),W=o.useCallback(e=>V.has(e),[V]),j=o.useCallback(e=>H.has(e),[H]);o.useEffect(()=>U.forEach(t=>B&&e((0,eK.jl)({folderId:t,loadedFolders:E}))),[E,U,e,B]);let{getConfig:G}=(0,h.I7)("ps_async_draft_move_limit",void 0,!0),$=G().get("async_limit",100),z=B&&U.every(e=>e&&"loaded"===E[e]),Y=o.useMemo(()=>Object.keys(y).map(e=>y[e]).filter(e=>!e.file_repo_id&&e.folder_id===t&&W(e.key)),[y,t,W]),Q=o.useMemo(()=>Object.keys(v).map(e=>v[e]).filter(e=>e&&e.main_file&&e.main_file.folder_id===t&&e.repo&&j(e.repo.id)),[v,t,j]),X=o.useMemo(()=>U.flatMap(e=>n[e]).map(e=>i[e]).filter(e=>!!e&&j(e.id)),[U,i,n,j]),q=o.useMemo(()=>U.flatMap(e=>a[e]).map(e=>l[e]).filter(e=>!!e&&W(e.key)),[U,l,a,W]);o.useEffect(()=>{let e=q.length+X.length,t=Y.length+Q.length;z&&!F&&(0===e&&t>0&&x("deleted-draft-files"),M(!0))},[z,F,q.length,X.length,Q.length,Y.length]);let Z=o.useMemo(()=>q.concat(Y).map(e=>({type:az.nb.FILE,file:e})),[q,Y]),et="deleted-draft-files"===N?Y:q,ea=o.useMemo(()=>et.map(e=>({type:az.nb.FILE,file:e})),[et]),er=o.useMemo(()=>X.map(e=>{let t=r[e.id].map(e=>l[e]).filter(e=>!!e);return{type:az.nb.REPO,repo:e,branches:t,selectedBranchKey:d[e.id]}}),[X,d,l,r]),en=o.useMemo(()=>Q.map(e=>({type:az.nb.REPO,repo:e.repo,branches:[e.main_file],selectedBranchKey:e.main_file?.key})),[Q]),ei="deleted-draft-files"===N?en:er,el=en.concat(er),eo=ea.concat(ei),es=Z.length>0||el.length>0,ec=eo.length>0,[ed,em]=o.useState([]),eu=()=>{e(ep.Ce()),S(!1)},ef=(t,a)=>{e(aD.F.enqueue({message:(0,A.t)("visual_bell.files_moved_to_folder",{fileCount:a,folderName:t})})),P(!1),em([])},eE=()=>{P(!1),em([])},eh=e=>{let t=[],a=[];return e.forEach(e=>{e.type===az.nb.FILE&&t.push(e.file),e.type===az.nb.REPO&&a.push(e.repo)}),{draftsToMove:t,reposToMove:a}},ey=t=>{let{draftsToMove:a,reposToMove:r}=eh(ed);S(!0),e(ep.to({type:yY,data:{isPermanentDeletion:t,draftsToDelete:a,reposToDelete:r,deleteAllDraftsAsync:ed.length>$,setSynchronousFileTransferInProgress:P,onDeleteSuccess:eE,onClose:eu}}))},ev=()=>{let{draftsToMove:t,reposToMove:a}=eh(ed);S(!0),e(ep.to({type:yK.K,data:{draftsToMove:t,reposToMove:a,moveAllDraftsAsync:ed.length>$,onMoveSuccess:ef,onClose:eu,setSynchronousFileTransferInProgress:P}}))},eb=function(e,t,a,r){let n=r>=1200,i=[{name:(0,A.t)("file_browser.drafts_to_move.table_header_name"),className:"drafts_to_move_page_view--nameColumn--sSZYF drafts_to_move_page_view--column--jpRzM table--column--974RA",getSortValue:e=>az.Tf.getName(e),cellComponent:e=>o.createElement(y5,{item:e,shouldDisplayFileDates:!n})}];return n&&i.push({name:(0,A.t)("file_browser.drafts_to_move.table_header_last_modified"),className:yZ,getSortValue:e=>az.Tf.getTouchedAt(e)??"",cellComponent:e=>{let t=az.Tf.getTouchedAt(e);return t?o.createElement(l9.h1,{date:t}):""}},{name:(0,A.t)("file_browser.drafts_to_move.table_header_created"),className:yZ,getSortValue:e=>az.Tf.getCreatedAt(e),cellComponent:e=>o.createElement(l9.h1,{date:az.Tf.getCreatedAt(e)})}),i.push({name:"",className:"drafts_to_move_page_view--moveButtonColumn--Mvc2P drafts_to_move_page_view--column--jpRzM table--column--974RA",cellComponent:r=>0===a?o.createElement(o.Fragment,null,o.createElement(ts.tM,{className:O()("drafts_to_move_page_view--openDraftButton--zXZGf",k.cx.if(!!az.Tf.getTrashedAt(r),k.cx.invisible).$),onClick:e=>t(e,r)},(0,A.tx)("file_browser.drafts_to_move.open_draft_button")),o.createElement(ts.tM,{className:"drafts_to_move_page_view--moveDraftButton--GmBWa",onClick:t=>e(t,r)},(0,A.tx)("file_browser.drafts_to_move.move_draft_button"))):o.createElement(o.Fragment,null)}),i}((t,a)=>{let{draftsToMove:r,reposToMove:n}=eh([a]);e(ep.to({type:yK.K,data:{draftsToMove:r,reposToMove:n,onMoveSuccess:ef,onClose:eu,setSynchronousFileTransferInProgress:P}})),t.stopPropagation()},(t,a)=>{hH({tile:a,index:0,dispatch:e,selectedView:c}),I(a,t),t.stopPropagation()},ed.length,b),[ew,eT,eI]=(0,yj.z)({columnName:(0,A.t)("file_browser.drafts_to_move.table_header_last_modified"),isReversed:!0},eo,eb),eN=o.createElement("div",{className:y0},o.createElement("span",{className:y1},(0,A.tx)("file_browser.drafts_to_move.empty_header")),o.createElement("span",null,(0,A.tx)("file_browser.drafts_to_move.empty_content_description",{tab:o.createElement("button",{className:"drafts_to_move_page_view--emptyContentTab--GKlRP",onClick:()=>x("draft-files"===N?"deleted-draft-files":"draft-files")},"draft-files"===N?(0,A.t)("file_browser.drafts_to_move.deleted_drafts"):(0,A.t)("file_browser.drafts_to_move.drafts"))})));if("NONE"!==R)return o.createElement(y9,{currentFileTransferState:R});let ex=ed.length<=0||ed.length>$,eC="deleted-draft-files"===N||!(0,p.kc)().ps_trashed_drafts_enabled,eS=o.createElement(tc.A,{loadingElementClassName:"drafts_to_move_page_view--loadingPage--ZZyqG",loadingElementId:"loading-content-pane",loaded:z,backgroundColor:"default"},ec?o.createElement(o.Fragment,null,o.createElement("div",{className:"drafts_to_move_page_view--tableWrapper--b-sz2"},o.createElement(yX.Cj,{selectAllDisabled:eI.length>$,items:eI,columns:eb,actionBarClassName:O()("drafts_to_move_page_view--actionBar--BbYQh",{"drafts_to_move_page_view--actionBarHidden--l4K4A":C}),getItemKey:e=>az.Tf.getFileKey(e)??"",minContentWidth:728,actionBar:e=>o.createElement("div",{className:"drafts_to_move_page_view--actionBarButtons--RUREB"},!ex&&o.createElement(ts.rb,{className:"drafts_to_move_page_view--deleteDraftsButton--Aesaa",onClick:()=>ey(eC)},eC?(0,A.tx)("file_browser.drafts_to_move.bulk_delete_drafts_button"):(0,A.tx)("file_browser.drafts_to_move.bulk_trash_drafts_button")),o.createElement(ts.vd,{className:"drafts_to_move_page_view--moveDraftsButton--fZf6H",disabled:ex,onClick:ev},(0,A.tx)("file_browser.drafts_to_move.bulk_move_drafts_button",{numSelected:ed.length}))),emptyContent:"",onSelectedItemsChange:em,itemTypeContext:{itemType:"draftToMove",getSelectedCountString:e=>(0,A.t)("file_browser.drafts_to_move.selected_count_files",{numSelected:e})},isLoading:!yq.s1,sortState:ew,onSetSortState:eT,shouldRoundBordersForSelectedRows:!0,styleOverrideClassNames:{row:"drafts_to_move_page_view--row--v9ugA",header:"drafts_to_move_page_view--header--qsyde",unselectedCheckbox:"drafts_to_move_page_view--visibleCheckbox--UOqli",batchActionClearButton:"drafts_to_move_page_view--batchActionClearButton--Qk923"},scrollContainerInnerClassName:"drafts_to_move_page_view--scrollContainer--yiQAz",rowHeightOverride:y2}))):es?eN:o.createElement(y9,{currentFileTransferState:"TRANSFER_COMPLETED"}));return(0,eg.T8)(o.createElement(i$.r,{content:eS,viewbar:es&&o.createElement(o.Fragment,null,o.createElement("div",{className:"drafts_to_move_page_view--viewbar--wJ6Pu"},o.createElement("div",{className:"drafts_to_move_page_view--viewbarWarning--6T7y-"},o.createElement(K.EG,{className:"drafts_to_move_page_view--yellowIcon--xHN3r"}),o.createElement("div",null,o.createElement("h1",{className:"drafts_to_move_page_view--viewbarHeading--02fvs"},(0,A.tx)("file_browser.drafts_to_move.viewbar_heading")),o.createElement("ul",{className:"drafts_to_move_page_view--viewbarDescription--dV8s3"},o.createElement("li",null,(0,A.tx)("file_browser.drafts_to_move.move_drafts_below")),o.createElement("li",null,(0,A.tx)("file_browser.drafts_to_move.drafts_for_personal_work")),o.createElement("li",null,(0,A.tx)("file_browser.drafts_to_move.access_to_drafts"))),o.createElement("div",{className:"drafts_to_move_page_view--viewbarActions--v-cwt"},o.createElement(ts.vd,{className:"drafts_to_move_page_view--moveAllDraftsButton--9-TlX",onClick:()=>{S(!0),e(ep.to({type:yK.K,data:{reposToMove:el.map(e=>e.repo),draftsToMove:Z.map(e=>e.file),onMoveSuccess:ef,isMoveAll:!0,moveAllDraftsAsync:Z.length>$,onClose:eu,setSynchronousFileTransferInProgress:P}}))}},(0,A.tx)("file_browser.drafts_to_move.move_all_drafts_button")),o.createElement(ts.NY,{className:"drafts_to_move_page_view--learnMoreButton--lUnQ9 drafts_to_move_page_view--moveAllDraftsButton--9-TlX",href:"https://www.figma.com/blog/updates-to-how-drafts-work/",target:"_blank"},(0,A.tx)("file_browser.drafts_to_move.viewbar_learn_more_link")))))),o.createElement("div",{className:"drafts_to_move_page_view--tabViewBarContainer--lsoH0"},o.createElement(y3,{selectedTab:N,setSelectedTab:x})))}),eD.e0.FILE_BROWSER,{view:"draftsToMove",selectedTab:N})}var y7=a(308548),ve=a(363137),vt=a(305821),va=a(302586),vr=a(954244);let vn=(0,nN.eU)(!1);var vi=a(694778),vl=a(695763),vo=a(824189),vs=a(544949),vc=a(182876),vd=a(115630);let vm="file_creation_thumbnails_shelf--betaTag--PUVzI";function vu(e){let t=e.isDisabled||e.isLoading,a=e.onClick,r=o.useRef(null),n=o.useCallback(e=>{a(e),r.current?.blur()},[a]);return o.createElement("button",{className:O()(e.containerClassName??"file_creation_thumbnails_shelf--fileCreationThumbnail--atC3k",t&&"file_creation_thumbnails_shelf--disabled--6IyUM"),ref:r,"data-testid":e.isLoading?void 0:e.dataTestId,tabIndex:0,disabled:t,onClick:t?void 0:n,"data-onboarding-key":e.dataOnboardingKey},!e.isLoading&&o.createElement(o.Fragment,null,o.createElement("div",{className:e.iconContainerClassName??"file_creation_thumbnails_shelf--iconContainer--e9sFx"},e.icon),o.createElement("div",{className:"file_creation_thumbnails_shelf--productNameContainer--F3ppZ"},o.createElement("span",{className:"file_creation_thumbnails_shelf--productName--13XZL"},e.title),o.createElement("span",{className:"file_creation_thumbnails_shelf--productSubtitle--Oxgs2"},e.isDisabled?(0,A.t)("file_browser.creation_buttons.disabled_by_organization"):e.subtitle)),e.showBetaTag&&o.createElement(W.Ex,{className:vm,text:(0,A.t)("file_browser.creation_buttons.beta"),color:W.zE.DEFAULT_TRANSLUCENT}),e.showAlphaTag&&o.createElement(W.Ex,{className:vm,text:(0,A.t)("file_browser.creation_buttons.alpha"),color:W.zE.DEFAULT_TRANSLUCENT})))}function v_(e){return o.createElement(vd.v,{mode:e.brand},o.createElement(vu,{title:e.title,subtitle:e.subtitle,icon:e.icon,isDisabled:e.isDisabled,isLoading:e.isLoading,showBetaTag:e.showBetaTag,showAlphaTag:e.showAlphaTag,dataTestId:e.dataTestId,onClick:e.onClick}))}function vp(){let e=o.useRef(null),[t,a]=o.useState(!1),r=o.useCallback(e=>{e.intersectionRatio<.5?a(!0):a(!1)},[a]);(0,vc.g)(e,r,{threshold:.5,rootMargin:"-50px"});let n=(0,s.d4)(e=>e.user?.drafts_folder_id),{isLoading:i,canCreateDesignFile:l,canCreateFigjamFile:c,canCreateSlidesFile:d,canShowCreateSitesFile:m}=(0,vi.n)(n),u=(0,vo.q)(),_=[o.createElement(vg,{key:"design",isDisabled:!l,isLoading:i}),o.createElement(vf,{key:"whiteboard",isDisabled:!c,isLoading:i}),!1,(0,p.kc)().piper&&o.createElement(vE,{key:"slides",isDisabled:!d,isLoading:i}),u&&o.createElement(vl.Vq,{key:"cooper",isLoading:i}),o.createElement(vh,{key:"import",isLoading:i})].filter(Boolean),g=_.length,[f,E]=o.useState(window.innerWidth);o.useEffect(()=>{let e=()=>E(window.innerWidth);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[E]);let{breakpointClassName:h,minWidth:y}=function(e,t){if("ja"===t){if(3===e)return{minWidth:980,breakpointClassName:"file_creation_thumbnails_shelf--jaThreeButtonShelf--Ud7nt"};if(4===e)return{minWidth:1200,breakpointClassName:"file_creation_thumbnails_shelf--jaFourButtonShelf--79zBr"};if(5===e)return{minWidth:1410,breakpointClassName:"file_creation_thumbnails_shelf--jaFiveButtonShelf--wqwQT"};if(6===e)return{minWidth:1620,breakpointClassName:"file_creation_thumbnails_shelf--jaSixButtonShelf--UuUEX"}}if(3===e)return{minWidth:810,breakpointClassName:"file_creation_thumbnails_shelf--enThreeButtonShelf--y7NDF"};if(4===e)return{minWidth:970,breakpointClassName:"file_creation_thumbnails_shelf--enFourButtonShelf--ctLk0"};if(5===e)return{minWidth:1140,breakpointClassName:"file_creation_thumbnails_shelf--enFiveButtonShelf--qkEvu"};if(6===e)return{minWidth:1310,breakpointClassName:"file_creation_thumbnails_shelf--enSixButtonShelf--rVrBv"};throw Error("Invalid number of file creation buttons")}(g,o.useMemo(()=>(0,p.mm)()[0],[])),v=f<y,b=(0,_k.Xr)(vn),w=t||v;return(o.useEffect(()=>{b(w)},[w,b]),v)?null:o.createElement("div",{className:O()("file_creation_thumbnails_shelf--fileCreationThumbnailsShelf--KMJ6U",h),ref:e},_)}function vg({isDisabled:e,isLoading:t}){let a=(0,Ev.$)(ex._Y.DESIGN,Eg.f6.FILE_BROWSER_THUMBNAILS_RECENTS,"recents_file_creation_thumbnails_created");return o.createElement(v_,{title:(0,A.t)("file_browser.creation_buttons.new_design_file"),subtitle:(0,A.t)("file_browser.creation_buttons.design_and_prototype"),brand:"design",dataTestId:"new-design-file-button",icon:o.createElement(y7.k,null),isDisabled:e,isLoading:t,onClick:a})}function vf({isDisabled:e,isLoading:t}){let a=(0,Ev.$)(ex._Y.WHITEBOARD,Eg.f6.FILE_BROWSER_THUMBNAILS_RECENTS,"recents_file_creation_thumbnails_created");return o.createElement(v_,{title:(0,A.t)("file_browser.creation_buttons.new_fig_jam_board"),subtitle:(0,A.t)("file_browser.creation_buttons.whiteboard_and_jam"),brand:"whiteboard",dataTestId:"new-whiteboard-file-button",icon:o.createElement(ve.D,null),isDisabled:e,isLoading:t,onClick:a})}function vE({isDisabled:e,isLoading:t}){let a=(0,Ev.$)(ex._Y.SLIDES,Eg.f6.FILE_BROWSER_THUMBNAILS_RECENTS,"recents_file_creation_thumbnails_created");return o.createElement(v_,{title:(0,A.t)("file_browser.creation_buttons.new_slide_deck"),subtitle:(0,A.t)("file_browser.creation_buttons.present_and_share"),brand:"piper",dataTestId:"new-slides-file-button",icon:o.createElement(vt.l,null),isDisabled:e,isLoading:t,showBetaTag:(0,p.kc)().omnicreate_slides_beta_tag,onClick:a})}function vh({isLoading:e}){let t=(0,s.wA)();return o.createElement(vu,{title:(0,A.t)("file_browser.creation_buttons.import"),subtitle:(0,A.t)("file_browser.creation_buttons.bring_in_files"),dataTestId:"file-import-button",icon:o.createElement(vr.R,null),isLoading:e,onClick:()=>{t((0,vs.L)({showImportModal:(0,p.kc)().figjam_3p_file_importer}))},containerClassName:"file_creation_thumbnails_shelf--importThumbnail--xooVC file_creation_thumbnails_shelf--fileCreationThumbnail--atC3k",iconContainerClassName:"file_creation_thumbnails_shelf--importIconContainer--FjJ9d file_creation_thumbnails_shelf--iconContainer--e9sFx",dataOnboardingKey:hn._s})}var vy=a(522739),vv=a(701707),vb=a(384162),vw=a(453909),vT=a(178323),vI=a(887811),vN=a(102310),vx=a(106112),vC=a(218934),vS=a(27928),vk=a(583765),vA=a(67048),vR=a(435898),vL=a(315944),vD=a(40092);let vP="templates_bar--headerTitle--6BSKy text--fontPos13--xW8hS text--_fontBase--QdLsd",vF="templates_bar--seeMoreIcon--u6ar5",vO="templates_bar--seeMoreTitle--a9L3F text--fontPos13--xW8hS text--_fontBase--QdLsd",vM="templates_bar--tileBottomRowNameOnly--SMVhN text--fontPos11--2LvXf text--_fontBase--QdLsd";var vB=a(613557),vU=a(98015);function vV(e){let t=(0,s.wA)(),a=(0,eN.iZ)(),r=(0,vI.vD)(a),n=(0,vI.Qk)(!1,r),i=(0,pc.oh)(n),l=(0,pc.mC)(n),c=!!(0,p.kc)().figjam_hybrid_shelf,d=vI.NV.has(r)?r:oI.iF.ALL;o.useEffect(()=>{if(!i&&!l)return null!==d?t(vb.Dw({shelfType:oI.cS.FILE_BROWSER_TEMPLATES_BAR,filterLabel:d})):t(vb.sz({shelfType:oI.cS.FILE_BROWSER_TEMPLATES_BAR}))},[i,l,t,r,d]);let m=(0,s.d4)(e=>e.communityHub.shelves[oI.cS.FILE_BROWSER_TEMPLATES_BAR]||[]),u=o.useMemo(()=>{let e=new Map;return m.forEach(t=>{e.set(t.id,t.shelf_content.map(e=>e))}),e},[m]),_=o.useCallback(t=>{if(!c||"All"!==t)return null;if(e.showInterimTemplatesShelf&&d)return(0,A.t)("file_browser.templates_shelf.for_you");switch(d){case"ENG":return(0,A.t)("file_browser.hybrid_templates_shelf.for_eng");case"MKT":return(0,A.t)("file_browser.hybrid_templates_shelf.for_mkt");case"UR":return(0,A.t)("file_browser.hybrid_templates_shelf.for_ur");case"PM":return(0,A.t)("file_browser.hybrid_templates_shelf.for_pm");case"DES":return(0,A.t)("file_browser.hybrid_templates_shelf.for_des");default:return null}},[c,d,e.showInterimTemplatesShelf]),g=o.useMemo(()=>{let e=[];return m.forEach(t=>{t.shelf_content.length>0&&e.push({tabKey:t.id,tabTitle:t.title,modifiedTabTitle:_(t.title)})}),e},[m,_]);return e.isShowing&&0!==g.length?o.createElement(eg.fu,{name:"topbar_templates_shown"},o.createElement("div",{className:"templates_bar--container--0nCIh"},o.createElement(vH,{tabNameToTemplatesMap:u,folderId:e.folderId,onClose:e.onClose,tabList:g,newFileFrom:e.newFileFrom,normJobPrefix:r,team:e.team,showInterimTemplatesShelf:e.showInterimTemplatesShelf}))):null}function vH(e){let[t,a]=o.useState(e.tabList[0]),[r,n]=o.useState(e.tabNameToTemplatesMap.get(t.tabKey)??[]),[i,l]=o.useState(null),{sizeRef:s,numTemplates:c,templateWidth:d,templateHeight:m}=function(e,t){let a=(0,o.useRef)(null),[r,n]=(0,o.useState)(0),i=Math.min(r-2*(t?2:24),t?2229:2002),l=t?0:1;(0,o.useLayoutEffect)(()=>{n(a?.current?.offsetWidth??0)},[n,a]),(0,md.w)(a,e=>{n(e.width)});let s=t?16:12,c=(0,o.useMemo)(()=>i?Math.min(Math.floor((i+s)/(171+s))-l,e):0,[i,s,l,e]),d=c&&i?Math.floor((i-s*(c+(t?1:0)))/(c+l)):0,m=d?Math.floor(d*(t?136:124)/171):0;return{sizeRef:a,numTemplates:c,templateWidth:d,templateHeight:m}}(r?.length??0,e.showInterimTemplatesShelf),u=!e.showInterimTemplatesShelf&&!!(0,p.kc)().figjam_hybrid_shelf;o.useEffect(()=>{if(!e.tabList||0===e.tabList.length)return;let t=e.tabList[0];a(t),n(e.tabNameToTemplatesMap.get(t.tabKey)??[])},[e.tabList,e.tabNameToTemplatesMap]),o.useEffect(()=>{n(e.tabNameToTemplatesMap.get(t.tabKey)??[])},[t,e.tabNameToTemplatesMap]);let _=o.createElement(vz,{tabs:e.tabList,activeTab:t,setActiveTab:a,hasHybridShelf:u,showInterimTemplatesShelf:e.showInterimTemplatesShelf});return o.createElement(o.Fragment,null,o.createElement("div",{className:O()("templates_bar--headerContainer--3-3sN",{"templates_bar--headerContainerInterim--T-5sO":e.showInterimTemplatesShelf,"templates_bar--headerContainerRegular--9hrY3":!u&&!e.showInterimTemplatesShelf,"templates_bar--headerContainerHybrid--COZhA":u})},!u&&o.createElement("div",{className:"templates_bar--headerLeft--p4T6m"},!e.showInterimTemplatesShelf&&o.createElement(vj,null),o.createElement(vG,{normJobPrefix:e.normJobPrefix,showInterimTemplatesShelf:e.showInterimTemplatesShelf})),o.createElement("div",{className:O()({"templates_bar--headerTabs--AAQDi":u,"templates_bar--headerCenter--vLNAU":!u&&!e.showInterimTemplatesShelf,"templates_bar--headerEnd--rI6SI":e.showInterimTemplatesShelf})},u&&o.createElement("div",{className:k.cx.mr8.mt1.$},o.createElement(vD.K7,null)),_),o.createElement("div",{className:O()({"templates_bar--headerRight--OruBN":u,"templates_bar--headerRightOld--j-Via":!u&&!e.showInterimTemplatesShelf,"templates_bar--headerRightOldInterim--AfhZM":e.showInterimTemplatesShelf})},o.createElement(ne.Jn,{className:"templates_bar--closeButton--XeG8e templates_bar--headerIcon--qAnUr",onClick:e.onClose}))),u&&o.createElement(vK,{folderId:e.folderId,team:e.team,newFileFrom:e.newFileFrom}),o.createElement("div",{className:O()({"templates_bar--body--PKvm-":!e.showInterimTemplatesShelf,"templates_bar--bodyInterim--WbP1K":e.showInterimTemplatesShelf}),ref:s},o.createElement("div",{className:O()({"templates_bar--tilesContainer--OHkyf":!e.showInterimTemplatesShelf,"templates_bar--tilesContainerInterim--mTj4h":e.showInterimTemplatesShelf})},r?.slice(0,c??0).map((a,r)=>o.createElement("div",{key:a.id,style:{width:d,height:m,marginRight:e.showInterimTemplatesShelf?16:12}},o.createElement(v$,{hubFile:a,rank:r,folderId:e.folderId,tab:t,duplicatingHubId:i,setDuplicatingHubId:l,newFileFrom:e.newFileFrom,showInterimTemplatesShelf:e.showInterimTemplatesShelf})))),!e.showInterimTemplatesShelf&&o.createElement(vW,{activeTab:t,width:d,height:m})))}function vW(e){var t;let a=(0,s.wA)(),r=(t=e.activeTab.tabTitle,o.useMemo(()=>{switch(t){case"Brainstorm":let e="https://static.figma.com/uploads/1b49485e3b8b3a7e8a6f8099d37025abf445eaa9";return{color:"#FFBDF2",bgColor:"#FFF5FD",src:e,srcSet:`https://static.figma.com/uploads/17a263251c06e92c17ebcf534106f46de670f126, ${e} 2x`};case"All":let a="https://static.figma.com/uploads/f48b345384c95e6becd8f0afd653da77516f3754";return{color:"#80CAFF",bgColor:"#D5EAFA",src:a,srcSet:`https://static.figma.com/uploads/4fb27f103e1c26fd5018968f50d4de3ffc525981, ${a} 2x`};case"Diagram":let r="https://static.figma.com/uploads/fb96122b14ed3ae9c4f99858e53f198e4519881d";return{color:"#FFD966",bgColor:"#FFECB4",src:r,srcSet:`https://static.figma.com/uploads/b7d203490b07b0cc0996a32539727dd689542562, ${r} 2x`};case"Meetings":let n="https://static.figma.com/uploads/5bd4f8be4b68b3406a4efc955452d597843fe395";return{color:"#FF8311",bgColor:"#F9CA9F",src:n,srcSet:`https://static.figma.com/uploads/7919f8b041bc650fc00a468edb5639ca277fce09, ${n} 2x`};case"Planning":let i="https://static.figma.com/uploads/a5b7b70525c9fd5b075019212a36a4c85f296f0c";return{color:"#DA9DFF",bgColor:"#EBCAFF",src:i,srcSet:`https://static.figma.com/uploads/5df93072bc6c4eff89a96011b823515116dd80f2, ${i} 2x`};default:return null}},[t]));return r?o.createElement("div",{className:"templates_bar--seeMoreContainer--3XOPB"},o.createElement("button",{className:"templates_bar--seeMore--wyQRY",style:{backgroundColor:r.bgColor,width:e.width,height:e.height},onClick:()=>{(0,tt.Cu)({triggeredFrom:"file-browser",category:e.activeTab.tabTitle},"template_shelf_see_more_clicked"),(0,vS.KF)(a,{templateInsertionLocation:cM.RD.NEW_FILE,triggeredFrom:"templatesShelfSeeMore",initiallySelectedCategoryTitle:e.activeTab.tabTitle})}},o.createElement("div",{className:O()({"templates_bar--seeMoreImageWrapper--DtT2m":!0,"templates_bar--seeMoreImageDiagrammingWrapper--k-JG5":"Diagram"===e.activeTab.tabTitle})},o.createElement("img",{className:"templates_bar--seeMoreImage--xJ2jX",srcSet:r.srcSet,src:r.src,alt:`See all ${e.activeTab.tabTitle} templates`})),o.createElement("div",{className:"templates_bar--seeMoreSwoopWrapper--smJZh",style:{width:e.width,height:e.height}},o.createElement("svg",{className:"templates_bar--seeMoreSwoop--eQyRg",viewBox:"0 0 171 83",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("g",null,o.createElement("path",{d:"M171 31.852C156.81 34.3516 142.025 35.6728 126.834 35.6728C78.3913 35.6728 34.0786 22.236 0 0V83H171V31.852Z",fill:r.color})))),o.createElement("div",{"data-preferred-theme":"light",className:"templates_bar--seeMoreContent--Lh02f",style:r9.sx.add({height:"All"===e.activeTab.tabTitle?"30%":"45%"}).$},"All"===e.activeTab.tabTitle?o.createElement("div",{className:vO},(0,A.tx)("file_browser.templates_shelf.see_all"),o.createElement(t_.B,{className:vF,svg:vB.A})):o.createElement(o.Fragment,null,o.createElement("div",{className:vO},e.activeTab.modifiedTabTitle??e.activeTab.tabTitle),o.createElement("div",{className:"templates_bar--seeMorePrompt--LIZSe text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,A.tx)("file_browser.templates_shelf.see_more"),o.createElement(t_.B,{className:vF,svg:vB.A})))))):null}function vj(){return o.createElement("svg",{className:"templates_bar--headerIconLeft--RIFKx",width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M0.997498 3.32344C0.997498 2.22161 1.89071 1.3284 2.99254 1.3284H12.9678C14.0696 1.3284 14.9628 2.22161 14.9628 3.32344V13.2987C14.9628 14.4005 14.0696 15.2937 12.9678 15.2937H2.99254C1.89071 15.2937 0.997498 14.4005 0.997498 13.2987V3.32344Z",fill:"#9747FF"}),o.createElement("mask",{id:"path-2-inside-1_1042_9371",fill:"white"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.99255 4.32095H12.9678V12.3011H2.99255V4.32095ZM3.99007 5.31847H11.9702V7.31355H3.99007V5.31847ZM11.9702 8.31107H6.98264V11.3036H11.9702V8.31107ZM5.98512 11.3036H3.99007V8.31107H5.98512V11.3036Z"})),o.createElement("path",{d:"M3.99007 5.31847V4.32095H2.99255V5.31847H3.99007ZM11.9702 5.31847H12.9678V4.32095H11.9702V5.31847ZM11.9702 7.31355V8.31107H12.9678V7.31355H11.9702ZM3.99007 7.31355H2.99255V8.31107H3.99007V7.31355ZM2.99255 4.32095V3.32343H1.99503V4.32095H2.99255ZM12.9678 4.32095H13.9653V3.32343H12.9678V4.32095ZM12.9678 12.3011V13.2986H13.9653V12.3011H12.9678ZM2.99255 12.3011H1.99503V13.2986H2.99255V12.3011ZM11.9702 8.31107H12.9678V7.31355H11.9702V8.31107ZM6.98264 8.31107V7.31355H5.98512V8.31107H6.98264ZM6.98264 11.3036H5.98512V12.3011H6.98264V11.3036ZM11.9702 11.3036V12.3011H12.9678V11.3036H11.9702ZM5.98512 11.3036V12.3011H6.98264V11.3036H5.98512ZM3.99007 11.3036H2.99255V12.3011H3.99007V11.3036ZM3.99007 8.31107V7.31355H2.99255V8.31107H3.99007ZM5.98512 8.31107H6.98264V7.31355H5.98512V8.31107ZM3.99007 6.316H11.9702V4.32095H3.99007V6.316ZM10.9727 5.31847V7.31355H12.9678V5.31847H10.9727ZM4.9876 7.31355V5.31847H2.99255V7.31355H4.9876ZM11.9702 7.31355H6.98264V9.30859H11.9702V7.31355ZM5.98512 8.31107V11.3036H7.98016V8.31107H5.98512ZM6.98264 12.3011H11.9702V10.3061H6.98264V12.3011ZM12.9678 11.3036V8.31107H10.9727V11.3036H12.9678ZM5.98512 10.3061H3.99007V12.3011H5.98512V10.3061ZM4.9876 11.3036V8.31107H2.99255V11.3036H4.9876ZM3.99007 9.30859H5.98512V7.31355H3.99007V9.30859ZM4.9876 8.31107V11.3036H6.98264V8.31107H4.9876ZM11.9702 6.31603H3.99007V8.31107H11.9702V6.31603ZM3.99007 12.3011V4.32095H1.99503V12.3011H3.99007ZM2.99255 5.31847H12.9678V3.32343H2.99255V5.31847ZM11.9702 4.32095V12.3011H13.9653V4.32095H11.9702ZM12.9678 11.3036H2.99255V13.2986H12.9678V11.3036Z",fill:"white",mask:"url(#path-2-inside-1_1042_9371)"}))}function vG(e){let[t,a]=(0,vI.sh)(e.normJobPrefix);return e.showInterimTemplatesShelf?o.createElement("div",{className:vP},(0,A.tx)("file_browser.templates_shelf.interim_title")):o.createElement("div",{className:vP},t??(0,A.tx)("file_browser.templates_shelf.title"))}function v$(e){let t=(0,s.wA)(),a=e.hubFile,r=a.id,n=null!==e.duplicatingHubId,i=e.duplicatingHubId===r,l=a&&(0,cM.a6)(e.hubFile),c=n=>{n.stopPropagation(),e.setDuplicatingHubId(r),t(pN.rL({hubFileId:r,hubFileName:l?.name||"this file",openInNewTab:!1,folderId:e.folderId,source:Eg.f6.FILE_BROWSER_TEMPLATES_BAR,callback:t=>{e.setDuplicatingHubId(null),(0,tt.Cu)({fileKey:t,rank:e.rank,templateId:r,productType:(0,vw.L)(a.viewer_mode)},"topbar_template_selected"),(0,vT._)("resource_inserted",{fileKey:t,resourceId:r,resourceName:l.name,resourceType:"template",templateType:vx.n.HubFile,triggeredFrom:e.newFileFrom,category:e.tab.tabTitle,templateCategory:e.tab.tabKey})}}))};return a?o.createElement(vC.zq,{containerStyle:"templates_bar--templatesTileContainer--yy7Q2",onClick:n?void 0:c,image:o.createElement(vC.FK,{backgroundColor:(0,c$.Cn)(a.client_meta),removeBorder:!0,className:O()({"templates_bar--templatesTileImage--y0sA9":!e.showInterimTemplatesShelf,"templates_bar--templatesTileImageInterim--GA5Gc templates_bar--templatesTileImage--y0sA9":e.showInterimTemplatesShelf}),customRatioClassName:"templates_bar--imageRatio--enx9l"},o.createElement(vC.zx.Cover,null,o.createElement("button",{className:"templates_bar--hoverOverlay--bQBil browse_templates_modal--hoverOverlay--sFj3y",onClick:c,disabled:n})),o.createElement(vC.zx.Center,null,o.createElement(rH.$$,{onClick:c,className:O()("templates_bar--useTemplateButton--4KFhz",{"templates_bar--bgFigjam--quTf0":a.viewer_mode===ex.y4.WHITEBOARD,"templates_bar--bgSlides--V5gmr":a.viewer_mode===ex.y4.SLIDE_TEMPLATE}),disabled:n,tabIndex:-1},i?o.createElement(td.kt,{size:"medium"}):(0,A.tx)("file_browser.new_file_creation_topbar.use_templates"))),o.createElement(cY.Ho,{image:e.overrideThumbnailUrl||a.thumbnail_url||void 0,isSet:!!e.overrideThumbnailUrl||!!a.thumbnail_is_set,isWhiteboard:a.viewer_mode===ex.y4.WHITEBOARD,hubFileId:a.id,alt:(0,cM.a6)(a).name,imageClassName:"templates_bar--thumbnailImage--ymHpx",resizedThumbnailUrls:a.resized_thumbnail_urls})),bottomRow:e.showInterimTemplatesShelf?o.createElement(vC.Wf.NameAndFileIconMetadata,{name:l.name,className:"templates_bar--tilesBottomRowContainerInterim--2UYbZ",textClassName:vM,viewerMode:a.viewer_mode}):o.createElement(vC.Wf.NameMetadata,{name:l.name,className:"templates_bar--tilesBottomRowContainer--GxsNx",textClassName:vM}),bottomRowStyle:e.showInterimTemplatesShelf?"templates_bar--bottomRowStyleInterim--qBzJE":"templates_bar--bottomRowStyle--a32JN"}):null}function vz(e){let t=(0,s.wA)(),a=!e.hasHybridShelf&&!e.showInterimTemplatesShelf;return o.createElement("div",{className:"templates_bar--tabs--a8HOf text--fontPos13--xW8hS text--_fontBase--QdLsd",style:r9.sx.add({columnGap:e.hasHybridShelf?"20px":"26px"}).$},a&&o.createElement(vy.GG,{"data-tooltip-type":ei.Ib.TEXT,"data-tooltip":(0,A.t)("file_browser.templates_shelf.search_tooltip"),"aria-label":(0,A.t)("file_browser.templates_shelf.search_tooltip"),className:"templates_bar--searchButton--1EdKI templates_bar--headerIcon--qAnUr",onClick:()=>{(0,tt.Cu)({triggeredFrom:"file-browser",category:e.activeTab.tabTitle},"template_shelf_search_clicked"),(0,vS.KF)(t,{templateInsertionLocation:cM.RD.NEW_FILE,triggeredFrom:"templatesShelfSearch"})}},o.createElement(Q.In,{icon:"search-32"})),e.tabs.map(t=>o.createElement(vY,{key:t.tabKey,tab:t,isActive:t.tabKey===e.activeTab.tabKey,setActiveTab:e.setActiveTab,showInterimTemplatesShelf:e.showInterimTemplatesShelf})))}function vY(e){return o.createElement(vy.GG,{className:O()({"templates_bar--tab---drzF":!e.showInterimTemplatesShelf,"templates_bar--tabInterim--b4Do5 text--fontPos11--2LvXf text--_fontBase--QdLsd":e.showInterimTemplatesShelf,"templates_bar--activeTab--c7Hid":e.isActive}),onClick:()=>{(0,tt.Cu)({triggeredFrom:"file-browser",category:e.tab.tabTitle},"template_shelf_category_toggled"),e.setActiveTab(e.tab)}},e.tab.modifiedTabTitle??e.tab.tabTitle)}function vK(e){let[t,a]=(0,o.useState)(""),r=(0,C.md)(vk.dO).status===vL.c.LOADING,{onMake:n}=function(e,t,a){let r=(0,s.wA)(),n=(0,vN.B)(a);return{onMake:(a,i,l)=>{r(hI.zE({state:n,editorType:ex._Y.WHITEBOARD,team:t,from:e,openNewFileIn:(0,D.oJ)(i)?Eg.ai.NEW_TAB:Eg.ai.SAME_TAB,figjamAiNewFileData:{prompt:l?`${l.title} ${l.subtitle}`:a,useCaseCategory:l?.useCaseCategory,subtitle:l?.subtitle,entrypoint:vR.fV.TEMPLATE_SHELF}}))}}}(e.newFileFrom,e.team,e.folderId);return o.createElement("div",{className:k.cx.ml24.mr24.flex.flexRow.justifyCenter.$,style:r9.sx.add({width:"calc(100% - 48px)"}).$},o.createElement("div",{className:k.cx.flex.itemsCenter.colorBg.b1.colorBorder.wFull.$,style:r9.sx.add({maxWidth:"800px",borderRadius:"12px"}).$},o.createElement("div",{className:k.cx.ml12.font14.colorTextSecondary.flex.itemsCenter.gap8.$},o.createElement(t_.B,{svg:vU.A,style:r9.sx.add({fill:"currentColor"}).$}),o.createElement(vA.G,{location:"FILE_BROWSER_BAR"})),o.createElement("input",{className:O()(k.cx.flex1.px16.py12.h24.bgTransparent.font13.lh24.$,"templates_bar--input--v2677"),placeholder:(0,A.t)("whiteboard.ai_onboarding.file_browser.placeholder"),value:t,onChange:e=>a(e.target.value),disabled:r,autoComplete:"off",onKeyDown:e=>{t.length>0&&(0,D.Fo)(e)&&"Enter"===e.key&&(e.preventDefault(),n(t))}}),o.createElement("div",{className:O()(k.cx.mr8.$,"templates_bar--figjamButton--8yaTU")},o.createElement(vv.$n,{variant:"primary",disabled:0===t.length||r,onClick:e=>n(t,e)},o.createElement("div",{className:k.cx.flex.itemsCenter.gap8.$},(0,A.tx)("file_browser.hybrid_templates_shelf.generate_button"))))))}var vQ=a(600081);(0,t2.r1)("dismissed_figjam_ai_file_browser_bar");let vX=(0,nN.eU)(!1);function vq(e){let t=(0,ew.gj)(e.folderId,ex._Y.WHITEBOARD,!0).unwrapOr(!1),a=(0,ew.gj)(e.folderId,ex._Y.DESIGN,!0).unwrapOr(!1),r=(0,ew.gj)(e.folderId,ex._Y.SLIDES,!0).unwrapOr(!1),n=(0,eN.TA)(),i=e.team&&eS.ng.getProTrialStatus(e.team)===h5.a.IN_TRIAL,{recommendedTemplatesIsOpen:l,toggleRecommendedTemplates:s}=e,c=o.useCallback(()=>{s(),(0,tt.Cu)({userId:n,opening:!l},"topbar_recommended_templates_toggled")},[l,n,s]),d=(0,_k.Xr)(vX),m=!!(0,p.kc)().figjam_hide_templates_shelf,u=(0,te.F1)(),_=!E.Ay.mobile&&a&&r&&!i&&!e.disableRecommendedTemplates&&l&&(!m||u()),g=e.showFileCreationShelf&&!_?o.createElement(vp,null):void 0;return(o.useEffect(()=>{d(_)},[d,_]),E.Ay.mobile)?null:t||a||r?o.createElement(o.Fragment,null,g,_&&o.createElement(vV,{isShowing:e.recommendedTemplatesIsOpen,onClose:c,folderId:e.folderId,newFileFrom:e.newFileFrom,team:e.team,showInterimTemplatesShelf:m}),i&&o.createElement(vQ.J,{teamId:e.team.id})):o.createElement(o.Fragment,null,g)}vq.displayName="NewFileCreationTopbar";var vJ=a(433011);function vZ(e){let[t,a]=o.useState(!1),[r]=o.useState(()=>new vJ.W),{isSelected:n,selectPinnedFile:i,file:l,index:s,openFile:c}=e,d=o.useCallback(e=>{t?(n&&i(l.file,e),c(l.file,e,s)):(i(l.file,e),r.reset(),r.scheduleOnce(()=>{a(!1)},500),a(!0),e.preventDefault(),e.stopPropagation())},[r,s,n,c,l.file,i,t]);o.useEffect(()=>()=>r.reset(),[r]);let m=e.file.file,u=t?(0,aK.jN)({file:e.file.file}):void 0;return u&&(u=(0,l4.mc)(u,e.user),u=(0,l4.vk)(u,e.currentOrgId,e.currentTeamId,e.selectedView)),o.createElement("a",{className:O()(hE.GC,{[hE.GV]:e.isSelected}),href:u,rel:"noopener",onClick:d,onContextMenu:t=>{e.onFileContextMenu(e.file.file,t,e.index)}},o.createElement("div",{className:hE.PP},o.createElement(rd.H5,{file:{key:m.key,editor_type:m.editorType,client_meta:(0,p.kc)().thumbnail_lg_client_meta?m.checkpointClientMeta||null:m.clientMeta,thumbnail_url:m.thumbnailUrl,thumbnail_url_override:m.thumbnailUrlOverride,thumbnail_guid:m.thumbnailGuid,has_file_link_password:m.hasFileLinkPassword,link_access:m.linkAccess,touched_at:null,updated_at:null},noBorder:!0})),o.createElement("div",{className:hE.q6},o.createElement("div",{className:hE.z6},o.createElement(R.E,{fontSize:13,fontWeight:"medium",truncate:!0},m.name)),o.createElement("div",{className:hE.h7},e.file.pinnedByUser?o.createElement(R.E,{fontSize:11,fontWeight:"regular",truncate:!0},(0,A.tx)("tile.file_tile.pinned_by_user",{name:e.file.pinnedByUser.name})):o.createElement(R.E,{fontSize:11,fontWeight:"regular",truncate:!0},(0,A.tx)("tile.file_tile.pinned_just_now")))))}function v0(e){let t=o.useRef(null),a=o.useRef(null),r=o.useRef(null),n=o.useRef(null),i=o.useRef(null),{selectedView:l,tileSelect:c,currentOrgId:u,currentTeamId:_,user:g}=(0,nI.R)(e=>({selectedView:e.selectedView,tileSelect:e.tileSelect,currentOrgId:e.currentUserOrgId,currentTeamId:e.currentTeamId,user:e.user})),f=(0,s.wA)(),{showing:h,show:y,hide:v,data:b}=(0,lz.L)(),w=o.useCallback((e,t,a)=>{t.stopPropagation(),t.preventDefault();let r={top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},n={type:az.nb.PINNED_FILE,file:e},i=t.shiftKey&&t.altKey;if(c&&c[a1.F.PINNED_FILES]){if(c[a1.F.PINNED_FILES][n.file.key]){y({data:{tile:n,targetRect:r,index:a,enableRestore:i}});return}if(t.shiftKey||t.metaKey||t.ctrlKey){f(aj.y$({type:a1.F.PINNED_FILES,tiles:[n]})),y({data:{tile:n,targetRect:r,index:a,enableRestore:i}});return}}t.shiftKey||t.metaKey||t.ctrlKey||f(aj.an()),f(aj.y$({type:a1.F.PINNED_FILES,tiles:[n]})),y({data:{tile:n,targetRect:r,index:a,enableRestore:i}})},[f,y,c]),T=o.useCallback((e,t)=>{if(h){v();return}if(E.Ay.mobile||E.Ay.tablet){m.Ay.redirect((0,aK.jN)({file:e}));return}t.stopPropagation();let a=c&&c[a1.F.PINNED_FILES]&&c[a1.F.PINNED_FILES][e.key];if(t.ctrlKey||t.metaKey||t.shiftKey)a?f(aj.TK({tileKeys:[e.key]})):f(aj.y$({type:a1.F.PINNED_FILES,tiles:[{type:az.nb.PINNED_FILE,file:e}]}));else{if(a)return;f(aj.an()),f(aj.y$({type:a1.F.PINNED_FILES,tiles:[{type:az.nb.PINNED_FILE,file:e}]}))}},[f,h,v,c]),I=o.useCallback((e,t)=>{d.eD&&(0,V.sx)("Open File Click",{fileKey:e.key,uiSelectedView:JSON.stringify(l)}),f(e_.UN({fileKey:e.key,entrypoint:"pinned files"}));let a=E.Ay.mac?t.metaKey:t.ctrlKey,r=null;if(a&&t.shiftKey?r=d.aw.FOCAL_TAB:a?r=d.aw.BACKGROUND_TAB:t.shiftKey&&(r=d.aw.NEW_WINDOW),null!=r){f(ea.oB()),d.eD&&(t.preventDefault(),t.stopPropagation(),d.eD.openFile({fileKey:e.key,title:e.name||"Untitled",editorType:e.editorType,target:r,isTeamTemplate:e.isTeamTemplate,userId:g?.id}));return}t.preventDefault(),t.stopPropagation(),f(hN.p4({planId:u||hD.P}));let n=l&&("recentsAndSharing"===l.view||"folder"===l.view)?l:void 0,i=(0,p.kc)().ps_benchmark;(0,l4.N7)(u,e.parentOrgId,_,e.teamId)?(0,l4.QV)(e.key,g,u,i?_:null,l,e.editorType):f(ea.$T({view:"fullscreen",fileKey:e.key,editorType:(0,gG.wN)(e.editorType),prevSelectedView:n}))},[f,u,_,l,g]),N=o.useMemo(()=>e.files.filter(({file:e})=>!!e).map(({file:e})=>({type:az.nb.PINNED_FILE,file:e})),[e.files]),x=(0,az.nw)(N),C=o.useCallback(()=>{let t=b?.tile??null;return o.createElement(lY.i,{...e,tile:t,selectedTiles:x,openTile:e=>{t?.type===az.nb.PINNED_FILE&&t?.file&&I(t.file,e)},dropdownVisible:h})},[b?.tile,e,x,h,I]),S=o.useCallback(e=>{(e.target===t.current||e.target===a.current||e.target===r.current||e.target===i.current||n.current&&n.current.contains(e.target))&&(f(ea.oB()),f(aj.an()))},[f]),k=c[a1.F.PINNED_FILES],A=hO+` ${hE.dp}`;o.useEffect(()=>{if(E.Ay.mobile&&E.Ay.safari&&t.current){let e=t.current.className;window.addEventListener("load",()=>{t.current&&(t.current.className=""),setTimeout(()=>{t.current&&(t.current.className=e)},500)})}},[]);let R=o.useMemo(()=>e.files.map(e=>e.file?.key).filter(e=>!!e),[e.files]);return(0,aF.IT)(R),o.createElement("div",{className:"tiles_view--pinnedContainer--2x-rH",onMouseDown:S,ref:t},o.createElement("div",{className:A,ref:a},o.createElement("div",{ref:r,key:"grid",className:O()(hF,"tiles_view--tilesGridPinned--YNmwb")},e.files.map((e,t)=>{let a=!!(k&&k[e.file.key]);return o.createElement(vZ,{file:e,openFile:I,index:t,onFileContextMenu:w,isSelected:a,selectPinnedFile:T,key:`file-${e.file.key}`,currentOrgId:u,currentTeamId:_,selectedView:l,user:g})}))),C())}function v1(e){return o.createElement("div",{className:O()("starter_team_overview_item--container--2OVmD",{"starter_team_overview_item--containerDisabled--76kDd":e.disabled,"starter_team_overview_item--containerDefault--dN-eI":!e.disabled})},o.createElement(t_.B,{className:"starter_team_overview_item--icon--Z3o0g",svg:e.icon}),o.createElement("p",{className:"starter_team_overview_item--text--r36FA"},e.text))}var v2=a(174726),v8=a(965821);function v4({folderId:e}){let t=(0,J.Rs)(ee.yU5,{projectId:e});if("loaded"!==t.status)return null;let a=t.data.project?.team?.teamFileCounts?.designFileCount??0,r=t.data.project?.team?.teamFileCounts?.whiteboardFileCount??0;return o.createElement(o.Fragment,null,o.createElement(v1,{icon:v8.A,text:(0,A.t)("team_view.starter_team.num_of_figma_files_user",{numFigmaFilesUsed:a,maxFreeFiles:er.WW})}),o.createElement(v1,{icon:v2.A,text:(0,A.t)("team_view.starter_team.num_of_figjam_files_user",{numFigjamFilesUsed:r,maxFreeFiles:er.WW})}))}function v3({folderId:e}){return o.createElement("div",{className:"starter_team_overview--container--YU-xB text--fontPos13--xW8hS text--_fontBase--QdLsd","data-testid":"StarterTeamOverview"},o.createElement("div",{className:"starter_team_overview--header--4s2vt text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,A.tx)("file_browser.folder.starter_team_overview")),o.createElement("div",{className:"starter_team_overview--detailsWithFigjam--n0fVl"},o.createElement(v4,{folderId:e})))}function v5({folder:e}){let t=(0,s.wA)(),a=o.createElement(ts.tM,{key:"upgrade_button",className:O()(k.cx.flex.itemsCenter.justifyCenter.mt8.$,"starter_team_project_upsell_footer--primaryCtaButton--SPePt basic_form--primaryBtn--AU7Gy basic_form--btn--FSrmp ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"),innerText:(0,A.t)("file_browser.starter_team.view_plans"),onClick:()=>{t((0,ep.to)({type:z.V,data:{teamId:e.team_id??void 0,upsellSource:eA.b.STARTER_TEAM_PROJECT_FOOTER}}))},trackingProperties:{trackingDescriptor:tZ.c.VIEW_PLANS}},(0,A.tx)("file_browser.starter_team.view_plans"));return o.createElement("div",{className:O()(k.cx.flex.p32.mt16.mb16.mx32.bRadius6.justifyCenter.colorBorder.$,"starter_team_project_upsell_footer--borderStyle--REXNs"),"data-testid":"StarterTeamProjectUpsellFooter"},o.createElement("div",{className:O()(k.cx.flex.flexColumn.itemsCenter.lh24.$,"starter_team_project_upsell_footer--contentWrapper--QGLsm")},o.createElement(R.E,{fontWeight:"semi-bold",fontSize:18},(0,A.tx)("file_browser.starter_folder.ready_for_an_upgrade")),o.createElement("div",{className:k.cx.alignCenter.mt8.$},o.createElement(R.E,{fontSize:13},(0,A.tx)("file_browser.starter_folder.folder_upgrade_info"))),o.createElement(v4,{folderId:e.id}),a))}let v9="upgrade_section--sidebarDivider--O7mLk",v6="upgrade_section--upsellDescription--Heggv text--fontPos13--xW8hS text--_fontBase--QdLsd";function v7({teamId:e}){let t=(0,s.wA)(),a=(0,eT.TN)(e),r=(0,s.d4)(t=>t.teams[e]),n=(0,J.Rs)(ee.kQI,{id:e}),i=!!n.data?.team?.hasPermission,l=r&&!r.org_id&&!r.subscription&&i,c=eS.ng.canSeeProTrialUx(a),d=r&&!(0,er.w5)(r),m=()=>c?eA.b.PRO_TRIAL_UPSELL_MODAL:eA.b.UPGRADE_SECTION,u=a=>()=>{t((0,ep.to)({type:z.V,data:{teamId:e,upsellSource:a}}))};return d&&l||c?c?o.createElement(eg.fu,{name:m(),properties:eS.ng.getTrackingProperties()},o.createElement("div",{className:v9}),o.createElement("p",{className:"upgrade_section--upsellTitle--db4mh text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement(R.E,{fontSize:13,fontWeight:"medium"},(0,A.tx)("team_view.upgrade.pro_trials.title"))),o.createElement("p",{className:v6},o.createElement(R.E,{fontSize:13},(0,A.tx)("team_view.upgrade.pro_trials.description"))),o.createElement("div",{className:"upgrade_section--teamProUpgrade--8J0Tz text--fontPos11--2LvXf text--_fontBase--QdLsd"},o.createElement(ts.vd,{onClick:u(m()),trackingProperties:{teamId:e,trackingDescriptor:tZ.c.UPGRADE_TO_PROFESSIONAL}},(0,A.tx)("team_view.upgrade.pro_trials.upgrade_to_professional_cta")))):o.createElement(eg.fu,{name:m()},o.createElement("div",{className:v9}),o.createElement("p",{className:v6},o.createElement(ts.Us,{onClick:u(m()),trackingProperties:{trackingDescriptor:tZ.c.UPGRADE_YOUR_TEAM},trusted:!0},(0,A.tx)("team_view.upgrade.upgrade_your_team")),(0,A.tx)("team_view.upgrade.for_unlimited_files_projects_and_customizable_team_libraries"))):null}var be=a(902957),bt=a(129318),ba=a(543312),br=a(212957),bn=a(66154),bi=a(573821);let bl="seen_pro_onboarding_unlimited_files_overlay",bo=(0,t2.r1)(bl);function bs({teamId:e,canCreateFigjamBoard:t}){let a=(0,C.md)(bo),r=(0,C.md)(ba.e),n=(0,s.d4)(e=>e.userTeamFlags),i=n[e]?.[bi.UA],l=(0,te.kO)(),{show:c,isShowing:d,complete:m}=(0,t0.e)({overlay:t5.jVB,priority:t8.N.DEFAULT_MODAL,experiment:{check:l,predicate:e=>e,postCheck:e=>!e}},[a,r]);return((0,u.h)(()=>{i&&c({canShow:(t,a)=>a.some(t=>t.id===e)})}),d)?o.createElement(pU.M,{isShowing:d,userFlagOnShow:bl},o.createElement(eg.fu,{name:br.S.getTooltipTrackingContext("Unlimited Files"),properties:br.S.getTrackingProperties(e)},o.createElement(bn.yG,{dismissModal:m,canCreateFigjamBoard:t}))):null}function bc(e){let{selectedView:t,userFlags:a,userTeamFlags:r,userEduVerified:n,isFreeUser:i,userAnalyticsData:l,...c}=(0,nI.R)(e=>({selectedView:e.selectedView,userFlags:e.userFlags,userTeamFlags:e.userTeamFlags,userEduVerified:!!e.user?.student_validated_at,isFreeUser:e.isFreeUser,userAnalyticsData:e.userAnalyticsData,...(0,en.getPermissionsState)(e)})),d=(0,s.wA)(),m=(0,J.Rs)(ee.UpR,{}),{teamId:u,selectedTab:_}=e,g=c.teams[u],f=!!g?.org_id,E=!!g?.subscription,h=u&&(0,en.canAdminTeam)(u,c),y=(0,te.Yz)();(0,o.useEffect)(()=>{(0,p.kc)().requires_action_3ds_banner&&u&&!f&&E&&h&&d(yN.Be({teamId:u}))},[d,u,f,E,h]);let v=(0,s.d4)(e=>e.teamBilling?.summary),b=yb(ex.vt.TEAM,g,u,{selectedView:t,userFlags:a,userTeamFlags:r,selectedTab:_,isFreeUser:i,userAnalyticsData:l,eduPeriodEnd:m.data?.currentUser?.eduPeriodEnd,billingSummary:v,checks:{isEligibleForLockedRedesign:y},...c},d);if(!b)return o.createElement("div",null);let w=yI({resourceType:ex.vt.TEAM,teamId:u},b),T=b.severity===yt.c.WARN?ya:"",I=b.bannerClassName||"",N=`${yu} ${T} ${I}`;return o.createElement("div",{className:N},o.createElement(yS,{...b,tracking:w}))}var bd=a(290750);class bm extends o.PureComponent{constructor(){super(...arguments),this.state={contributors:null},this.viewUser=(e,t)=>{this.props.dispatch(ea.$T({view:"user",userId:t.id,userViewTab:lp.o.INTERNAL_PROFILE}))}}componentDidMount(){bd.W.getContributors({folderId:this.props.folderId}).then(e=>{this.setState({contributors:e.data.meta})}).catch(e=>{console.warn("Unable to load project contributors")})}render(){let e=this.viewUser;return o.createElement("div",{className:"contributors--contributors--UpVcx text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement("div",{className:"contributors--contributorsHeader--6sefy"},(0,A.tx)("file_browser.folder.recent_contributors")),o.createElement(pl.x,{className:"contributors--loading--0u-Y2",isLoading:!this.state.contributors},()=>o.createElement("div",null,this.state.contributors&&this.state.contributors.filter(e=>e.user).map(t=>o.createElement(tq.az,{key:t.user.id,className:"contributors--contributorAvatar--bCw14",entity:t.user,size:24,showIsMe:t.user.id===this.props.currentUserId,onClick:e})),this.state.contributors&&0===this.state.contributors.length&&o.createElement("div",{className:"contributors--contributorEmpty--BnRcr text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,A.tx)("file_browser.folder.people_who_have_edited_this_project_will_appear_here")))))}}let bu=(0,s.Ng)((e,t)=>{let a=e.folders[t.folderId],r=a&&a.team_id?e.teams[a.team_id]:null;return{folderOrg:r&&r.org_id?e.orgById[r.org_id]:null,currentUserId:e.user?e.user.id:null}})(bm);var b_=a(411045),bp=a(303345),bg=a(426887),bf=a(720488);function bE(e){let t=(0,s.wA)(),a=o.useRef(null),r=(0,s.d4)(({dropdownShown:e})=>e),n=e.dropdownKey&&r&&r.type===e.dropdownKey&&r.data&&r.data.targetRect,i=l0.findDOMNode(a.current),l=[];return e.canCreateDesignFile&&l.push(o.createElement(i7.c$,{key:"new-design-file",children:o.createElement(o.Fragment,null,o.createElement(rc.oS,{className:k.cx.pr6.$,size:rc.LE.SMALL,type:rc.y1.DESIGN}),(0,A.tx)("file_browser.tool_bar.new_design_file")),onClick:e.onNewDesignFileClick})),e.canCreateWhiteBoardFile&&l.push(o.createElement(i7.c$,{key:"new-figjam-board",children:o.createElement(o.Fragment,null,o.createElement(rc.oS,{className:k.cx.pr6.$,size:rc.LE.SMALL,type:rc.y1.WHITEBOARD}),(0,A.tx)("file_browser.tool_bar.new_figjam_board")),onClick:e.onNewWhiteBoardClick})),e.canCreateSlidesFile&&l.push(o.createElement(i7.c$,{key:"new-slides-file",children:o.createElement(o.Fragment,null,o.createElement(rc.oS,{className:k.cx.pr6.$,size:rc.LE.SMALL,type:rc.y1.SLIDES}),(0,A.tx)("file_browser.tool_bar.new_slide_deck")),onClick:e.onNewSlidesClick})),o.createElement("button",{className:O()(k.cx.flex.itemsCenter.$,"new_file_toolbar_dropdown--newFileDropdown--pPPdw"),ref:a,onClick:a=>{e.dropdownKey&&i&&t(ea.j7({type:e.dropdownKey,data:{targetRect:i?.getBoundingClientRect()}}))}},o.createElement(t_.B,{svg:i3.A,className:O()(k.cx.pr6.$,"new_file_toolbar_dropdown--svg--ugaqW")}),(0,A.tx)("file_browser.tool_bar.new"),n&&o.createElement(bf.Cf,{targetRect:r.data.targetRect,minWidth:172,maxWidth:172,propagateCloseClick:!0},l))}function bh(e){let t=(0,Ev.$)(ex._Y.DESIGN,e.from,"toolbar_design_created"),a=(0,te.Yz)()(!!e.isTeamLocked),r=!!e.disabled||a,n=r?f.lQ:t,i=r?(0,A.t)("locked_team.label.tooltip"):void 0,l=r?ei.Ib.TEXT:void 0;return{disabled:r,onClick:n,dataTooltip:i,dataTooltipType:l,displayText:(0,A.t)("file_browser.tool_bar.new_design_file"),dataTestId:"new-design-file-button",editorThemeMode:"design",key:i6.D.NEW_FILE,listOptionType:Eh.R.DESIGN}}function by(e){let t=bh(e),a=t.disabled?Ey.NY:Ey.k3,r=t.disabled?Ey.ts:Ey.sI;return o.createElement(iQ.K,{action:{kind:iQ.A.ICON_TEXT_BUTTON,key:t.key,displayText:t.displayText,onClick:t.onClick,icon:i3.A,styleClass:a,svgStyleClass:r,dataTestId:t.dataTestId,editorThemeMode:t.editorThemeMode,"data-tooltip":t.dataTooltip,"data-tooltip-type":t.dataTooltipType}})}function bv(e){let t=(0,Ev.$)(ex._Y.WHITEBOARD,e.from,"toolbar_figjam_created"),a=(0,te.Yz)()(!!e.isTeamLocked),r=!!e.disabled||a,n=r?f.lQ:t,i=r?(0,A.t)("locked_team.label.tooltip"):void 0,l=r?ei.Ib.TEXT:void 0;return{disabled:r,onClick:n,dataTooltip:i,dataTooltipType:l,displayText:(0,A.t)("file_browser.tool_bar.new_figjam_board"),dataTestId:"new-whiteboard-file-button",editorThemeMode:"whiteboard",key:i6.D.NEW_WHITEBOARD_FILE,listOptionType:Eh.R.WHITEBOARD}}function bb(e){let t=bv(e),a=t.disabled?Ey.NY:Ey.k3,r=t.disabled?Ey.ts:Ey.sI;return o.createElement(iQ.K,{action:{kind:iQ.A.ICON_TEXT_BUTTON,key:t.key,displayText:t.displayText,onClick:t.onClick,icon:i3.A,styleClass:a,svgStyleClass:r,dataTestId:t.dataTestId,editorThemeMode:t.editorThemeMode,"data-tooltip":t.dataTooltip,"data-tooltip-type":t.dataTooltipType}})}var bw=a(741477);let bT="resource_creation_action--icon--I0s0W",bI="resource_creation_action--iconDisabled--80iVj",bN="resource_creation_action--betaTag--o8v94",bx="resource_creation_action--fadeInOnMount--A5XBA",bC={[Eh.R.DESIGN]:"resource_creation_action--designHoverOption--50QUQ",[Eh.R.WHITEBOARD]:"resource_creation_action--figJamHoverOption--ipE-z",[Eh.R.SLIDES]:"resource_creation_action--piperHoverOption--x6D--",[Eh.R.SITES]:"resource_creation_action--seascapeHoverOption--AZM8v",[Eh.R.IMPORT]:"resource_creation_action--importHoverOption--sVdl8",[Eh.R.COOPER]:"resource_creation_action--cooperHoverOption--r7I1c"};function bS(e,t){let a=void 0!==t?t:e.onClick;return{displayText:e.displayText,activeClassName:"resource_creation_action--active--a-b-K",className:O()(bC[e.listOptionType],"resource_creation_action--menuOptionItem--XHeQF",e.disabled&&"resource_creation_action--disabled--Kajn-"),disabled:e.disabled,preventDismissOnSelected:!1,callback:(t,r,n,i)=>{e.disabled||a(i)},render:()=>o.createElement(bk,{disabled:e.disabled,text:e.displayText,onClick:a,listOptionType:e.listOptionType,dataTestId:e.dataTestId,key:e.key,dataOnboardingKey:e.dataOnboardingKey})}}function bk(e){let t={[Eh.R.DESIGN]:o.createElement(y7.k,{className:e.disabled?bI:bT}),[Eh.R.WHITEBOARD]:o.createElement(ve.D,{className:e.disabled?bI:bT}),[Eh.R.SLIDES]:o.createElement(vt.l,{className:e.disabled?bI:bT}),[Eh.R.SITES]:o.createElement(va.Y,{className:e.disabled?bI:bT}),[Eh.R.IMPORT]:o.createElement(vr.R,{className:e.disabled?bI:bT}),[Eh.R.COOPER]:o.createElement(rg.w,{inverted:!0})};return o.createElement("div",{role:"link",tabIndex:0,"data-testid":e.dataTestId,"data-tooltip":e.dataTooltip,"data-tooltip-type":ei.Ib.TEXT,"data-tooltip-timeout-delay":300,"data-onboarding-key":e.dataOnboardingKey},o.createElement("div",{className:O()({[k.cx.flex.gap8.flexRow.pl6.pt6.pb6.pr8.overflowHidden.$]:!0})},o.createElement("div",{className:k.cx.flex.w24.h24.flexRow.itemsCenter.alignCenter.justifyCenter.flexShrink0.$},t[e.listOptionType]),o.createElement("div",{className:O()({[k.cx.flex.h24.flexRow.overflowHidden.flexGrow1.itemsCenter.$]:!0,[k.cx.colorTextMenu.$]:!e.disabled,[k.cx.colorTextMenuDisabled.$]:!!e.disabled})},e.text),e.listOptionType===Eh.R.SLIDES&&(0,p.kc)().omnicreate_slides_beta_tag&&o.createElement(W.Ex,{className:bN,text:(0,A.t)("file_browser.creation_buttons.beta"),color:W.zE.LIGHT_TRANSLUCENT}),(e.listOptionType===Eh.R.SITES||e.listOptionType===Eh.R.COOPER)&&(0,p.kc)().sites_alpha&&o.createElement(W.Ex,{className:bN,text:(0,A.t)("file_browser.creation_buttons.alpha"),color:W.zE.LIGHT_TRANSLUCENT})))}function bA(){let e=(0,ti.vt)();return(0,te.Yz)()(e)}function bR({createOptionsList:e,dropdownType:t,isHidden:a}){let r=(0,s.wA)(),n=(0,s.d4)((0,bw.E)(t)),i=bA(),l=()=>{n||r(ea.j7({type:t}))},c=o.useRef(null),[d,m]=o.useState(void 0),u=o.useCallback(e=>{c.current=e,m(e?.getBoundingClientRect())},[m]);return o.useEffect(()=>{let e=()=>m(c.current?.getBoundingClientRect());return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[m]),o.createElement(o.Fragment,null,o.createElement("div",{tabIndex:0,role:"menu","data-tooltip":i?(0,A.t)("locked_team.label.tooltip"):(0,A.t)("file_browser.tool_bar.create_new"),"data-tooltip-type":ei.Ib.TEXT,onKeyDown:e=>{"Enter"===e.key&&l()}},o.createElement(i9,{variant:i?"secondary":"primary",onMouseDown:l,text:(0,A.t)("file_browser.tool_bar.create_new"),hasDropdown:!0,dataTestId:"omnicreate-creation-button",ref:u,disabled:i})),d&&n&&!a&&o.createElement(eg.fu,{name:"Resource Creation Dropdown",properties:{fileCreationDefaultsDropdownType:t}},o.createElement(a_.j,{dataTestId:"resource-creation-dropdown",lean:"center",showPoint:!1,rootAndSubmenuMaxWidth:180,minWidth:180,autoHeight:!0,hidePointWhenContentOffScreen:!0,recordingKey:"resource-creation-dropdown",onSelectItem:(e,t)=>{e.callback&&e.callback(void 0,void 0,void 0,t)},items:e,parentRect:d,dispatch:r})))}function bL({dropdownType:e,disabled:t,from:a,folderId:r,isHidden:n}){let{canCreateDesignFile:i,canCreateFigjamFile:l,canCreateSlidesFile:s,canShowCreateSitesFile:c}=(0,vi.n)(r),d=bh({from:a,disabled:t||!i}),m=bv({from:a,disabled:t||!l});(0,vl.XT)({from:a});let u=[bS(d),bS(m)];(0,EE.lt)({from:a,disabled:t});let _=ET({from:a,disabled:t||!s});(0,p.kc)().piper&&u.push(bS(_));let g=(0,hn.oz)({disabled:t});return u.push({displayText:"",disabled:!0,separator:!0},bS(g)),o.createElement(bR,{dropdownType:e,createOptionsList:u,isHidden:n})}function bD(e){let t=(0,C.md)(vn),a=bA(),r=(0,C.md)(vX),n=(0,p.kc)().omnicreate_button&&!E.Ay.mobile&&!a&&!r,i=t||r,[l,s]=o.useState(!1);o.useEffect(()=>{i&&s(!0)});let[c,d]=o.useState(!i),m=!i&&c;return n&&!l?e.leftContent??null:o.createElement(o.Fragment,null,m&&o.createElement("div",{className:bx},e.leftContent),o.createElement("div",{className:O()("resource_creation_action--fadeContainer--A86Kj",n?i?bx:"resource_creation_action--fadeOut--KJEi2":"",m&&"resource_creation_action--hidden--HrBSv"),onAnimationStart:()=>{d(!1)},onAnimationEnd:()=>{i||d(!0)}},e.leftContent,o.createElement(bL,{dropdownType:e.dropdownType,disabled:e.disabled,from:e.from,folderId:e.folderId,isHidden:!i})))}var bP=a(558011);function bF(e){let t=(0,s.wA)(),a=o.useRef(null),r=(0,s.d4)(({dropdownShown:e})=>e),n=(0,s.d4)(t=>(0,r_.oq)(e.folder.id,t))??null,i=(0,s.d4)(e=>e.favorites.collapsedCustomSections),l=(0,ac.S)(),c=(0,tn.Q)({currentOrgId:n,currentTeamId:null}),d=o.useMemo(()=>{if("loaded"===c.status)return(0,eh.T0)(c.data,e.folder.id)},[c,e.folder.id]),m=void 0!==d;if("loaded"!==c.status)return o.createElement("div",{className:k.cx.flex.itemsCenter.colorIcon.$},o.createElement(t_.B,{svg:gZ.A}));let u=(0,eh.gV)(c.data,n),_=e.dropdownKey&&r&&r.type===e.dropdownKey&&r.data&&r.data.targetRect,p=a.current&&r?.data?.targetRef===a.current&&r?.type===Y.jU,g=a.current,f=[];return e.folder.canCreateDesignFile&&f.push(o.createElement(i7.c$,{key:"import",children:(0,A.tx)("file_browser.folder.import"),onClick:e.onImportClick})),e.folder.canView&&f.push(o.createElement(i7.c$,{key:"share",children:(0,A.tx)("file_browser.folder.share"),onClick:e.onShareClick})),e.setFavorite&&(l?f.push(o.createElement(i7.c$,{key:"add-to-favorites-section",children:o.createElement("div",{className:k.cx.flex.justifyBetween.itemsCenter.w150.$},(0,A.tx)("favorited_resources.add_to_sidebar"),o.createElement(t_.B,{svg:bP.A})),onClick:r=>{r.stopPropagation(),a.current&&t(ea.j7({type:Y.jU,data:{targetRect:g.getBoundingClientRect(),targetRef:g,resourceId:e.folder.id}}))}})):f.push(o.createElement(i7.c$,{key:"shaadd-to-favorites-section",children:e.folder.is_subscribed?(0,A.tx)("sidebar.remove_from_favorites"):(0,A.tx)("sidebar.add_to_favorites"),onClick:a=>{a.stopPropagation(),t(e7.ZJ({folderId:e.folder.id,folderName:e.folder.path,teamId:e.folder.team_id,isSubscribed:!e.folder.is_subscribed}))}}))),o.createElement("button",{className:k.cx.flex.itemsCenter.colorIcon.$,ref:a,onClick:a=>{e.dropdownKey&&g&&t(ea.j7({type:e.dropdownKey,data:{targetRect:g?.getBoundingClientRect()}}))}},o.createElement(t_.B,{svg:gZ.A}),_&&o.createElement(bf.Cf,{targetRect:r.data.targetRect,minWidth:172,maxWidth:172,propagateCloseClick:!0},f),p&&o.createElement(ri.t,{updateFavorite:(a,r)=>{(!u||a)&&(e.setFavorite&&e.setFavorite(a,d?.resource.id,r),a&&r&&(i.delete(r),t(tC.U6({collapsedCustomSections:i})),rR.Fp({type:"topLevel",id:"custom",orgId:n,sectionId:r},!0)))},resourceId:e.folder.id,resourceType:ex.bk.FOLDER,isFavorited:m,currentSectionId:d?.resource.sidebarSectionId??void 0,sections:(0,to.oA)(c.data?.currentUser?.userSidebarSections)??[],customSectionOrdering:c.data.currentUser?.baseOrgUser?.fileBrowserPreferences?.orderedSidebarSections??[],showPoint:!0}))}var bO=a(357894),bM=a(492379),bB=a(750293),bU=a(720647),bV=a(410436),bH=a(564517),bW=a(490184),bj=a(213045),bG=a(114959),b$=a(808576),bz=a(249963),bY=a(872429);function bK({dataTestId:e,key:t,tooltipEditorString:a,listOptionType:r}){return{displayText:(0,A.t)("file_browser.tool_bar.request_sent"),preventDismissOnSelected:!0,render:()=>o.createElement(bk,{disabled:!0,text:(0,A.t)("file_browser.tool_bar.request_sent"),onClick:f.lQ,listOptionType:r,dataTestId:e,key:t,dataTooltip:(0,A.t)("file_browser.tool_bar.request_sent_tooltip",{editorString:a})})}}var bQ=a(36816);function bX(e,t,a){return e===aP._YF.WHITEBOARD?t&&t.whiteboardPaidStatus===ex.El.RESTRICTED||a&&a.whiteboardPaidStatus===bQ.Zf.RESTRICTED:e===aP._YF.DESIGN&&(t&&t.designPaidStatus===ex.El.RESTRICTED||a&&a.designPaidStatus===bQ.Zf.RESTRICTED)}var bq=a(310435);function bJ({folder:e,user:t,dispatch:a,team:r,shouldShowRenameModal:n,onClaimClick:i,lgFolder:l,shouldShowLockedRedesign:c}){let[d,m]=o.useState(void 0),_=(0,tf.cD)(),g=(0,b_.c)(),E=()=>{e.name&&H&&(a(e7.WC()),a(ep.to({type:(0,bg.y)(),data:{folder:e}})))},y=()=>{bH.S.getFolderTransfer({folderId:e.id}).then(({data:e})=>{m(e.meta)},e=>{m(void 0)})};(0,u.h)(()=>{y()}),(0,u.h)(()=>{n&&E()});let v=(0,te.fn)()===te.ih.CONTROL,b=(0,ew.FC)(),w=(0,s.d4)(e=>e.currentUserOrgId),T=(0,s.d4)(e=>e.teamRoleRequests),I=o.useMemo(()=>l&&l.team&&l.team.org?.id,[l]),N=o.useMemo(()=>l&&l.team&&l.team.id,[l]),x=o.useMemo(()=>!!l?.team?.canAdmin,[l]),C=()=>{eG.Ay.del(`/api/asset_transfer/${d?.id}`).then(()=>{m(void 0),a(aD.F.enqueue({message:"Transfer revoked."}))},e=>{a(aD.F.enqueue({message:"Something went wrong - check your connection and try again",error:!0}))})},S=()=>{a(ep.to({type:a8.W,data:{folderId:e.id}}))},R=o.useMemo(()=>!x&&e&&null!==w&&!l?.canEdit,[x,e,w,l]),L=o.useMemo(()=>!!(l&&l.canCreateFigjamFile&&l.canEdit),[l]),D=o.useMemo(()=>!!(l&&l.canCreateDesignFile&&l.canEdit),[l]),P=o.useMemo(()=>!!l&&l.canCreateSlidesFile&&l.canEdit,[l]),F=!!(0,p.kc)().piper&&P,O=(0,bY.sy)(),M=D&&O,B=L||D,U=o.useMemo(()=>!!(l&&l.canRead),[l]),H=o.useMemo(()=>!!(l&&l.canEdit),[l]),W=o.useMemo(()=>!!(l&&l.isEditingLockedForUser),[l]),j=o.useMemo(()=>{if(R&&T&&r&&T[r.id]&&T[r.id].status===bV.c.PENDING)return T[r.id].id},[R,T,r]);o.useEffect(()=>{R&&w&&a((0,ey.Rw)())},[R,a,w]);let G=(0,aG.jm)(I,N),$=(0,ac.S)(),z=(0,rZ.a)(e.id),Y=c?(0,A.t)("locked_team.label.tooltip"):void 0,K=c?ei.Ib.TEXT:void 0,Q=l?.team?.org?.currentBaseOrgUser,X=l?.team?.currentTeamUser,q=(0,te.zq)(),J=(0,h.I7)("exp_pro_upgrade_project_vr"),Z=(0,h.I7)("exp_org_upgrade_project_vr"),ee=!1;_&&X&&(X&&X.whiteboardPaidStatus===bQ.Zf.RESTRICTED||X&&X.designPaidStatus===bQ.Zf.RESTRICTED)&&l&&l.canEdit&&l.team&&!l.team.isStarterTeam&&!l.team.isStudentTeam&&((0,V.sx)("pro_upgrade_project_exp_fetch",{reduxTeamId:_,lgTeamId:X.teamId,userId:X.userId}),ee=J.getConfig().getValue("showExp",!1));let et=!1;w&&Q&&(Q&&Q.whiteboardPaidStatus===ex.El.RESTRICTED||Q&&Q.designPaidStatus===ex.El.RESTRICTED)&&l&&l.canEdit&&l.team&&l.team.org?.id&&((0,V.sx)("org_upgrade_project_exp_fetch",{reduxOrgId:w,lgOrgId:l.team.org?.id,userId:Q.userId}),et=Z.getConfig().getValue("showExp",!1));let ea=(e,t)=>!(t&&t.team&&t.team?.org?.k12GoogleOrg)&&(e===aP._YF.WHITEBOARD?!!Q&&Q.whiteboardPaidStatus===ex.El.STARTER||!!X&&X.whiteboardPaidStatus===bQ.Zf.STARTER:e===aP._YF.DESIGN&&(!!Q&&Q.designPaidStatus===ex.El.STARTER||!!X&&X.designPaidStatus===bQ.Zf.STARTER))&&!!t&&!!t.canEdit&&!!t.team&&!t.team?.isStarterTeam&&!t.team?.isStudentTeam&&q(),er=(e,t)=>!(e===ex._Y.WHITEBOARD&&t?.team?.org?.isFigJamDisabled)&&!!bX(e,Q,X)&&!!t&&!!t.canEdit&&!!t.team&&!t.team?.isStarterTeam&&!t.team?.isStudentTeam&&(!!Q&&!!et||!!X&&!!ee),en=e=>{if(bX(e,Q,X)){if(Q&&et){if(e===ex._Y.DESIGN&&Q.designAccountTypeRequest?.status==="pending"||e===ex._Y.WHITEBOARD&&Q.whiteboardAccountTypeRequest?.status==="pending")return!0}else if(X&&ee&&(e===ex._Y.DESIGN&&X.designAccountTypeRequest?.status==="pending"||e===ex._Y.WHITEBOARD&&X.whiteboardAccountTypeRequest?.status==="pending"))return!0}return!1},el=(e,t)=>{let n=I?l?.team?.org:l?.team,i=n?.name,o=Q||X;if(g){let r=o?.activeSeatTypeUpgrade?.billableProduct?.licenseTypes??[],i=t.toString();return r.includes(i)?e:(0,bp.Fs)(e,i,a,n&&{type:I?ex.OL.ORG:ex.OL.TEAM,id:n.id,name:n.name,canSelfUpgrade:!0})}if(ea(t,l))return()=>{a(ep.to({type:b$.y,data:{planType:I?hL.O.ORG:hL.O.TEAM,planName:i,seatTypesToBeUpgraded:{design:t===ex._Y.DESIGN,whiteboard:t===ex._Y.WHITEBOARD},planId:I??N,upgradeReason:bz.X.CREATE_FILE,onConfirm:e}}))};if(er(t,l)){if(Q&&l?.team)return()=>{a(ep.to({type:bj.Y,data:{orgId:I??"",orgUser:{id:Q.id,user_id:Q.userId,org_id:I??"",permission:Q.permission,license_group_member:{license_group_id:l.team?.licenseGroupId??null}},entryPoint:bB.PE.CreateFileProjectView,licenseType:(0,bU.vc)(t)}}))};if(X)return()=>{a(ep.to({type:bG.PK,data:{team:r,entryPoint:bB.Wc.CREATE_FILE_PROJECT_VIEW,editorType:t}}))}}return e},eo=(0,Ev.$)(ex._Y.DESIGN,Eg.f6.FILE_BROWSER_TOPBAR_FOLDER,"toolbar_design_created",e.id,!!(!r&&l&&l.canEdit)),es=(0,Ev.$)(ex._Y.WHITEBOARD,Eg.f6.FILE_BROWSER_TOPBAR_FOLDER,"toolbar_figjam_created",e.id,!!(!r&&l&&l.canEdit)),ec=(0,Ev.$)(ex._Y.SLIDES,Eg.f6.FILE_BROWSER_TOPBAR_FOLDER,"toolbar_slides_created",e.id,!!(!r&&l&&l.canEdit)),ed=(0,Ev.$)(ex._Y.SITES,Eg.f6.FILE_BROWSER_TOPBAR_FOLDER,"toolbar_sites_created",e.id,!!(!r&&l&&l.canEdit));(0,Ev.$)(ex._Y.COOPER,Eg.f6.FILE_BROWSER_TOPBAR_FOLDER,`toolbar_${gG.sq}_created`,e.id,!!(!r&&l&&l.canEdit));let em=(t,r,n)=>{if(e){let i={folder:e,entrypoint:"folder_page_view",sectionId:n,favoriteId:r};t?a(tC.Mv(i)):a(tC.jv(i))}},eu=()=>{a(e_.gN(e.id)),a((0,vs.L)({showImportModal:(0,p.kc)().figjam_3p_file_importer}))},eg=!!(0,r_.c8)(e.id,e.team_id,b).data,ef=bh({from:Eg.f6.FILE_BROWSER_TOPBAR_FOLDER}),eE=bv({from:Eg.f6.FILE_BROWSER_TOPBAR_FOLDER}),eh=(0,hn.oz)({}),ev=ET({from:Eg.f6.FILE_BROWSER_TOPBAR_FOLDER}),eb=(0,EE.lt)({from:Eg.f6.FILE_BROWSER_TOPBAR_FOLDER});return(0,vl.XT)({from:Eg.f6.FILE_BROWSER_TOPBAR_FOLDER}),o.createElement(iX,{title:e.name,rightSideActions:(()=>{let n=[],s=(0,p.kc)().ps_benchmark&&(0,eC.R$)(t,w);eg&&n.push({kind:i6.A.BUTTON,key:i6.D.CLAIM,displayText:(0,A.t)("file_browser.folder.join_as_owner"),onClick:i});let d=[],m=bS(eE,el(es,ex._Y.WHITEBOARD)),u=bS(ef,el(eo,ex._Y.DESIGN)),_=null!==ev?bS(ev,ec):null,E=null!==eb?bS(eb,ed):null,h=en(ex._Y.DESIGN),y=en(ex._Y.WHITEBOARD),b=er(ex._Y.DESIGN,l)&&er(ex._Y.WHITEBOARD,l)&&h&&y;if(!W&&!s){let e=bK({dataTestId:"request-sent-design-button",key:i6.D.REQUEST_SENT_DESIGN,tooltipEditorString:(0,A.t)("file_browser.tool_bar.request_sent_tooltip_figma_design"),listOptionType:Eh.R.DESIGN}),t=bK({dataTestId:"request-sent-whiteboard-button",key:i6.D.REQUEST_SENT_WHITEBOARD,tooltipEditorString:(0,A.t)("file_browser.tool_bar.request_sent_tooltip_figjam"),listOptionType:Eh.R.WHITEBOARD}),a=bK({dataTestId:"disabled-import-button",key:i6.D.IMPORT,tooltipEditorString:(0,A.t)("file_browser.tool_bar.request_sent_tooltip_figma_design_and_figjam"),listOptionType:Eh.R.IMPORT});b?(d.push(e,t),M&&null!==E&&d.push(E),F&&null!==_&&d.push(_),d.push(a)):(D?d.push(u):g?d.push(u):er(ex._Y.DESIGN,l)&&(h?d.push(e):d.push(u)),L?d.push(m):g?d.push(m):er(ex._Y.WHITEBOARD,l)&&(y?d.push(t):d.push(m)),M&&null!==E&&d.push(E),F&&null!==_&&d.push(_))}if(B&&!s&&(d.push({displayText:"",disabled:!0,separator:!0}),d.push(bS(eh))),d.length>0&&n.push({kind:i6.A.CUSTOM,key:i6.D.NEW_RESOURCE,element:o.createElement(bR,{createOptionsList:d,dropdownType:Eh.x})}),U){let e={kind:i6.A.BUTTON,key:i6.D.SHARE,displayText:(0,A.t)("file_browser.folder.share"),onClick:c?f.lQ:S,"data-tooltip":Y,"data-tooltip-type":K,styleClass:c?bq.EB:void 0};n.push(e)}R&&n.push({kind:i6.A.BUTTON,key:i6.D.REQUEST_TO_EDIT,displayText:void 0!==j?(0,A.t)("file_browser.team.cancel_request"):(0,A.t)("file_browser.team.request_to_edit"),onClick:()=>{j?a(bM.lT({requestId:j})):r&&a(ep.to({type:bW.$,data:{team:r,requesterCurrentLevel:eL.e6.VIEWER,source:"FolderPageView"}}))}});let T=$?o.createElement(rm.r,{setFavorite:em,favoriteType:ex.bk.FOLDER,resourceId:e.id,isFavoriteHeaderStar:!0,orgId:w,teamId:N??null}):o.createElement(bO.d,{folder:e});if(v&&(!(0,p.kc)().ps_benchmark||G)&&n.push({kind:i6.A.CUSTOM_BUTTON,key:i6.D.FAVORITE,element:T}),!W&&(D||L||F)){let e=o.createElement(bE,{dropdownKey:"new-file-dropdown",canCreateDesignFile:D,canCreateWhiteBoardFile:L,canCreateSlidesFile:F,onNewDesignFileClick:el(eo,ex._Y.DESIGN),onNewWhiteBoardClick:el(es,ex._Y.WHITEBOARD),onNewSlidesClick:el(ec,ex._Y.SLIDES)});n.push({kind:i6.A.CUSTOM_BUTTON,key:i6.D.NEW_FILE_DROPDOWN,styleClass:k.cx.colorBgInverse.$,showOnMobile:!0,hideOnDesktop:!0,element:e})}let I=o.createElement(bF,{dropdownKey:"project-overflow-dropdown",folder:e,onImportClick:eu,onShareClick:S,setFavorite:G?em:null});return n.push({kind:i6.A.CUSTOM_BUTTON,key:i6.D.PROJECT_OVERFLOW_MENU,showOnMobile:!0,hideOnDesktop:!0,element:I}),n})(),rightSideOfTitleAction:(()=>{let t=z({folder:{...(0,Eg.Kk)({...e,canCreateDesignFile:D,canCreateFigjamFile:L,canCreateSlidesFile:F},H),isSubscribed:e.is_subscribed,description:e.description},onRenameClick:E,onRevokeTransfer:C,shouldShowJoinButton:!1,getPendingInfo:y,pendingTransfer:d});return U&&t.length>0?{kind:i6.A.CUSTOM,key:i6.D.DROPDOWN,element:o.createElement(iZ,{buttonAriaLabel:(0,A.t)("file_browser.folder.page_header_dropdown_label"),dropdownKey:`folder-${e.id}`,dropdownOptions:t})}:void 0})()})}let bZ="folder_page_view--sidebarDivider--NEgHu";function b0(e){let t=(0,s.wA)(),a=(0,J.Rs)(ee.CH9,{folderId:e.folderId}),r=o.useMemo(()=>"loaded"===a.status?(a.data.project?.pinnedFiles||[]).filter(e=>!!e.file):[],[a]);o.useEffect(()=>{t(e7.MR({folderId:e.folderId,fileKeys:r.map(e=>e.file.key)}))},[r,t,e.folderId]);let n=o.useCallback(()=>{t(aj.an())},[t]);return 0!==r.length?o.createElement(o.Fragment,null,o.createElement("div",{className:"folder_page_view--pinnedHeader--YJufT",onMouseDown:n},o.createElement(R.E,{fontSize:13,color:"secondary"},(0,A.tx)("file_browser.folder.pinned"))),o.createElement(v0,{files:r,tileActions:e.tileActions,repos:e.repos})):null}let b1={open:!0,openNewTab:!0,restoreFromVersion:!0,share:!0,copyLink:!0,rename:!0,duplicate:!0,delete:!0,createBranch:!0,publishOrgTemplate:!0,moveFile:!0,pinToFolder:!0,pinToWorkspace:!0},b2=(0,hm.xx)(r_.ZN);function b8(e){let{folderId:t}=e,a=(0,J.Rs)(ee.L8O,{projectId:t}),r=(0,ew.FC)(),n=(0,eK.LK)(t),i=aO.Qw.useTransformShallowEqual(n,e=>{let a=e.folder;return{folder:e.folder,canView:(0,en.canViewFolder_DEPRECATED)(t,r),canEdit:(0,en.canEditFolder)(t,r),isEditingLocked:!!a&&(0,er.ZZ)(a,r),team:r.teams[a?.team_id||""]||null}}).data,l=i?.folder,c=(0,s.wA)(),d=(0,J.Rs)(ee.Udv,{id:t});o.useLayoutEffect(()=>{"loaded"!==d.status||d.data.project?.hasPermission||c(ea.$T({view:"recentFiles"}))},[c,d]);let m=(0,te.Yz)();o.useEffect(()=>{l&&!l.is_invite_only&&l.team_id&&!i.team&&c(be.Jt({teamId:l.team_id}))},[c,t,l,i?.team]),o.useEffect(()=>{if(!(0,p.kc)().auto_accept_project_invites)return;let e={999:"owner",900:"admin",300:"edit",100:"view"},t=(0,bt.QL)("auto_role");t&&l&&t in e&&((i.canView||"100"!==t)&&(i.canEdit||"300"!==t&&"900"!==t&&"999"!==t)&&c(aD.F.enqueue({message:(0,A.t)("file_browser.auto_accept_project_invite_modal",{projectName:l.name,inviteType:e[t]})})),(0,bt.EM)("auto_role"))},[c,l,i]);let u=a.data?.project||null,_=(0,s.d4)(e=>b2(t,e.tileSortFilterStateByView)),g=(0,s.d4)(tr.yK),f=(0,s.d4)(e=>!!i?.team&&!!l?.team_id&&yw(e,ex.vt.TEAM,i.team,l.team_id,{isEligibleForLockedRedesign:m})),h=(0,s.d4)(e=>!!e.userFlags.hide_recommended_templates_in_projects),y=(0,s.d4)(e=>e.selectedBranchKeyByRepoId),v=(0,ti.vt)(),b=(0,eb.dq)(),w=(0,eN.iZ)(),T=()=>{c(tS.b({hide_recommended_templates_in_projects:!h}))},I=!!u?.canCreateFigjamFile,N=!!u?.canCreateDesignFile,x=!!u?.canCreateSlidesFile,C=!!u?.canEdit,S=!!u?.canRead,R=()=>!f&&!h,L=function(){let e=(0,s.Pj)();return o.useCallback(async t=>{try{await eG.Ay.post(`/api/folders/${t}/claim`),e.dispatch(e7.qp({folderId:t})),(0,r_.qF)(t)||e.dispatch((0,eK.jl)({folderId:t,loadedFolders:{}}))}catch(t){e.dispatch(e$.s.error(t.message||(0,A.t)("file_browser.file_browser_actions.claim_team_error")))}},[e])}(),D=()=>L(t),P=(0,r_.c8)(t,l?.team_id||null,r),F=(0,te.PP)();if(!l||"loaded"!==n.status||"loaded"!==a.status)return o.createElement("div",{className:"folder_page_view--loading--ZkDG0"},o.createElement(td.kt,null));let O=e=>{c(e7.ub({folderId:t,description:e.trim()}))},M={view:"project",folderId:t,canEdit:i.canEdit,userSpace:b?eD.qo.ORG:eD.qo.PERSONAL},B=i.team,U=B&&!(0,er.w5)(B),V=!!B&&(0,en.canEditTeam)(B.id,r)&&U&&!!(0,p.kc)().fbg_starter_project_redesign&&!F();return(0,eg.T8)(o.createElement(i$.r,{content:o.createElement("div",{className:k.cx.flex.flexColumn.$},(()=>{let t=!!(N||I||x)&&!i.isEditingLocked,a=t?"":(0,A.t)("file_browser.folder.no_files_yet");if("loaded"!==P.status)return null;let{files:r,repos:s,filesByRepoId:c}=n.data,d=[...r.map(e=>({type:az.nb.FILE,file:e})),...s.filter(e=>!e.trashed_at).map(e=>({type:az.nb.REPO,repo:e,branches:c[e.id],selectedBranchKey:y[e.id]||""}))],u=o.createElement(o.Fragment,null,o.createElement(vq,{team:i.team||void 0,newFileFrom:Eg.f6.FILE_BROWSER_TOPBAR_FOLDER,disableRecommendedTemplates:g||m(v),folderId:l.id,recommendedTemplatesIsOpen:R(),toggleRecommendedTemplates:T,isInProjectsView:!0}),o.createElement(b0,{folderId:e.folderId,repos:s,tileActions:b1}),o.createElement(hq,{newFileTile:t,tiles:d,tileActions:b1,sortFilterOptions:_,emptyStateText:a,isFolder:!0,eligibleForLockedStateRedesign:m(v)})),p=o.createElement(hJ,{emptyStateText:(0,A.t)("file_browser.folder.join_this_project_to_view_files"),onClaimClick:D});return P.data?p:u})(),V?o.createElement(v5,{folder:l}):null,o.createElement(E3.cx,null)),metaContent:E.Ay.mobile||!U||(0,p.kc)().fbg_starter_project_redesign||F()?void 0:(()=>{let e=C&&!i.isEditingLocked,a=i.team,r=a&&!(0,er.w5)(a);return o.createElement("div",{className:"folder_page_view--metaColumn--FPnOz"},(e||l.description)&&o.createElement(o.Fragment,null,o.createElement("div",{className:bZ}),o.createElement("div",{className:"folder_page_view--folderDescription--wO8Rd text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement("h3",{className:k.cx.font13.fontMedium.$},(0,A.tx)("file_browser.about")),o.createElement(pv,{value:l.description||"",placeholder:(0,A.t)("file_browser.folder.add_a_description"),formatter:py,submit:O,readOnly:!e}))),l.team_id&&o.createElement(o.Fragment,null,o.createElement("div",{className:bZ})),S&&!E.Ay.mobile?o.createElement(bu,{key:t,folderId:t}):null,a&&r&&o.createElement(v3,{folderId:t}),l.team_id&&o.createElement(v7,{teamId:l.team_id}))})(),banner:B&&f?o.createElement(bc,{teamId:B.id}):void 0,header:o.createElement(o.Fragment,null,o.createElement(bJ,{dispatch:c,user:w,folder:{...i,...l,canCreateDesignFile:N,canCreateWhiteboardFile:I},team:B,currentOrgId:b,onClaimClick:D,shouldShowRenameModal:e.shouldShowRenameModal||!1,lgFolder:u,shouldShowLockedRedesign:m(v)}),N&&B&&o.createElement(bs,{teamId:B.id,canCreateFigjamBoard:I}))}),eD.e0.FILE_BROWSER,M)}function b4(){return(0,p.kc)().limited_plan_spaces?o.createElement(i$.r,{content:o.createElement("div",null)}):null}function b3({orgId:e}){let t=(0,ew.FC)(),a=(0,s.wA)();return(0,en.canMemberOrg)(e,t)?o.createElement(iQ.K,{action:{kind:iQ.A.BUTTON,key:i6.D.VIEW_LIBRARIES,displayText:(0,A.t)("org_view.view_libraries"),onClick:()=>{a(ea.$T({view:"org",orgId:e,orgViewTab:tE.X.LIBRARIES}))}}}):null}function b5({orgId:e}){let t=(0,s.wA)(),a=(0,s.d4)(tr.QT),r=(0,s.d4)(t=>t.orgById[e]),{canCreateTeam:n}=(0,tD.l6)(r,void 0);return a||!n?null:o.createElement(iQ.K,{action:{kind:iQ.A.CUSTOM,key:i6.D.NEW_TEAM,element:o.createElement(i9,{onClick:()=>{t(ep.to({type:th.Uc,data:{}}))},variant:"inverse",text:(0,A.t)("license_group_view.toolbar.new_team_button")})}})}function b9({orgId:e}){return e?o.createElement(o.Fragment,null,o.createElement(b5,{orgId:e,key:"org-new-team-action"}),o.createElement(b3,{orgId:e,key:"org-library"})):null}var b6=a(193360);function b7(){let e=(0,s.wA)(),t=(0,eb.dq)(),a=yv((0,nI.R)(e=>({...(0,en.getPermissionsState)(e),selectedView:e.selectedView,userFlags:e.userFlags,userTeamFlags:e.userTeamFlags,isFreeUser:e.isFreeUser,userAnalyticsData:e.userAnalyticsData})),e);if(!a)return o.createElement("div",null);let r=yI({resourceType:"org",orgId:t},a),n=a.severity===yt.c.WARN?ya:"",i=`${yu} ${n}`;return o.createElement("div",{className:i},o.createElement(yS,{...a,tracking:r}))}var we=a(918012);let wt="org_meta_content--container--b5Iq3";function wa({org:e}){return o.createElement("div",{className:k.cx.flex.flexColumn.rowGap16.$},o.createElement(tq.Ro,{entity:e,size:36}),o.createElement(R.E,{fontWeight:"medium",fontSize:13},e.name))}function wr({handle:e}){let t=(0,s.wA)();return o.createElement("a",{href:new mQ.xn({profileHandle:e}).href,className:we.B,onClick:a=>{a.metaKey||(a.preventDefault(),t(ea.$T({view:"communityHub",subView:"handle",handle:e})))}},o.createElement(R.E,{fontSize:11},"@",e))}function wn({orgId:e}){let t=(0,s.d4)(t=>(0,h4.Xy)(t.orgUsersByOrgId[e]).map(e=>e.user)),a=(0,s.wA)();return o.createElement(l_,{label:(0,A.t)("org_home_view_meta.admins"),members:t,onMemberClick:(e,t)=>{a(ea.$T({view:"user",userId:t.id,userViewTab:lp.o.INTERNAL_PROFILE}))},canLeave:!1})}function wi({org:e,orgStats:t}){let a=t?o.createElement(R.E,{fontSize:11,color:"secondary"},(0,A.tx)("org_home_view_meta.member_count",{memberCount:t.memberCount.data}),o.createElement("span",null,"\xa0\xb7\xa0"),"workspaceCount"in t?(0,A.tx)("org_home_view_meta.workspace_count",{workspaceCount:t.workspaceCount.data}):(0,A.tx)("org_home_view_meta.team_count",{teamCount:t.discoverableTeamCount.data})):o.createElement(_p.Wi,{className:k.cx.mb4.$,animationType:_p.JR.SHIMMER});return o.createElement("div",{className:wt},o.createElement(wa,{org:e}),o.createElement("span",{className:k.cx.mt4.$},a),e.community_profile_handle?o.createElement("span",{className:k.cx.mt2.$},o.createElement(wr,{handle:e.community_profile_handle})):null,o.createElement("span",{className:k.cx.mt32.$},o.createElement(wn,{orgId:e.id})))}function wl({org:e}){let t=(0,J.Rs)(ee.nYs,{orgId:e.id});return o.createElement(wi,{orgStats:t.data?.org??null,org:e})}function wo({org:e}){let t=(0,J.Rs)(ee.kei,{orgId:e.id});return o.createElement(wi,{orgStats:t.data?.org??null,org:e})}function ws({org:e}){return o.createElement("div",{className:wt},o.createElement(wa,{org:e}),e.community_profile_handle?o.createElement("span",{className:k.cx.mt4.$},o.createElement(wr,{handle:e.community_profile_handle})):null,o.createElement("span",{className:k.cx.mt4.$},o.createElement(R.E,{fontSize:11,color:"secondary"},(0,A.tx)("payments_modal.guest_permission_disclaimer")," ",o.createElement("a",{className:we.B,href:"https://help.figma.com/hc/articles/360039957374",target:"_blank",rel:"noopener"},(0,A.tx)("org_home_view_meta.learn_more")))))}var wc=a(963067),wd=a(66944);let wm="org_plugins_view--resourcesGrid--vuLoW profile_resources_grid--_resourcesGridTemplateColumns--19JO6",wu="org_plugins_view--container--LquUh",w_="org_plugins_view--emptyState--lppIb tiles_view--emptyState--jfzsE text--fontPos11--2LvXf text--_fontBase--QdLsd";function wp(){let e=(0,wc.Yo)(),t=(0,s.wA)(),a=(0,s.d4)(e=>e.publishedPlugins);o.useEffect(()=>{t(cF.Xt())},[t]);let r=function(){if(!e)return[];let t=(0,s$.Qt)((0,s$.i8)(Object.values(a)),e.id);return Object.keys(t).map(e=>t[e])}();return e&&0!==r.length?o.createElement("div",{className:wu},o.createElement("div",{className:wm},r.map((e,t)=>o.createElement(cY.AB,{isPublic:!1,pluginId:e.id,showInstallCount:!0,key:`plugin-${e.id}`,viewContext:"OrgPluginsView",innerText:(0,A.t)("org_view.plugin_tile"),trackingProperties:{pluginId:e.id,position:t},dropdown:o.createElement(wd.d,{resource:e})})),o.createElement(cY.hT,{numResources:r.length}))):o.createElement("div",{className:w_},(0,A.tx)("org_view.private_plugins_will_appear_here"))}let wg=e=>{switch(e){case tE.X.HOME:return(0,A.t)("org_view.overview");case tE.X.YOUR_TEAMS:return(0,A.t)("org_view.your_teams");case tE.X.PLUGINS:return(0,A.t)("org_view.plugins");case tE.X.WIDGETS:return(0,A.t)("org_view.widgets");default:return null}};function wf(e){let t=(0,s.wA)(),a=(0,eb.sZ)(),r=e=>{t(ea.$T({view:"org",orgId:a?.id??"",orgViewTab:e}))},n=Object.keys(tE.X).reduce((t,a)=>{let n=wg(tE.X[a]);return null!=n&&t.push(o.createElement(yL.r,{tab:tE.X[a],onClick:r,isSelected:e.selectedTab===tE.X[a],tabName:n,key:a})),t},[]),i=o.createElement(yL.f,{tabs:n});return o.createElement(nM.g2,{leftSide:i,rightSide:[]})}var wE=a(39954);let wh=(0,s.Ng)(e=>({orgEntity:(0,nX.Jl)(e),publishedWidgets:e.publishedWidgets}))(function(e){let t=(0,s.wA)();o.useEffect(()=>{t(cF.gI())},[t]);let a=o.useMemo(()=>{if(!e.orgEntity)return[];let t=(0,s$.Qt)((0,s$.i8)(Object.values(e.publishedWidgets)),e.orgEntity.id);return Object.keys(t).map(e=>t[e])},[e.orgEntity,e.publishedWidgets]);return e.orgEntity&&0!==a.length?o.createElement("div",{className:wu},o.createElement("div",{className:wm},a.map((e,t)=>o.createElement(wE.F9,{key:`widget-${e.id}`,widget:e,viewContext:"OrgWidgetsView",trackingProperties:{widget:e.id,position:t}})),o.createElement(cY.hT,{numResources:a.length}))):o.createElement("div",{className:w_},(0,A.tx)("org_view.private_widgets_will_appear_here"))});var wy=a(193212);function wv(e){let t,a,r;let{workspace:n,teamCount:i,isSelected:l,onSelect:c}=e,d=(0,s.d4)(e=>e.currentUserOrgId),[m,u]=o.useState(!1),_=(0,wy.aq)(),p=n.colorConfig?.colors??[],g=e.isMainWorkspace?p[0]:void 0,f=n.description??void 0;g&&(g=function(e,t,a){try{let r=(0,ie.H0)(t),n=(0,ie.kx)(r),i=(0,it.oN)(t,!n,n);return a&&i!==t&&(0,V.sx)("workspace_background_color_adjusted_for_accessibility",{workspace_id:e,original_background_color:t,adjusted_background_color:i}),i}catch(e){console.error(e)}return t}(n.id,g,_()));let h=(0,s.wA)(),y=()=>{h(e_.kg({clickedResourceType:"workspace",resourceIdOrKey:n.id})),h(ea.$T({view:"workspace",subView:tV.V0.DIRECTORY,workspaceId:n.id,selectedTab:tV.dN.TEAMS}))},v=o.useCallback((e,t,a)=>{if(n){let r={workspace:{id:n.id,name:n.name??"",imgUrl:n.imgUrl},entrypoint:"workspace_tile",sectionId:a,favoriteId:t};e?h(tC.ZW(r)):h(tC.if(r))}},[h,n]);g&&((0,ie.kx)(g)?(t="org_page_view--workspaceTileTitleColorForDarkBackground--m6sFp",a="org_page_view--secondaryTextColorOnDarkBackground--7Ru-V",r="org_page_view--favoriteStarContainerForDarkBackground--mVRVn workspace_page_header--favoriteStarContainerForDarkBackground--MXtIt"):(t="org_page_view--workspaceTileTitleColorForLightBackground---zSTU",a="org_page_view--secondaryTextColorOnLightBackground--68byE",r="org_page_view--favoriteStarContainerForLightBackground--W9qx7 workspace_page_header--favoriteStarContainerForLightBackground--AKL23"));let b=o.createElement(tq.z6,{entity:n,size:40}),w=(0,to.oA)(n.memberCount),T=o.createElement("div",{className:O()(k.cx.flex.flexRow.itemsCenter.$,a)},o.createElement("span",null,(0,A.tx)("org_view.license_group.member_count",{memberCount:w?.data??"0"}),o.createElement("span",null,"\xa0\xb7\xa0"),(0,A.tx)("org_view.license_group.team_count",{teamCount:i}))),I=o.createElement(rm.r,{setFavorite:v,favoriteType:ex.bk.WORKSPACE,resourceId:n.id,size:rm.m.MEDIUM,containerStyle:O()("org_page_view--favoriteStarContainer--GKbng button_styles--button--h219I",r),noHoverState:!0,orgId:d,parentBackgroundColor:g}),N=n.orgAccess===ex.bU.SECRET?o.createElement("div",{className:k.cx.ml4.$,"data-tooltip-type":ei.Ib.TEXT,"data-tooltip":(0,A.t)("workspace_table.secret_workspace_lock_tooltip"),"data-tooltip-subtext":(0,A.t)("workspace_table.secret_workspace_lock_tooltip_subtext"),"data-tooltip-timeout-delay":500,"data-tooltip-max-width":300},o.createElement(Q.In,{icon:"lock-16"})):null;return o.createElement(iD.a,{backgroundColor:g,description:f,descriptionClassName:a,name:o.createElement("span",{className:t},n.name),titleSubtitleRight:N,headerLeft:b,footerLeft:T,headerRight:I,onClick:e=>{2===e.detail||E.Ay.mobile||E.Ay.tablet?y():1===e.detail&&c()},canView:!0,onMouseOver:()=>{u(!0)},onMouseOut:()=>{u(!1)},isCardActive:m||l,isSelected:l})}function wb(e){let{unassignedTeams:t,isSelected:a,onSelect:r}=e,[n,i]=o.useState(!1),l=(0,s.wA)(),c=()=>{l(e_.kg({clickedResourceType:"workspace"})),l(ea.$T({view:"workspace",subView:tV.V0.DIRECTORY,workspaceId:null,selectedTab:tV.dN.TEAMS}))},d=(0,A.tx)("org_view.license_group.unassigned_tile.name"),m=o.createElement(tq.md,{teams:t,size:40,isHovered:n}),u=o.createElement("span",null,"\xa0"),_=(0,A.tx)("org_view.license_group.unassigned_tile.description",{teamCount:t.length});return o.createElement(iD.a,{name:d,headerLeft:m,headerRight:u,footerLeft:_,onClick:e=>{2===e.detail||E.Ay.mobile||E.Ay.tablet?c():1===e.detail&&r()},canView:!0,onMouseOver:()=>{i(!0)},onMouseOut:()=>{i(!1)},isCardActive:n||a,isSelected:a})}function ww(){let[e,t]=o.useState(null),a=(0,s.wA)(),r=(0,ew.FC)(),n=(0,s.d4)(e=>e.currentUserOrgId),i=(0,eb.sZ)(),l=(0,tD.Au)(n),{canCreateTeam:c}=(0,tD.l6)(i,void 0),d=(0,J.Rs)(ee.bUn,{orgId:n}),m="loaded"!==d.status,u=d.data?.org?.workspaces??[],_=m?[]:[...u],p=(0,C.md)(iC.w),g="loaded"!==p.status,{workspaceTeamCounts:f,unassignedTeams:E}=o.useMemo(()=>{let e=(p.data||[]).filter(e=>(0,iB.dP)(e,r,n));return{workspaceTeamCounts:(0,aJ.ZM)(e),unassignedTeams:e.filter(e=>null===e.workspace_id||void 0===e.workspace_id)}},[r,n,p]);(0,M.sortAlphabeticallyByProperty)(_,"name");let h=_.find(e=>e.id===l.data),y=_.map(a=>{if(a.id!==h?.id)return o.createElement(wv,{key:a.id,workspace:a,teamCount:f[a.id]??0,isSelected:e?.type==="workspace"&&e.workspaceId===a.id,onSelect:()=>{t({type:"workspace",workspaceId:a.id})}})});if(E.length>0&&y.push(o.createElement(wb,{key:"unassigned",unassignedTeams:E,isSelected:e?.type==="unassigned-teams",onSelect:()=>{t({type:"unassigned-teams"})}})),m||g)return o.createElement(iS.X,{isLoading:!0});let v=h&&o.createElement(o.Fragment,null,o.createElement("div",{className:k.cx.pl32.$},o.createElement(R.E,{color:"secondary",fontSize:11},(0,A.tx)("org_view.your_workspace"))),o.createElement(iS.X,{emptyView:o.createElement(o.Fragment,null),tileSize:iS.o.Medium},o.createElement(wv,{key:h.id,workspace:h,teamCount:f[h.id]??0,isMainWorkspace:!0,isSelected:e?.type==="workspace"&&e.workspaceId===h.id,onSelect:()=>{t({type:"workspace",workspaceId:h.id})}})));return o.createElement(o.Fragment,null,v,h&&o.createElement("div",{className:k.cx.pl32.$},o.createElement(R.E,{color:"secondary",fontSize:11},(0,A.tx)("org_view.other_workspaces"))),o.createElement(iS.X,{emptyView:o.createElement(iA,{onCreateTeam:c?()=>{a(ep.to({type:th.Uc,data:{}}))}:void 0}),tileSize:iS.o.Medium},y))}let wT=(e,t)=>({canMemberOrg:(0,en.canMemberOrg)(e.currentUserOrgId,(0,en.getPermissionsState)(e)),org:e.orgById[t],isEnterpriseOrgDirectoryEnabled:(0,tr.QT)(e),currentOrgUser:e.user&&e.currentUserOrgId?e.orgUsersByOrgId[e.currentUserOrgId][e.user.id]:null});function wI(e){let{canMemberOrg:t,org:a,isEnterpriseOrgDirectoryEnabled:r,currentOrgUser:n}=(0,nI.R)(t=>wT(t,e.orgId)),i=(0,s.wA)();o.useEffect(()=>{t&&(i(iM.Jt({includeMemberCount:!0,includeTopMembers:!1,includeProjectCount:!0})),i(b6.Pg({orgId:e.orgId})))},[t,e.orgId,i]);let l=null;switch(e.selectedTab){case tE.X.WIDGETS:l=o.createElement(wh,null);break;case tE.X.PLUGINS:l=o.createElement(wp,null);break;case tE.X.YOUR_TEAMS:l=o.createElement(ij,{onlyJoinedTeams:!0});break;case tE.X.HOME:case tE.X.FONTS:case tE.X.LIBRARIES:l=r?o.createElement(ww,null):o.createElement(ij,null)}let c=n&&n.permission===ex._D.GUEST,d=null;d=c?o.createElement(ws,{org:a}):r?o.createElement(wl,{org:a}):o.createElement(wo,{org:a});let m=o.createElement(wf,{selectedTab:e.selectedTab});return o.createElement(i$.r,{banner:o.createElement(b7,null),viewbar:m,content:l,metaContent:d})}var wN=a(200482);let wx=(0,nN.eU)(!1);function wC(){let e=(0,c.lH)(),t=(0,C.md)(c.Bb),a=(0,C.md)(wx),r=(0,_k.Xr)(wx);if(!(0,p.kc)().chrome_os_app_install_button||!E.Ay.chromeos||!E.Ay.chrome||e||!t)return null;let n=async()=>{r(!0);let e=await t.prompt();"dismissed"===e.outcome&&r(!1),(0,V.sx)("add_to_chromebook_clicked",{installed:"accepted"===e.outcome})};return o.createElement(iQ.K,{action:{kind:iQ.A.CUSTOM,key:i6.D.ADD_TO_CHROMEBOOK,element:o.createElement("button",{onClick:n,className:O()(bq.AS,a&&bq.Xn),tabIndex:0},o.createElement(t_.B,{className:bq.He,svg:wN.A}),(0,A.tx)("file_browser.tool_bar.add_to_chromebook"))}})}var wS=a(58716);function wk(){return d.eD||!(0,p.kc)().desktop_get_app_navbar?null:o.createElement(iQ.K,{action:{kind:iQ.A.CUSTOM,key:i6.D.GET_DESKTOP_APP,element:o.createElement("button",{onClick:()=>{m.Ay.redirect(`/download/desktop/${E.Ay.mac?"mac":"win"}`,"_blank")},"data-onboarding-key":"get_desktop_app",className:bq.Fu},o.createElement(t_.B,{className:bq.Kk,svg:wS.A}),(0,A.tx)("banner.desktop_download_button"))}})}var wA=a(831045);function wR(e){let t=(0,wA.lX)(),a=(0,eN.TA)();if(!t)return null;if(0===t.length){let t=function(e){switch(e){case wA.$c.DESIGN:return by;case wA.$c.SLIDES:return Ew;case wA.$c.COOPER:return vl.dq;case wA.$c.WHITEBOARD:default:return bb}}(e.dropdownType);return o.createElement(t,{key:`new${e.dropdownType}Action`,from:e.from})}let r=e.dropdownType===wA.$c.DESIGN?"New File Creation Dropdown Design":e.dropdownType===wA.$c.WHITEBOARD?"New File Creation Dropdown FigJam":"New File Creation Dropdown Slides",n=e.dropdownType===wA.$c.DESIGN?(0,A.t)("file_browser.tool_bar.new_design_file"):e.dropdownType===wA.$c.WHITEBOARD?(0,A.t)("file_browser.tool_bar.new_figjam_board"):(0,A.t)("file_browser.tool_bar.new_slide_deck");return o.createElement(eg.fu,{name:r,properties:{userId:a,numberOfEditableProjects:t.length,fileCreationDefaultsDropdownType:e.dropdownType}},o.createElement(wA.X8,{buttonText:n,dataTestId:e.dataTestId,teamsWithEditableProjects:t,currentDropdownType:e.dropdownType,hideOnMobile:!0}))}function wL(){let e=(0,s.wA)(),t=(0,eN.Pc)();return o.createElement(iQ.K,{action:{kind:iQ.A.BUTTON,key:i6.D.VIEW_COMMUNITY_PROFILE,onClick:()=>{e(ea.$T({view:"communityHub",subView:"handle",handle:t.community_profile_handle}))},displayText:(0,A.t)("internal_profile.view_community_profile"),styleClass:k.cx.colorText.$}})}var wD=a(593803);let wP="banner--bullet--4CyMR",wF="banner--button_group--K5S92",wO="banner--primary_button--LmAJY",wM="banner--secondary_button--1IhyX",wB="banner--svg--yRAMV";var wU=a(693806),wV=a(447020),wH=a(313673);function wW(){let e=(0,s.wA)(),t=!!(0,tg.f)("dismissed_config_2024_virtual_promo_banner"),a=!!(0,tg.f)("dismissed_config_2024_apac_promo_banner"),r=p.tl(),n=r.iso_code||"UNKNOWN",i=r.user_data?.locale,l=(0,p.kc)().config_2024_promo_banner&&!t,c=(0,p.kc)().config_2024_apac_promo_banner&&(wD.uk.includes(n)||"ja"===i)&&!l&&!a,d=()=>{e(tS.b({dismissed_config_2024_virtual_promo_banner:!0}))},m=()=>{e(tS.b({dismissed_config_2024_apac_promo_banner:!0}))};return c||l?c?o.createElement(eg.fu,{name:"Config 2024 APAC Promo Banner",properties:{severity:yt.c.EVENT}},o.createElement("div",{className:"banner--apac_wrapper--z7UfS"},o.createElement("div",{className:"banner--apac_logo_and_title--bABaH"},o.createElement(t_.B,{svg:wH.A,className:"banner--apac_logo--hdtfE",svgClassName:wB}),o.createElement("h2",{className:"banner--apac_title--frGn-"},o.createElement(t_.B,{svg:wU.A,svgClassName:wB,className:[wP,"banner--apac_bullet--gFG2L"].join(" ")}),(0,A.tx)("banner.config_2024_apac_promo.title"))),o.createElement(ts.e2,{className:wF},o.createElement(ts.vd,{className:wO,onClick:()=>{(0,l4.FJ)("https://configapac.splashthat.com/PROD","_blank")}},(0,A.tx)("banner.config_2024_promo.primary_cta")),o.createElement(ts.tM,{className:wM,onClick:()=>m()},(0,A.tx)("banner.config_2024_promo.secondary_cta"))))):o.createElement(eg.fu,{name:"Config 2024 April Promo Banner",properties:{severity:yt.c.EVENT}},o.createElement("div",{className:"banner--wrapper--T0A6D"},o.createElement(t_.B,{svg:wH.A,className:"banner--logo--6Aw6U",svgClassName:wB}),o.createElement("div",{className:"banner--copy_and_ctas--WJLUr"},o.createElement("h2",{className:"banner--title--4J6US"},o.createElement(t_.B,{svg:wV.A,svgClassName:wB,className:wP}),(0,A.tx)("banner.config_2024_virtual_promo.title")),o.createElement(ts.e2,{className:wF},o.createElement(ts.vd,{className:wO,onClick:()=>{(0,l4.FJ)("https://config.figma.com/registration#selectVirtualTicket?utm_source=figma&utm_medium=prod&utm_campaign=virtual","_blank")}},(0,A.tx)("banner.config_2024_virtual_promo.primary_cta")),o.createElement(ts.tM,{className:wM,onClick:()=>d()},(0,A.tx)("banner.config_2024_promo.secondary_cta")))))):null}var wj=a(791435);let wG=new class{constructor(){this.SharerFilterOptionsSchemaValidator=(0,o8.vh)(),this.PlanFilterOptionsSchemaValidator=(0,o8.vh)()}getSharerFilterOptions(e){return this.SharerFilterOptionsSchemaValidator.validate(async({xr:t})=>await t.get(`/api/shared_with_you/sharer_filter_options?resource_type[]=${e.resource_type}`))}getPlanFilterOptions(e){return this.PlanFilterOptionsSchemaValidator.validate(async({xr:t})=>await t.get(`/api/shared_with_you/plan_filter_options?resource_type[]=${e.resource_type}`))}};function w$(){return{"":{label:(0,A.t)("shared_with_you.filters.all_organizations")}}}let wz=aq.M4.Query({fetch:async e=>{let t=await wG.getPlanFilterOptions({resource_type:e}),a={};return t.data.meta.plan_filters.forEach(e=>{let t={label:e.label,plan_id:e.plan_id,plan_type:e.plan_type};e.plan_id&&(a[e.plan_id]=t)}),{...w$(),...a}}});function wY(e){let t=e.join("&resource_type[]="),[a]=(0,aq.IT)(wz(t));return a.data||w$()}let wK={"":"Anyone"};function wQ(e){let[t,a]=(0,o.useState)(wK),r=e.join("&resource_type[]=");return(0,o.useEffect)(()=>{wG.getSharerFilterOptions({resource_type:r}).then(({data:e})=>{a(e.meta.shared_by_filters.reduce((e,{user_id:t,label:a})=>({...e,[t]:a}),{...wK}))})},[r]),t}var wX=a(307524),wq=a(388120);let wJ=(e,t)=>`${t}:${e}`;function wZ(e){let t=(0,J.Rs)(ee.ox,{resourceTypes:e.resourceTypes,firstPageSize:30,sortOrder:e.sortOrder,cursorColumn:e.sortKey,sharedBy:e.sharedBy||null,planId:e.planId||null,planType:e.planType||null,fileType:e.fileType||null,orgDeletedDrafts:e.orgDeletedDrafts||null}),a=(0,o.useMemo)(()=>({fetchNextPage:()=>{"loaded"===t.status&&t.data.sharedWithYouResources.hasNextPage()&&t.data.sharedWithYouResources.loadNext(30)}}),[t]),r="loaded"===t.status&&t.data.sharedWithYouResources.isLoadingNextPage;return[{data:(0,o.useMemo)(()=>"loaded"!==t.status?{}:t.data.sharedWithYouResources.reduce((e,t)=>{if(t.sharedWithYouFile){let a=function(e){if(!e||!e.file)return null;let{file:t,...a}=e,r=(0,aX.V1)({...t,...a,edit_url:`${window.location.origin}/file/${t.key}/${(0,sP.sy)(t.name||"")}`,client_meta:t.checkpointClientMeta}),n=(0,aX.V1)({type:az.nb.FILE,file:r},{filePerms:(0,aF.ru)(t)});return{file:r,tile:n}}(t.sharedWithYouFile);if(!a)return e;e[wJ(t.id,"file")]={resourceKey:wJ(t.id,"file"),tile:a.tile,subscribed:!0}}else if(t.sharedWithYouFolder){let{folder:a,...r}=t.sharedWithYouFolder;if(null==a)return e;let n=(0,aX.V1)({...a,...r},{created_at:a.createdAt.toString(),updated_at:a.updatedAt.toString(),deleted_at:a.deletedAt?.toString()||null}),i=(0,aX.V1)({type:az.nb.PROJECT,folder:n}),l=wJ(t.id,"folder");e[l]={resourceKey:l,tile:i,subscribed:!0}}else if(t.sharedWithYouRepo){let a=function(e){let{repo:t,...a}=e;if(null===t)return null;let{branches:r,...n}=t,i=r?.filter(e=>null!=e)?.map(e=>aX.V1({...e,edit_url:e?`${window.location.origin}/file/${e.key}/${sP.sy(e.name||"")}`:"",client_meta:e.checkpointClientMeta}))??[],l=(0,aX.V1)({...n,...a}),o=(0,aX.V1)({type:az.nb.REPO,repo:l,branches:i,selectedBranchKey:""},{repoPerms:(0,wq.zh)(t)});return{repo:l,branches:i,tile:o}}(t.sharedWithYouRepo);if(!a)return e;let r=wJ(t.id,"file_repo");e[r]={resourceKey:r,tile:a.tile,subscribed:!0}}else if(t.sharedWithYouPrototype){let a=function(e){let{prototype:t,...a}=e;if(null==t)return null;let r=(0,aX.V1)({...t,...a});return(0,aX.V1)({type:az.nb.PROTOTYPE,prototype:r},{prototypePerms:(0,wX.R)(t)})}(t.sharedWithYouPrototype);if(!a)return e;let r=wJ(t.id,"prototype");e[r]={resourceKey:r,tile:a,subscribed:!0}}return e},{}),[t]),errors:t.errors,status:t.status,isFetchingNextPage:r},a]}function w0(e){let t=(0,eI._6)(),a=(0,s.d4)(e=>e.tileSortFilterStateByView),r="recentsAndSharing"===t.view?a.recentsAndSharing.sharedFiles:a.sharedWithYou,n=wQ(["file","file_repo","prototype"]),i=wY(["file","file_repo","prototype"]),l={tileSortFilterConfig:r,sortKeys:[lQ.C0.SHARED_AT]},c=e=>{switch(e){case lQ.t2.DESIGN:return"design";case lQ.t2.FIGJAM:return"whiteboard";case lQ.t2.PROTOTYPE:return"prototype";case lQ.t2.SITES:return"sites";case lQ.t2.SLIDES:return"slides";case lQ.t2.ANY:return null;default:(0,x.xb)(e)}},[d,{fetchNextPage:m}]=wZ(o.useMemo(()=>({resourceTypes:["file","file_repo","prototype"],sharedBy:r.filters.sharedBy??"",planId:r.filters.plan?.planId??"",planType:r.filters.plan?.planType??"",fileType:c(r.filters.fileType)??"",sortOrder:r.sort.dir===lQ.ue.ASC?"asc":"desc",sortKey:(0,lQ.De)(r.sort.key)??"shared_at"}),[r.filters.sharedBy,r.filters.plan?.planId,r.filters.plan?.planType,r.filters.fileType,r.sort.dir,r.sort.key])),u=(0,o.useMemo)(()=>d.data??{},[d.data]),_=(0,o.useMemo)(()=>Object.values(u).map(e=>{let t=e.tile;return(t.type===az.nb.FILE||t.type===az.nb.REPO)&&(t.renameCallbacks={onStopRename:e=>{t.type===az.nb.FILE?t.file.name=e??t.file.name:t.type===az.nb.REPO&&(t.repo.name=e??t.repo.name)}}),t}),[u]),{trackPerformanceEvent:p}=(0,wj.S)("swy_files_pagination_performance","livegraph");(0,o.useEffect)(()=>{p("fetch_end")},[p,_.length]),(0,o.useEffect)(()=>{"errors"===d.status&&p("fetch_error",{errors:JSON.stringify(d.errors??{})})},[p,d.status,d.errors]),(0,o.useEffect)(()=>(p("fetch_start"),()=>{p("fetch_cancel")}),[p]);let g=(0,o.useCallback)(()=>{d.isFetchingNextPage||(p("fetch_next"),m())},[d.isFetchingNextPage,m,p]);return o.createElement(tc.A,{loadingElementId:"loading-content-pane",delay:250,loaded:"loaded"===d.status,loadingElementClassName:k.cx.pr32.$,backgroundColor:"default"},o.createElement(hp.B,{onShouldFetchNextPage:g},o.createElement(hq,{tiles:_,tileActions:{showInFolder:!0,open:!0,openNewTab:!0,restoreFromVersion:!0,rename:!0,share:!0,copyLink:!0,duplicate:!0,delete:!0,removeFromRecents:!1,createBranch:!0,publishOrgTemplate:!0,moveFile:!0,pinToWorkspace:!0},chunkSize:_.length,sortFilterOptions:l,newFileTile:!1,emptyStateText:d.isFetchingNextPage?"":(0,A.t)("shared_with_you.no_items"),sharedWithYouFilters:{sharer:n,plan:i,fileType:!0},hideSorter:!0,currentPlanFilter:r.filters.plan,currentSharedByFilter:r.filters.sharedBy,eligibleForLockedStateRedesign:e.eligibleForLockedStateRedesign})))}var w1=a(418993),w2=a(396226),w8=a(300874),w4=a(129531);function w3(e,t,a){return e&&t&&!(0,er.w5)(e)&&"recentsAndSharing"!==a}function w5({canEditTeam:e}){let t=(0,s.wA)(),a=(0,tf.ol)(),r=(0,eI.z3)(),n=(0,h.I7)("exp_fbg_project_limit_upsell"),i=ef.h.useTrackingContext({trigger:eA.b.FOLDER_UPSELL_CARD});if(!w3(a,e,r)||!n.getConfig().getValue("show_upsell",!1))return null;let l=o.createElement(ts.Us,{className:k.cx.noWrap.cursorDefault.$,onClick:e=>{e.stopPropagation(),t((0,ep.to)({type:z.V,data:{upsellSource:eA.b.FOLDER_UPSELL_CARD,teamId:a?.id}}))},trackingProperties:{trackingDescriptor:tZ.c.PROFESSIONAL_PLAN,...i},trusted:!0},(0,A.tx)("team_view.folder_upsell.professional_plan"));return o.createElement(eg.fu,{name:"Folder Upsell Card",properties:i},o.createElement(eg.$z,{className:O()(k.cx.flex.alignLeft.p24.$,"folder_upsell--card--m7-Lh"),onClick:()=>{t((0,ep.to)({type:w4.DV,data:{team:a,resource:w8.vL.FOLDER,action:a0.ZN.CREATE_FOLDER,currentPlan:w2.F.Plan.STARTER,upsellPlan:w2.F.Plan.PRO,editorType:null,upsellSource:eA.b.FOLDER_UPSELL_CARD}}))},trackingProperties:{trackingDescriptor:tZ.c.FOLDER_UPSELL_CARD},dataTestId:"folder_upsell_button"},o.createElement("div",{style:r9.sx.add({paddingBottom:"85%"}).$})," ",o.createElement(n_.Y,{direction:"vertical",spacing:0},o.createElement("div",{className:k.cx.relative.wFull.hFull.$},o.createElement("div",{style:r9.sx.absolute.topHalf.leftHalf.add({transform:"translate(-50%, -50%)"}).$},o.createElement(n_.Y,{cornerRadius:20,backgroundColor:"brand",height:40,width:40},o.createElement(Q.In,{icon:"new-40",fill:"onbrand"}))),o.createElement(n_.Y,{direction:"vertical",spacing:"12px"},o.createElement(n_.Y,{direction:"horizontal",spacing:"12px"},o.createElement(n_.Y,{cornerRadius:8,backgroundColor:"default"}),o.createElement(n_.Y,{cornerRadius:8,backgroundColor:"default"})),o.createElement(n_.Y,{direction:"horizontal",spacing:"12px"},o.createElement(n_.Y,{cornerRadius:8,backgroundColor:"default"}),o.createElement(n_.Y,{cornerRadius:8,backgroundColor:"default"})))),o.createElement(n_.Y,{direction:"vertical",padding:{top:16},spacing:0,height:"hug-contents"},o.createElement(R.E,{fontSize:13,fontWeight:"medium"},(0,A.tx)("team_view.folder_upsell.upgrade_to_create_more_projects")),o.createElement(R.E,{fontSize:11,color:"secondary"},(0,A.tx)("team_view.folder_upsell.get_unlimited_everything",{professionalPlanLink:l}))))))}function w9({canEditTeam:e}){let t=(0,s.wA)(),a=(0,tf.ol)(),r=(0,eI.z3)(),n=ef.h.useTrackingContext({trigger:eA.b.FOLDER_UPSELL_CARD}),i=(0,h.I7)("exp_fbg_project_limit_upsell");if(!w3(a,e,r)||!i.getConfig().getValue("show_upsell",!1))return null;let l=o.createElement(ts.Us,{className:k.cx.noWrap.cursorDefault.$,onClick:e=>{e.stopPropagation(),t((0,ep.to)({type:z.V,data:{upsellSource:eA.b.FOLDER_UPSELL_CARD,teamId:a?.id}}))},trackingProperties:{trackingDescriptor:tZ.c.PROFESSIONAL_PLAN,...n},trusted:!0},(0,A.tx)("team_view.folder_upsell.professional_plan"));return o.createElement(eg.fu,{name:"Folder Upsell List",properties:n},o.createElement("div",{className:k.cx.flex.mt16.bRadius8.b1.colorBorder.$,style:r9.sx.add({borderStyle:"dashed",marginLeft:"-16px"}).$},o.createElement(eg.$z,{className:O()(k.cx.flex.alignLeft.gap12.py24.px16.bRadius8.wFull.$,"folder_upsell--list--2Higk"),onClick:()=>{t((0,ep.to)({type:w4.DV,data:{team:a,resource:w8.vL.FOLDER,action:a0.ZN.CREATE_FOLDER,currentPlan:w2.F.Plan.STARTER,upsellPlan:w2.F.Plan.PRO,editorType:null,upsellSource:eA.b.FOLDER_UPSELL_CARD}}))},trackingProperties:{trackingDescriptor:tZ.c.FOLDER_UPSELL_CARD},dataTestId:"folder_upsell_button"},o.createElement("div",{className:O()(k.cx.relative.flexShrink0.h40.w64.py4.px8.colorBgSecondary.bRadius4.$,"folder_upsell--listCard--qnkxf")},o.createElement("div",{style:r9.sx.absolute.topHalf.leftHalf.add({transform:"translate(-50%, -50%)"}).$},o.createElement(n_.Y,{cornerRadius:12,backgroundColor:"brand",height:24,width:24,horizontalAlignItems:"center",verticalAlignItems:"center"},o.createElement(Q.In,{icon:"plus-32",fill:"onbrand"}))),o.createElement(n_.Y,{direction:"vertical",spacing:4},o.createElement(n_.Y,{direction:"horizontal",spacing:4},o.createElement(n_.Y,{cornerRadius:2,backgroundColor:"default"}),o.createElement(n_.Y,{cornerRadius:2,backgroundColor:"default"})),o.createElement(n_.Y,{direction:"horizontal",spacing:4},o.createElement(n_.Y,{cornerRadius:2,backgroundColor:"default"}),o.createElement(n_.Y,{cornerRadius:2,backgroundColor:"default"})))),o.createElement(n_.Y,{direction:"vertical",spacing:0},o.createElement(R.E,{fontSize:13},(0,A.tx)("team_view.folder_upsell.upgrade_to_create_more_projects")),o.createElement(R.E,{fontSize:11,color:"secondary"},(0,A.tx)("team_view.folder_upsell.get_unlimited_everything",{professionalPlanLink:l}))))))}var w6=a(818466),w7=a(489348),Te=a(167480),Tt=a(750486);let Ta="folder_list_view--emptyState--8vmgw tiles_view--emptyState--jfzsE text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos11--2LvXf text--_fontBase--QdLsd",Tr="project-card";function Tn(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.dropdownShown),r=(0,s.d4)(e=>e.folders),n=(0,s.d4)(e=>e.currentUserOrgId),i=(0,ac.S)(),l=(0,s.d4)(e=>e.user),c=(0,ew.FC)(),d=(0,tr.wA)(c),m=e.folderList.map(e=>({...e,canView:(0,en.canViewFolder_DEPRECATED)(e.id,c),hideSubtitle:!!(d&&!(0,en.canMemberOrg)(d.id,c))})),u=()=>e.viewMode===lQ.XU.LIST,_=!!e.teamId&&!!e.eligibleForLockedStateRedesign,p=e.teamId?{teamId:e.teamId,isLockedTeam:!!e.eligibleForLockedStateRedesign}:void 0,g=i?(0,U.He)(a):void 0,f=(t,a)=>{let{hideSubtitle:r,...n}=t,i=!r&&e.showTeamNameOrAuthor;return o.createElement(w7.Z,{key:t.id,showTeamNameOrAuthor:i,folder:n,dataOnboardingKey:a,isSharerInfoIncluded:e.isSharerInfoIncluded,currentPlanFilter:e.currentPlanFilter,checksForViewOnlyLabels:p})};return 0===m.length?o.createElement(o.Fragment,null,e.onCreateNewFolder&&!(0,eC.R$)(l,n)?o.createElement("div",{className:Ta},e.canEditTeamContents?o.createElement(o.Fragment,null,o.createElement("div",{className:"folder_list_view--emptyTitle--t1u0a tiles_view--emptyTitle--3Vwmu"},(0,A.tx)("team_view.folder_empty_view.no_projects_yet")),(0,A.tx)("team_view.folder_empty_view.projects_help_you_organize"),o.createElement(ts.cw,{className:"folder_list_view--emptyButton--g-yAA tiles_view--emptyButton--oAaGe",onClick:e.onCreateNewFolder},o.createElement(t_.B,{svg:tv.A,className:"folder_list_view--newProjectIcon--O3wnv tiles_view--newFileIcon--LR1sm"}),(0,A.tx)("team_view.folder_empty_view.new_project"))):(0,A.tx)("team_view.folder_empty_view.this_team_does_not_have_any_projects_yet")):null!=e.emptyStateText?o.createElement("div",{className:k.cx.flex.gap32.$},o.createElement("div",{className:Ta},e.emptyStateText),_&&o.createElement(hP.R,{teamId:e.teamId,canEditTeam:!!e.canEditTeamContents})):(0,A.tx)("team_view.folder_empty_view.no_projects")):o.createElement(o.Fragment,null,(()=>{let t=m.length>=2?1:1===m.length?0:void 0,a=u()+m.map(e=>e.id).join(",");return u()?o.createElement("div",{className:k.cx.flex.gap36.$},o.createElement("div",null,o.createElement(w6.u,{folderList:m,onChangeSortOptions:e.onChangeSortOptions,dataOnboardingKey:Tr,dataOnboardingKeyIndex:t,checksForViewOnlyLabels:p}),!_&&o.createElement(w9,{canEditTeam:e.canEditTeamContents})),_&&o.createElement(hP.R,{teamId:e.teamId,canEditTeam:!!e.canEditTeamContents})):o.createElement("div",{className:k.cx.flex.gap36.wFull.$},o.createElement(w1.o,{chunkSize:e.chunkSize??30,className:u()?"folder_list_view--foldersContainerList--JrOTO":"folder_list_view--foldersContainerGrid--TRHq7",listKey:a},o.createElement(iS.X,{containerClassName:"folder_list_view--tileGrid--hEswM",tileSize:iS.o.Medium,emptyView:o.createElement(o.Fragment,null)},m.map((e,a)=>a===t?f(e,Tr):f(e,"")),!_&&o.createElement(w5,{canEditTeam:e.canEditTeamContents}))),_&&o.createElement(hP.R,{teamId:e.teamId,canEditTeam:!!e.canEditTeamContents}))})(),g&&o.createElement(rZ.p,{folder:g,onRenameClick:()=>{if(!g||!g.canEdit)return;let e=r[g?.id];e&&(t((0,e7.WC)()),t((0,ep.to)({type:(0,bg.y)(),data:{folder:e}})))}}))}let Ti=[aZ.Dq.NAME,aZ.Dq.TEAM,aZ.Dq.OWNER,aZ.Dq.LAST_MODIFIED],Tl=[aZ.Dq.SHARED_AT],To=[aZ.Dq.NAME,aZ.Dq.TEAM,aZ.Dq.OWNER,aZ.Dq.LAST_MODIFIED,aZ.Dq.SHARED_AT],Ts=[aZ.Dq.NAME,aZ.Dq.LAST_MODIFIED],Tc={[aZ.Dq.NAME]:lQ.ue.ASC,[aZ.Dq.TEAM]:lQ.ue.ASC,[aZ.Dq.OWNER]:lQ.ue.ASC,[aZ.Dq.LAST_MODIFIED]:lQ.ue.DESC,[aZ.Dq.SHARED_AT]:lQ.ue.DESC},Td={[lQ.XU.GRID]:{[aZ.Dq.NAME]:(0,A.tx)("tile.sort_filter.sort_alphabetical"),[aZ.Dq.TEAM]:(0,A.tx)("tile.sort_filter.owner"),[aZ.Dq.OWNER]:(0,A.tx)("tile.sort_filter.team"),[aZ.Dq.LAST_MODIFIED]:(0,A.tx)("tile.sort_filter.sort_last_modified"),[aZ.Dq.SHARED_AT]:(0,A.tx)("tile.sort_filter.date_shared"),[aZ.Dq.CREATED_AT]:(0,A.tx)("tile.sort_filter.sort_date_created")},[lQ.XU.LIST]:{[aZ.Dq.NAME]:(0,A.tx)("tile.sort_filter.sort_alphabetical"),[aZ.Dq.TEAM]:(0,A.tx)("tile.sort_filter.owner"),[aZ.Dq.OWNER]:(0,A.tx)("tile.sort_filter.team"),[aZ.Dq.LAST_MODIFIED]:(0,A.tx)("tile.sort_filter.sort_last_modified"),[aZ.Dq.SHARED_AT]:(0,A.tx)("tile.sort_filter.date_shared"),[aZ.Dq.CREATED_AT]:(0,A.tx)("tile.sort_filter.sort_date_created")}},Tm={viewMode:lQ.XU.GRID,sortMode:{sortKey:aZ.Dq.LAST_MODIFIED,sortDesc:!0}},Tu={...Tm,sortMode:{sortKey:aZ.Dq.SHARED_AT,sortDesc:!0}},T_={name:g1.f.byProperty("name",g1.f.LEXICOGRAPHICALLY),lastModified:g1.f.byProperty("folderLastUpdated"),team:g1.f.byProperty("folderTeamName",g1.f.LEXICOGRAPHICALLY),owner:g1.f.byProperty("folderOwnerName",g1.f.LEXICOGRAPHICALLY),sharedAt:g1.f.byProperty("folderSharedAt"),createdAt:g1.f.byProperty("created_at")};function Tp(e){let{folderList:t,...a}=e,r=(0,s.d4)(e=>e.teams),n=(0,s.d4)(e=>e.roles),i=(0,s.d4)(e=>e.viewBarViewModeOptionByView),l=(0,s.d4)(e=>e.viewBarSortOptionsByView),c=e.isSharerInfoIncluded?Tl:Ti,d=e.showTeamNameOrAuthor?c:Ts,m=e.isSharerInfoIncluded?Tu:Tm,u=o.useMemo(()=>({viewMode:(0,Tt.y2)(e.viewId,i,m.viewMode),sortMode:(0,Tt.bV)(e.viewId,{viewBarSortOptionsByView:l},d,m.sortMode)}),[m.sortMode,m.viewMode,e.viewId,d,l,i]),_=(0,s.wA)(),p=t=>{_(ea.ZR({viewId:e.viewId,sortMode:{sortKey:t.sortKey,sortDesc:t.sortDesc}}))},g=t=>{_(ea.uV({viewId:e.viewId,viewMode:t}))},f=e.isSharerInfoIncluded?"folder_list_view--sharedWithYouFolderColumnHeader--YBKhp folder_list_view--columns--k84Gi":"folder_list_view--allFolderColumnHeader--MGmSg folder_list_view--columns--k84Gi",E=e.showTeamNameOrAuthor?f:"folder_list_view--basicFolderColumnHeader--dZmjY folder_list_view--columns--k84Gi",h="sharedWithYou"===e.selectedView.view,y="recentsAndSharing"===e.selectedView.view,v=!h&&!y,b=o.useMemo(()=>{if("recentsAndSharing"===e.selectedView.view)return e.folderList;let t=T_[u.sortMode.sortKey];if(!t)return e.folderList;let a=u.sortMode.sortDesc?g1.f.reverse(t):t,i=e.folderList.map(e=>({...e,...(0,Te.Z)({teams:r,roles:n},e)}));return i.sort(a),i},[e.selectedView.view,u.sortMode.sortKey,u.sortMode.sortDesc,e.folderList,r,n]);return o.createElement("div",{className:"folder_list_view--tabContentContainer--lHQoT"},h?o.createElement(Tg,{sortFilterOptions:e.sortFilterOptions,sharedWithYouFilters:e.sharedWithYouFilters,onChangeViewModeOption:g,viewBarOptions:u}):null,v?o.createElement(nM.fB,{sortKeys:d,listSortKeys:d,initialSortOrders:Tc,mobileListSortKeys:d,tabletListSortKeys:d,sortKeyDescriptions:Td,listHeaderClassName:`folder_list_view--listViewHeader--kUvYs text--fontPos13--xW8hS text--_fontBase--QdLsd ${E}`,options:u,onChangeSortOptions:p,onChangeViewModeOption:g,displayColumns:h?To:d,hideViewModeToggle:h||y}):null,o.createElement(Tn,{folderList:b,chunkSize:e.chunkSize,viewMode:u.viewMode,onChangeSortOptions:p,...a}))}function Tg(e){let{sortFilterOptions:t,sharedWithYouFilters:a,onChangeViewModeOption:r,viewBarOptions:n}=e,i=(0,s.wA)(),l=(0,eI._6)();if("sharedWithYou"!==l.view)return null;if(null==t)return(0,x.KF)(!0,`sortFilterOptions prop is ${t}`),null;let c=o.createElement(nM.$f,{options:t,selectedView:l,dispatch:i}),d=o.createElement("div",{className:k.cx.flex.alignCenter.$},o.createElement(nM.$c,{initialViewMode:n.viewMode,onViewModeChange:r})),m=o.createElement("div",{className:k.cx.flex.$},c,d),u=o.createElement(nM.C9,{options:t,selectedView:l,dispatch:i,sharedWithYouFilters:a});return o.createElement(nM.lU,{leftSide:u,rightSide:m})}function Tf(){return{[lQ.cT.ALL]:(0,A.t)("shared_with_you.filters.org_deleted_drafts.all"),[lQ.cT.SHARED]:(0,A.t)("shared_with_you.filters.org_deleted_drafts.shared"),[lQ.cT.ORG_DELETED_DRAFTS]:(0,A.t)("shared_with_you.filters.org_deleted_drafts.deleted_user_drafts")}}function TE(e){let t=(0,eI._6)(),a=(0,tf.ol)(),r=(0,J.Rs)(ee.kQI,{id:a?.id||""},{enabled:!!a}),n=(0,s.d4)(e=>e.tileSortFilterStateByView),i="recentsAndSharing"===t.view?n.recentsAndSharing.sharedProjects:n.sharedWithYou,l=wQ(["folder"]),c=wY(["folder"]),d=Tf(),m={tileSortFilterConfig:i,sortKeys:[lQ.C0.SHARED_AT]},[u,{fetchNextPage:_}]=wZ((0,o.useMemo)(()=>({resourceTypes:["folder"],sharedBy:i.filters.sharedBy??"",planId:i.filters.plan?.planId??"",planType:i.filters.plan?.planType??"",orgDeletedDrafts:(0,p.kc)().org_admin_settings_abandoned_drafts?"":i.filters.orgDeletedDrafts??"",sortOrder:i.sort.dir===lQ.ue.ASC?"asc":"desc",sortKey:(0,lQ.De)(i.sort.key)??"shared_at"}),[i.filters.sharedBy,i.filters.plan?.planId,i.filters.plan?.planType,i.filters.orgDeletedDrafts,i.sort.dir,i.sort.key])),g=(0,o.useMemo)(()=>u.data??{},[u.data]),f=(0,o.useMemo)(()=>Object.values(g).map(e=>e.tile).filter(e=>e.type===az.nb.PROJECT).map(e=>({...e.folder,touched_at:e.folder.updated_at})),[g]),E=(0,o.useMemo)(()=>f.map(e=>e.id),[f]),{trackPerformanceEvent:h}=(0,wj.S)("swy_projects_pagination_performance","livegraph");(0,o.useEffect)(()=>{h("fetch_end")},[h,E.length]),(0,o.useEffect)(()=>{"errors"===u.status&&h("fetch_error",{errors:JSON.stringify(u.errors??{})})},[h,u.status,u.errors]),(0,o.useEffect)(()=>(h("fetch_start"),()=>{h("fetch_cancel")}),[h]);let y=(0,o.useCallback)(()=>{u.isFetchingNextPage||(h("fetch_next"),_())},[u.isFetchingNextPage,_,h]),v="loaded"===r.status&&!!r.data.team&&r.data.team.hasPermission;return o.createElement(tc.A,{loadingElementId:"loading-content-pane",delay:250,loaded:"loaded"===u.status,loadingElementClassName:k.cx.pr32.$,backgroundColor:"default"},o.createElement(hp.B,{onShouldFetchNextPage:y},o.createElement(Tp,{viewId:"shared-with-you-projects",teamId:a?a.id:void 0,canEditTeamContents:v,folderList:f,chunkSize:f.length,showTeamNameOrAuthor:!1,isSharerInfoIncluded:!0,sharedWithYouFilters:{sharer:l,plan:c,orgDeletedDrafts:d},sortFilterOptions:m,selectedView:t,emptyStateText:u.isFetchingNextPage?"":(0,A.t)("shared_with_you.no_items"),useLGPerms:!0,currentPlanFilter:i.filters.plan,eligibleForLockedStateRedesign:!!a&&e.eligibleForLockedStateRedesign})))}function Th(){let e=(0,s.wA)(),t=(0,ti.vt)(),a=(0,te.Yz)(),r=(0,s.d4)(({orgById:e})=>e),n=(0,s.d4)(({currentUserOrgId:e})=>e),i=(0,tr.yK)({orgById:r,currentUserOrgId:n}),l=!!(0,s.d4)(e=>e.userFlags).hide_recommended_templates_in_recents,c=(0,s.d4)(e=>e.user?.drafts_folder_id);if(!c)return null;let d=a(t);return o.createElement(vq,{folderId:c,newFileFrom:Eg.f6.FILE_BROWSER_TOPBAR_RECENTS,disableRecommendedTemplates:i||d,recommendedTemplatesIsOpen:!l,toggleRecommendedTemplates:()=>e(tS.b({hide_recommended_templates_in_recents:!l})),showFileCreationShelf:(0,p.kc)().omnicreate_button&&!d})}var Ty=a(552963),Tv=a(135720),Tb=a(322611),Tw=a(435095);let TT=e=>o.createElement("span",{className:"unsubscribe_confirmation_modal--boldText--dNK-D"},e),TI=(0,ad.Ju)(function(e){let t=(0,s.wA)(),a=(0,eN.iZ)();return a?o.createElement(Tb.u,{tintedModalBackground:!0,headerText:(0,A.t)("interstitial.unsubscribe_success_header")},o.createElement("div",{className:Tw.Yg},(0,A.tx)("interstitial.unsubscribe_success_subheader_with_address",{emailName:TT((()=>{switch(e.policyType){case"FileCommentActivity":return(0,A.t)("interstitial.comment_activity_digest");case"TeamCommentActivity":return(0,A.t)("interstitial.team_comment_digest");case"FeedWeeklyDigest":return(0,A.t)("interstitial.feed_weekly_digest");case"WorkspaceActivity":return(0,A.t)("interstitial.workspace_activity");default:(0,x.xb)(e.policyType)}})()),emailAddress:TT(a.email)})),o.createElement(ts.nD,{onClick:()=>{t(ep.Lo())},className:"unsubscribe_confirmation_modal--button--j6qqT"},(0,A.tx)("interstitial.done")),o.createElement("button",{className:"unsubscribe_confirmation_modal--notificationSettingsButton--vmHlZ interstitial_modal--secondaryText--IC9Gu",onClick:()=>{t((0,ep.to)({type:Tv.s,data:{tab:Tv.c.NOTIFICATIONS}})),t(ep.aZ())}},(0,A.tx)("interstitial.open_notifications_settings"))):null},"UNSUBSCRIBE_CONFIRMATION_INTERSTITIAL_MODAL");var TN=a(540193),Tx=a(824780);function TC(){let e=(0,s.wA)(),t=(0,tk.a9)();(0,u.h)(()=>{let a=(0,bt.QL)("one_click_upgrade_request_type");(0,bt.EM)("one_click_upgrade_request_type");let r=(0,bt.QL)("upgrade_modal_type")||"";(0,bt.EM)("upgrade_modal_type");let n=(0,bt.QL)("entry_point")||"";(0,bt.EM)("entry_point");let i=(0,bU.px)(a??r);i&&t&&(0,h4.oE)(t,i)&&e((0,ep.to)({type:bj.Y,data:{orgId:t.org_id,orgUser:t,licenseType:i,entryPoint:(0,Tx.K)(bB.PE,n)??(0,Tx.K)(bB.tc,n)??(0,Tx.K)(bB.i$,n)??i===bU.Te.DEV_MODE?bB.i$.DowngradeEmail:bB.PE.DEPRECATED_Recents,isOneClickUpgradeRequest:!!a,trackForDowngradeNotificationExperiment:!0}}))})}function TS(){let e=(0,s.wA)(),t=(0,tk.a9)(),a=(0,bt.QL)("one_click_upgrade_request_type"),r=(0,bt.QL)("upgrade_modal_type")||"",n=(0,bt.QL)("entry_point")||"",i=(0,bU.px)(a??r),l=(0,J.Rs)(ee.LmV,{orgId:t?.org_id??""},{enabled:!!t?.org_id&&!!i});(0,o.useEffect)(()=>{("disabled"===l.status||"loaded"===l.status)&&((0,bt.EM)("one_click_upgrade_request_type"),(0,bt.EM)("upgrade_modal_type"),(0,bt.EM)("entry_point")),"loaded"===l.status&&i&&t&&(0,bU.qX)(i,l.data.currentUser.baseOrgUser)&&e((0,ep.to)({type:bj.Y,data:{orgId:t.org_id,orgUser:t,licenseType:i,entryPoint:(0,Tx.K)(bB.PE,n)??(0,Tx.K)(bB.tc,n)??(0,Tx.K)(bB.i$,n)??i===bU.Te.DEV_MODE?bB.i$.DowngradeEmail:bB.PE.DEPRECATED_Recents,isOneClickUpgradeRequest:!!a,trackForDowngradeNotificationExperiment:!0}}))},[e,i,a,t,n,l])}function Tk({eligibleForLockedStateRedesign:e}){let t=(0,s.d4)(e=>e.currentUserOrgId),a=(0,TN.ql)(t||null),r=(0,TN.O8)(t||null),n=(0,hZ.Rp)(),i=o.useMemo(()=>a.transform(e=>e.map(az.fA)),[a]),l=o.useMemo(()=>r.transform(e=>e.map(az.Nu)),[r]),c=(0,s.d4)(e=>e.recentRepos),d=(0,s.d4)(e=>e.selectedBranchKeyByRepoId),m=o.useMemo(()=>c.map(e=>(0,az.uy)(e,d)),[c,d]),u=o.useMemo(()=>Object.values(n).map(az.gB),[n]),_=o.useMemo(()=>aO.Qw.merge([i,l],m,u),[u,i,l,m]),g=(0,s.d4)(e=>e.tileSortFilterStateByView),f=o.useMemo(()=>({tileSortFilterConfig:g.recentsAndSharing.recents,sortKeys:[lQ.C0.NAME,lQ.C0.CREATED_AT,lQ.C0.ACCESSED_AT]}),[g]);!function(){let[e]=(0,o.useState)(()=>(0,p.kc)().redep_uurmopl?TS:TC);e()}();let h=o.useMemo(()=>({showInFolder:!0,open:!0,openNewTab:!0,restoreFromVersion:!0,rename:!0,share:!0,copyLink:!0,duplicate:!0,delete:!0,removeFromRecents:!0,createBranch:!0,publishOrgTemplate:!0,moveFile:!0,pinToWorkspace:!0}),[]),y=E.Ay.mobile||E.Ay.tablet?(0,A.t)("file_browser.tool_bar.recently_viewed_empty_state"):"",v="loaded"===_.status;return o.createElement(tc.A,{loadingElementId:"loading-content-pane",loaded:v,loadingElementClassName:k.cx.pr32.$,backgroundColor:"default"},o.createElement(hq,{tiles:_.data,tileActions:h,sortFilterOptions:f,newFileTile:!0,emptyStateText:y,hideSorter:!0,eligibleForLockedStateRedesign:e}),o.createElement(E3.cx,null))}var TA=a(601538);let TR="seen_shared_files_onboarding",TL=(0,t2.r1)("seen_account_profile_switcher_onboarding"),TD=(0,t2.r1)(TR);function TP(){let e=(0,C.md)(TL),t=(0,C.md)(TD),a=(0,t0.e)({overlay:t5.fz8,priority:t8.N.SECONDARY_MODAL},[t,e]);return(0,u.h)(()=>{a.show({canShow:(e,t)=>t&&!e})}),o.createElement(t4.rq,{targetKey:TA.Bh,isShowing:a.isShowing,title:(0,A.tx)("rcs.shared_with_you.shared_files_title"),description:(0,A.tx)("rcs.shared_with_you.shared_files_description",{recents:o.createElement("span",{className:k.cx.fontBold.$},(0,A.tx)("rcs.shared_with_you.recents"))}),primaryCta:{type:"button",label:(0,A.tx)("rcs.got_it"),onClick:a.complete,ctaTrackingDescriptor:tZ.c.DONE},width:350,onClose:a.complete,trackingContextName:"File Browser Shared Files in Recents Overlay",userFlagOnShow:TR})}let TF=e=>{switch(e){case tN.G.RECENTLY_VIEWED:return(0,A.t)("file_browser.recents_and_sharing_view.recent_files_tab_name");case tN.G.SHARED_PROJECTS:return(0,A.t)("file_browser.recents_and_sharing_view.shared_projects_tab_name");case tN.G.SHARED_FILES:return(0,A.t)("file_browser.recents_and_sharing_view.shared_files_tab_name");default:(0,x.xb)(e)}};function TO(e){let t=(0,eN.TA)(),a=(0,s.d4)(e=>e.orgUsersByOrgId),r=o.useMemo(()=>null!==t&&Object.values(a).some(e=>e[t]?.permission===ex._D.ADMIN),[t,a])&&!(0,p.kc)().org_admin_settings_abandoned_drafts,n=e.options.tileSortFilterConfig.filters.sharedBy,i=e.options.tileSortFilterConfig.filters.plan;return o.createElement("div",{className:"recents_and_sharing_viewbar--dropdownCollectionContainer--XE-iM"},o.createElement(o.Fragment,null,e.filters?.sharer&&Object.keys(e.filters?.sharer).length>1&&o.createElement(o.Fragment,null,n&&o.createElement(nM.qD,{userId:n}),o.createElement(nM.lI,{config:e.options.tileSortFilterConfig,filterOptions:e.filters.sharer,tab:e.tab})),e.filters?.plan&&Object.keys(e.filters?.plan).length>1&&o.createElement(o.Fragment,null,i?.planId&&o.createElement(nM.lV,{planOption:e.filters.plan[i.planId]}),o.createElement(nM.FU,{config:e.options.tileSortFilterConfig,filterOptions:e.filters.plan,tab:e.tab})),e.filters?.fileType&&o.createElement(o.Fragment,null,o.createElement(nM.ye,{config:e.options.tileSortFilterConfig,tab:e.tab})),e.filters?.orgDeletedDrafts&&r&&o.createElement(o.Fragment,null,o.createElement(nM.T3,{config:e.options.tileSortFilterConfig,filterOptions:e.filters.orgDeletedDrafts,tab:e.tab}))))}function TM(e){let t=e.selectedTab,a=(0,s.wA)(),r=(0,eI._6)(),n=(0,s.d4)(e=>e.tileSortFilterStateByView),i=t===tN.G.SHARED_PROJECTS?["folder"]:["file","file_repo","prototype"],l=wQ(i),c=function(){let e=(0,eN.TA)(),t=(0,s.d4)(e=>e.authedUsers);return((e?t.byId[e]?.plans:[])??[]).map(e=>({label:e.name,plan_id:e.plan_id,plan_type:e.is_org?"org":"team"})).reduce((e,t)=>({...e,[`${t.plan_id}`]:t}),{...w$()})}(),d=wY(i),m=Tf(),u={sharer:t!==tN.G.RECENTLY_VIEWED?l:void 0,plan:t===tN.G.RECENTLY_VIEWED?c:d,fileType:t!==tN.G.SHARED_PROJECTS,orgDeletedDrafts:t===tN.G.SHARED_PROJECTS?m:void 0},_=o.useMemo(()=>{let e;switch(t){case tN.G.RECENTLY_VIEWED:e=n.recentsAndSharing.recents;break;case tN.G.SHARED_FILES:e=n.recentsAndSharing.sharedFiles;break;case tN.G.SHARED_PROJECTS:e=n.recentsAndSharing.sharedProjects;break;default:(0,x.xb)(t)}return{tileSortFilterConfig:e,sortKeys:tN.o[t]}},[t,n]),p=e=>{e===tN.G.SHARED_FILES?(0,V.sx)("file_browser_shared_files"):e===tN.G.SHARED_PROJECTS&&(0,V.sx)("file_browser_shared_projects"),a(ea.$T({view:"recentsAndSharing",tab:e}))},g=e=>{(0,V.sx)("file view toggle",{viewType:e===lQ.XU.GRID?"grid":"list"}),Object.keys(tN.G).map(t=>{a(ea.JF({selectedView:r,config:{..._.tileSortFilterConfig,viewMode:e},tab:tN.G[t]}))},a(ea.uV({viewId:"shared-with-you-projects",viewMode:e})))},f=o.createElement("div",{className:k.cx.flex.alignCenter.$},o.createElement(nM.$c,{initialViewMode:_.tileSortFilterConfig.viewMode,onViewModeChange:g})),E=o.createElement(nM.mc,{options:_,selectedView:r,dispatch:a,tab:t}),h=o.createElement("div",{className:k.cx.flex.$,key:"sortWithViewOptions"},E,f),y=o.createElement(TO,{options:_,filters:u,tab:t,key:"recentsAndSharingTileFilters"}),v=o.createElement(nM.IB,{dropdownKey:"recents-and-sharing-sort-filter-mobile-dropdown",sortFilterOptions:_,filters:u,onViewModeChange:g,tab:t}),b=Object.keys(tN.G).map(t=>{let a="SHARED_FILES"===t?TA.Bh:"";return o.createElement(yL.r,{tab:tN.G[t],onClick:p,isSelected:e.selectedTab===tN.G[t],tabName:TF(tN.G[t]),key:t,dataOnboardingKey:a})});return o.createElement(o.Fragment,null,o.createElement(pB.p,null,o.createElement(TP,null)),o.createElement(nM.g2,{leftSide:o.createElement(yL.f,{tabs:b}),rightSide:[y,h],rightSideMobile:v}))}function TB(e){switch(e){case n0.bb.ACCOUNT:return Tv.c.ACCOUNT;case n0.bb.COMMUNITY:return Tv.c.COMMUNITY;case n0.bb.NOTIFICATIONS:return Tv.c.NOTIFICATIONS}}function TU(e){let t=(0,s.wA)(),a=(0,te.Yz)(),r=(0,ti.vt)(),n=yT({checks:{isEligibleForLockedRedesign:a}}),{selectedTab:i,accountModalTab:l,emailPolicyToUnsubscribeFrom:c}=e,d=o.createElement(TM,{selectedTab:i}),m=(0,_.ZC)(l),u=(0,_.ZC)(c);return(0,o.useEffect)(()=>{l&&l!==m?(t((0,ep.to)({type:Tv.s,data:{tab:TB(l)}})),t(ea.$T({view:"recentsAndSharing",tab:tN.G.RECENTLY_VIEWED}))):c&&c!==u&&(Ty.z.updateUserCommunicationPreference({channelType:"email",policyType:c,policySetting:"none"}).then(()=>{t((0,ep.to)({type:TI,data:{policyType:c}}))}).catch(e=>{t((0,ep.to)({type:Tv.s,data:{tab:TB(n0.bb.NOTIFICATIONS)}})),t(aD.F.dequeue({}))}),t(ea.$T({view:"recentsAndSharing",tab:tN.G.RECENTLY_VIEWED})))},[l,m,c,u,t]),o.createElement(i$.r,{banner:n?o.createElement(yk,{folderId:null}):o.createElement(wW,null),viewbar:d,viewBarSticky:!0,toolbar:o.createElement(Th,null),content:function(e,t){switch(e){case tN.G.SHARED_FILES:return o.createElement(w0,{eligibleForLockedStateRedesign:t?.eligibleForLockedStateRedesign});case tN.G.SHARED_PROJECTS:return o.createElement(TE,{eligibleForLockedStateRedesign:t?.eligibleForLockedStateRedesign});case tN.G.RECENTLY_VIEWED:return o.createElement(Tk,{eligibleForLockedStateRedesign:t?.eligibleForLockedStateRedesign})}}(i,{eligibleForLockedStateRedesign:a(r)})})}var TV=a(24171),TH=a(996773);let TW=(0,lg.rw)();function Tj(e){let t=(0,s.wA)(),a=[o.createElement(TW,{tab:TV.G.FILES,key:"files",selectedTab:e.selectedTab,onClick:()=>{t(ea.$T({view:"sharedWithYou",tab:TV.G.FILES}))},mobileNavTabTitle:(0,A.t)("shared_with_you.toolbar.files")},(0,A.tx)("shared_with_you.toolbar.files")),o.createElement(TW,{tab:TV.G.PROJECTS,key:"projects",selectedTab:e.selectedTab,onClick:()=>{t(ea.$T({view:"sharedWithYou",tab:TV.G.PROJECTS}))},mobileNavTabTitle:(0,A.t)("shared_with_you.toolbar.projects")},(0,A.tx)("shared_with_you.toolbar.projects"))];return o.createElement(TH.W,{resetTileSelectionOnMouseDown:!0,tabs:a})}function TG(e){return o.createElement(i$.r,{toolbar:o.createElement(Tj,{selectedTab:e.tab}),content:function(e){switch(e){case"files":return o.createElement(w0,null);case"projects":return o.createElement(TE,null)}}(e.tab)})}var T$=a(412721),Tz=a(834571),TY=a(402838),TK=a(501217);function TQ(){return o.createElement("div",{className:k.cx.flex.p12.colorBgSelected.bRadius6.$},o.createElement("div",{className:k.cx.mr12.colorIcon.itemSelfCenter.$},o.createElement(t_.B,{svg:dN.A})),(0,A.tx)("sidebar.meta.this_team_is_for_education_users_only"),o.createElement(ts.Us,{target:"_blank",trusted:!0,href:"/education/"},(0,A.tx)("org_home_view_meta.learn_more")))}function TX({team:e}){let t=(0,s.wA)(),a=(0,J.Rs)(ee.kQI,{id:e.id}),r=!!a.data?.team?.hasPermission,[{data:n}]=(0,g.IT)((0,eK.Xg)({teamId:e.id})),i=(n||[]).filter(e=>""!==e.name).length,l=(0,h.I7)("exp_fbg_project_limit_upsell");if(!(!e.subscription&&!e.org_id&&r&&i>=er.Wf)||l.getConfig().getValue("show_upsell",!1))return null;let c=o.createElement(ts.Us,{onClick:()=>{t((0,ep.to)({type:z.V,data:{teamId:e.id,upsellSource:eA.b.STARTER_TEAM_FOOTER}}))},trusted:!0,trackingProperties:{trackingDescriptor:tZ.c.UPGRADE_TO_A_PAID_PLAN},"data-testid":"starterTeamUpsellFooterUpgradeLink"},(0,A.tx)("file_browser.starter_team.upgrade_link"));return o.createElement(eg.fu,{name:"Starter Team Upsell Footer"},o.createElement("div",{className:O()(k.cx.flex.p32.mt16.bRadius6.justifyCenter.colorBorder.$,"starter_team_upsell_footer--borderStyle--pM4nA"),"data-testid":"starterTeamUpsellFooter"},o.createElement("div",{className:O()(k.cx.flex.flexColumn.itemsCenter.lh24.$,"starter_team_upsell_footer--contentWrapper--H-soB")},o.createElement("strong",null,i===er.Wf?(0,A.tx)("file_browser.starter_team.project_limit_warning",{maxProjects:er.Wf}):(0,A.tx)("file_browser.starter_team.project_limit_warning_over_max_projects")),o.createElement("p",{className:k.cx.alignCenter.$},(0,A.tx)("file_browser.starter_team.project_limit_info",{upgradeLink:c})))))}var Tq=a(874109);let TJ="professional_badge_onboarding_key",TZ="seen_professional_badge_overlay";function T0({teamId:e}){let t=(0,s.d4)(e=>e.userTeamFlags),a=t[e]?.[TZ],r=t[e]?.[bi.UA],n=(0,te.kO)(),i=(0,t0.e)({overlay:t5.zMZ,priority:t8.N.DEFAULT_MODAL,experiment:{check:n,predicate:e=>e,postCheck:()=>!0}}),l=(0,s.wA)();return((0,o.useEffect)(()=>{r&&!a&&i.show()},[i,r,a]),i.isShowing)?o.createElement(t4.rq,{isShowing:i.isShowing,title:(0,A.tx)("pro_onboarding.see_whats_included"),description:(0,A.tx)("pro_onboarding.review_your_teams_plan_and_all_its_features_by_clicking_on_your_professional_badge"),targetKey:TJ,onClose:()=>{l(h8.bE({all_team_flags:[{team_id:e,flags:{[TZ]:!0}}]})),i.complete()},trackingContextName:eD.e0.PROFESSIONAL_BADGE_TOOLTIP,trackingProperties:br.S.getTrackingProperties(e),emphasized:!0,shouldCenterArrow:pV.EL.FALLBACK,clickOutsideToHide:!0}):null}let T1="seen_pro_onboarding_unlimited_projects_overlay",T2=(0,t2.r1)(T1);function T8({teamId:e}){let t=(0,C.md)(T2),a=(0,C.md)(ba.e),r=(0,s.d4)(e=>e.userTeamFlags),n=r[e]?.[bi.UA],i=r[e]?.[TZ],l=(0,te.kO)(),{show:c,isShowing:d,complete:m}=(0,t0.e)({overlay:t5._9u,priority:t8.N.DEFAULT_MODAL,experiment:{check:l,predicate:e=>e,postCheck:e=>!e}},[t,a]);return((0,u.h)(()=>{n&&i&&c({canShow:(t,a)=>a.some(t=>t.id===e)})}),d)?o.createElement(pU.M,{isShowing:d,userFlagOnShow:T1},o.createElement(eg.fu,{name:br.S.getTooltipTrackingContext("Unlimited Projects"),properties:br.S.getTrackingProperties(e)},o.createElement(bn.jA,{dismissModal:m}))):null}function T4(e){let t=(0,s.wA)(),a=o.useRef(null),r=(0,s.d4)(({dropdownShown:e})=>e),n=e.team.org_id??null,i=(0,tn.Q)({currentOrgId:n,currentTeamId:null}),l=(0,s.d4)(e=>e.favorites.collapsedCustomSections),c=(0,ac.S)(),d=o.useMemo(()=>{if("loaded"===i.status)return(0,eh.T0)(i.data,e.team.id)},[i,e.team.id]),m=void 0!==d;if("loaded"!==i.status)return o.createElement("div",{className:k.cx.flex.itemsCenter.colorIcon.$},o.createElement(t_.B,{svg:gZ.A}));let u=(0,eh.gV)(i.data,n),_=e.dropdownKey&&r&&r.type===e.dropdownKey&&r.data&&r.data.targetRect,p=a.current&&r?.data?.targetRef===a.current&&r?.type===Y.jU,g=a.current,f=[];return e.showInvite&&f.push(o.createElement(i7.c$,{key:"import",children:(0,A.tx)("file_browser.team.invite"),onClick:e.onInviteClick})),f.push(o.createElement(i7.c$,{key:"share",children:(0,A.tx)("file_browser.team.view_members"),onClick:t=>e.onMembersClick(t)})),c&&f.push(o.createElement(i7.c$,{key:"add-to-favorites-section",children:o.createElement("div",{className:k.cx.flex.justifyBetween.itemsCenter.w150.$},(0,A.tx)("favorited_resources.add_to_sidebar"),o.createElement(t_.B,{svg:bP.A})),onClick:r=>{r.stopPropagation(),a.current&&t(ea.j7({type:Y.jU,data:{targetRect:g.getBoundingClientRect(),targetRef:g,resourceId:e.team.id}}))}})),o.createElement("button",{className:k.cx.flex.itemsCenter.colorIcon.$,ref:a,onClick:a=>{e.dropdownKey&&g&&t(ea.j7({type:e.dropdownKey,data:{targetRect:g?.getBoundingClientRect()}}))}},o.createElement(t_.B,{svg:gZ.A}),_&&o.createElement(bf.Cf,{targetRect:r.data.targetRect,minWidth:172,maxWidth:172,propagateCloseClick:!0},f),p&&o.createElement(ri.t,{updateFavorite:(a,r)=>{(!u||a)&&(e.setFavorite(a,d?.resource.id,r),a&&r&&(l.delete(r),t(tC.U6({collapsedCustomSections:l})),rR.Fp({type:"topLevel",id:"custom",orgId:n,sectionId:r},!0)))},resourceId:e.team.id,resourceType:ex.bk.TEAM,isFavorited:m,currentSectionId:d?.resource.sidebarSectionId??void 0,sections:(i.data?.currentUser?.userSidebarSections?(0,to.oA)(i.data.currentUser.userSidebarSections):null)??[],customSectionOrdering:i.data.currentUser?.baseOrgUser?.fileBrowserPreferences?.orderedSidebarSections??[],showPoint:!0}))}var T3=a(405491),T5=a(761273),T9=a(297536),T6=a(937890),T7=a(5313),Ie=a(50292);function It(e){let{team:t,orgTeamActionType:a}=e;switch(a){case iB.gO.CLICK_JOIN:case iB.gO.BYPASS_REQUEST:return o.createElement(o.Fragment,null,(0,A.tx)("file_browser.team.no_permissions_message",{teamName:t.name}),o.createElement("br",null),(0,A.tx)("file_browser.team.please_join_team"));case iB.gO.CLICK_REQUEST:return o.createElement(o.Fragment,null,(0,A.tx)("file_browser.team.no_permissions_message",{teamName:t.name}),o.createElement("br",null),(0,A.tx)("file_browser.team.please_request_to_join_team"));case iB.gO.CLICK_WITHDRAW:return(0,A.tx)("file_browser.team.request_to_join_team_is_pending",{teamName:t.name});default:return(0,A.tx)("file_browser.team.no_permissions_message",{teamName:t.name})}}function Ia({team:e}){let t=(0,s.d4)(t=>(0,iB.YP)(e,t.teamRoleRequests[e.id],(0,en.getPermissionsState)(t),t.currentUserOrgId)),a=(0,s.d4)(t=>t.teamRoleRequests[e.id]),r=(0,s.wA)(),n=o.createElement("div",{className:"team_page_view--nonMemberViewContainer--uleTt"},o.createElement("div",{className:"team_page_view--header--sTxh6"},o.createElement(G.nl,{team:e,size:G.Pf.LARGE}),o.createElement("span",{className:"team_page_view--teamName--9MXYi text--fontPos18--rYXJb text--_fontBase--QdLsd"},e.name)),o.createElement("div",{className:"team_page_view--joinOptionText--McFNQ text--fontPos14--OL9Hp text--_fontBase--QdLsd"},o.createElement(It,{team:e,orgTeamActionType:t})),o.createElement("div",{className:"team_page_view--joinButton--waTM-"},o.createElement(iP.m,{team:e,onJoin:(0,iM.GR)(r,e.id),onLeave:()=>{r(ep.to({type:iV.p,data:{teamId:e.id}}))},onJoinRequestOverride:()=>{r(ep.to({type:bW.$,data:{team:e}}))},onBypassRequestOverride:(0,iM.GR)(r,e.id,eL.e6.OWNER),onWithdrawRequestForTeamOverride:()=>{let e=a?.id;e&&r(bM.lT({requestId:e}))},isCardActive:!1})));return o.createElement(i$.r,{content:n})}function Ir({teamId:e,selectedTab:t,upgradeModalType:a,showProOnboardingModal:r}){let n;let i=(0,nI.R)(t=>{let a=t.teams[e];return a&&{...a,canAdmin:(0,en.canAdminTeam)(e,t),canEdit:(0,en.canEditTeam)(e,t),canRead:(0,en.canViewTeam)(e,t),isCurrentUserInTeam:(0,en.hasViewerRoleAccessOnTeam)(e,t),canEditTeamContents:(0,en.hasEditorRoleAccessOnTeam)(e,t)}}),l=(0,s.d4)(e=>e.currentUserOrgId),c=(0,s.d4)(e=>i&&i.org_id&&e.orgById[i.org_id]||null),d=(0,s.d4)(e=>e.avatarEditorState),m=(0,s.d4)(e=>e.loadingState),_=(0,s.d4)(e=>e.teamBilling),E=(0,s.wA)(),h=(0,eI._6)(),[y,v]=o.useState(!1),[{status:b,data:w}]=(0,g.IT)((0,eK.Xg)({teamId:i?.id}),{revalidateOnMount:!0});(0,T$.w)(e);let T=(0,s.d4)(e=>e.teamRoleRequests),I=!!(0,s.d4)(e=>i&&(0,en.canManageOrgTeam)(i.id,e,e.user?.id)),[N,x]=o.useState(),C=(0,er.w5)(i)&&!i?.org_id,S=(0,J.Rs)(ee.GyZ,{teamId:e}),R="loaded"===S.status,L=o.useMemo(()=>(0,T9.X)(S),[S]),D=!!(L&&L.canAdmin),P=!!(L&&L.canEdit),F=!!(L&&L.canRead),O=(0,te.Yz)(),M=(0,ti.vt)(e),B=o.useCallback(()=>{bH.S.getTeamTransfer({teamId:e}).then(({data:e})=>{x(e.meta)},()=>{x(void 0)})},[e]);(0,u.h)(()=>{let e=(0,bt.QL)("team_role_redemption");if(e&&parseInt(e) in eL.e6){let e=(0,T6.VE)();e&&E(aD.F.enqueue({message:e})),(0,bt.EM)("team_role_redemption")}}),(0,u.h)(()=>{if(!(0,p.kc)().auto_accept_team_invites)return;let e={999:"owner",900:"admin",300:"edit",100:"view"},t=(0,bt.QL)("auto_role");t&&null!==i&&t in e&&((i?.canRead||"100"!==t)&&(i?.canEdit||"300"!==t)&&(i?.canAdmin||"900"!==t&&"999"!==t)&&E(aD.F.enqueue({message:(0,A.t)("join_team_flash.auto_accept_team_invite_modal",{teamName:i?.name||"",inviteType:e[t]})})),(0,bt.EM)("auto_role"))}),o.useEffect(()=>{B()},[N?.id,B]),o.useEffect(()=>{let e=T5.um.loadingKeyForPayload();(0,pc.VP)(m,e)||(0,pc.D2)(m,e)||E(T5.um())},[E,m]),o.useEffect(()=>{l&&E((0,ey.Rw)())},[E,l]),o.useEffect(()=>{if(i)v(!1);else{let t=iM.HD.loadingKeyForPayload({teamId:e}),a=`TEAM_GET_ACTION_${e}`;l&&!m[t]?E(iM.HD({teamId:e,disableFlashError:!0})):(0,pc.VP)(m,t)||(0,pc.VP)(m,a)||v(!0)}},[E,m,i,e,l]),o.useEffect(()=>{if(i&&!i.org_id){if(t===Ef.A.BILLING){let e=yN.Be.loadingKeyForPayload({teamId:i.id}),t=yN.NP.loadingKeyForPayload({teamId:i.id}),a=!(0,pc.D2)(m,e)&&!(0,pc.VP)(m,e),r=!(0,pc.D2)(m,t)&&!(0,pc.VP)(m,t);(a||r)&&E(yN.Q({teamId:i.id}))}else if(t===Ef.A.MEMBERS){let e=be.m$.loadingKeyForPayload({teamId:i.id});(0,pc.VP)(m,e)||(0,pc.D2)(m,e)||E(be.m$({teamId:i.id}))}else if(t===Ef.A.SETTINGS){let e=yN.Be.loadingKeyForPayload({teamId:i.id});D&&C&&!(0,pc.VP)(m,e)&&!(0,pc.D2)(m,e)&&E(yN.Q({teamId:i.id}))}}},[E,t,m,i,c,C,D]);let U=(0,eN.Pc)(),H=(0,J.Rs)(ee.Cit,{teamId:e}),j=H.data?.team?.currentTeamUser;o.useEffect(()=>{let e;if(!(i&&U&&j&&a)||!C)return;let r=a===ex.G_.DEV_MODE,n=a===ex.G_.WHITEBOARD?ex._Y.WHITEBOARD:ex._Y.DESIGN;if(n===ex._Y.DESIGN?e=j.designAccountTypeRequest?.status==="pending":n===ex._Y.WHITEBOARD&&(e=j.whiteboardAccountTypeRequest?.status==="pending"),!0===e&&E(e$.s.flash((0,A.t)("team_view.request_upgrade.request_already_sent"))),!1===e&&(0,tr.dk)(!!(0,eC.XG)(j,n)||r&&!(0,eC.HA)(j,n),e,i,U)){let e=(0,bt.QL)("entry_point")||(r?bB.i$.DowngradeEmail:bB.tc.DOWNGRADE_EMAIL);E(ep.to({type:bG.PK,data:{editorType:n,team:i,entryPoint:e}}))}E(ea.$T({view:"team",teamId:i.id,teamViewTab:t}))},[E,i,U,j,a,C,t]),(0,u.h)(()=>{r&&E(ep.to({type:Ie.C,data:{teamId:e}}))});let $=o.useCallback((e,t,a)=>{if(i){let r={team:i,entrypoint:"team_page_view",sectionId:a,favoriteId:t};e?E(tC.DN(r)):E(tC.ox(r))}},[E,i]),z=o.useCallback(()=>{eG.Ay.del(`/api/asset_transfer/${N?.id}`).then(()=>{x(void 0),E(aD.F.enqueue({message:(0,A.t)("asset_transfers.revoke.transfer_revoked")}))},()=>{E(aD.F.enqueue({message:(0,A.t)("asset_transfers.error_message.something_went_wrong_check_your_connection"),error:!0}))})},[N?.id,E]),Y=o.useRef(!1);o.useEffect(()=>{!Y.current&&(0,p.kc)().pro_team_project_transfers&&"team"===h.view&&h.assetTransferRequestId&&E(ep.to({type:(0,Tz.S)(),data:{selectedAssetTransferRequest:h.assetTransferRequestId}})),Y.current=!0});let K=o.useMemo(()=>{if(i)return{team:i,pending:N,onRevokeTransfer:z,updatePending:B,billing:_}},[B,z,N,i,_]),X={view:"team",teamId:e,teamViewTab:Ef.A.HOME},q=(0,TY.n)(T3.am.MEMBERS,K,!!i?.canAdmin,X),Z=(0,TY.n)(T3.am.SETTINGS,K,!!i?.canAdmin,X);o.useEffect(()=>{t===Ef.A.MEMBERS?q():t===Ef.A.SETTINGS&&Z()},[]);let et=o.useCallback(e=>{let t={view:"team",teamId:i?i.id:"",teamViewTab:e};E(ea.$T(t))},[E,i]),el=o.useMemo(()=>{if(i&&F)switch(i.org_access){case ex.bU.PRIVATE:return(0,A.t)("file_browser.team_header.closed_team_header");case ex.bU.SECRET:return(0,A.t)("file_browser.team_header.secret_team_header")}},[i,F]),eo=o.useMemo(()=>{if(i&&F){if(i.org_access===ex.bU.PRIVATE)return(0,A.t)("file_browser.team_header.closed_team_subtitle");if(i.org_access===ex.bU.SECRET)return(0,A.t)("file_browser.team_header.secret_team_subtitle")}},[i,F]),es=(0,eu.N)();if(!R)return o.createElement(td.qc,null);if(y||!F&&!l)return o.createElement(iG.S,{resourceType:n0.Ft.TEAM});if(!i)return null;if(!F)return o.createElement(Ia,{team:i});let ec=()=>{E((0,eK.SX)({where:aZ.Ah.FolderListView,team:i}))},ed=()=>{E(ea.oB()),Z(),et(Ef.A.SETTINGS)},em=()=>{E(ea.oB()),E(ea.$T({view:"teamAdminConsole",teamId:i.id,isProTeam:i.pro_team})),(0,V.sx)("Admin Console Opened",{trackingContext:eD.e0.FILE_BROWSER,entryPoint:"team_page_view"})},e_="loaded"===b;n=i.org_id?e_?o.createElement(o.Fragment,null,o.createElement(Tp,{viewId:`team-${e}`,teamId:e,eligibleForLockedStateRedesign:O(M),folderList:w||[],showTeamNameOrAuthor:!1,onCreateNewFolder:P?ec:void 0,canEditTeamContents:P,selectedView:h}),o.createElement(E3.cx,null)):o.createElement(td.qc,null):o.createElement(o.Fragment,null,e_?o.createElement(o.Fragment,null,o.createElement(vQ.J,{teamId:i.id}),o.createElement(Tp,{viewId:`team-${e}`,teamId:e,eligibleForLockedStateRedesign:O(M),folderList:w||[],showTeamNameOrAuthor:!1,onCreateNewFolder:i.isCurrentUserInTeam?ec:void 0,canEditTeamContents:P,selectedView:h}),o.createElement(E3.cx,null)):o.createElement(td.qc,null));let ef=i.canAdmin?o.createElement(eP.FL,{entity:i,entityType:eR.ck.TEAM,avatarEditorState:d,size:40,dispatch:E,avatarSvg:rl.A,svgSizeRatio:.6}):o.createElement(G.nl,{team:i,size:40,avatarSvg:rl.A,svgSizeRatio:.6}),eh=!F&&!I,ev=(()=>{if(eh)return;let e=es({team:i,onChangeTeamIconClick:()=>{E((0,eE.o)({team:i}))},onRenameClick:()=>{E(ep.to({type:(0,TK.h)(),data:{team:i}}))},teamRoleRequests:T}),t=[];return K&&(P&&t.push({displayText:(0,A.t)("team_view.settings.view_settings"),callback:ed}),c&&t.push({displayText:(0,A.t)("teams_table.view_team_members"),callback:q}),C||t.push({displayText:"",separator:!0})),C&&i.canAdmin&&t.push({displayText:(0,A.t)("team_view.settings.view_admin_console"),callback:em},{displayText:"",separator:!0}),t.push(...e),t})(),eb=ev?{kind:i6.A.CUSTOM,key:i6.D.DROPDOWN,element:o.createElement(iZ,{buttonAriaLabel:(0,A.t)("team_view.page_header_dropdown_label"),dropdownKey:`team-${i.id}`,dropdownOptions:ev})}:void 0,ew=i.pro_team&&(0,p.kc)().pro_onboarding_launch,eT=i.student_team?o.createElement(TQ,null):(0,er.w5)(i)?void 0:o.createElement(TX,{team:i});return o.createElement(i$.r,{content:o.createElement(o.Fragment,null,n,eT),banner:o.createElement(bc,{teamId:e,selectedTab:t}),header:o.createElement(iX,{avatar:ef,title:i.name,rightSideActions:function(e,t,a,r,n,i,l,s,c,d,m){let u=[],_=!!(c&&Object.keys(c).includes(e.id))&&c[e.id]?.status===bV.c.PENDING,p=e.canAdmin&&!e.isCurrentUserInTeam,g={kind:iQ.A.CUSTOM_BUTTON,key:i6.D.FAVORITE,element:o.createElement(rm.r,{setFavorite:l,favoriteType:ex.bk.TEAM,resourceId:e.id,isFavoriteHeaderStar:!0,orgId:e.org_id})};p&&u.push({kind:iQ.A.BUTTON,key:i6.D.JOIN_TEAM,displayText:(0,A.t)("file_browser.team.join_team"),onClick:(0,iM.GR)(r,e.id,eL.e6.ADMIN)});let E=m?ei.Ib.TEXT:void 0,h=m?(0,A.t)("locked_team.label.tooltip"):void 0;(a===Ef.A.HOME||n)&&(s&&!(0,eC.R$)(i,e.org_id)?u.push({kind:iQ.A.CUSTOM,key:i6.D.NEW_PROJECT,element:o.createElement("div",{"data-tooltip":h,"data-tooltip-type":E},o.createElement(i9,{"data-onboarding-key":"team-view-new-project-cta",dataTestId:"team-view-new-project-cta",variant:m?"secondary":"inverse",disabled:m,onClick:()=>{r((0,eK.SX)({team:{...e,canEdit:s,canAdmin:e.canAdmin,canEditTeamContents:s},where:aZ.Ah.FolderListView}))},text:(0,A.t)("file_browser.team.add_project")}),o.createElement(T8,{teamId:e.id})),showOnMobile:!0}):e.org_id&&c&&e.org_access!==ex.bU.SECRET&&!p&&!e.canAdmin&&u.push({kind:iQ.A.BUTTON,key:i6.D.REQUEST_TO_EDIT,displayText:_?(0,A.t)("file_browser.team.cancel_request"):(0,A.t)("file_browser.team.request_to_edit"),onClick:()=>{_?r(bM.lT({requestId:c[e.id]?.id})):r(ep.to({type:bW.$,data:{team:e,requesterCurrentLevel:eL.e6.VIEWER}}))}}));let y=m?f.lQ:()=>{r(ep.to({type:(0,Tq.T)(),data:{teamId:e.id,notifyOnSuccess:!0}}))};(a===Ef.A.MEMBERS||n)&&t&&u.push({kind:iQ.A.BUTTON,key:i6.D.INVITE,displayText:(0,A.t)("file_browser.team.share"),onClick:y,styleClass:m?bq.EB:void 0,"data-tooltip":h,"data-tooltip-type":E}),e.org_id&&u.push(g);let v=o.createElement(T4,{dropdownKey:"team-overflow-dropdown",team:e,showInvite:t,onInviteClick:()=>{r(ep.to({type:(0,Tq.T)(),data:{teamId:e.id,notifyOnSuccess:!0}}))},onMembersClick:e=>{d&&d(e)},setFavorite:l});return u.push({kind:iQ.A.CUSTOM_BUTTON,key:i6.D.TEAM_OVERFLOW_MENU,showOnMobile:!0,hideOnDesktop:!0,element:v}),u}(i,!0,t,E,!0,U,$,P,T,e=>{e.stopPropagation(),E(ea.oB()),q(),et(Ef.A.MEMBERS)},O(M)),rightSideOfTitleAction:eb,pageHeaderIcon:void 0,badge:o.createElement(n_.Y,{direction:"horizontal"},el?o.createElement("div",{className:k.cx.ml4.mr4.$,"data-tooltip-type":ei.Ib.TEXT,"data-tooltip":el,"data-tooltip-offset-y":-4,"data-tooltip-timeout-delay":50,"data-tooltip-max-width":200,"data-tooltip-subtext":eo},o.createElement(Q.In,{icon:"lock-16"})):void 0,ew?o.createElement(o.Fragment,null,o.createElement(eg.fu,{name:W._Y.PROFESSIONAL,properties:br.S.getTrackingProperties(e)},o.createElement(eg.$z,{type:"button",onClick:()=>{E(ep.to({type:T7.q,data:{teamId:i.id}}))},"data-onboarding-key":TJ,className:"team_page_view--pointerOnHover--at7fp"},o.createElement(W.Ex,{color:W.zE.INFORMATIONAL,text:(0,A.t)("pro_onboarding.professional"),size:W.vj.EXTRA_LARGE}))),o.createElement(T0,{teamId:e})):void 0)})})}function In(){let e=(0,s.d4)(e=>e.currentUserOrgId),t=(0,s.d4)(e=>e.currentTeamId),a=(0,s.d4)(e=>e.tileSortFilterStateByView),r=(0,ti.vt)(),n=(0,te.Yz)(),i=(0,hm.xx)(e=>({tileSortFilterConfig:e,sortKeys:[lQ.C0.TRASHED_AT,lQ.C0.NAME,lQ.C0.CREATED_AT,lQ.C0.TOUCHED_AT]})),[{data:l,status:c}]=(0,g.IT)((0,e_.Uk)({orgId:e,teamId:t})),d=l?.files||[],m=l?.repos||[],u=i(a.deletedFiles),_=[...d.map(e=>({type:az.nb.FILE,file:e})),...m.map(e=>({type:az.nb.REPO,repo:e.repo,branches:[e.main_file],selectedBranchKey:e.main_file.key}))];return o.createElement(tc.A,{loadingElementId:"loading-content-pane",loaded:"loading"!==c,loadingElementClassName:k.cx.pr32.$,backgroundColor:"default"},o.createElement(hq,{tiles:_,newFileTile:!1,tileActions:{restore:!0,deleteForever:!0,duplicateToDrafts:!0},sortFilterOptions:u,hideSorter:!0,emptyStateText:(0,p.kc)().pdr_trashed_section?(0,A.t)("file_browser.tool_bar.trashed_empty_state"):(0,A.t)("file_browser.tool_bar.deleted_empty_state"),eligibleForLockedStateRedesign:n(r)}),o.createElement(E3.cx,null))}function Ii(){let e=(0,p.kc)().pdr_trashed_section?o.createElement(yF,null):o.createElement(yO,null);return o.createElement(i$.r,{viewBarSticky:!0,viewbar:e,content:o.createElement(In,null)})}var Il=a(733556);let Io={ctrlKey:"metaKey"};function Is(e,t={}){let a=(0,s.wA)(),r=(0,s.Pj)(),n=o.useMemo(()=>({metaKey:e=>{let t=(0,hA.xS)(r.getState(),e);a(e_.V3({url:t}))},...t}),[t,a,r]);return o.useCallback((t,r)=>{let i=e(r),l=Object.keys(n).find(e=>t[e]);if(l){let e=n[E.Ay.mac?l:Io[l]||l];if(e){t.preventDefault(),e(i);return}}a(ea.$T(i))},[n,a,e])}var Ic=a(692630),Id=a(314866),Im=a(196495),Iu=a(548310),I_=a(654696);let Ip="org_user_meta_content--teamsHeader--1p4jT org_user_meta_content--sectionHeader--snmkw text--fontPos13--xW8hS text--_fontBase--QdLsd";function Ig(e){let t=(0,s.wA)(),a=(0,eN.iZ)(),r=(0,Iu.w)(e.user),n=(0,s.d4)(t=>t.currentUserOrgId===e.orgId),i=()=>{t((0,ep.to)({type:I_.u}))};return o.createElement("div",{className:k.cx.flex.flexColumn.ml16.hFull.$},o.createElement(pl.x,{isLoading:e.isLoading},()=>o.createElement(o.Fragment,null,o.createElement("div",{className:"org_user_meta_content--userData--NrFpt"},o.createElement(G.H8,{user:e.user,size:G.Pf.LARGE}),o.createElement("div",{className:"org_user_meta_content--userName--JeBfv text--fontPos18--rYXJb text--_fontBase--QdLsd"},e.title),e.user.profile?.job_title&&o.createElement("div",{className:"org_user_meta_content--jobTitle--bWmsS text--fontPos11--2LvXf text--_fontBase--QdLsd"},o.createElement(W.Ex,{color:W.zE.INVERT,text:(0,Id.lb)(e.user.profile?.job_title)}),e.userId===a?.id&&o.createElement("span",{className:"org_user_meta_content--blueLink--u44PB blue_link--blueLink--9rlnd",role:"button",tabIndex:0,onClick:i},(0,A.tx)("internal_profile.change_job_title"))),e.user.email&&o.createElement("div",{className:"org_user_meta_content--email--tgx7t text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.user.email),o.createElement(pv,{value:e.description??"",placeholder:(0,A.t)("internal_profile.add_a_description"),submit:e.submitDescription,formatter:py,readOnly:e.isReadOnly,className:"org_user_meta_content--description--gYuxd text--fontPos13--xW8hS text--_fontBase--QdLsd"})),r&&e.user?.id===a?.id&&o.createElement(Iv,{user:e.user}),n&&o.createElement(tm.P,{className:k.cx.flexShrink1.bt1.bSolid.colorBorder.$,innerClassName:k.cx.p16.borderBox.flex.flexColumn.$},o.createElement("div",{className:Ip},(0,A.tx)("internal_profile.teams")),o.createElement(Ib,{userId:e.userId,orgId:e.orgId}),o.createElement("div",{className:Ip},(0,A.tx)("internal_profile.recent_projects")),o.createElement(Ih,{files:e.recents,isYourProfile:!e.isReadOnly})))))}function If(e){let t=(0,eN.iZ)(),a=(0,s.wA)();return o.createElement(Ig,{submitDescription:t=>{a(Im.yJ({user:{id:e.userId,description:t},userInitiated:!0}))},isLoading:!e.user,isReadOnly:!t||t.id!==e.userId,description:e.user.description??null,title:e.user.name??e.user.handle??null,userId:e.userId,user:e.user,recents:e.recents,orgId:e.orgId})}function IE(e){let t=(0,s.wA)(),a=(0,eN.iZ)();return o.createElement(Ig,{isLoading:!e.user||!e.orgUser||!e.org,isReadOnly:!a||a.id!==e.userId,description:(e.orgId&&e.orgUser?e.orgUser.description:e.user.description)??null,title:e.user&&e.org?(0,A.t)("internal_profile.title",{userName:e.user.handle,orgName:e.org.name}):null,recents:e.recents,submitDescription:a=>{e.orgId&&e.orgUser&&t(b6.yJ({orgUser:{id:e.orgUser.id,org_id:e.orgId,description:a},userInitiated:!0}))},user:e.user,userId:e.userId,orgId:e.orgId})}function Ih(e){let t=(0,ew.FC)(),a=Is(e=>({view:"folder",folderId:e})),r=o.useMemo(()=>{if(e.files.status!==lS.r.SUCCESS)return[];let a=[],r=[];if(!e.files)return a;let n=new Set;for(let i of e.files.value){if(n.has(i.folder_id)||(n.add(i.folder_id),""===i.folder_name||null==i.folder_name))continue;let e={id:i.folder_id,name:i.folder_name,teamName:i.team_name,hasAccess:(0,en.canViewFolder_DEPRECATED)(i.folder_id,t)};if(e.hasAccess?a.push(e):r.push(e),a.length+r.length>=5)break}return a.concat(r)},[e.files,t]);return o.createElement(pl.x,{state:e.files},()=>o.createElement("div",null,0===r.length&&o.createElement("div",{className:"org_user_meta_content--projectEmptyState--zusT6 text--fontPos11--2LvXf text--_fontBase--QdLsd"},e.isYourProfile?(0,A.t)("internal_profile.your_recent_projects_will_appear_here"):(0,A.t)("internal_profile.their_recent_projects_will_appear_here")),r.map(e=>o.createElement("div",{key:e.id,onClick:e.hasAccess?t=>a(t,e.id):void 0,className:e.hasAccess?"org_user_meta_content--project--t-Nos org_user_meta_content--projectBase--ofeuj text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa":"org_user_meta_content--dimProject--a1lrh org_user_meta_content--dim--aNVfK org_user_meta_content--projectBase--ofeuj text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},o.createElement("span",{"data-tooltip-type":ei.Ib.TEXT,"data-tooltip":e.hasAccess?void 0:(0,A.t)("internal_profile.you_must_be_a_member_of_team_name",{teamName:e.teamName})},e.name)))))}function Iy(e){return o.createElement("div",{className:"org_user_meta_content--userProfileNotification--qHv4P"},o.createElement("div",{className:"org_user_meta_content--userProfileNotificationTitle--lDm8h text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L"},e.title),o.createElement("div",{className:"org_user_meta_content--userProfileNotificationText--H2ZHJ text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L"},e.text),o.createElement("div",{className:"org_user_meta_content--userProfileNotificationAction--NQLlj"},e.action))}function Iv(e){let{profile:t}=e.user,a=(0,s.wA)(),[r,n]=o.useState(!1),i=r=>{n(!0),setTimeout(()=>{a(Im.yJ({user:{id:e.user.id,job_title:r,profile:{...t,job_title:r}},userInitiated:!0}))},600),(0,tt.Cu)({trackingContext:eD.e0.FILE_BROWSER,context:"job_title",text:"Set Job Title",jobTitle:r})};return o.createElement(o.Fragment,null,t?.images?null:o.createElement(Iy,{title:(0,A.t)("internal_profile.profile_image_nudge.title"),text:(0,A.t)("internal_profile.profile_image_nudge.text"),action:o.createElement(ts.N_,{trusted:!0,className:"org_user_meta_content--userProfileNotificationActionLink--sVVav",onClick:()=>{a((0,eE.X)({entity:e.user,entityType:eR.ck.CURRENT_USER,shape:"CIRCLE"})),(0,tt.Cu)({trackingContext:eD.e0.FILE_BROWSER,context:"job_title",text:"Update Photo"})}},(0,A.tx)("internal_profile.profile_image_nudge.action"))}),t?.job_title?null:o.createElement(Iy,{title:(0,A.t)("internal_profile.job_title_nudge.title"),text:(0,A.t)("internal_profile.job_title_nudge.text"),action:r?o.createElement(td.kt,null):o.createElement(o.Fragment,null,Id.s_.map(e=>o.createElement(W.Ex,{key:e,color:W.zE.INVERT,subtle:!0,text:(0,Id.lb)(e),className:"org_user_meta_content--userProfileNotificationBadge--UDTOo",onClick:()=>i(e)})))}))}let Ib=(0,s.Ng)((e,t)=>({permissionState:e}))(function(e){let[t,a]=o.useState(null);o.useEffect(()=>{yz.k.getTeams({userId:e.userId,orgId:e.orgId||void 0}).then(e=>{a(e.data.meta)}).catch(e=>{console.error("Unable to load org user teams",e)})},[e.userId,e.orgId]);let r=Is(e=>({view:"team",teamId:e.id})),n=(t||[]).sort((t,a)=>{let r=(0,en.canViewTeam)(t.id,e.permissionState),n=(0,en.canViewTeam)(a.id,e.permissionState);return r&&!n?-1:!r&&n?1:0});return o.createElement(pl.x,{isLoading:!t},()=>o.createElement("div",{className:k.cx.flex.flexColumn.gap8.$},n.map(t=>{let a=(0,en.canViewTeam)(t.id,e.permissionState);return o.createElement(tq.rE,{key:t.id,entity:t,size:12,hideFallbackInitial:!0,onClick:a?r:void 0,className:`org_user_meta_content--teamListItem--gXcF- text--fontPos13--xW8hS text--_fontBase--QdLsd ${a?"":"org_user_meta_content--dim--aNVfK"}`,"data-tooltip-type":ei.Ib.TEXT,"data-tooltip":a?void 0:(0,A.t)("internal_profile.you_re_not_a_member_of_this_team"),"data-tooltip-offset-y":4})}),t&&0===t.length&&(0,A.tx)("internal_profile.no_teams_in_common")))});function Iw(e){let t=(0,s$.i8)(e.publishedPlugins),a=(0,s$.LH)((0,s$.ky)(t,e.userId),e.org),r=Object.keys(a).map(e=>a[e]),n=(0,M.sortByCreatedAt)(r);return 0===n.length?null:o.createElement(o.Fragment,null,o.createElement("div",{className:"user_org_resources--sectionHeader--MUg1j internal_user_profile_page_view--sectionHeader--3NNNT text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,A.tx)("file_browser.settings.plugins_published",{orgName:e.org.name})),o.createElement("div",{className:"user_org_resources--container---l25- profile_resources_grid--_resourcesGridTemplateColumns--19JO6"},n.map(e=>o.createElement(cY.cS,{pluginId:e.id,showInstallCount:!0,key:`plugin-${e.id}`,isPublic:!!e.roles.is_public,viewContext:"UserOrgResources"})),o.createElement(cY.hT,{numResources:n.length})))}var IT=a(204545);function II(e){let{org:t}=e,a=(0,s.d4)(a=>(t&&t.id&&a.orgUsersByOrgId[t.id]||{})[e.user.id]);return t?o.createElement(IE,{orgId:t.id,recents:e.recents,userId:e.user.id,user:e.user,org:t,orgUser:a}):o.createElement(If,{orgId:null,recents:e.recents,userId:e.user.id,user:e.user})}let IN=e=>{let t=e.user.id,a=(0,s.wA)(),r=(0,s.d4)(e=>e.selectedView),n=e.orgUser&&e.orgUser.org_id,i=(0,s.d4)(e=>e.currentUserOrgId),l=void 0===n?i:n,c=(0,s.d4)(e=>l&&e.orgById[l]||null),d=(0,p.kc)().xr_debounce_threshold&&c,m="user"===r.view?r.userViewTab:void 0;o.useEffect(()=>{a((0,ep.ES)({type:Ic.E}))},[a,m]);let u=(0,s.d4)(e=>e.userFlags);o.useEffect(()=>{u.seen_profile||a(tS.b({seen_profile:!0}))},[a,u.seen_profile]);let _=(0,s.d4)(e=>e.tileSortFilterStateByView.user),g=o.useMemo(()=>({srcTileSortFilterConfig:{filters:{creator:lQ.rJ.ANY,fileType:lQ.t2.ANY},sort:{key:lQ.C0.ACCESSED_AT,dir:lQ.ue.DESC}},tileSortFilterConfig:_,sortKeys:[lQ.C0.NAME,lQ.C0.CREATED_AT,lQ.C0.ACCESSED_AT]}),[_]),f=o.useMemo(()=>{let e=new URLSearchParams;return l&&e.append("org_id",l),`/api/user/${t}/recents${""===e.toString()?"":"?"}${e.toString()}`},[t,l]),[E,h]=o.useState([]),[y,v]=o.useState(!0),[b,w]=o.useState(null),[T,I]=o.useState(0),N=o.useCallback(e=>{w(e),a(aD.F.enqueue({message:(0,A.t)("internal_profile.an_error_occurred"),error:!0}))},[a]),{fetchNext:C,hasMore:S}=(0,pp.WQ)(f,N,55),k=o.useCallback(async()=>{if(!S)return;let e=async()=>{try{let e=await C();if(!Array.isArray(e))return;h(t=>[...t,...e])}catch(e){N(e)}};await e()},[C,N,S]);o.useEffect(()=>{(async()=>{E.length<55&&T<3&&(await k(),I(e=>e+1),v(!1))})()},[T]);let R=o.useMemo(()=>E.filter(e=>{switch(_.filters.fileType){case lQ.t2.ANY:return!0;case lQ.t2.DESIGN:return"design"===e.editor_type;case lQ.t2.FIGJAM:return"whiteboard"===e.editor_type;case lQ.t2.PROTOTYPE:return!1;case lQ.t2.SITES:return"sites"===e.editor_type;case lQ.t2.SLIDES:return"slides"===e.editor_type;default:(0,x.xb)(_.filters.fileType)}}),[E,_]),L=o.useMemo(()=>b?{status:lS.r.FAILURE,error:b}:y?{status:lS.r.LOADING}:{status:lS.r.SUCCESS,value:R},[y,b,R]),D=(0,Il.J)(()=>c&&c.community_profile_id?a(px.pZ({profileId:c.community_profile_id})):Promise.resolve([]),[a,c]),P=e=>{a(ea.$T({view:"user",userId:t,userViewTab:e}))},F=m===lp.o.INTERNAL_PROFILE?[o.createElement("div",{key:"sort-filter",className:"internal_user_profile_page_view--hideFilterRightPadding--fd-Z-"},o.createElement(nM.$4,{options:g,hideSortMenu:!0,selectedView:r,dispatch:a}))]:[],O=o.createElement(nM.g2,{leftSide:d?o.createElement(yL.f,{tabs:[o.createElement(yL.r,{key:lp.o.INTERNAL_PROFILE,tab:lp.o.INTERNAL_PROFILE,isSelected:m===lp.o.INTERNAL_PROFILE,onClick:()=>P(lp.o.INTERNAL_PROFILE),tabName:(0,A.t)("internal_profile.file_contributions")}),o.createElement(yL.r,{key:lp.o.INTERNAL_PROFILE_POSTS,tab:lp.o.INTERNAL_PROFILE_POSTS,isSelected:m===lp.o.INTERNAL_PROFILE_POSTS,onClick:()=>P(lp.o.INTERNAL_PROFILE_POSTS),tabName:(0,A.t)("internal_profile.posts")})]}):F,rightSide:d?F:[]});return(0,eg.T8)(o.createElement(i$.r,{scrollableContainerClass:"internal_user_profile_page_view--pageContainer--FQu11",containerClass:"internal_user_profile_page_view--pageContainerInner--2Ep2e",content:o.createElement("div",{className:"internal_user_profile_page_view--content--X0lTp"},o.createElement("div",{className:"internal_user_profile_page_view--viewbar--eprew"},O),m===lp.o.INTERNAL_PROFILE&&(D.status===lS.r.SUCCESS&&L.status===lS.r.SUCCESS?o.createElement(o.Fragment,null,c&&o.createElement(Iw,{userId:t,org:c,publishedPlugins:D.value}),!d&&o.createElement("div",{className:"internal_user_profile_page_view--sectionHeader--3NNNT text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,A.tx)("internal_profile.file_contributions")),o.createElement(IC,{files:L,fetchNext:k})):o.createElement(td.qc,null)),m===lp.o.INTERNAL_PROFILE_POSTS&&c&&o.createElement(E0,{currentOrgId:c.id,selectedUser:e.user})),metaContent:o.createElement(II,{user:e.user,recents:L,org:c,orgUser:e.orgUser})}),eD.e0.USER_DETAILS,{view:"org_user",userId:t})};function Ix(e){return o.createElement(IN,{key:e.user.id,user:e.user,orgUser:e.orgUser})}let IC=(0,s.Ng)((e,t)=>({permissionState:e}))(function(e){let{fetchNext:t}=e,a=Is(e=>({view:"fullscreen",fileKey:e.key,editorType:(0,gG.wN)(e.editorType||"design")})),r=o.useCallback((e,a)=>{e+a.trackHeight>=a.scrollHeight&&t()},[t]),n=o.useMemo(()=>e.files.status===lS.r.SUCCESS?e.files.value.map(e=>({key:e.key})):[],[e.files]),i=(0,J.p)(ee.sMs,n),l=o.useMemo(()=>{let e={};return i.forEach(t=>{"loaded"===t.result.status&&(e[t.args.key]=!!t.result.data.file?.hasPermission)}),e},[i]);return o.createElement(pl.x,{className:"internal_user_profile_page_view--loading--R8iYF",state:e.files},t=>o.createElement(o.Fragment,null,o.createElement("div",{className:"internal_user_profile_page_view--fileListHeader--HBbTz internal_user_profile_page_view--grid--wdUAM text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement("div",null,(0,A.tx)("internal_profile.file_name")),o.createElement("div",null),o.createElement("div",{className:"internal_user_profile_page_view--projectHeader--1xRXi"},(0,A.tx)("internal_profile.project")),o.createElement("div",{className:"internal_user_profile_page_view--activityHeader--4Qatb"},(0,A.tx)("internal_profile.last_activity"))),o.createElement(tm.P,{onScroll:r,className:"internal_user_profile_page_view--scrollContainer--yPmA8",innerClassName:"internal_user_profile_page_view--scrollContainerInner--jae6x"},t.map(t=>{let r=l[t.key]?r=>{e.dispatch(e_.UN({fileKey:t.key,entrypoint:"internal user profile page view"})),a(r,{key:t.key,editorType:t.editor_type})}:void 0;return o.createElement("a",{onClick:r,href:(0,aK.rl)(t),key:t.key,className:"internal_user_profile_page_view--recentFile--zdHK5 internal_user_profile_page_view--grid--wdUAM text--fontPos13--xW8hS text--_fontBase--QdLsd"},o.createElement(rd.H5,{size:rw.y.SMALL,file:{touched_at:null,updated_at:null,...t},noBorder:!0}),o.createElement("div",{className:"internal_user_profile_page_view--filename--pUgkH ellipsis--ellipsis--Tjyfa"},null!==t.source_file_name&&o.createElement(o.Fragment,null,t.source_file_name,o.createElement(t_.B,{svg:IT.A,className:"internal_user_profile_page_view--branchIcon--CcWO2"})),t.name),o.createElement("div",{className:"internal_user_profile_page_view--projectName--50iEN ellipsis--ellipsis--Tjyfa"},t.folder_name),o.createElement("div",{className:"internal_user_profile_page_view--activity--CsNi8"},o.createElement(l9.h1,{date:new Date(1e3*t.timestamp)})))}))))}),IS=(e,t,a)=>a?Promise.resolve([]):yz.k.getTeams({userId:t}).then(e=>e.data.meta).catch(e=>{throw e}),Ik=(e,t,a)=>e&&e.id===a?Promise.resolve(e):yz.k.getUser({userId:a}).then(e=>e.data.meta).catch(e=>{throw t(e$.s.error("Failed to get user",5e3)),console.warn("Failed to get user files"),e}),IA=(e,t,a)=>a?e(b6.I1({orgId:a,userId:t})):Promise.resolve(null),IR={[lp.o.INTERNAL_PROFILE]:{Component:Ix},[lp.o.INTERNAL_PROFILE_POSTS]:{Component:Ix},[lp.o.PLUGINS]:{Component:o.Fragment}};function IL(e){return o.createElement(e.component,{...e.context})}function ID(e){let t=(0,s.wA)(),a=(0,eN.iZ)(),r=e.orgId,n=(0,s.d4)(e=>e.currentUserOrgId),i=void 0===r?n:r,l=(0,Il.J)(()=>{let r=Ik(a,t,e.userId),n=IA(t,e.userId,i);return Promise.all([r,IS(t,e.userId,i),n]).then(([a,r,n])=>((0,aG.hL)(a.handle),{userId:e.userId,user:a,teams:r,orgUser:n,profileHandle:a.community_profile_handle||null,on404Redirect:r.length>0||n?()=>{t(ea.$T({view:"user",userId:e.userId,orgId:i,userViewTab:lp.o.INTERNAL_PROFILE}))}:()=>{m.Ay.redirect("/404")}}))},[t,a,i,e.userId]),{tab:c}=e;if(!c)return null;let{Component:d}=IR[c];return o.createElement(pl.x,{className:"user_page_view--loadingContainer--vr9Zb",state:l,failure:void 0},t=>o.createElement(IL,{component:d,tab:c,userId:e.userId,context:t}))}function IP({showingFileBrowserLoader:e}){let t=(0,eI._6)();o.useEffect(()=>{(0,tt.o5)(t)},[t]);let a=function(){let e=(0,s.wA)(),t=(0,eN.Pc)(),a=(0,eb.dq)(),r=(0,eI._6)(),n=!!(0,C.md)(t1.t).data,i=(0,C.md)(t1.d2).data??eD.qo.ORG,l=(0,ew.FC)(),c=(0,s.d4)(e=>e.currentTeamId),d=(0,eb.sZ)(),m=(0,s.d4)(e=>e.teams),u=(0,s.d4)(e=>e.search),_=c?m[c]:null,g=!!c&&!!_&&!!(0,er.oc)(c,l)&&!(0,er.w5)(_)&&_.student_team_at!==a0.kU.STUDENT_TEAM_CURRENT&&_.student_team_at!==a0.kU.STUDENT_TEAM_EXPIRED;switch(r.view){case"communityHub":{let{content:e,key:t}=Eu(r);return{pageContent:o.createElement(i$.r,{toolbar:void 0,content:e,collapseSidebarOnTabletView:!0,key:t}),CustomPageLayout:E_}}case"deletedFiles":return(0,p.kc)().pdr_trashed_section?{pageHeaderContent:(0,A.t)("file_browser.tool_bar.trash"),pageContent:(0,eg.T8)(o.createElement(Ii,{key:"trashed"}),eD.e0.FILE_BROWSER,{view:"trashed"})}:{pageHeaderContent:(0,A.t)("file_browser.tool_bar.deleted"),pageContent:(0,eg.T8)(o.createElement(Ii,{key:"deleted"}),eD.e0.FILE_BROWSER,{view:"deleted"})};case"draftsToMove":return{pageHeaderContent:(0,A.t)("file_browser.tool_bar.drafts_to_move"),pageContent:o.createElement(y6,{key:"draftsToMove"})};case"folder":if(r.folderId===t?.drafts_folder_id)return{pageHeaderContent:(0,A.t)("file_browser.tool_bar.drafts"),pageHeaderActions:IO({from:Eg.f6.FILE_BROWSER_TOPBAR_DRAFTS,user:t,currentOrgId:a,isTeamLockedDueToStarterLimits:g,folderId:t.drafts_folder_id}),pageContent:(0,eg.T8)(o.createElement(yU,{folderId:r.folderId,key:"drafts",userId:t.id}),eD.e0.FILE_BROWSER_DRAFTS,{orgId:a,teamId:c})};{let e=r.shouldShowRenameModal||!1;return{pageContent:o.createElement(b8,{folderId:r.folderId,key:`folder-${r.folderId}`,shouldShowRenameModal:e})}}case"workspace":switch(r.subView){case tV.V0.ADMIN:return{pageContent:(0,eg.T8)(o.createElement(L.y$,{workspaceId:r.workspaceId,selectedTab:r.selectedTab}),eD.e0.WORKSPACE_ADMIN_SETTINGS_PAGE,{workspaceId:r.workspaceId,workspaceViewTab:r.selectedTab})};case tV.V0.DIRECTORY:return{pageContent:(0,eg.T8)(o.createElement(oc,null),eD.e0.WORKSPACE_DIRECTORY_PAGE,{workspaceId:r.workspaceId,workspaceGroupViewTab:r.selectedTab})};default:(0,x.xb)(r)}case"licenseGroup":if(r.subView===tB.GN.ADMIN)return{pageContent:(0,eg.T8)(o.createElement(L.VY,null),eD.e0.LICENSE_GROUP_ADMIN_SETTINGS_PAGE,{licenseGroupId:r.licenseGroupId,licenseGroupViewTab:r.selectedTab})};(0,x.xb)(r);case"org":return{pageHeaderContent:d?o.createElement(r2,null):void 0,pageHeaderActions:[o.createElement(b9,{orgId:r.orgId,key:"org-page-header-actions"})],pageContent:(0,eg.T8)(o.createElement(wI,{orgId:r.orgId,selectedTab:r.orgViewTab}),eD.e0.ORG_PAGE,{orgId:r.orgId,orgViewTab:(r.orgViewTab===tE.X.HOME?"HOME":r.orgViewTab)||""})};case"orgAdminSettings":return{pageContent:(0,eg.T8)(o.createElement(L.vW,{selectedTab:r.orgAdminSettingsViewTab,selectedSecondaryTab:r.orgAdminSettingsViewSecondaryTab,selectedExtensionId:r.selectedExtensionId,selectedWorkspaceId:r.selectedWorkspaceId}),eD.e0.ORG_ADMIN_SETTINGS_PAGE,{orgId:a,orgViewTab:r.orgAdminSettingsViewTab,source:r.orgAdminSettingsViewTab||"dashboard",orgViewSecondaryTab:r.orgAdminSettingsViewSecondaryTab})};case"abandonedDraftFiles":let f=[{text:(0,A.t)("general.admin"),onClick:()=>{e(ea.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:tU.J7.DASHBOARD}))}},{text:(0,A.t)("org_admin_tab.abandoned_drafts"),onClick:()=>{e(ea.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:tU.J7.CONTENT,orgAdminSettingsViewSecondaryTab:tU.SN.ABANDONED_DRAFTS}))}}];return{pageContent:(0,eg.T8)(o.createElement(L.dZ,{abandonedDraftFolderId:r.abandonedDraftFolderId}),eD.e0.ORG_ABANDONED_DRAFT_PAGE,{orgId:a}),pageHeaderContent:o.createElement(S.B,{items:f})};case"orgDomainManagement":let h=[{text:(0,A.t)("general.admin"),onClick:()=>{e(ea.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:tU.J7.DASHBOARD}))}},{text:(0,A.t)("org_dashboard.settings"),onClick:()=>{e(ea.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:tU.J7.SETTINGS}))}}];return{pageContent:(0,eg.T8)(o.createElement(L.Oe,null),eD.e0.ORG_DOMAIN_MANAGEMENT_PAGE,{orgId:a}),pageHeaderContent:o.createElement(S.B,{items:h})};case"billingGroupDashboard":return{pageContent:(0,eg.T8)(o.createElement(L.wu,null),eD.e0.BILLING_GROUP_DASHBOARD_SETTINGS_PAGE,{orgId:a,orgViewTab:r.selectedTab})};case"recentFiles":return e(ea.$T({view:"recentsAndSharing",tab:tN.G.RECENTLY_VIEWED})),null;case"recentsAndSharing":let y=r.tab||tN.G.RECENTLY_VIEWED,v=i===eD.qo.ORG,b=IO({from:Eg.f6.FILE_BROWSER_TOPBAR_RECENTS,isFreeUser:n,isInOrgSpace:v,user:t,currentOrgId:a,folderId:t.drafts_folder_id});return{pageHeaderContent:(0,A.t)("file_browser.tool_bar.recents"),pageHeaderActions:b,pageContent:(0,eg.T8)(o.createElement(TU,{selectedTab:y,userId:t.id,accountModalTab:r.accountModalTab,emailPolicyToUnsubscribeFrom:r.emailPolicyToUnsubscribeFrom}),eD.e0.FILE_BROWSER,{view:"recentsAndSharing",userSpace:a?eD.qo.ORG:eD.qo.PERSONAL})};case"resourceUnavailable":return{pageContent:o.createElement(iG.S,{resourceType:r.resourceType})};case"search":{let{searchScope:e,query:t}=u.parameters,a=!E.Ay.mobile;return{pageHeaderContent:o.createElement(IF,{query:t}),pageContent:(0,eg.T8)(o.createElement(nM.bS,null),eD.e0.UNIFIED_SEARCH,{showInternalModal:a&&e!==lO.Rx.COMMUNITY,showCommunityModal:a&&e===lO.Rx.COMMUNITY})}}case"sharedWithYou":return{pageContent:o.createElement(TG,{tab:r.tab})};case"limitedTeamSharedProjects":return{pageContent:o.createElement(b4,null)};case"team":{let e=m[r.teamId],t=r.teamViewTab??(0,tf.ZP)(e,l);return{pageContent:(0,eg.T8)(o.createElement(Ir,{teamId:r.teamId,selectedTab:t,upgradeModalType:r.upgradeModalType,showProOnboardingModal:r.isProUpgrade,key:`team-${r.teamId}`}),eD.e0.TEAM_PAGE,{teamId:r.teamId,canUpgradeToPro:(0,er.hp)(e,l),userSpace:a?eD.qo.ORG:eD.qo.PERSONAL,canEdit:(0,en.canEditTeam)(r.teamId,l)})}}case"teamAdminConsole":{let e=r.teamAdminConsoleViewTab??(r.isProTeam?Ef.I.DASHBOARD:Ef.I.MEMBERS);return{pageContent:(0,eg.T8)(o.createElement(L.JC,{teamId:r.teamId,selectedTab:e,shouldShowDevModeSuggestedUpgradesModal:!!r.shouldShowDevModeSuggestedUpgradesModal}),eD.e0.TEAM_ADMIN_PAGE,{teamId:r.teamId,teamAdminConsoleViewTab:e})}}case"teamFeed":let w=[{text:(0,A.t)("fig_feed.feed"),onClick:()=>{e(ea.$T({view:"teamFeed"}))}}],T=[o.createElement(E8,{key:"create-feed-post-button"})];return{pageHeaderContent:o.createElement(S.B,{items:w}),pageHeaderActions:T,pageContent:o.createElement(IM,{postUuid:r.postUuid,creatorId:r.creatorId,feedTab:r.feedTab})};case"user":return{pageHeaderContent:(0,A.t)("internal_profile.profile"),pageHeaderActions:t.community_profile_handle&&t.id===r.userId?[o.createElement(wL,{key:"viewCommunityProfileAction"})]:void 0,pageContent:o.createElement(ID,{userId:r.userId,tab:r.userViewTab,orgId:r.orgId})};default:return null}}();if(!a)return null;let{CustomPageLayout:r,pageContent:n}=a;return r?o.createElement(hr,null,o.createElement(r,null,!e&&n)):o.createElement(hr,null,o.createElement(ix,{showingFileBrowserLoader:e,pageHeaderContent:a.pageHeaderContent,pageHeaderActions:a.pageHeaderActions},n))}function IF(e){return e.query?o.createElement("div",{className:k.cx.flex.columnGap8.$},o.createElement("span",{className:k.cx.flexShrink0.$},o.createElement(R.E,{color:"secondary"},(0,A.tx)("search.search_results_for"))),o.createElement("div",{className:k.cx.flex.fontMedium.minW0.$},"\u201C",o.createElement(R.E,{truncate:!0},e.query),"\u201D")):o.createElement("div",{className:k.cx.flex.columnGap8.$},o.createElement("span",{className:k.cx.flexShrink0.$},o.createElement(R.E,{color:"secondary"},(0,A.tx)("search.search_results"))))}function IO({from:e,user:t,isFreeUser:a,isInOrgSpace:r,currentOrgId:n,isTeamLockedDueToStarterLimits:i,folderId:l}){if((0,p.kc)().ps_benchmark&&t&&(0,eC.R$)(t,n))return[];let s=e===Eg.f6.FILE_BROWSER_TOPBAR_RECENTS,c=s&&(0,te.mw)(!!a,!!r),d=(0,p.kc)().omnicreate_button,m=s?o.createElement(bD,{key:"resourceCreationAction",from:e,dropdownType:Eh.x,disabled:!1,folderId:l,leftContent:o.createElement(wC,null)}):o.createElement(bL,{key:"resourceCreationAction",from:e,dropdownType:Eh.x,disabled:!1,folderId:l}),u=c?o.createElement(wR,{key:"newDesignActionDropdown",from:e,dropdownType:wA.$c.DESIGN,dataTestId:"new-design-file-button-dropdown"}):o.createElement(by,{key:"newDesignAction",from:e,isTeamLocked:i}),_=c?o.createElement(wR,{key:"newFigjamActionDropdown",from:e,dropdownType:wA.$c.WHITEBOARD,dataTestId:"new-whiteboard-file-button-dropdown"}):o.createElement(bb,{key:"newFigjamAction",from:e,isTeamLocked:i}),g=c?o.createElement(wR,{key:"newSlidesActionDropdown",from:e,dropdownType:wA.$c.SLIDES,dataTestId:"new-slides-file-button-dropdown"}):o.createElement(Ew,{key:"newSlidesAction",from:e,isTeamLocked:i}),f=o.createElement(EE.kD,{key:`${gG.oQ}ToolbarAction`,from:e,isTeamLocked:i}),E=o.createElement(pB.p,{key:"jamboardImporter"},o.createElement(hd,null)),h=o.createElement(o.Fragment,{key:"importAction"},o.createElement(hn.E_,{isTeamLocked:i}),o.createElement(pB.p,null,o.createElement(hd,null)));return[o.createElement(wk,{key:"getDesktopApp"}),...d?[m,E]:[u,_,f,g,h]]}function IM(e){return(0,Ep.w)()?o.createElement(he,{postUuid:e.postUuid,creatorId:e.creatorId,feedTab:e.feedTab}):null}var IB=a(787133),IU=a(48793),IV=a(66432),IH=a(658386),IW=a(805447),Ij=a(758259),IG=a(426197),I$=a(622139);let Iz="add_collaborators--emailListItem--dnvC-";function IY({selectedView:e}){let[t,a]=o.useState(["","",""]),r=(0,s.d4)(t=>t.teams[e.teamId]),n=(0,s.d4)(e=>e.teamCreation),i=(0,s.d4)(e=>e.payment),l=(0,s.wA)(),c=o.useCallback(()=>{r&&l(ea.$T({view:"team",teamId:r.id}))},[l,r]),d=o.useCallback((e,r)=>{if(r>=t.length)return;let n=[...t];n[r]=e,a(n)},[t]),m=o.useCallback(()=>{a([...t,""])},[t]),u=o.useCallback(()=>{let e=!!n.isEduTeam;i.promo?l(Ij.g_({teamId:r.id,teamName:r.name,previousView:{view:"team",teamId:r.id}})):e?l(h2.Vm({teamId:r.id,showBreadcrumbs:!0})):l(ea.$T({view:"teamUpgrade",teamFlowType:n0.SC.UPGRADE_EXISTING_TEAM,teamId:r.id,paymentStep:I$.tn.UPGRADE_NEW_TEAM,previousView:{view:"team",teamId:r.id},planType:n0.Sc.TEAM}))},[l,r,i.promo,n.isEduTeam]),_=o.useCallback(()=>t.filter(e=>e).map(e=>e.trim()),[t]),p=o.useCallback(()=>{l((0,IG.rq)({emails:_(),resourceType:ex.vt.TEAM,resourceIdOrKey:r.id,level:eL.e6.EDITOR,onSuccess:()=>{l(be.r1({loading:!1})),u()}}))},[_,r,u,l]);return o.createElement(eg.fu,{name:"Add Collaborators",properties:{teamId:r?.id}},o.createElement("div",null,o.createElement(IH.O,{menu:o.createElement(IV.X,{onClick:c},o.createElement(t_.B,{svg:nz.default,className:"add_collaborators--modalCloseX--sJGp5"}))},o.createElement(IW.J,{index:2}),o.createElement(IU.JR,null,(0,A.tx)("team_creation.add_your_collaborators")),o.createElement(IU.Kh,null,(0,A.tx)("team_creation.you_can_update_user_permissions_on_the_team_page_after_setting_up")),o.createElement("div",{className:"add_collaborators--formContainer--zTKXv"},o.createElement("div",{className:"add_collaborators--emailInputsContainer--19ZBc"},t.map((e,t)=>o.createElement(ts.il,{key:`collaborator-email-input-${t}`,className:Iz,value:e,onChange:e=>d(e.target.value,t),maxLength:255,placeholder:(0,A.t)("team_creation.email")}))),o.createElement(ts.nR,{className:Iz,onClick:m},(0,A.tx)("team_creation.add_another")),o.createElement("div",{className:"add_collaborators--spacing--2VA7s"}),o.createElement("div",{className:"add_collaborators--ctaContainer--VGMvb"},o.createElement(ts.nD,{disabled:0===_().length,onClick:p,trackingProperties:{numCollaborators:_().length}},(0,A.tx)("team_creation.continue")),o.createElement(ts.Ph,{onClick:u,trusted:!0},(0,A.tx)("team_creation.skip_for_now")))))))}var IK=a(994190),IQ=a(316082),IX=a(632376),Iq=a(955066),IJ=a(63104),IZ=a(132367),I0=a(167198);let I1=["recentFiles","folder","team","search","recentsAndSharing"];function I2(){let e=(0,s.d4)(e=>e.autosave),t=(0,eI._6)(),a=(0,IQ.y)(),{unsyncedFiles:r,localUnsyncedFiles:n}=(0,hZ.Gg)();return!a||null!=e.lastSnoozeTime&&Date.now()-e.lastSnoozeTime<864e5?null:(r.length>0||n.length>0)&&I1.includes(t.view)?o.createElement(I4,{unsyncedFiles:r,localUnsyncedFiles:n}):null}let I8=!1;function I4(e){let t=(0,s.wA)();o.useEffect(()=>{let e=()=>{t(Iq.Jw())};return IZ.hp.register(IZ.a,e),function(){IZ.hp.unregister(IZ.a,e),t(ep.ES({type:IX.EO.type}))}},[t]);let a=(0,eI._6)(),[r,n]=o.useState(!1);o.useEffect(()=>{I8||(I8=!0,(0,IK.Mw)()),r||(n(!0),(0,V.sx)("Autosave Notification",{hasUnsyncedFiles:e.unsyncedFiles.length>0,hasLocalUnsyncedFiles:e.localUnsyncedFiles.length>0,firstUnsyncedFile:e.unsyncedFiles.length>0?e.unsyncedFiles[0].fileKey:null,firstLocalUnsyncedFile:e.localUnsyncedFiles.length>0?e.localUnsyncedFiles[0].fileKey:null,view:a.view},{forwardToDatadog:!0}))},[t,e.unsyncedFiles,e.localUnsyncedFiles,r,a]);let i=(0,eN.iZ)(),l=[...e.unsyncedFiles,...e.localUnsyncedFiles];if(0===l.length||!i)return o.createElement(o.Fragment,null);let c=l.length>1,d=l[0],u=(0,IJ.y8)(d)?d.file.name:d.name,_=u.length>40?u.substring(0,40)+"\u2026":u,p=c?(0,A.t)("autosave.notification.message.more_than_one_file"):(0,A.t)("autosave.notification.message.one_file",{fileName:_}),g=c?(0,A.tx)("autosave.notification.action_review"):(0,A.tx)("autosave.notification.action_open_to_sync");return o.createElement("div",{className:"autosave_notification--notification--u3sx0 text--_negText--j9g-L"},o.createElement(t_.B,{className:"autosave_notification--icon--uvtXB",svg:I0.A,width:"24",height:"24"}),o.createElement("div",{className:"autosave_notification--message--yAhFz"},p),o.createElement("div",{className:"autosave_notification--actions--dk-yq"},o.createElement("div",{className:"autosave_notification--mainAction--sidqJ autosave_notification--action--Brz-5",onClick:()=>{c?t(ep.to({type:IX.EO})):(0,IJ.y8)(d)?m.Ay.redirect((0,aK.r1)(d.file,!0),"_blank"):t(hI.NA({file:d,openNewFileIn:Eg.ai.NEW_TAB,source:hR.U.AUTOSAVE_NOTIFICATION}))}},g),o.createElement("div",{className:"autosave_notification--action--Brz-5",onClick:()=>{(0,V.sx)("Autosave Notification Snooze",{files:l.length,firstFile:d.fileKey}),t(Iq.zE(Date.now()))}},(0,A.tx)("autosave.notification.action_later"))))}var I3=a(27182),I5=a(701283),I9=a(761070);function I6(){return(0,IQ.w)()?null:o.createElement(I7,null)}function I7(){let[e,t]=o.useState(!0);return o.createElement("div",{className:"offline_notification--notification--hEP5F notification--notification--Q5PkV text--_negText--j9g-L _overlayBase--_overlayBase--Rkj8l"},o.createElement(t_.B,{className:I5.Kk,svg:I9.A,width:"24",height:"24"}),o.createElement("div",{className:I5.iU},(0,A.tx)(e?"file_browser.offline_notification.youre_offline_message_body":"file_browser.offline_notification.youre_offline_message_body_no_create",{youreOfflineMessagePrefix:o.createElement("span",{className:"offline_notification--messageBold--QAlE3"},(0,A.tx)("file_browser.offline_notification.youre_offline_message_prefix"))})),e&&o.createElement("div",{className:I5.o1},o.createElement(Ne,{onClick:()=>t(!1)})))}function Ne({onClick:e}){let t=(0,s.wA)(),a=(0,vN.B)();return o.createElement("div",{className:"offline_notification--createFileButton--BWecZ notification--action--v-pvn",role:"button",tabIndex:0,onClick:()=>{e(),t(hI.zE({state:a,editorType:ex._Y.DESIGN,team:void 0,from:Eg.f6.OFFLINE_NOTIFICATION,openNewFileIn:Eg.ai.SAME_TAB}))}},(0,A.tx)("file_browser.offline_notification.create_file"))}let Nt="team-org-access-dropdown";function Na(e){let t=(0,s.wA)(),a=e.dropdownShown&&e.dropdownShown.type===Nt;return o.createElement("div",{className:"team_org_access_dropdown--orgAccess--JAIwP"},o.createElement("button",{className:"team_org_access_dropdown--select--lqx54",onClick:e=>{e.stopPropagation(),e.preventDefault(),a?t(ea.oB()):t(ea.j7({type:Nt}))}},(0,eC.ZP)()[e.orgAccess],o.createElement(t_.B,{svg:rL.A,className:"team_org_access_dropdown--downCaret--INuva"})),a&&o.createElement("div",{className:"team_org_access_dropdown--orgAccessDropdownContainer--iVvqn"},o.createElement(i7.ms,{className:"team_org_access_dropdown--orgAccessDropdown--zJupm"},o.createElement(i7.MM,{checked:e.orgAccess===ex.bU.PUBLIC,onClick:()=>{e.onChangeOrgAccess(ex.bU.PUBLIC)}},(0,eC.ZP)()[ex.bU.PUBLIC]),o.createElement(i7.MM,{checked:e.orgAccess===ex.bU.PRIVATE,onClick:()=>{e.onChangeOrgAccess(ex.bU.PRIVATE)}},(0,eC.ZP)()[ex.bU.PRIVATE]),o.createElement(i7.MM,{checked:e.orgAccess===ex.bU.SECRET,onClick:()=>{e.onChangeOrgAccess(ex.bU.SECRET)}},(0,eC.ZP)()[ex.bU.SECRET]))))}let Nr="team_creation--createTeamText--VjY8f";function Nn({currentTeamId:e,currentUserOrgId:t,user:a,selectedView:r,dropdownShown:n,teamCreation:i,orgById:l}){var c;let d=(0,s.wA)(),[u,_]=(0,o.useState)(null),[g,f]=(0,o.useState)(ex.bU.PUBLIC),E=r.ignoreCurrentPlan,h=t&&!E?l[t]:null,y=!e&&!t,v=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(v.current)for(let e=0;e<v.current.elements.length;e++){let t=v.current.elements[e];if(!t.value){t.focus();break}}t&&!E&&(0,V.sx)("team_creation_started",{user_id:a?.id??"",org_id:t})},[t,a,E]);let b=e=>{e.preventDefault(),e.stopPropagation(),u?(d((0,ey.KQ)({teamName:u,orgAccess:g,dontRedirect:!!r.onSubmitReturnToPrevView,ignoreCurrentPlan:E})),r.onSubmitReturnToPrevView&&d(ea.$T((0,m.Gl)()||{view:"recentFiles"}))):d(e$.s.error((0,A.t)("team_creation.your_team_name_cannot_be_empty")))},w=!(t&&!E)&&!r.onSubmitReturnToPrevView,T=(0,p.kc)().ps_benchmark&&y?null:o.createElement(IV.X,{onClick:()=>{d(ea.$T((0,m.Gl)()||{view:"recentFiles"}))}},o.createElement(t_.B,{svg:nz.default,className:"team_creation--modalCloseX--TTg32"}));return o.createElement(eg.fu,{name:"Team Creation"},o.createElement("div",null,o.createElement(IH.O,{menu:T},w&&o.createElement(IW.J,{index:1}),o.createElement("form",{ref:v,onSubmit:b},o.createElement(IU.JR,null,(0,A.tx)("team_creation.create_a_team_title")),o.createElement("div",{className:"team_creation--newTeamContainer--43mWz team_creation--newTeamContainerBase--nwYzU"},o.createElement("div",{className:"team_creation--teamNameContainer--B6Pc3"},o.createElement("div",{className:"team_creation--teamNameLabel--ohZWy"},(0,A.tx)("team_creation.team_name_label")),o.createElement(ts.il,{value:u||"",onChange:e=>{_(e.target.value)},className:"team_creation--newTeamInput--PdjEW",maxLength:255,placeholder:(0,A.t)("team_creation.team_name_input_placeholder")})),h?o.createElement("div",{className:"team_creation--orgTeamSettings--bDW2R"},o.createElement("div",{className:k.cx.flex.$},o.createElement("div",{className:k.cx.fontSemiBold.$},(0,A.tx)("team_creation.access_within_the_organization")),o.createElement(Na,{orgAccess:g,dropdownShown:n,onChangeOrgAccess:e=>{f(e)}})),o.createElement("div",{className:Nr},(c=h.name,{[ex.bU.PUBLIC]:(0,A.tx)("org_access_strings.public.description_with_org_name",{orgName:c}),[ex.bU.PRIVATE]:(0,A.tx)("org_access_strings.closed.description_with_org_name",{orgName:c}),[ex.bU.SECRET]:(0,A.tx)("org_access_strings.secret.description_with_org_name",{disclaimerLabel:o.createElement("span",{className:k.cx.fontSemiBold.$},(0,A.tx)("org_access_strings.secret.description.disclaimer_label")),orgName:c})})[g])):o.createElement("div",{className:Nr},(0,A.tx)("team_creation.after_creating_a_team_you_can_invite_others_to_join")),o.createElement(ts.nD,{className:t?"team_creation--createTeamButtonOrg--2rnOw":"team_creation--createTeamButton--C8IV7",type:"submit",disabled:i.loading,onClick:b},(0,A.tx)("team_creation.create_team_button")))))))}function Ni({selectedView:e}){let t=(0,s.wA)(),a=(0,eb.dq)(),r=(0,s.d4)(e=>e.orgById),n=(0,eN.iZ)(),i=(0,s.d4)(e=>e.currentTeamId),l=(0,ev.Um)(),c=(0,s.d4)(e=>e.teamCreation),d=a?r[a]:null,u=tk.a9()?.workspace_users?.find(e=>e.is_main_workspace)?.workspace_id,{cannotCreateTeamReason:_}=(0,tD.l6)(d,u);return(0,eC.R$)(n,a)||_===tD.z4.TEAM_CREATION_CONTROL&&!(0,p.kc)().ps_benchmark?(m.Ay.redirect("/"),t(e$.s.error((0,A.t)("team_creation.missing_team_creation_controls"))),null):o.createElement(Nn,{currentTeamId:i,currentUserOrgId:a,user:n,dropdownShown:l,teamCreation:c,orgById:r,selectedView:e})}var Nl=a(845213);let No="team_restore--page--cMEe2",Ns="team_restore--section--AmfWe",Nc="team_restore--button--C-gOz";function Nd({selectedView:e}){let t,a;let r=(0,s.wA)(),[n,i]=o.useState(!1),l=e.teamId,c=(0,s.d4)(e=>e.teams[l]);o.useEffect(()=>{i(!0),Nl.$.getDeleted({teamId:l}).then(({data:e})=>{r(be.bE({team:e.meta})),i(!1)}).catch(e=>{400!==e.status&&(r(ea.$T({view:"recentFiles"})),r(e$.s.error(`${e.data.message}`))),i(!1)})},[r,l]);let d=()=>{r(ea.$T({view:"recentFiles"}))},m=o.createElement(ts.vd,{className:Nc,onClick:d},(0,A.tx)("team_restore.back"));if(c){if(c.deleted_at){let e=(0,h0.A)(c.deleted_at).add(28,"days").toDate();t=(0,A.t)("team_restore.confirm_restore_header",{teamName:c.name}),a=o.createElement("div",null,(0,A.tx)("team_restore.confirm_restore"),o.createElement("br",null),o.createElement("br",null),(0,A.tx)("team_restore.confirm_restore_deadline",{deleteDeadline:e})),m=o.createElement(ts.vd,{className:Nc,onClick:()=>{r(be.I9({teamId:l}))}},(0,A.tx)("team_restore.restore"))}else t=(0,A.t)("team_restore.ineligible"),a=(0,A.t)("team_restore.questions_contact_support",{supportEmail:(0,p.W4)()})}else{if(n)return o.createElement("div",{className:No},o.createElement("div",{className:Ns},o.createElement(td.kt,null)));t=(0,A.t)("team_restore.expired_header"),a=o.createElement("div",null,(0,A.tx)("team_restore.expired"),o.createElement("br",null),o.createElement("br",null),(0,A.tx)("team_restore.questions_contact_support",{supportEmail:(0,p.W4)()}))}return o.createElement(eg.fu,{name:"Team Restore",properties:{teamId:l}},o.createElement(IH.O,{menu:o.createElement(t_.B,{svg:nz.default,onClick:d,className:"team_restore--modalCloseX--XNErW"})},o.createElement("div",{className:No},o.createElement("div",{className:Ns},o.createElement("div",{className:"team_restore--header--NgU8v text--fontPos20--Bcz97 text--_fontBase--QdLsd"},t),o.createElement("div",{className:"team_restore--text--F18dW text--fontPos12--YsUAh text--_fontBase--QdLsd"},a),m))))}var Nm=a(710667),Nu=a(978779),N_=a(49891),Np=a(507590);let Ng="legacy_upgrade--closeButton--zJ0JO";var Nf=a(474263);function NE({selectedView:e}){let t=(0,s.wA)(),a=(0,s.d4)(t=>t.teams[e.teamId]),{taxes:r,numDesignEditors:n,numWhiteboardEditors:i,submitPending:l}=(0,s.d4)(e=>e.payment),c=(0,s.d4)(e=>e.teamUserByTeamId[a.id]||{}),d=(0,s.d4)(e=>e.teamBilling.summary.currency),m=(0,s.d4)(e=>e.loadingState),u=yN.Be.loadingKeyForPayload({teamId:a.id}),_=(0,pc.VP)(m,u)&&!(0,pc.D2)(m,u),p=(0,Nm.N1)(Nm.Fq.TEAM_ADMIN_CONSOLE),g=_||"loading"===p.status;if((0,o.useEffect)(()=>{(0,pc.VP)(m,u)||(0,pc.D2)(m,u)||t(yN.Be({teamId:a.id}))},[m,t,u,a.id]),g)return o.createElement(td.kt,{className:Np.w8});let f=o.createElement(t_.B,{svg:nz.default,onClick:()=>{(0,V.sx)("Add Annual Plan Canceled",{teamId:e.teamId}),window.history.length<=1?t(ea.$T({view:"team",teamId:e.teamId})):history.go(-1)},className:Ng}),E=a.editors,h=Object.keys(c).filter(e=>c[e]?.whiteboard_paid_status===bQ.Zf.FULL).length,y=new gI.vr(d),v=(0,Nu.He)(p.data,y.currency,bU.G_.DESIGN),b=(0,Nu.He)(p.data,y.currency,bU.G_.FIGJAM),w=(0,Nu.G7)(p.data,y.currency,bU.G_.DESIGN),T=(0,Nu.G7)(p.data,y.currency,bU.G_.FIGJAM);return o.createElement("div",{className:"legacy_upgrade--addAnnualPlan--ZH1cn"},o.createElement(IH.O,{menu:f},o.createElement(eg.fu,{name:"Step Pay"},o.createElement("div",{className:Nf.yU},o.createElement(IU.JR,null,(0,A.tx)("payments.add_annual_plan.title")),o.createElement(IU.Kh,null,o.createElement("p",{className:"legacy_upgrade--addAnnualPlanInstructions--MmsnZ"},(0,A.tx)("payments.add_annual_plan.intro.seat_rename",{monthlyDesignEditorCost:y.formatMoney(v,{showCents:!1}),monthlyFigjamEditorCost:y.formatMoney(b,{showCents:!1})}))),o.createElement("div",{className:Nf.fI},o.createElement(N_.tG,{totalDesignEditors:E,totalWhiteboardEditors:h,numAnnualDesignEditors:n||0,numAnnualWhiteboardEditors:i||0,onNumAnnualDesignEditorsChange:e=>{t(h2.js({numDesignEditors:e}))},onNumAnnualWhiteboardEditorsChange:e=>{t(h2.Az({numWhiteboardEditors:e}))},showAdminPage:()=>{t(ea.$T({view:"team",teamId:e.teamId,teamViewTab:Ef.A.SETTINGS}))},isTeamPro:!0,dispatch:t,taxes:r,teamId:e.teamId,currency:d,submitPending:l,monthlyDesignAmount:v,monthlyFigjamAmount:b,annualMonthlyDesignAmount:w,annualMonthlyFigjamAmount:T}),o.createElement("form",{onSubmit:a=>{a.preventDefault(),t(tS.b({completed_pro_cart_flow:!0})),t(h2.I2({submitPending:!0})),t(h2.XF({teamId:e.teamId}))}},o.createElement("div",{className:Nf.ay},(0,A.tx)("payments.add_annual_plan.auto_renew.seat_rename",{cancellingIsEasyLink:o.createElement("a",{target:"_blank",rel:"noopener",href:"/pricing-faq#how-do-i-cancel-my-paid-plan"},(0,A.tx)("payments.add_annual_plan.cancelling_is_easy_link_text"))}),o.createElement("br",null),o.createElement("br",null),(0,A.tx)("payments.add_annual_plan.tos",{tosLink:o.createElement("a",{target:"_blank",rel:"noopener",href:"/tos"},(0,A.tx)("payments.add_annual_plan.tos_link_text"))})),o.createElement("div",{className:`${Nf.Ou} ${Nf.nM}`},o.createElement(ts.vd,{type:"submit",disabled:l,className:`${Nf.XX}`},(0,A.tx)("payments.add_annual_plan.cta_text")))))))))}var Nh=a(444795),Ny=a(352876);function Nv(e){let t=(0,eN.iZ)(),[a,r]=o.useState(()=>(0,gI.LN)()),n=eA.b.UPGRADE_NEW_TEAM,i=(0,s.wA)(),l=(0,te.WQ)({isInDevMode:!1,isProCurrent:!1,hasFeatureListOverride:!1})&&(0,nd.Hw)(t),c=(t,r)=>{let n=e.selectedView;i(h2.WX({teamId:e.selectedView.teamId,selectedView:n,newTeam:!0,currency:a,billingPeriod:r}))},d=null===e.selectedView.teamId?void 0:()=>{let a=(0,p.kc)().ps_benchmark,r=t?.id;if(a&&r){let t={userId:r,orgId:null,teamId:e.selectedView.teamId};i(e_._l({workspace:t,view:{view:"allProjects"}}))}else i(ea.$T({view:"team",teamId:e.selectedView.teamId}))},m=e.selectedView.teamId,u=o.useRef(null);return o.createElement(eg.fu,{name:"Upgrade Team",properties:{teamId:m,step:I$.tn.UPGRADE_NEW_TEAM}},o.createElement("div",{className:"legacy_upgrade--teamUpgrade--auGJz"},o.createElement(IH.O,{menu:o.createElement(IV.X,{onClick:()=>{let a=(0,p.kc)().ps_benchmark,r=t?.id,n=e.selectedView.teamId;if(a){let t={view:"recentFiles"};r&&n?i(e_._l({workspace:{userId:r,teamId:n,orgId:null},view:e.selectedView.previousView||t})):i(ea.$T(e.selectedView.previousView||t))}else i(ea.$T(e.selectedView.previousView||(n?{view:"team",teamId:n}:{view:"recentFiles"})))}},o.createElement(t_.B,{svg:nz.default,className:Ng})),pageRef:u},o.createElement(IW.J,{index:3}),o.createElement(eg.fu,{name:"Upgrade New Team",properties:{teamId:m,trackingDescriptor:tZ.c.UPGRADE_YOUR_TEAM}},o.createElement("div",{className:O()(e.className,{"step_upgrade_new_team--container--BixhQ":!l})},o.createElement(IU.JR,{className:"step_upgrade_new_team--stepTitleComparisonChart--yyzB5 step_upgrade_new_team--stepTitle--yFYG8"},o.createElement("span",null,(0,A.tx)("plan_details.choose_your_team_plan"))),o.createElement(Nh.O,{currency:a,chooseStarterPlan:d,chooseProPlan:e=>c(null,e),chooseOrgPlan:()=>{i(h2.Bq({currency:a,upsellSource:n}))},updateCurrency:e=>{r(e),i(ea.oB())},upsellSource:n,parentRef:u}),l&&o.createElement(Ny.V,null))))))}var Nb=a(340159),Nw=a(657193),NT=a(611886),NI=a(351226),NN=a(833629),Nx=a(966537);function NC(){return o.createElement("svg",{width:"310",height:"167",viewBox:"0 0 310 167",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("rect",{x:"280.007",y:"103.275",width:"9.9157",height:"10.5949",fill:"#FFC9C1"}),o.createElement("rect",{x:"280.007",y:"124.465",width:"9.9157",height:"10.5949",fill:"#FFC9C1"}),o.createElement("rect",{x:"280.007",y:"113.871",width:"9.9157",height:"10.5949",fill:"#B98E01"}),o.createElement("rect",{x:"299.833",y:"103.275",width:"9.9157",height:"10.5949",fill:"#FFC9C1"}),o.createElement("rect",{x:"299.833",y:"124.465",width:"9.9157",height:"10.5949",fill:"#FFC9C1"}),o.createElement("rect",{x:"299.833",y:"113.871",width:"9.9157",height:"10.5949",fill:"#B98E01"}),o.createElement("rect",{x:"289.928",y:"103.275",width:"9.9157",height:"10.5949",fill:"#B98E01"}),o.createElement("rect",{x:"289.928",y:"124.465",width:"9.9157",height:"10.5949",fill:"#B98E01"}),o.createElement("rect",{x:"289.928",y:"113.871",width:"9.9157",height:"10.5949",fill:"#FFC9C1"}),o.createElement("rect",{x:"280.007",y:"134.49",width:"9.9157",height:"10.5949",fill:"#FFC9C1"}),o.createElement("rect",{x:"280.007",y:"155.679",width:"9.9157",height:"10.5949",fill:"#FFC9C1"}),o.createElement("rect",{x:"280.007",y:"145.085",width:"9.9157",height:"10.5949",fill:"#B98E01"}),o.createElement("rect",{x:"299.833",y:"134.49",width:"9.9157",height:"10.5949",fill:"#FFC9C1"}),o.createElement("rect",{x:"299.833",y:"155.679",width:"9.9157",height:"10.5949",fill:"#FFC9C1"}),o.createElement("rect",{x:"299.833",y:"145.085",width:"9.9157",height:"10.5949",fill:"#B98E01"}),o.createElement("rect",{x:"289.928",y:"134.49",width:"9.9157",height:"10.5949",fill:"#B98E01"}),o.createElement("rect",{x:"289.928",y:"155.679",width:"9.9157",height:"10.5949",fill:"#B98E01"}),o.createElement("rect",{x:"289.928",y:"145.085",width:"9.9157",height:"10.5949",fill:"#FFC9C1"}),o.createElement("circle",{cx:"10.751",cy:"63.5",r:"10.5",fill:"#FF01E6"}),o.createElement("circle",{cx:"31.751",cy:"63.5",r:"10.5",fill:"#FFC9C1"}),o.createElement("circle",{cx:"10.751",cy:"84.5",r:"10.5",fill:"#0A5C35"}),o.createElement("circle",{cx:"31.751",cy:"84.5",r:"10.5",fill:"#FF7237"}),o.createElement("rect",{width:"161",height:"106",transform:"translate(76.2148 28.0273)",fill:"#874FFF"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M101.186 28.0273C115.125 28.0273 126.424 39.3269 126.424 53.2657C126.424 67.2045 115.125 78.5041 101.186 78.5041H76.2158L76.2158 28.0273L101.186 28.0273ZM76.2191 83.5506H126.427V134.027H76.2191V83.5506ZM181.319 83.5501L131.111 83.5501L131.111 108.923C131.111 122.787 142.351 134.027 156.215 134.027C170.08 134.027 181.319 122.787 181.319 108.923L181.319 83.5501ZM186.006 134.027V83.5506V33.0739H236.215V83.5506C236.215 111.28 213.735 134.027 186.006 134.027Z",fill:"#95B9AC"}),o.createElement("rect",{x:"126.087",y:"83.5518",width:"5.02083",height:"25.5749",fill:"#95B9AC"}),o.createElement("rect",{x:"76.2148",y:"83.5518",width:"5.04767",height:"25.4389",transform:"rotate(-90 76.2148 83.5518)",fill:"#95B9AC"}),o.createElement("rect",{x:"180.983",y:"83.5518",width:"5.02083",height:"25.5749",fill:"#95B9AC"}),o.createElement("rect",{x:"60.251",y:"12",width:"16",height:"16",fill:"#33DFDF"}),o.createElement("rect",{x:"60.251",y:"134",width:"16",height:"16",fill:"#33DFDF"}),o.createElement("rect",{x:"237.251",y:"134",width:"16",height:"16",fill:"#33DFDF"}),o.createElement("rect",{x:"195.738",width:"85",height:"85",fill:"#0A5C35"}),o.createElement("path",{d:"M214.06 53.9162C219.483 51.1514 260.1 29.4353 256.283 27.5269",stroke:"#67FF7F",strokeWidth:"5.5",strokeLinecap:"round"}),o.createElement("path",{d:"M225.934 13.0127C231.093 24.7758 243.087 48.6871 243.087 61.8329",stroke:"#67FF7F",strokeWidth:"5.5",strokeLinecap:"round"}),o.createElement("path",{d:"M247.047 13.6724C242.127 26.6618 233.88 55.8409 227.915 67.7704",stroke:"#67FF7F",strokeWidth:"5.5",strokeLinecap:"round"}),o.createElement("path",{d:"M214.06 32.8047C230.842 33.737 255.224 44.4138 269.478 53.9161",stroke:"#67FF7F",strokeWidth:"5.5",strokeLinecap:"round"}))}function NS(e){return o.createElement(eg.fu,{name:"Continue Duplication after Verification Modal"},o.createElement(r$.XV,{headerSize:"hidden",maxWidth:348,containerClassName:"continue_after_verification--modalContainer--L-0LF",innerContainerClassName:"continue_after_verification--innerModal--JmgbP",title:" ",onClose:e.onClose,paddingLeft:40,paddingRight:40},o.createElement("div",{className:k.cx.mxAuto.$},o.createElement(NC,null)),o.createElement("h1",{className:"continue_after_verification--title---5Cuw"},(0,A.tx)("community.duplicate_modal.youre_all_set")),o.createElement("div",null,(0,A.tx)("community.duplicate_modal.youve_verified_your_email_at",{userEmail:o.createElement("b",null,e.userEmail)})),o.createElement(ts.LA,{fullWidth:!0,onClick:e.onDuplicateClick,type:"button",role:"button",trackingProperties:{trackingDescriptor:tZ.c.CONTINUE_TO_FILE}},(0,A.tx)("community.duplicate_modal.continue_to_file"))))}let Nk=(0,ad.Ju)(function(e){let t=(0,s.d4)(e=>e.user?.email),a=(0,s.wA)(),r=(0,s.d4)(t=>t.hubFiles[e.hubFileId]),n=pc.mC(pN.ts.loadingKeyForPayload({hubFileId:e.hubFileId})),i=(0,eI._6)(),l=()=>{a(ep.Ce())};return(o.useEffect(()=>{r||a(pN.ts({hubFileId:e.hubFileId}))},[a,r,e.hubFileId]),n)?t&&(r||!n)?o.createElement(NS,{onClose:l,userEmail:t,onDuplicateClick:()=>{a(tS.b({signed_up_from_community:!0}));let t=NT.gE(e=>{a((0,ep.to)({type:NI._,data:{payload:e}}))},{isFreemiumPreview:e.isFreemiumPreview});l(),a(t(r)),new URLSearchParams(m.Ay.location.search).has(cj._O)&&a(ea.$T({...i,triggerFreemiumPreview:void 0}))}}):(l(),null):null},"ContinueAfterVerificationModal");var NA=a(186799),NR=a(472503);function NL(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.fileImport.step),r=(0,NA.B2)().unwrapOr(!1),[n,i]=o.useState(!1),l=o.useCallback(()=>i(!0),[]),c=o.useCallback(()=>i(!1),[]),d=o.useCallback(e=>{i(!1),r&&t((0,NA.b6)({dataTransfer:e}))},[t,r]);return o.createElement(B.Y,{className:k.cx.flex.flexColumn.$,isDragTarget:NA.al,onTargetDragEnter:l,onTargetDragLeave:c,onTargetDrop:d},e.children,r&&o.createElement(ND,{step:a,dragging:n}))}function ND({step:e,dragging:t}){switch(e){case NR.Y5.CONFIRM_PDF_IMPORT:return null;case NR.Y5.START:case NR.Y5.FILE_IMPORT_WITH_CANCELED_PDF:case NR.Y5.FILE_IMPORT_WITH_CONFIRMED_PDF:return o.createElement("div",{className:t?"file_browser_drop_zone--dragTargetDragging--giyPY file_browser_drop_zone--dragTargetNormal--TOR0f":"file_browser_drop_zone--dragTargetNormal--TOR0f"});default:(0,x.xb)(e)}}let NP="file_browser_view--filebrowserHtml--v2BLN",NF="file_browser_view--filebrowserBody--6MX2i",NO="file_browser_view--desktop--5VrC1";function NM(){let e=(0,s.wA)(),t=(0,eb.dq)(),a=(0,ev.Um)(),r=(0,eN.iZ)(),n=(0,s.d4)(e=>e.userFlags),i=(0,eI._6)(),l=IB.q.useIsLoading(),x=(0,s.d4)(e=>e.payment),C=(0,s.d4)(e=>e.currentTeamId);!function(){let e=(0,s.Pj)(),t=o.useMemo(()=>(0,sZ.g)(),[]),a=(0,J.Rs)(ee.__y,{cacheNonce:t});o.useEffect(()=>{if("loaded"===a.status&&a.data.currentUser.assetTransferReload.status===to.tT.Loaded){let t=(0,to.oA)(a.data.currentUser.assetTransferReload);if(!t)return;let r=p.Ay().user_data?.id,n=e.getState(),i="folder"===n.selectedView.view&&n.selectedView.folderId===t.folderId,l="team"===n.selectedView.view&&n.selectedView.teamId===t.teamId,o="folder"===n.selectedView.view&&n.folders[n.selectedView.folderId],s=o&&o.team_id===t.teamId,c=t.folderId?i:l||s,d={view:"folder",folderId:t.folderId||""},m={view:"team",teamId:t.teamId||"",teamViewTab:Ef.A.HOME};if(r&&t.userId===r){let a={userId:t.userId,orgId:t.destOrgId},r=t.folderId?d:m;if(c){let n=t.folderId?(0,A.t)("realtime.asset_reload.project_has_been_transferred_redirecting"):(0,A.t)("realtime.asset_reload.team_has_been_transferred_redirecting");e.dispatch(aD.F.enqueue({message:n})),setTimeout(()=>{e.dispatch(e_._l({workspace:a,view:r}))},2e3)}else e.dispatch(ea.Dl({now:!0}))}}},[e,a])}(),(0,u.h)(()=>{r&&e(Iq.Jw())}),(0,g.IT)((0,Nb.XZ)({currentOrgId:t??void 0,currentTeamId:C??void 0,fileTags:["figjam_template","figma_basics"]}),{enabled:(0,p.kc)().create_starter_files_from_file_browser&&n0.Gn.includes(i.view)});let[S,k]=o.useState(0),[R,L]=o.useState(0),[D,P]=o.useState(!1);(0,u.h)(()=>(document.body.classList.add(NF),document.documentElement.classList.add(NP),(0,dR.OS)(e),(0,tt.I0)(i),(0,h.hW)("exp_aa_test_file_browser_view").catch(f.lQ),"communityHub"===i.view&&function(e,t){let a=t.figjam_editor_onboarded||(0,NN._q)(t)||t.editor_community_duplicate_onboarded||t.orgs_onboarded||t.welcome_onboarded,r=(0,bt.QL)("after-auth-duplicate-file-id"),n=(0,bt.QL)("show_eula");r&&(n?e((0,ep.to)({type:Nx.F,data:{hubFileId:r}})):a||e((0,ep.to)({type:Nk,data:{hubFileId:r}})))}(e,n),()=>{document.body.classList.remove(NF),document.documentElement.classList.remove(NP),e(ep.AS())})),o.useEffect(()=>{if(d.eD||(0,c.ce)()){let e=document.createElement("div");return e.classList.add("file_browser_view--desktopBackground--kte3I"),document.body.appendChild(e),document.body.classList.add(NO),()=>{document.body.classList.remove(NO),document.body.removeChild(e)}}},[]);let F=(0,_.ZC)(i);o.useEffect(()=>{F&&F!==i&&((0,Nw.SW)(F,i)&&window.scrollTo(0,0),D?P(!1):(k(R+1),L(R+1)))},[F,i,D,R]),o.useEffect(()=>{"teamCreation"===i.view&&i.fromNewTab&&e(e_.Dw({previousView:i.previousView,onSubmitReturnToPrevView:i.onSubmitReturnToPrevView,isEduTeam:i.isEduTeam}))},[i,e]);let O=(0,nX.d9)(i),M=E.g3&&!(0,p.kc)().file_browser_enable_mweb&&!O,B=(E.uG&&(0,p.kc)().file_browser_enable_mweb||E.mZ)&&!O;if("teamUpgrade"===i.view)return i.paymentStep===I$.tn.UPGRADE_NEW_TEAM?o.createElement(Nv,{selectedView:i}):(0,p.kc)().campfire_cart?o.createElement(v.q,{selectedView:i}):o.createElement(b.h,{selectedView:i});if("addAnnualPlan"===i.view)return o.createElement(NE,{selectedView:i});if("teamCreation"===i.view)return i.fromNewTab?null:o.createElement(Ni,{selectedView:i});if("addCollaborators"===i.view)return o.createElement(IY,{selectedView:i});if("orgSelfServe"===i.view){let e=(0,p.kc)().campfire_cart?w.GJ:T.N7;return o.createElement(e,{step:i.step||h3.X1.Initial,initialDesignSeats:i.initialDesignEditors||0,orgMigrated:!!i.orgMigrated,dropdownShown:a,newTeamProps:i.newTeamProps,upsellSource:i.upsellSource})}if("teamRestore"===i.view)return o.createElement(Nd,{selectedView:i});if("promoReview"===i.view)return o.createElement(I.z,{promo:x?.promo,selectedView:i});else if("eduReview"===i.view)return o.createElement(N.w,{selectedView:i});if(!r){let{content:e}=Eu(i);return e?m.Ay.reload("Logged-out Community Hub"):(console.error(`Signed out page: unrecognized route ${m.Ay.location.pathname}, redirecting to /`),m.Ay.redirect("/")),null}if((0,p.kc)().ps_benchmark&&!t&&!C)return console.error("No current organization or team plan set for user. Redirecting to /files"),m.Ay.redirect("/files"),null;let U=M&&o.createElement(y.R,{userIdForTracking:r?.id,renderBlockingPrompt:!0});return o.createElement(I3.C.Provider,{value:{goBack:()=>{R>0&&(history.back(),L(R-1),P(!0))},goForward:()=>{R<S&&(history.forward(),L(R+1),P(!0))},canGoBack:R>0,canGoForward:R<S}},M?U:o.createElement(o.Fragment,null,B&&o.createElement(y.R,{userIdForTracking:r?.id}),o.createElement(NL,null,o.createElement(I2,null),o.createElement(I6,null),o.createElement(IP,{showingFileBrowserLoader:l}))))}},66432:(e,t,a)=>{a.d(t,{X:()=>n});var r=a(411855);let n=(0,a(672517).tf)(function(e){return r.createElement("div",{onClick:e.onClick},e.children)})},658386:(e,t,a)=>{a.d(t,{O:()=>n});var r=a(411855);function n(e){return r.createElement(r.Fragment,null,r.createElement("div",{className:"full_width_page--closeMenu--AW-0T"},e.menu),r.createElement("div",{ref:e.pageRef,className:"full_width_page--fullWidthPage--AfTzb overflow--overflowYAuto--nfK38 overflow--momentumScroll--qtsu7",...e}))}},855736:(e,t,a)=>{a.r(t),a.d(t,{FOLDER_TEAM_ACCESS_CHANGE_DROPDOWN:()=>er,FolderCreationModal:()=>ea,FolderTeamAccessRow:()=>en});var r=a(411855),n=a(188507),i=a(367253),l=a(966712),o=a(915440),s=a(268537),c=a(946689),d=a(493323),m=a(574176),u=a(939863),_=a(694443),p=a(738269),g=a(270056),f=a(662275),E=a(672517),h=a(385111),y=a(860178),v=a(99506),b=a(279453),w=a(623746),T=a(643067),I=a(243987),N=a(147206),x=a(297536),C=a(389643),S=a(206193),k=a(668860),A=a(501256),R=a(143678),L=a(613077),D=a(320063),P=a(374626),F=a(762638),O=a(456104),M=a(582947),B=a(397065),U=a(340514),V=a(864114),H=a(493364),W=a(463546);let j=(0,M.r1)("seen_sharing_clarity_project_modal_overlay"),G="sc_project_creation_permission_onboarding_key";function $(){let e=(0,P.md)(j),{show:t,isShowing:a,complete:n}=(0,O.e)({overlay:W.QpH,priority:B.N.DEFAULT_MODAL},[e]);(0,D.h)(()=>{t({canShow:e=>!e})});let i=r.createElement("a",{href:"https://help.figma.com/hc/en-us/articles/360038006494-Create-a-new-project",className:F.cx.colorTextOnbrand.underline.$},(0,u.tx)("rcs.sharing_clarity.learn_more"));return r.createElement(U.rq,{isShowing:a,title:(0,u.tx)("rcs.sharing_clarity.project_creation_permissions_title"),description:r.createElement("p",null,(0,u.tx)("rcs.sharing_clarity.project_creation_permissions_description",{learnMoreLink:i})),trackingContextName:"Sharing Clarity Project Creation Permission Onboarding",onClose:n,targetKey:G,arrowPosition:H.F_.LEFT_TITLE,zIndex:V.R.MODAL,emphasized:!0,disableHighlight:!0})}var z=a(988722),Y=a(585878),K=a(542059),Q=a(299410),X=a(268787),q=a(479842),J=a(515471);let Z="folder_creation_modal--sectionHeader--EcWYc text--fontPos11--2LvXf text--_fontBase--QdLsd";var ee=a(289298),et=a(562128);function ea(e){let t=(0,n.wA)(),[a,s]=r.useState(""),[m,_]=r.useState(!1),[I,D]=r.useState(0),[P,F]=r.useState(v.eD.TEAM_ACCESS_EDIT),O=h.h.useTrackingContext({trigger:S.b.FOLDER_CREATION_MODAL}),M=(0,n.d4)(e=>e.contacts),B=(0,n.d4)(e=>e.dropdownShown),U=(0,n.d4)(e=>e.autocomplete),V=(0,y.iZ)(),H=(0,o.Rs)(b.mCn,{teamId:e.teamId}),W=(0,l.kc)().sc_workspace_audience,j=r.useMemo(()=>{if("loading"===H.status||!H.data)return null;let t=H.data.team;if(!t)return null;let a="loaded"===t.workspace.status?t.workspace.data:void 0;return{team:{id:e.teamId,name:t.name,imgUrl:t.imgUrl,subscription:t.subscription,student_team:!!t.studentTeamAt,grace_period_end:t.gracePeriodEnd,restrictions_list:t.restrictionsList,canAdmin:t.canAdmin,canEdit:t.canEdit,sharing_audience_control:t.sharingAudienceControl},org:t.org&&{id:t.org.id,name:t.org.name,img_url:t.org.imgUrl,org_domains:(0,w.vy)(t.org.orgDomains),domain_capture:t.org.domainCapture,invite_whitelist_guest_invite_setting:t.org.inviteWhitelist?.guestInviteSetting}||null,orgUser:t.org&&t.org.currentBaseOrgUser,workspace:a}},[H,e.teamId]),z=j&&j.team,K=j&&j.org,J=K&&K.org_domains?K.org_domains:{domains:[],isFetching:!1,fetchedAt:null},ee=r.useCallback(()=>z&&z.sharing_audience_control!==v.PQ.ORG_EDIT&&z.sharing_audience_control!==v.PQ.ORG_VIEW?z.sharing_audience_control===v.PQ.WORKSPACE_EDIT||z.sharing_audience_control===v.PQ.WORKSPACE_VIEW?Q._9.WORKSPACE:Q._9.INVITE_ONLY:Q._9.ORG,[z]),et=r.useCallback(()=>z&&(z.sharing_audience_control===v.PQ.ORG_EDIT||z.sharing_audience_control===v.PQ.WORKSPACE_EDIT)?Q.J4.EDIT:Q.J4.VIEW,[z]),[ea,er]=r.useState(ee()),[ei,el]=r.useState(et()),[eo,es]=r.useState(k.e6.EDITOR);r.useEffect(()=>{er(ee()),el(et())},[ee,et]);let ec=()=>{1===I?D(0):(t(f.Lo()),t(p.bx()))},ed=e=>(0,x.t9)(e,K,J),em=e=>(0,x.yI)(e,M.usersByEmail[e]||e,K,J,V.email),eu=()=>K&&K.domain_capture&&J.domains.length>0?(0,A.Z)(U).filter(e=>(0,i.xf)(e)&&!(0,T.H_)(J.domains,e)):[],e_=e=>{if(K&&K?.invite_whitelist_guest_invite_setting==null&&e.length>0){t((0,f.to)({type:q.F,data:{emails:e,onConfirm:()=>{ep()},popStack:!0,orgName:K.name}}));return}},ep=()=>{let r;ea===Q._9.ORG?r=ei===Q.J4.EDIT?v.PQ.ORG_EDIT:v.PQ.ORG_VIEW:ea===Q._9.WORKSPACE?r=ei===Q.J4.EDIT?v.PQ.WORKSPACE_EDIT:v.PQ.WORKSPACE_VIEW:ea===Q._9.INVITE_ONLY&&(r=v.PQ.INVITE_ONLY),t(g.vt({shouldRedirect:!e.modalShown,name:a.trim(),teamId:e.teamId,isInviteOnly:void 0,isViewOnly:void 0,sharingAudienceControl:K?r:void 0,teamAccess:P,inviteEmails:(0,A.Z)(U),inviteLevel:eo,orgId:K?.id,onFolderCreated:e.onFolderCreated}))};return r.createElement(E.fu,{name:R.e0.CREATE_NEW_PROJECT_MODAL,properties:{teamId:z?.id,...O}},r.createElement(Y.XV,{title:0===I?(0,u.t)("project_creation.create_project"):(0,u.t)("project_creation.add_people_to_project_name",{projectName:a}),onClose:ec,maxWidth:468},j?r.createElement("div",{className:"folder_creation_modal--modalContainer--DmgME"},0===I?r.createElement(r.Fragment,null,r.createElement("div",{className:Z},(0,u.t)("project_creation.name")),r.createElement(c.ks,{className:"folder_creation_modal--folderNameInput--Lcn4c",onChange:e=>s(e.target.value),onFocus:()=>_(!0),onBlur:()=>_(!1),value:a,autoFocus:!0,required:!0,maxLength:c.wG,minLength:1,placeholder:(0,u.t)("project_creation.ex_growth_experiments"),"aria-label":(0,u.t)("project_creation.project_name")}),0===a.trim().length&&!m&&r.createElement("div",{className:"folder_creation_modal--inputErrorMessage--AGzQC"},(0,u.t)("project_creation.project_name_empty")),K&&z&&r.createElement(r.Fragment,null,r.createElement("div",{className:Z,"data-onboarding-key":G},(0,u.t)("project_creation.who_has_access")),r.createElement($,null),r.createElement(Q.YU,{resourceType:v.vt.FOLDER,value:ea,onChange:er,org:K,team:z,audienceAccessLevel:ei,workspace:W?j.workspace:void 0}),ea!==Q._9.INVITE_ONLY&&r.createElement(r.Fragment,null,r.createElement("div",{className:Z},(0,u.t)("folder_permissions_modal.what_they_can_do")),r.createElement(Q.Iz,{selectedPermissionsLevel:ei,setSelectedPermissionsLevel:el}),r.createElement("div",{className:"folder_creation_modal--subtitle--H3qLc text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos11--2LvXf text--_fontBase--QdLsd"},ei===Q.J4.VIEW?(0,u.t)("project_creation.can_view_and_comment"):(0,u.t)("project_creation.can_create_and_edit_files"))))):(()=>{let e=K?K.id:null,a=j&&j.orgUser,n=[k.e6.EDITOR,k.e6.VIEWER];return r.createElement("div",{className:"folder_creation_modal--stepTwoContainer--7Oi4o"},r.createElement(L.e,{autocomplete:U,dispatch:t,dropdownShown:B,dropdownKey:"permissions-invite-dropdown",inviteLevel:eo,onInviteLevelChange:es,getSelectText:N.C1,options:n,searchResultToken:ed,fetchAsyncSearchResults:t=>(0,C.Wj)(t,M.usersByEmail,V,[],e,null,null,a?.permission===v._D.GUEST),searchResults:e=>(0,C.Uj)(e,M.usersByEmail,V,[]),validateToken:em,TokenComponent:X.g,SearchResultComponent:X.o,joinLinkShown:!1,shouldAutoFocus:!0,placeholderText:(0,u.t)("team_creation.add_a_name_or_email")}),z&&r.createElement(en,{team:z,teamAccess:P,setTeamAccess:F,orgId:e}))})(),r.createElement("div",{className:"folder_creation_modal--bottomRow--CWsIx"},r.createElement("div",{className:"folder_creation_modal--footer--9Hie8 folder_creation_modal--subtitle--H3qLc text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,u.tx)("project_creation.step_number_of_max_steps",{currentStep:I+1,maxSteps:2})),r.createElement("div",{className:"folder_creation_modal--buttons--6cjVs"},r.createElement(c.tM,{onClick:ec},0===I?(0,u.tx)("project_creation.cancel"):(0,u.tx)("project_creation.back")),r.createElement(c.vd,{onClick:()=>{if(0===I)D(1);else if(K){let e=eu();e.length>0?e_(e):ep()}else ep()},disabled:0===I&&0===a.trim().length},0===I?(0,u.tx)("general.continue"):(0,u.tx)("project_creation.create_project"))))):r.createElement("div",{className:"folder_creation_modal--loading--9KmQd"},r.createElement(d.qc,null))))}let er="FOLDER_TEAM_ACCESS_CHANGE_DROPDOWN";function en(e){let t=t=>{(0,I.w5)(e.team)?e.setTeamAccess(t):(e.setTeamAccess(v.eD.TEAM_ACCESS_EDIT),t===v.eD.TEAM_ACCESS_VIEW?i((0,f.to)({type:K.Ni,data:{team:e.team,editorType:null,upsellSource:S.b.FOLDER_CREATION_MODAL}})):i((0,f.to)({type:K.Dp,data:{team:e.team,editorType:null,upsellSource:S.b.FOLDER_CREATION_MODAL}})))},a=r.createElement(_.n,{team:e.team,size:24,avatarSvg:et.A,opacity:e.teamAccess===v.eD.TEAM_ACCESS_DISABLED?"0.7":void 0}),i=(0,n.wA)(),l=(0,n.d4)(e=>e.dropdownShown),o=e.team.id&&e.team.canEdit,c=()=>l&&l.type===er,d=null,g={};return c()&&l.data&&l.data.position&&(g={...l.data.position}),r.createElement(r.Fragment,null,r.createElement("div",{className:J.xf},r.createElement("div",{className:"folder_creation_modal--teamAvatarContainer--KL-B-"},a),r.createElement("div",{className:J.$S},r.createElement("div",{className:J.yb},r.createElement("div",{className:e.teamAccess===v.eD.TEAM_ACCESS_DISABLED?"folder_creation_modal--teamNameFaded--ugwhq folder_creation_modal--teamName--P9n7q ellipsis--ellipsis--Tjyfa folder_creation_modal--fadedText--KyLSq":"folder_creation_modal--teamName--P9n7q ellipsis--ellipsis--Tjyfa"},e.team.name),r.createElement(r.Fragment,null,e.teamAccess===v.eD.TEAM_ACCESS_DISABLED&&o&&r.createElement("button",{className:J.KU,onClick:()=>t(v.eD.TEAM_ACCESS_EDIT)},(0,u.tx)("folder_access_row.give_access")),e.teamAccess!==v.eD.TEAM_ACCESS_DISABLED&&o&&r.createElement(r.Fragment,null,r.createElement("button",{ref:e=>{e&&(d=e)},onClick:()=>{if(c())i(p.oB());else if(d){let t=d.getBoundingClientRect(),a=e.teamAccess===v.eD.TEAM_ACCESS_VIEW;i(p.j7({type:er,data:{position:{top:t.top+-((a?1:0)*24),bottom:"auto",left:t.left,right:"auto"}}}))}},className:J.Lt,"data-onboarding-key":z.I},r.createElement("span",null,e.teamAccess===v.eD.TEAM_ACCESS_VIEW?(0,u.t)("permissions.level_name.can_view"):(0,u.t)("permissions.level_name.can_access")),r.createElement("div",{className:J.Lo},r.createElement(m.B,{svg:ee.A}))),r.createElement(z.S,null)),c()&&r.createElement(s.ms,{className:J.N1,style:{position:"fixed",...g}},r.createElement("div",{"data-testid":"folder-level-edit"},r.createElement(s.MM,{checked:e.teamAccess===v.eD.TEAM_ACCESS_EDIT,onClick:()=>t(v.eD.TEAM_ACCESS_EDIT)},(0,u.tx)("permissions.level_name.can_access"))),r.createElement("div",{"data-testid":"folder-level-view"},r.createElement(s.MM,{checked:e.teamAccess===v.eD.TEAM_ACCESS_VIEW,onClick:()=>t(v.eD.TEAM_ACCESS_VIEW)},(0,u.tx)("permissions.level_name.can_view"))),r.createElement(s.wv,null),r.createElement(s.c$,{onClick:()=>t(v.eD.TEAM_ACCESS_DISABLED)},(0,u.tx)("folder_access_row.remove"))))))))}},365879:(e,t,a)=>{a.d(t,{I:()=>m});var r=a(411855),n=a(188507),i=a(776250),l=a(939863),o=a(688083),s=a(451e3),c=a(945020),d=a(732813);function m(e){let t=(0,n.wA)(),a=r.useCallback(a=>{a.stopPropagation(),e.team.canEdit&&((0,i.sx)("New Folder",{trackingContext:e.trackingContextName}),t((0,o.SX)({where:s.Ah.FolderListView,team:{...(0,c.Ws)(e.team),canEdit:e.team.canEdit,canEditTeamContents:e.team.canEdit,canAdmin:e.team.canAdmin}})))},[t,e.team,e.trackingContextName]);return e.team.canEdit?r.createElement(d.f,{data_tooltip:(0,l.t)("sidebar.new_project"),data_onboarding_key:"new-project-icon",innerText:"Creates new project",onClick:a,isBackgroundTransparent:e.isBackgroundTransparent}):null}},49891:(e,t,a)=>{a.d(t,{Mv:()=>I,tG:()=>b});var r=a(411855),n=a(966712),i=a(498750),l=a(946689),o=a(762638),s=a(881388),c=a(939863),d=a(662275),m=a(720647),u=a(99506),_=a(820113),p=a(243987),g=a(265361),f=a(237870),E=a(488578),h=a(474263);function y(e){let t=r.useRef(null),[a,u]=r.useState(!1),[f,E]=r.useState(null),y=new _.vr(e.currency),v=!e.allowZeroSeats,b=e.numAnnualEditors,T=b>0,N=t=>{e.onNumAnnualEditorsChange(t)},x=r.createElement("button",{type:"button",className:h.J,"data-testid":`add-${e.editorType}-seats`,onClick:()=>u(!0)},(0,c.tx)("payments.step_pay.add_more_seats"));return r.createElement("div",{className:h.wD,key:`${e.editorType}-step-pay-row`,"data-testid":`${e.editorType}-step-pay-row`},r.createElement("div",null,r.createElement("div",{className:h.Uu},r.createElement("span",null,(0,c.tx)("payments.step_pay.editors_on_annual_plan.seat_rename",{numAnnualEditors:e.numAnnualEditors,numAnnualEditorsNumberOrInput:a?r.createElement(l.ks,{ref:t,className:h.jD,value:null==f?e.numAnnualEditors:f,onChange:e=>{E(e.target.value)},onBlur:()=>{let t=parseInt(f);if(!isNaN(t)){if(t<0)e.dispatch(s.s.error((0,c.t)("flash.no_negative_seats")));else if(0===t)v?e.dispatch(s.s.error((0,c.t)("flash.at_least_one_editor.seat_rename"))):N(0);else if(t>p.m){let t=r.createElement("a",{href:`mailto:${(0,n.W4)()}`},(0,c.tx)("flash.annual_plan.contact_support_link"));e.dispatch(s.s.error((0,c.tx)("flash.annual_plan.contact_support",{contactSupport:t,maxAnnualSubscriptions:p.m})))}else t>100?e.dispatch(d.to({type:I,data:{numAnnualEditors:t,onConfirm:()=>N(t)}})):N(t)}E(null),u(!1)},onKeyDown:e=>{let t=e.target;e.keyCode===i.Uz.ENTER?(e.preventDefault(),t.blur()):e.keyCode===i.Uz.ESCAPE&&u(!1)}}):e.numAnnualEditors,productType:(0,g.E)((0,m.vc)(e.editorType))}))),!a&&r.createElement("div",{className:o.cx.flex.flexColumn.gap4.$},e.editorBreakdown,r.createElement("p",{className:h.eK},(0,c.tx)("payments.step_pay.add_more_editors",{addMoreSeats:x})))),r.createElement(w,{amount:e.totalCost,lineItem:T?b>0?(0,c.t)("payments.step_pay.price_per_editor_12_months",{price:y.formatMoney(e.annualMonthlyCost,{showCents:!1}),editorString:(0,c.t)("payments.step_pay.num_editors.seat_rename",{numEditors:b})}):(0,c.t)("payments.step_pay.none_selected"):void 0,shouldShowAmount:e.numAnnualEditors>0,currency:e.currency}))}function v(){return r.createElement("div",{className:h.me})}function b(e){let{numAnnualDesignEditors:t,numAnnualWhiteboardEditors:a,isTeamPro:n,totalDesignEditors:i,totalWhiteboardEditors:l,monthlyDesignAmount:o,monthlyFigjamAmount:s,annualMonthlyDesignAmount:d,annualMonthlyFigjamAmount:m}=e,_=i-t,p=t*d*12+(!n&&_>0?_*o:0),g=l-a,f=a*m*12+(!n&&g>0?g*s:0);return r.createElement("div",null,r.createElement(y,{dispatch:e.dispatch,editorType:u._Y.DESIGN,onNumAnnualEditorsChange:e.onNumAnnualDesignEditorsChange,numAnnualEditors:t,allowZeroSeats:0!==a,currency:e.currency,totalCost:p,annualMonthlyCost:d}),r.createElement(y,{dispatch:e.dispatch,editorType:u._Y.WHITEBOARD,onNumAnnualEditorsChange:e.onNumAnnualWhiteboardEditorsChange,numAnnualEditors:a,allowZeroSeats:0!==t,currency:e.currency,totalCost:f,annualMonthlyCost:m}),r.createElement(v,null),r.createElement("div",{className:h.wD},r.createElement("div",{className:h.YK},(0,c.tx)("payments.step_pay.subscription")),r.createElement(T,{amount:p+f,plusTax:!0,dataTestId:"subscription-total-cost",currency:e.currency})))}function w(e){let t=new _.vr(e.currency);return r.createElement("div",{className:h.R6},e.shouldShowAmount?t.formatMoney(e.amount,{showCents:!1}):"--",r.createElement("div",{className:o.cx.flex.flexColumn.gap4.$},e.lineItem&&r.createElement("div",{className:h.eK},e.lineItem)))}function T(e){let t=new _.vr(e.currency);return r.createElement("div",{className:h.X5},r.createElement("p",{className:h.IW,"data-testid":e.dataTestId},t.formatMoney(e.amount,{showCents:!1})),e.plusTax&&r.createElement("p",{className:h.B8},(0,c.tx)("payments.step_pay.plus_sales_tax")))}let I="confirm-seats-modal";function N(e){let t=e.modalShown.data.numAnnualEditors;return r.createElement(E.Rw,{confirmationTitle:(0,c.t)("payments.step_pay.thats_a_lot_of_seats",{numAnnualEditors:t}),onConfirm:e.modalShown.data.onConfirm,confirmText:(0,c.t)("payments.step_pay.confirm_seats"),...e},(0,c.tx)("payments.step_pay.happy_you_want_to_buy_seats",{numAnnualEditors:t}))}(0,f.qK)(I,e=>r.createElement(N,{...e}))},487973:(e,t,a)=>{a.r(t),a.d(t,{AddPinModal:()=>y});var r=a(411855),n=a(188507),i=a(935283),l=a(609494),o=a(915440),s=a(776621),c=a(304783),d=a(881388),m=a(939863),u=a(809840),_=a(662275),p=a(988022),g=a(279453),f=a(936682),E=a(515669),h=a(119735);function y({fileKey:e,source:t,open:a,onClose:i}){let u=(0,n.wA)(),y=(0,E.p)((0,m.t)("file_browser.pinning.pin_modal.confirmation_bell"),"file-browser-workspace-add-pin"),b=(0,o.Rs)(g.wtK,{fileKey:e}),w=function(e){let[t,a]=r.useState(!1),n="loaded"===e.status&&e.data.file&&!e.data.file.canPinToWorkspace&&e.data.file.canEdit;return n&&!t&&a(!0),n||t}(b);if("loaded"!==b.status)return null;let{file:T}=b.data;if(!T)return(0,s.$D)(c.e.WAYFINDING,Error("AddPinModal unable to lookup file by ID")),u(_.Lo()),null;let I=T.team?.workspace;if(!I)return(0,s.$D)(c.e.WAYFINDING,Error("AddPinModal opened for file with no workspace")),u(_.Lo()),null;let N=(0,h.KR)(T),x=async e=>{try{await f.p.pinFile({resourceType:h.AH,resourceId:I.id,fileKey:T.key,description:e,shouldUpdatePermissions:w}),(0,p.E9)("file_browser_file_pinned_to_resource",T,{resourceType:h.AH,resourceId:I.id,source:t,pinDescription:(0,l._Z)(e)}),y(I.id)}catch(e){throw u(d.s.error((0,m.t)("file_browser.pinning.pin_modal.error"))),e}},C=w?r.createElement(v,{file:T,workspace:I}):null;return r.createElement(E.N,{title:(0,m.t)("file_browser.pinning.pin_modal.pin_file_to_workspace"),confirmText:(0,m.t)("file_browser.pinning.pin_file"),onSubmit:x,file:N,initialDescription:null,warningContent:C,open:a,onClose:i})}function v({file:e,workspace:t}){let a=e.parentOrgId;(0,i.B1)(a);let l=(0,n.d4)(({orgById:e})=>e[a].name);return r.createElement(u.E,null,(0,m.tx)("file_browser.pinning.update_permissions.content",{workspaceName:t.name,permission:r.createElement(u.E,{fontWeight:"bold"},(0,m.tx)("file_browser.pinning.update_permissions.content.permission",{orgName:l}))}))}},923967:(e,t,a)=>{a.r(t),a.d(t,{DeletePinModal:()=>h});var r=a(411855),n=a(188507),i=a(609494),l=a(915440),o=a(776621),s=a(304783),c=a(886839),d=a(881388),m=a(939863),u=a(988022),_=a(860178),p=a(99506),g=a(279453),f=a(936682),E=a(515669);function h({pinnedFileId:e,open:t,onClose:a}){let h=(0,_.TA)(),y=(0,n.wA)(),v=(0,E.p)((0,m.t)("file_browser.pinning.delete_pin_modal.confirmation_bell"),"file-browser-workspace-delete-pin"),[b,w]=r.useState(!1),T=(0,l.Rs)(g.qBf,{pinnedFileId:e});if("loaded"!==T.status)return null;let{pinnedFile:I}=T.data;if(!I)return(0,o.$D)(s.e.WAYFINDING,Error("DeletePinModal unable to lookup pinned file by ID")),a(),null;if(I.resourceType!==p.rP.WORKSPACE)return(0,o.$D)(s.e.WAYFINDING,Error("DeletePinModal opened for pinned file with non-workspace resource type"),{extra:{resourceType:I.resourceType}}),a(),null;let N=async t=>{t.preventDefault();try{w(!0),await f.p.deletePin({pinnedFileId:e}),(0,u.E9)("file_browser_file_unpinned_from_resource",I.file,{resourceId:I.resourceId,resourceType:I.resourceType,isPinCreator:I.creator?.id===h,pinDescription:(0,i._Z)(I.description)}),v(I.resourceId),a()}catch(e){y(d.s.error((0,m.t)("file_browser.pinning.delete_pin_modal.error")))}finally{w(!1)}};return r.createElement(c.R,{title:(0,m.t)("file_browser.pinning.delete_pin_modal.header"),confirmText:(0,m.t)("file_browser.pinning.delete_pin_modal.confirm"),onConfirm:N,destructive:!0,isLoading:b,open:t,onClose:a},(0,m.t)("file_browser.pinning.delete_pin_modal.content"))}},542406:(e,t,a)=>{a.r(t),a.d(t,{EditPinModal:()=>f});var r=a(411855),n=a(188507),i=a(915440),l=a(776621),o=a(304783),s=a(881388),c=a(939863),d=a(662275),m=a(99506),u=a(279453),_=a(936682),p=a(515669),g=a(119735);function f({pinnedFileId:e,open:t,onClose:a}){let f=(0,n.wA)(),E=(0,p.p)((0,c.t)("file_browser.pinning.pin_modal.edit.confirmation_bell"),"file-browser-workspace-edit-pin"),h=(0,i.Rs)(u.vgO,{pinnedFileId:e});if("loaded"!==h.status)return null;let{pinnedFile:y}=h.data;if(!y)return(0,l.$D)(o.e.WAYFINDING,Error("EditPinModal unable to lookup pinned file by ID")),f(d.Lo()),null;if(y.resourceType!==m.rP.WORKSPACE)return(0,l.$D)(o.e.WAYFINDING,Error("EditPinModal opened for pinned file with non-workspace resource type"),{extra:{resourceType:y.resourceType}}),f(d.Lo()),null;let v=y.resourceId,b=async t=>{try{await _.p.updatePin({pinnedFileId:e,description:t}),E(v)}catch(e){throw f(s.s.error((0,c.t)("file_browser.pinning.pin_modal.edit.error"))),e}},w=(0,g.KR)(y.file);return r.createElement(p.N,{title:(0,c.t)("file_browser.pinning.pin_modal.edit_pin_description"),confirmText:(0,c.t)("file_browser.pinning.pin_modal.save"),onSubmit:b,file:w,initialDescription:y.description,open:t,onClose:a})}},515669:(e,t,a)=>{a.d(t,{N:()=>O,p:()=>M});var r=a(411855),n=a(188507),i=a(7760),l=a(421757),o=a(880112),s=a(609494),c=a(493323),d=a(773362),m=a(762638),u=a(939863),_=a(392592),p=a(172522),g=a(167893),f=a(738269),E=a(477782),h=a(611978),y=a(352898),v=a(629019),b=a.n(v),w=a(27050),T=a(377750),I=a(966712),N=a(374626),x=a(860601),C=a(827586),S=a(428322),k=a(883211),A=a(229443),R=a(896474),L=a(555648);function D({buttonClassName:e,onInsert:t,closeOnInsert:a}){let[n,i]=r.useState(null),l=r.useRef(null),o=r.useCallback(()=>{l.current&&i(l.current.getBoundingClientRect())},[i]),s=r.useCallback(e=>{t(e),a&&i(null)},[t,a,i]);return r.createElement("button",{className:e,ref:l,onClick:o},r.createElement(R.In,{icon:"smiley-32"}),n&&r.createElement(L._,{onInsert:s,onCancel:()=>i(null),targetRect:n}))}let P={library:{list:()=>Promise.resolve([]),search:()=>Promise.resolve([]),maxResultsLength:()=>0}};function F({placeholder:e,text:t,onChange:a,maxLength:i,onSubmit:l,textAreaClassName:o}){let c=(0,n.wA)(),d=N.zl.get(k.ph),[u,_]=r.useState(!1),p=r.useRef(null),g=r.useCallback(e=>{e.preventDefault(),e.stopPropagation(),p.current&&p.current.focus()},[]),f=(0,s.Kq)(t,{includeTrailingWhitespace:!0});return r.createElement("div",{className:"emoji_text_area--textAreaContainer--4FHeL",onClick:g},r.createElement(C.P,{className:b()(m.cx.flexGrow1.overflowAuto.maxWFull.borderBox.if(u,m.cx.bb1.bSolid.colorBorder).$,o),innerClassName:m.cx.hFull.$},r.createElement(A.iX,{dispatch:c,ref:p,typeahead:d,updateMessage:([e,t])=>{a(e)},placeholderText:e,mountInputFocused:!0,submitOnEnter:!1,onSubmit:l??x.lQ,messageMeta:t,mentionables:P,className:m.cx.pt16.px16.borderBox.if(u,m.cx.pb4).$,onUpdateTextArea:x.lQ,editorOnInsert:x.lQ,onFocus:x.lQ,onCancel:x.lQ,editorOnClear:x.lQ,setIsEditorFocused:x.lQ,currentOrgUsers:{orgUsers:{}}}),r.createElement(S.a,{onInitialLoad:e=>_(!e),onIntersectionChange:e=>_(!e.isIntersecting)})),r.createElement("div",{className:m.cx.flex.justifyBetween.itemsCenter.pl12.pr16.py12.$},r.createElement(D,{buttonClassName:"emoji_text_area--emojiPickerButton--CGYqF",onInsert:e=>{if(p.current){let t=((0,I.kc)().emoji_15_upgrade?T.dN:w.dN).get(e.id);t&&(p.current.insertEmoji(t),p.current.focus())}},closeOnInsert:!0}),i&&r.createElement("div",{className:m.cx.if(f>i,m.cx.colorTextDanger,m.cx.colorTextSecondary).cursorDefault.$},f,"/",i)))}function O({title:e,confirmText:t,onSubmit:a,file:n,initialDescription:_,warningContent:f,open:h,onClose:y}){let[v,b]=r.useState(_??[]),[w,T]=r.useState(!1),I=(0,E.fA)(n),N=(0,p.l)(n.folder_id),x=(0,s.Kq)(v,{includeTrailingWhitespace:!0}),C=x<=100&&x>0,S=r.useCallback(async()=>{if(C)try{T(!0),await a(v),y()}finally{T(!1)}},[a,C,y,v]),k=i.a.useModal({open:h,onClose:y}),A=r.createElement(r.Fragment,null,r.createElement("div",{className:m.cx.p16.gap16.flex.flexColumn.$},r.createElement("div",{className:m.cx.flex.flexColumn.gap16.$},r.createElement("div",null,r.createElement(d.e,{tile:I,borderRadius:6})),r.createElement("div",{className:m.cx.flex.flexRow.gap8.itemsCenter.$},r.createElement(g.x,{tile:I,usePageIcon:!0}),r.createElement("div",{className:m.cx.flex.flexColumn.gap2.flexGrow1.justifyCenter.overflowHidden.cursorDefault.$},r.createElement("div",{className:m.cx.textBodyLargeStrong.truncate.$},n.name),"loaded"===N.status&&N.data?r.createElement("div",{className:m.cx.colorTextSecondary.truncate.$},N.data):null))),r.createElement(F,{placeholder:(0,u.t)("file_browser.pinning.pin_modal.description_textarea_placeholder"),text:v,onChange:b,onSubmit:S,maxLength:100,textAreaClassName:m.cx.maxH100.$})),f?r.createElement("div",{className:m.cx.colorBgWarningTertiary.px16.py12.flex.columnGap8.$},r.createElement(o.R,{className:m.cx.flexShrink0.$}),r.createElement("span",null,f)):null);return r.createElement(i.a.Root,{manager:k,width:"lg"},r.createElement(i.a.Contents,null,r.createElement(i.a.Header,null,r.createElement(i.a.Title,null,e)),r.createElement(i.a.Body,{noPadding:!0},A),r.createElement(i.a.Footer,null,r.createElement(i.a.ActionStrip,null,r.createElement(l.$n,{variant:"secondary",onClick:y},(0,u.tx)("modal.cancel")),w?r.createElement(l.$n,{disabled:!0},r.createElement(c.kt,{className:m.cx.colorIconOnbrand.$})):r.createElement(l.$n,{disabled:!C,variant:"primary",onClick:S},t)))))}function M(e,t){let a=(0,n.wA)(),i=(0,h._6)();return r.useCallback(r=>{let n;("workspace"!==i.view||i.subView!==y.V0.DIRECTORY)&&(n={text:(0,u.t)("file_browser.pinning.pin_modal.confirmation_bell.view_workspace"),action:()=>{a(f.$T({view:"workspace",subView:y.V0.DIRECTORY,workspaceId:r,selectedTab:y.dN.TEAMS}))}}),a(_.F.enqueue({type:t,message:e,button:n}))},[a,e,t,i])}},600081:(e,t,a)=>{a.d(t,{J:()=>h});var r=a(411855),n=a(188507),i=a(946689),l=a(939863),o=a(799569);function s({header:e,onClose:t,rightTextCta:a,tilesContent:n}){return r.createElement("div",{className:"recommendation_banner--container--BEaKR"},r.createElement("div",{className:"recommendation_banner--headerContainer--4UjAz"},r.createElement("div",{className:"recommendation_banner--header--desVL text--fontPos13--xW8hS text--_fontBase--QdLsd"},e),r.createElement("div",{className:"recommendation_banner--headerRight--0PUxN"},r.createElement("div",{className:"recommendation_banner--rightTextCta--q0Iat text--fontPos11--2LvXf text--_fontBase--QdLsd"},a),r.createElement(o.Jn,{className:"recommendation_banner--closeButton--PIXj1",onClick:t}))),r.createElement("div",{className:"recommendation_banner--tilesContainer--WZvDf tiles_view--tilesGrid--gtDcv tiles_view--tiles--PQRwh"},n.map((e,t)=>r.createElement("div",{key:t,className:"recommendation_banner--tile--c1rU7"},e))))}var c=a(760824),d=a(672517),m=a(7e3),u=a(106472),_=a(746869),p=a(611047),g=a(218934),f=a(927625);let E=[{featureType:"unlimited_files_and_projects",getTileTitle:()=>(0,l.t)("team_view.pro_trials.feature_awareness_banner.consumption_limit"),imgSrc:"https://static.figma.com/uploads/7b0a8059eef8715404092dd314a2259303f727ed",gifSrc:"https://static.figma.com/uploads/519c3e21c17f32b5f0180b52d1e0f9ba6b1e6a93",href:"https://help.figma.com/hc/articles/360038006494"},{featureType:p.qv.COMPONENT_PUBLISHING,getTileTitle:()=>(0,l.t)("team_view.pro_trials.feature_awareness_banner.component_libraries"),imgSrc:"https://static.figma.com/uploads/597204c016801ba12cab10e9c048b1c6d5807a46",gifSrc:"https://static.figma.com/uploads/948d9b9b25fe5c298216981f3b67871986136b72",href:"https://help.figma.com/hc/articles/360041051154-Guide-to-libraries-in-Figma"},{featureType:p.qv.PASSWORD_PROTECTION,getTileTitle:()=>(0,l.t)("team_view.pro_trials.feature_awareness_banner.password_protection"),imgSrc:"https://static.figma.com/uploads/bd1e60801b4b2b5e3d8f85d570d909f8e6aecd46",gifSrc:"https://static.figma.com/uploads/c736fefeffa56ad1fef0e503f3a806a34376a24e",href:"https://help.figma.com/hc/articles/5726720100247-Add-password-protection-to-files"},{featureType:p.qv.OPEN_SESSIONS,getTileTitle:()=>(0,l.t)("team_view.pro_trials.feature_awareness_banner.collaboration"),imgSrc:"https://static.figma.com/uploads/d718a8c9af11f5689629e016beb629c0a1aded39",gifSrc:"https://static.figma.com/uploads/389ab0b9dcb7f7c2ce3b597b4b7aa8d12a762d79",href:"https://help.figma.com/hc/articles/4410786053911-Invite-visitors-to-an-open-session"},{featureType:"voting",getTileTitle:()=>(0,l.t)("team_view.pro_trials.feature_awareness_banner.voting"),imgSrc:"https://static.figma.com/uploads/07061babefc345310003bf470a357f7c1a4f039d",gifSrc:"https://static.figma.com/uploads/15206fd8262e4243eb5b6a466c4227a6f8e700e6",href:"https://help.figma.com/hc/articles/9359912208663-Run-voting-sessions-in-FigJam"},{featureType:p.qv.AUDIO,getTileTitle:()=>(0,l.t)("team_view.pro_trials.feature_awareness_banner.audio"),imgSrc:"https://static.figma.com/uploads/d44e0e27103010a5a793e2481a49b37baf284fe9",gifSrc:"https://static.figma.com/uploads/9320e75867473c558394562fe255795e975bac3e",href:"https://help.figma.com/hc/articles/1500004414622-Use-audio-to-chat-with-your-team"}];function h({teamId:e}){let t=(0,m.TN)(e),a=(0,n.wA)(),o=!!(0,u.q)({flag:"pro_trials_feature_awareness_banner_dismissed",teamId:e});return!_.ng.canSeeProTrialUx(t)||o?null:r.createElement(d.fu,{name:"Pro trials feature awareness banner",properties:_.ng.getTrackingProperties()},r.createElement("div",{className:"pro_feature_awareness_banner--container--Lxd1X"},r.createElement(s,{header:(0,l.tx)("team_view.pro_trials.feature_awareness_banner.title"),rightTextCta:r.createElement(i.Ph,{className:"pro_feature_awareness_banner--learnMoreLink--7R3te text--fontPos11--2LvXf text--_fontBase--QdLsd",trusted:!0,href:"https://www.figma.com/professional/",target:"_blank"},(0,l.tx)("team_view.pro_trials.feature_awareness_banner.learn_more")),onClose:()=>{a(c.bE({all_team_flags:[{team_id:e,flags:{pro_trials_feature_awareness_banner_dismissed:!0}}]}))},tilesContent:E.map(({getTileTitle:e,imgSrc:t,gifSrc:a,href:n,featureType:i},l)=>r.createElement(y,{key:l,getTileTitle:e,imgSrc:t,gifSrc:a,href:n,featureType:i}))})))}function y({getTileTitle:e,imgSrc:t,gifSrc:a,href:n,featureType:l}){let[o,s]=(0,r.useState)(!1);return r.createElement("div",{onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1)},r.createElement(g.zq,{image:r.createElement("div",{className:"pro_feature_awareness_banner--imageContainer--IezW9 pro_feature_awareness_banner--base_cardImageContainer--zhCs- pro_feature_awareness_banner--_hasBorder--lcXN7"},r.createElement("div",{className:"pro_feature_awareness_banner--imageAspectRatio--00Fbt"}),r.createElement("div",{className:"pro_feature_awareness_banner--imageWrapper--isZpL"},r.createElement(i.Ph,{trusted:!0,target:"_blank",href:n,trackingProperties:{featureType:l}},r.createElement(f.Ho,{image:o?a:t,isSet:!0,isWhiteboard:!1,hubFileId:void 0,alt:e(),includeChromiumDownscalingFix:!0})))),bottomRow:r.createElement("div",{className:"pro_feature_awareness_banner--tileTitle--bO70s text--fontPos13--xW8hS text--_fontBase--QdLsd"},e())}))}},805447:(e,t,a)=>{a.d(t,{J:()=>o});var r=a(411855),n=a(188507),i=a(48793),l=a(939863);function o({index:e}){let t=(0,n.d4)(e=>!!e.payment.promo);return r.createElement("div",{className:"team_creation_breadcrumbs--stepBreadcrumbs--tP08U step_breadcrumb--stepBreadcrumbs--E4Woe"},r.createElement(i.On,{selected:1===e,number:1,text:(0,l.t)("team_creation.name_your_team")}),r.createElement(i.On,{selected:2===e,number:2,text:(0,l.t)("team_creation.add_team_members")}),!t&&r.createElement(i.On,{selected:3===e,number:3,text:(0,l.t)("team_creation.finish_setup")}))}},336191:(e,t,a)=>{a.d(t,{X:()=>s,o:()=>o});var r=a(411855),n=a(629019),i=a.n(n),l=a(493323),o=(e=>(e.Medium="Medium",e.Large="Large",e))(o||{});function s(e){let t;return e.isLoading?r.createElement("div",{className:"tile_grid--loadingContainer--1gQIv"},r.createElement(l.kt,null)):!e.children||Array.isArray(e.children)&&!e.children.length?r.createElement("div",{className:"tile_grid--emptyContainer--y8P1H text--fontPos11--2LvXf text--_fontBase--QdLsd"},e.emptyView):(t="Large"===e.tileSize?"tile_grid--gridLarge--EZC2-":"tile_grid--gridMedium--fzult",r.createElement("div",{className:i()("tile_grid--gridContainer--cn4vx",e.containerClassName)},r.createElement("div",{className:t},e.children)))}},392922:(e,t,a)=>{a.d(t,{H:()=>v});var r=a(411855),n=a(188507),i=a(966712),l=a(939863),o=a(611886),s=a(351226),c=a(837324),d=a(162895),m=a(662275),u=a(694687),_=a(860178),p=a(215822),g=a(239671),f=a(407844),E=a(164795),h=a(146555);if(443==a.j)var y=a(967063);function v(e){let t=(0,_.iZ)(),a=(0,u.sZ)(),v=(0,n.wA)(),[b,w]=r.useState(!0),T=e.resource,I=(0,p.uF)(T),N=(0,h.o)(I,a,g.nT.Whiteboard);if(!b||!t||!(0,i.kc)().community_hub_admin_reviewer)return r.createElement(r.Fragment,null);function x(t){return"hub_file"===(0,c.Vm)(e.resource)}let C=x(e.resource)?(0,l.tx)("community.duplicate.duplicate"):(0,l.tx)("community.detail_view.try_it_out"),S={id:E.om.communityResourceInReviewBanner,bannerType:E.x1.INFO,icon:y.A,mainText:(0,l.t)("community.resource.admin_bypass_payment_banner.viewing_as_community_reviewer_admin"),description:(0,l.tx)("community.resource.admin_bypass_payment_banner.you_are_viewing_this_page_as_an_admin_reviewer"),button:{buttonText:C,onClick:()=>{if(x(e.resource)){let t=o.gE(e=>{v((0,m.to)({type:s._,data:{payload:e}}))},{adminReviewerOverride:!0});v(t(e.resource))}else v(d.aI({resource:T,fullscreenEditorType:N,isPlaygroundFile:!!(I.playground_fig_file||N===g.nT.DevHandoff)}))}},dismissible:!0,positionStatic:!0};return r.createElement(f.C,{content:S,editorType:g.nT.Design,onDismiss:()=>w(!1)})}},385422:(e,t,a)=>{a.d(t,{S:()=>k});var r=a(411855),n=a(188507),i=a(776250),l=a(966712),o=a(881388),s=a(939863),c=a(206144),d=a(952540),m=a(662275),u=a(931828),_=a(611978),p=a(860178),g=a(239671),f=a(583894),E=a(59530),h=a(407844),y=a(946689),v=a(493323),b=a(164795),w=a(478398),T=a(971951),I=a(894513),N=a(10388),x=a(247866);function C({isLoading:e,text:t}){return r.createElement("span",{style:{position:"relative"}},e?r.createElement("div",{className:T.sl},r.createElement(v.kt,{shouldMatchTextColor:!0})):void 0,r.createElement("span",{style:{opacity:e?0:1}},t))}var S=a(607121);function k(e){let[t,a]=r.useState(!1),[v,T]=r.useState(!1),k=(0,n.wA)(),A=(0,n.d4)(e=>e.userFlags),R=(0,p.iZ)(),L=(0,_._6)(),[D,P]=r.useState(!1),F=v||e.isFirstTimeLoading,O="isFirstTimeLoading"in e;if(D&&!O||!R)return r.createElement(r.Fragment,null);let{stripe_account_status:M}=R;if(!O&&(!M||M===f.P5.NONE))return r.createElement(r.Fragment,null);let B=M===f.P5.NONE&&(0,l.kc)().cmty_expand_extension_m10n||M===f.P5.ACCEPTED||F?{userFlag:E.WE,bannerContent:function({isLoading:e,onClick:t,showCTA:a}){let n=r.createElement(y.CY,{className:w.$J,target:"_blank",href:"https://help.figma.com/hc/articles/12067637274519-About-selling-Community-resources",trusted:!0},(0,s.t)("general.learn_more"));return{id:b.om.communityM10nApprovalBanner,bannerType:b.x1.INFO,mainText:(0,l.kc)().cmty_expand_extension_m10n?(0,s.t)("community.seller.sell_on_community_v2"):(0,s.t)("community.seller.good_news"),icon:N.A,button:a?{buttonText:r.createElement(C,{isLoading:e,text:(0,s.t)("community.seller.set_up_stripe")}),onClick:t,className:w.mj}:void 0,description:(0,s.tx)("community.seller.you_may_be_eligible_with_link",{learnMoreLink:n}),dismissible:!!a,positionStatic:!0}}({isLoading:t,onClick:()=>{T(!0),k((0,m.to)({type:S.s,data:{setupStripeCallback:e=>{T(!1),e||k(o.s.error((0,s.t)("community.seller.unable_to_launch_stripe_onboarding_please_check_your_details")))}}}))},showCTA:!O})}:M===f.P5.STARTED_ONBOARDING?{userFlag:E.BY,bannerContent:function({onClick:e,isLoading:t,showCTA:a}){return{id:b.om.communityM10nFinishSetupBanner,bannerType:b.x1.INFO,icon:I.A,button:a?{buttonText:r.createElement(C,{isLoading:t,text:(0,s.t)("community.seller.finish_set_up")}),onClick:e,className:w.mj}:void 0,mainText:(0,s.t)("community.seller.finish_stripe_setup"),description:(0,s.t)("community.seller.few_steps_left_stripe"),dismissible:!!a,positionStatic:!0}}({isLoading:t,onClick:()=>{a(!0),k(d.j({callback:()=>a(!1),user:R,selectedView:L}))},showCTA:!O})}:M===f.P5.DISABLED?{userFlag:E.Q7,bannerContent:function({onClick:e,isLoading:t,showCTA:a}){return{id:b.om.communityM10nAdtlInfoNeededBanner,bannerType:b.x1.WARN,icon:x.A,button:a?{buttonText:r.createElement(C,{isLoading:t,text:(0,s.t)("community.seller.visit_stripe")}),onClick:e,className:w.mj}:void 0,mainText:(0,s.t)("community.seller.stripe_needs_your_attention"),description:(0,s.t)("community.seller.you_can_resolve"),dismissible:!!a,positionStatic:!0}}({isLoading:t,onClick:()=>{},showCTA:!O})}:void 0;if(!B)return r.createElement(r.Fragment,null);let{userFlag:U,bannerContent:V}=B,H=()=>{c.ik()?.(u.b({[U]:!0}))};return A[U]&&!O?r.createElement(r.Fragment,null):r.createElement(h.C,{containerClassName:O?w.hL:void 0,content:V,editorType:g.nT.Design,onDismiss:()=>{H(),P(!0),(0,i.sx)("cmty_m10n_banner_dismissed",{userFlag:U})}})}},699651:(e,t,a)=>{a.d(t,{u:()=>Q});var r=a(411855),n=a(188507),i=a(966712),l=a(385422),o=a(860601),s=a(939863),c=a(99506),d=a(401730),m=a(239671),u=a(407844),_=a(164795),p=a(967063);function g(e){let{hasPublisherAdminAccess:t,resource:a}=e,n=(()=>{if(t)return a.publishing_status===c.KB.DELISTED_CREATOR_STRIPE_DISABLED?(0,s.tx)("community.resource.delisted_stripe_issues"):a?.monetized_resource_metadata?.is_subscription?(0,s.tx)("community.resource.delisted_prev_purchasers_can_still_access__subscription"):(0,s.tx)("community.resource.delisted_prev_purchasers_can_still_access");if(a?.community_resource_payment?.subscription_expires_at){let e=new Date(a.community_resource_payment.subscription_expires_at).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"});return(0,s.tx)("community.resource.delisted_you_ll_continue_to_have_access_until",{dateString:e})}return a?.community_resource_payment?.status===d.G3.SUCCEEDED?(0,s.tx)("community.resource.delisted_you_ll_continue_to_have_access_to_it"):(0,s.tx)("community.resource.if_you_have_questions_reach_out_to_creator")})(),i={id:_.om.communityResourceInReviewBanner,bannerType:_.x1.WARN,icon:p.A,mainText:(0,s.t)("community.resource.delisted_title"),description:n,dismissible:!1,positionStatic:!0};return r.createElement(u.C,{content:i,editorType:m.nT.Design,onDismiss:o.lQ})}var f=a(837324),E=a(860178);function h(e){if(!(0,E.iZ)())return r.createElement(r.Fragment,null);let t="hub_file"===(0,f.Vm)(e.resource)?(0,s.t)("community.seller.only_you_can_see_your_file"):"plugin"===(0,f.Vm)(e.resource)?(0,s.t)("community.seller.only_you_can_see_your_plugin"):"widget"===(0,f.Vm)(e.resource)?(0,s.t)("community.seller.only_you_can_see_your_widget"):r.createElement(r.Fragment,null),a={id:_.om.communityResourceInReviewBanner,bannerType:_.x1.WARN,icon:p.A,mainText:(0,s.t)("community.seller.this_page_is_private"),description:t,dismissible:!1,positionStatic:!0};return r.createElement(u.C,{content:a,editorType:m.nT.Design,onDismiss:o.lQ})}function y(e){if(!(0,E.iZ)())return r.createElement(r.Fragment,null);let t="hub_file"===(0,f.Vm)(e.resource)?(0,s.t)("community.resource.unpublished_banner.only_you_can_see_this_page.hub_file"):"plugin"===(0,f.Vm)(e.resource)?(0,s.t)("community.resource.unpublished_banner.only_you_can_see_this_page.plugin"):"widget"===(0,f.Vm)(e.resource)?(0,s.t)("community.resource.unpublished_banner.only_you_can_see_this_page.widget"):r.createElement(r.Fragment,null),a={id:_.om.communityResourceInReviewBanner,bannerType:_.x1.WARN,icon:p.A,mainText:(0,s.t)("community.resource.unpublished_banner.your_resource_is_unpublished"),description:t,dismissible:!1,positionStatic:!0};return r.createElement(u.C,{content:a,editorType:m.nT.Design,onDismiss:o.lQ})}var v=a(545941),b=a(782501),w=a(555328);let T=a(392922).H;function I(e){let t={id:_.om.communityResourceInReviewBanner,bannerType:_.x1.WARN,icon:p.A,mainText:(0,s.t)("community.resource.admin_blocked_resource_banner.this_resource_is_blocked"),description:(0,s.t)("community.resource.admin_blocked_resource_banner.you_can_only_view_this_page_as_an_admin"),dismissible:!1,positionStatic:!0};return r.createElement(u.C,{content:t,onDismiss:o.lQ})}var N=a(737947),x=a(313496),C=a(749949),S=(e=>(e.EDIT_THIS_PAGE="edit_this_page",e.OPEN_ORIGINAL_FILE="open_original_file",e.UNPUBLISH="unpublish",e.DELIST="delist",e.MANAGE_RESOURCE="manage_resource",e))(S||{}),k=a(417659),A=a(410424),R=a(941381),L=a(446686),D=a(442597),P=a(738269),F=a(662275),O=a(672517),M=a(988022),B=a(820642),U=a(741477),V=a(813408),H=a(143678),W=a(237870),j=a(206074),G=a(488578),$=a(109361);let z="MANAGE_RESOURCE_DROPDOWN_TYPE",Y=(0,W.Ju)(G.Rw);function K(e){let{resource:t,fileKey:a}=e,i=(0,n.wA)(),l=r.useRef(null),c=(0,n.d4)((0,U.E)(z)),d=(0,n.d4)(e=>e.currentUserOrgId),p=(0,C.J)(),g=(0,f.U0)(t),h=(0,w.U)(e.resource)?H.e0.COMMUNITY_HUB_FILE:(0,w.xQ)(t)?H.e0.COMMUNITY_HUB_WIDGET:H.e0.COMMUNITY_HUB_PLUGIN,y=(0,E.iZ)();if(r.useEffect(()=>{(0,w.U)(e.resource)?i((0,A.ts)({hubFileId:e.resource.id})):i((0,R.af)({id:e.resource.id,resourceType:(0,w.I0)(e.resource)?w.bD.PLUGIN:w.bD.WIDGET}))},[i,e.resource,d]),!y)return null;let b=(0,w.m3)(t),T=[],I=(0,s.t)("community.resource.edit_this_page");if(T.push({displayText:I,callback:()=>{(0,w.U)(t)?((0,M.Cu)({name:S.EDIT_THIS_PAGE,hubFileId:t.id,isMonetized:b,text:I,trackingContext:H.e0.COMMUNITY_HUB_FILE,searchSessionId:p,has_carousel_media_nudge:g}),a&&i((0,L.t)({fileKey:a,isFullscreenOpen:!1,isEditHubFilePageMode:!0,entryPoint:V.k2.RESOURCE_PAGE,canvasThumbnailPromise:(0,B.$2)(a,y)}))):((0,M.Cu)({pluginId:t.id,name:S.EDIT_THIS_PAGE,isMonetized:b,text:I,trackingContext:h,searchSessionId:p,has_carousel_media_nudge:g}),i((0,D.r)({publishedPluginId:t.id,entryPoint:V.k2.RESOURCE_PAGE})))}}),(0,w.U)(t)){let e=(0,s.t)("community.hub_files.open_original_file");if(T.push({displayText:e,callback:()=>{(0,M.Cu)({name:S.OPEN_ORIGINAL_FILE,hubFileId:t.id,isMonetized:b,text:e,trackingContext:H.e0.COMMUNITY_HUB_FILE,searchSessionId:p,has_carousel_media_nudge:g}),N.Ay.redirect(`/file/${a}`,"_blank")}}),!(0,v.Pg)(t)){T.push({displayText:"",disabled:!0,separator:!0});let e=(0,s.t)(b?"community.resource.delist":"community.resource.unpublish");T.push({displayText:e,callback:()=>{(0,M.Cu)({name:b?S.DELIST:S.UNPUBLISH,hubFileId:t.id,isMonetized:b,text:e,trackingContext:H.e0.COMMUNITY_HUB_FILE}),i((0,F.to)({type:Y,data:{confirmationTitle:b?(0,s.t)("community.hub_files.delist_file_from_community_hub"):(0,s.t)("community.hub_files.remove_file_from_community_hub"),content:b?(0,s.t)("community.hub_files.delisting_this_resource_will_prevent_people_from_discovering_or_purchasing_this_resource"):(0,s.t)("community.hub_files.unpublishing_this_file_will_remove_it_from_the_community_hub_and_prevent_people_from_finding_and_using_this_file"),confirmText:b?(0,s.t)("community.resource.delist"):(0,s.t)("community.resource.unpublish"),cancelText:(0,s.t)("general.cancel"),onConfirm:()=>{i((0,A.ax)({hubFileId:t.id,redirectLink:(0,k.bL)(t.publisher.profile_handle)}))},destructive:!0}}))}})}}let W=r.createElement(x.g,{ref:l,buttonClassName:"show_resource_creator_banner--manageResourceCTA--lYOcA text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:()=>{c||((0,M.Cu)({name:S.MANAGE_RESOURCE,resourceId:t.id,has_carousel_media_nudge:g,trackingContext:h,searchSessionId:p}),i((0,P.j7)({type:z})))},isShowingDropdown:!1},(0,s.t)("community.resource.manage_resource")),G={id:_.om.CommunityResourceCreatorBanner,bannerType:_.x1.INFO,icon:$.A,iconSize:"large",mainText:(0,s.t)("community.resource.your_resource_is_live"),description:g?(0,w.U)(t)?(0,s.t)("community.resource.next_we_recommend_adding_more_images"):(0,w.xQ)(t)?(0,s.t)("community.resource.next_we_recommend_adding_more_images_and_videos",{resourceType:(0,s.t)("community.plugins.widget")}):(0,s.t)("community.resource.next_we_recommend_adding_more_images_and_videos",{resourceType:(0,s.t)("community.plugins.plugin")}):void 0,dismissible:!1,positionStatic:!0,button:{type:_.MA.CUSTOM,element:W}};return r.createElement(O.fu,{name:"RDP Creator Banner",properties:{name:"rdp_creator_banner",resourceId:t.id,resourceType:(0,f.Vm)(t),hasCarouselMediaNudge:g}},r.createElement(u.C,{content:G,editorType:m.nT.Design,onDismiss:o.lQ}),l.current&&c&&r.createElement(j.j,{dispatch:i,items:T,showPoint:!0,parentRect:l.current?.getBoundingClientRect(),onSelectItem:e=>{e.callback&&e.callback("",null,i)},minWidth:120}))}function Q(e){let{resource:t}=e,a=(0,n.d4)(e=>(0,b.MK)(e,t)),o=(0,n.d4)(e=>(0,w.U)(t)?(0,b.cN)(e,t,a):(0,b.Wd)(e,t)),s=(0,b.RB)(t),c=(0,w.Uz)(t)?t.fig_file_metadata?.key:void 0;return(0,i.kc)().community_hub_admin&&(0,v.lT)(t)?r.createElement(I,{resource:t}):(0,i.kc)().community_hub_admin_reviewer&&(0,w.m3)(t)?r.createElement(T,{resource:t}):t.publishing_status?o&&(0,v.AC)(t)?r.createElement(h,{resource:t}):(0,v.Pg)(t)?r.createElement(g,{hasPublisherAdminAccess:o,resource:t}):(0,w.U)(t)&&s?r.createElement(K,{resource:t,fileKey:c}):((0,w.I0)(t)||(0,w.xQ)(t))&&s?r.createElement(K,{resource:t}):r.createElement(l.S,null):r.createElement(y,{resource:t})}},501708:(e,t,a)=>{a.d(t,{i:()=>A});var r=a(411855),n=a(188507),i=a(563706),l=a(776621),o=a(304783),s=a(877723),c=a(799569),d=a(939863),m=a(759822),u=a(662275),_=a(237870),p=a(488578);let g=(0,_.Ju)(function(e){return r.createElement(p.aF,{title:r.createElement("div",{className:"feature_not_available_modal--title--kPAVe text--fontPos14--OL9Hp text--_fontBase--QdLsd"},(0,d.tx)("community.collections.this_feature_isnt_available")),className:"feature_not_available_modal--modalContainer--Etu7A"},r.createElement(c.s_,{dispatch:e.dispatch}),r.createElement("div",{className:"feature_not_available_modal--modalBody--Dhwo0 text--fontPos14--OL9Hp text--_fontBase--QdLsd"},(0,d.tx)("community.collections.this_feature_isnt_available_body")," ",r.createElement("a",{className:"feature_not_available_modal--learnMore--L4kDU modal--blueLink--9GcJu blue_link--blueLink--9rlnd",target:"_blank",href:"https://help.figma.com/hc/en-us/articles/17725942479127-Access-or-opt-out-of-AI-features"},(0,d.tx)("community.collections.learn_more"))),r.createElement("div",{className:"feature_not_available_modal--buttonContainer--9-Zwv"},r.createElement(m.$$,{onClick:()=>{e.dispatch(u.Ce())}},(0,d.tx)("general.got_it"))))}," FeatureNotAvailableModal");var f=a(281297),E=a(119198),h=a(988022),y=a(102310),v=a(99506),b=a(945020),w=a(435898),T=a(629019),I=a.n(T),N=a(999021),x=a(375360),C=a(620268),S=a(152462);function k({title:e,description:t,imageUrl:a,onClick:n}){let l=(0,i.o4)();return r.createElement("div",{className:I()(C.Ui,"figjam_ai_card--cardContainer--kCDdk"),"data-testid":"collection-figjam-ai-card"},r.createElement("div",{className:I()(C.Nr,"figjam_ai_card--card--KTu46")},l?r.createElement("div",{className:"figjam_ai_card--mobileOverlay--EhOsZ"},r.createElement("button",{className:I()("figjam_ai_card--invisibleButton--LuV4E"),onClick:n})):r.createElement("div",{className:"figjam_ai_card--overlayContainer--dDIiY"},r.createElement("div",{className:"figjam_ai_card--overlay--g6q4O"}),r.createElement("button",{className:I()("figjam_ai_card--ctaButton--wveh5",S.jx,S.tt,S.hh),onClick:n},(0,d.tx)("community.collections.generate"))),r.createElement(x.tL,{title:e,description:t}),r.createElement(N.c,{srcSet:"",src:a,image_type:"COMMUNITY_HUB_FILE_THUMBNAIL",alt:e,className:I()(C.Sl,"figjam_ai_card--image--L-R2C"),imageProps:{onLoad:e=>e.currentTarget.style.opacity="1"}})))}function A({title:e,description:t,imageUrl:a,prompt:c,promptCategory:d}){let m=(0,n.wA)(),_=(0,y.B)(),p=(0,i.o4)(),T=(0,s.q8)(),I=(e,t)=>{m(E.zE({state:_,from:b.f6.COMMUNITY_COLLECTIONS_PAGE,editorType:v._Y.WHITEBOARD,team:void 0,openNewFileIn:b.ai.NEW_TAB,figjamAiNewFileData:{prompt:e,subtitle:e,useCaseCategory:t,entrypoint:w.fV.COMMUNITY}}))};return r.createElement(k,{onClick:()=>{(0,h.Cu)({name:"community_collections_figjam_ai",prompt:c,title:e,description:t,promptCategory:d,isMobile:`${p}`}),p?m((0,u.to)({type:f.s,data:{dispatch:m}})):T?m((0,u.to)({type:g,data:{dispatch:m}})):Object.values(w.es).includes(d)?I(c,d):(0,l.$D)(o.e.COMMUNITY,Error(`Invalid use case category (${d}) for figjam ai card: ${e}`))},title:e,description:t,imageUrl:a})}},281297:(e,t,a)=>{a.d(t,{s:()=>d});var r=a(411855),n=a(799569),i=a(939863),l=a(662275),o=a(137459),s=a(237870),c=a(488578);let d=(0,s.Ju)(function(e){let t=(0,i.t)("rcs.redirect_from_mobile_to_desktop.head_to_figjam_on_desktop"),a=(0,i.t)("community.collections.head_to_desktop"),s="https://static.figma.com/uploads/f95cfc857cdc5c164958966add0665b69673667c";return e.editorType===o.LE.SLIDES&&(t=(0,i.t)("rcs.redirect_from_mobile_to_desktop.head_to_slides_on_desktop"),a=(0,i.t)("community.collections.head_to_desktop_slides"),s="https://static.figma.com/uploads/d5fbdadc97f3d94063357e9819c314ade9055df3"),r.createElement(c.aF,{className:"head_to_desktop_modal--modalContainer--BRiSA"},r.createElement(n.s_,{dispatch:e.dispatch}),r.createElement("img",{width:"100%",alt:a,src:s}),r.createElement("div",{className:"head_to_desktop_modal--modalBody--n9Et8 text--fontPos14--OL9Hp text--_fontBase--QdLsd"},r.createElement("h1",{className:"head_to_desktop_modal--title--kJAKG text--fontPos18--rYXJb text--_fontBase--QdLsd"},t),r.createElement("p",null,a),r.createElement("button",{className:"head_to_desktop_modal--gotIt--StOau",onClick:()=>{e.dispatch(l.Ce())}},(0,i.tx)("general.got_it"))))}," HeadToDesktopModal")},375360:(e,t,a)=>{a.d(t,{rS:()=>g,tL:()=>y});var r=a(411855);if(443==a.j)var n=a(860601);var i=a(999021),l=a(939863),o=a(674694),s=a(240411),c=a(629732),d=a(568424),m=a(837324),u=a(672517),_=a(555328),p=a(620268);function g({resource:e,title:t,description:a}){switch((0,m.Vm)(e)){case _.vt.HUB_FILE:return r.createElement(f,{hubFile:e,title:t,description:a,key:e.id});case _.vt.WIDGET:return r.createElement(E,{widget:e,title:t,description:a,key:e.id});case _.vt.PLUGIN:return r.createElement(h,{plugin:e,title:t,description:a,key:e.id});default:return null}}function f({hubFile:e,title:t,description:a}){let i=(0,m.qD)(e),l=(0,m._t)({resource:e});return r.createElement("div",{className:p.Ui,"data-testid":"collection-resource-card"},r.createElement(u.o3,{className:p.Nr,to:l,trackingEventName:"community_collections",trackingProperties:{name:"hub_file_card_clicked",href:l},target:"_blank"},r.createElement(y,{title:t??i.name,description:a??i.description}),r.createElement(o.Xy,{className:p.Sl,image:e.thumbnail_url,hubFileId:e.id,onLoad:n.lQ,alt:i.name,resizedThumbnailUrls:e.resized_thumbnail_urls})),r.createElement(v,{resource:e}))}function E({widget:e,title:t,description:a}){let n=(0,m.qD)(e),l=(0,m._t)({resource:e});return r.createElement("div",{className:p.Ui,"data-testid":"collection-resource-card"},r.createElement(u.o3,{className:p.Nr,to:l,trackingEventName:"community_collections",trackingProperties:{name:"widget_card_clicked",href:l},target:"_blank"},r.createElement(y,{title:t??n.name,description:a??n.description}),r.createElement(i.c,{srcSet:"",src:n.redirect_snapshot_url||n.redirect_icon_url,image_type:"COMMUNITY_HUB_FILE_THUMBNAIL",alt:n.name,className:p.Sl,imageProps:{onLoad:e=>e.target.style.opacity="1"}})),r.createElement(v,{resource:e}))}function h({plugin:e,title:t,description:a}){let n=(0,m.qD)(e),l=(0,m._t)({resource:e});return r.createElement("div",{className:p.Ui,"data-testid":"collection-resource-card"},r.createElement(u.o3,{className:p.Nr,to:l,trackingEventName:"community_collections",trackingProperties:{name:"plugin_card_clicked",href:l},target:"_blank"},r.createElement(i.c,{srcSet:"",src:n.redirect_icon_url,image_type:"COMMUNITY_HUB_FILE_THUMBNAIL",alt:n.name,className:p.t3,imageProps:{onLoad:e=>e.target.style.opacity="1"}}),r.createElement(y,{title:t??n.name,description:a??n.description})),r.createElement(v,{resource:e}))}function y({title:e,description:t}){return r.createElement("div",{className:p.pq},r.createElement("div",{className:p.DD},e),r.createElement("div",{className:p.h_},r.createElement(d._,{description:t})))}function v({resource:e}){return r.createElement("div",{className:p.qr},r.createElement("div",{className:p.ME},r.createElement(c.L,{publishers:e.community_publishers?.accepted||[]}),r.createElement("div",{className:p.vR},(0,l.tx)("community.cards.by"),r.createElement(c.I,{publishers:e.community_publishers?.accepted||[],removeByLabel:!0,openInNewTab:!0}))),r.createElement("div",{className:p.uK},r.createElement(s.cz,{resource:e,currentUserLiked:!1}),r.createElement(s.i8,{resource:e})))}},62258:(e,t,a)=>{a.d(t,{X:()=>eO});var r=a(411855),n=a(188507),i=a(697551),l=a(782501),o=a(560718),s=a(860178),c=a(776250),d=a(183297),m=a(493323);function u(e){let t=r.useRef(null);return r.useEffect(()=>{let a=()=>{window.innerHeight<(t.current?.getBoundingClientRect().bottom||1/0)||e.onScrollToBottom()};return window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)},[e]),r.createElement("div",{ref:t},e.children,e.showLoader&&r.createElement("div",{className:"infinite_scroll_container--loadingSpinner--UMKR8"},r.createElement(m.kt,null)))}function _(e){let{onScrollToBottom:t,children:a,showLoader:n}=e;return r.createElement(u,{onScrollToBottom:t,children:a,showLoader:n})}_.displayName="WithInfiniteScroll";var p=a(135876),g=a(428322),f=a(939863),E=a(749949),h=a(837324),y=a(612776),v=a(609271),b=a(63397),w=a(107877),T=a(820642),I=a(555328),N=a(323667),x=a(738269),C=a(994988),S=a(318812),k=a(459343),A=a(206074);let R="comments_view--loader--tz-FD",L="comments-sort-dropdown",D="SHOW_RESOLVED",P=function({labelClassName:e,includeShowResolved:t,isLoggedIn:a}){let i=(0,n.wA)(),l=(0,S.Um)(),o=(0,n.d4)(e=>e.communityHub.comments.activeFeedType),s=(0,n.d4)(e=>e.communityHub.comments.showResolved),d=r.useRef(null),[m,u]=r.useState(null),_=l?.type===L,p={ALL:"All",ME:"Your comments",COMMENTS:"Comments only",RATINGS_REVIEWS:"Reviews only"},g=e=>{switch(e){case p.ALL:return(0,f.t)("community.comments.all");case p.ME:return(0,f.t)("community.comments.your_comments");case p.COMMENTS:return(0,f.t)("community.comments.comments_only");case p.RATINGS_REVIEWS:return(0,f.t)("community.comments.reviews_only");default:return""}},E=l?.data?.targetRect;r.useEffect(()=>{E&&u(E)},[E]);let h=Object.keys(p).filter(e=>a||e!==I.Qv.ME).filter(e=>e!==I.Qv.RATINGS_REVIEWS&&e!==I.Qv.COMMENTS).map(e=>({displayText:g(p[e]),name:e,isChecked:e===o}));return t&&(h.push({displayText:"",separator:!0,name:void 0}),h.push({displayText:(0,f.t)("community.comments.show_resolved"),isChecked:s,name:D})),r.createElement("div",null,r.createElement("div",{onClick:e=>{e.stopPropagation();let t=d.current;_?i(x.oB()):t&&(u(t.getBoundingClientRect()),i(x.j7({type:L})))},className:e||"comments_view--commentsSortLabel--mpkGD"},g(p[o]),r.createElement(k.c,{className:"comments_view--commentsSortChevron--989-q",dispatch:i,dropdownKey:L,showingDropdown:_,divRef:d,toggleOnClick:!0})),_&&m&&r.createElement(A.j,{dispatch:i,items:h,parentRect:m,onSelectItem:e=>{(0,c.sx)("Comments Filter Changed",{thread_type:"community_preview",view:e.name}),e.name&&(e.name===D?i(C.mH(!s)):i(b.Zj(e.name)))},minWidth:164,showPoint:!0}))};var F=a(460845),O=a(629019),M=a.n(O),B=a(564577),U=a(574176),V=a(498480);function H(){return r.createElement(V.Ex,{text:(0,f.t)("community.comments.creator"),color:V.zE.TOOLBAR,className:"creator_badge--creatorBadge--P5vsL"})}var W=a(417659),j=a(498606),G=a(558867);let $="comment_tile--commentContainerFadeOut--AMWrR",z="comment_tile--nextSiblingCommentReset--4shUj",Y="comment_tile--iconButton--MZmz1";function K(e){return document.querySelector(`[data-comment-id="${e}"]`)}let Q={fadeOut:async(e,t)=>{t||(t={resetNextComment:!1});let a=K(e);if(!a)return;let r=a.getBoundingClientRect();a.classList.add($);let n=a.nextSibling;return n&&(n.style.marginTop=`-${r.height-1}px`),await new Promise(e=>setTimeout(e,Q.ANIMATION_LENGTH)),t.resetNextComment&&Q.resetNextComment(n?.dataset.commentId),n?.dataset.commentId},resetNextComment:e=>{let t=e&&K(e);t&&(t.classList.add(z),t.style.marginTop="0px",setTimeout(()=>t.classList.remove(z),50))},fadeIn:e=>{let t=document.querySelector(`[data-comment-id="${e}"]`);if(!t)return;t.classList.remove($);let a=t.nextSibling;a&&(a.style.marginTop="0px")},ANIMATION_LENGTH:400};var X=a(400333),q=a(227795),J=a(800576),Z=a(392592),ee=a(62589),et=a(97128),ea=a(970516),er=a(662275),en=a(965837),ei=a(688734),el=a(946689),eo=a(67294),es=a(237870),ec=a(488578),ed=a(596049);let em=(0,es.Ju)(function(e){let t=e.reportType===o.nI.REPORT_AND_HIDE,a=t?(0,f.t)("community.comments.report_and_hide_author_name_s_comment",{authorName:e.comment.author.name}):(0,f.t)("community.comments.report_author_name_s_comment",{authorName:e.comment.author.name}),n=r.createElement("p",{className:ed.zC},t?(0,f.t)("community.comments.this_will_flag_the_comment_for_review_and_hide_it_for_everyone"):(0,f.t)("community.comments.this_will_flag_the_comment_for_review")," ",(0,f.t)("community.comments.comment_author_will_not_be_notified",{authorName:e.comment.author.name})," ",(0,f.tx)("community.comments.please_read_our_link_before_reporting",{link:r.createElement(el.CY,{href:"https://help.figma.com/hc/articles/360038510573-Figma-Community-Guidelines",target:"_blank",trusted:!0},(0,f.tx)("community.community_guidelines"))}));return r.createElement(ec.Rw,{confirmationTitle:a,confirmText:(0,f.t)("community.comments.report"),onConfirm:()=>e.onReport(e.comment.id),destructive:!0},r.createElement("div",{className:ed.RZ,"data-testid":"comment-confirm-report-modal-content"},r.createElement(eo.H8,{user:e.comment.author,size:eo.Pf.LARGE}),n))},"CommentConfirmReportModal");var eu=(e=>(e.COPY_LINK="Copy link",e.EDIT="Edit",e.DELETE="Delete",e.DELETE_THREAD="Delete thread",e.FOLLOW_PROFILE="Follow",e.UNFOLLOW_PROFILE="Unfollow",e.BLOCK_PROFILE_COMMENTING="Restrict user's comments",e.UNBLOCK_PROFILE_COMMENTING="Unrestrict user's comments",e.REPORT_COMMENT="Report",e.REPLY="Reply",e))(eu||{});function e_(e){return{name:e,displayText:function(e){switch(e){case"Copy link":return(0,f.t)("community.comments.copy_link");case"Edit":return(0,f.t)("community.comments.edit");case"Delete":return(0,f.t)("community.comments.delete");case"Delete thread":return(0,f.t)("community.comments.delete_thread");case"Follow":return(0,f.t)("community.follow.follow");case"Unfollow":return(0,f.t)("community.follow.unfollow");case"Restrict user's comments":return(0,f.t)("community.comments.restrict_user_s_comments");case"Unrestrict user's comments":return(0,f.t)("community.comments.unrestrict_user_s_comments");case"Report":return(0,f.t)("community.comments.report_comment");case"Reply":return(0,f.t)("community.comments.reply")}}(e)}}function ep(e){let t=(0,n.wA)(),a=(0,s.iZ)(),{apiResourceType:i,resourceId:l}=(0,ee.Rd)(et.ax),d=()=>{e.onEdit?.()},m=()=>{e.onDelete&&t((0,er.to)({type:en.h,data:{onConfirm:()=>e.onDelete()}}))},u=()=>{t(ea.lW({stringToCopy:(0,J.ky)(new et.ax({apiResourceType:i,resourceId:l},{comment:e.comment.id}).href)}))},_=(r,n)=>{t(b._8({blockedProfileId:n,profileId:r,onSuccess:()=>{t(C.BV({authorId:n,removeCommentsCallback:async e=>{e.map(e=>Q.fadeOut(e.id,{resetNextComment:!0})),await new Promise(e=>setTimeout(e,Q.ANIMATION_LENGTH))}})),t(Z.F.enqueue({message:(0,f.t)("community.comments.restricted_this_user_s_comments"),type:"profile-restricted-change"})),(0,c.sx)("comment_profile_restricted",{restricted_by_profile_id:a?.community_profile_id,restricted_profile_id:n,entry_point:"comment",comment_id:e.comment.id})}}))},p=(a,r)=>{t(b.dL({blockedProfileId:r,profileId:a,onSuccess:()=>{t(Z.F.enqueue({message:(0,f.t)("community.comments.unrestricted_this_user_s_comments"),type:"profile-restricted-change",button:{text:(0,f.t)("community.comments.undo"),action:()=>{_(a,r)}}})),(0,c.sx)("comment_profile_unrestricted",{unrestricted_by_profile_id:a,unrestricted_profile_id:r,comment_id:e.comment.id,entry_point:"comment"})}}))},g=()=>{let{profileIdToAdminResourceAs:a}=e,r=e.comment?.author.id;a&&r&&t((0,er.to)({type:ei.H,data:{onBlock:()=>_(a,r),confirmationTitle:(0,f.t)("community.comments.remove_comment_and_restrict_user"),confirmButtonText:(0,f.t)("community.comments.remove_and_restrict")}}))},E=e=>{t(b.e6(e))},h=e=>{t(b.X2(e))},y=async a=>{let r=await Q.fadeOut(a);t(C.eG({commentId:a,userIsAdmin:!!e.userIsAdmin,onFinish:e=>{e?Q.fadeIn(a):r&&Q.resetNextComment(r)}}))},v=e=>{t((0,er.to)({type:em,data:{comment:e,reportType:o.nI.REPORT_AND_HIDE,onReport:y}}))},w=e=>{t((0,er.to)({type:em,data:{comment:e,reportType:o.nI.REPORT,onReport:y}}))};return r.createElement(A.j,{dispatch:t,items:e.items,showPoint:!0,parentRect:e.parentRect,onSelectItem:(t,a)=>{"Edit"===t.name?d():"Delete"===t.name||"Delete thread"===t.name?m():"Copy link"===t.name?u():"Follow"===t.name&&e.comment.author.id?E(e.comment.author.id):"Unfollow"===t.name&&e.comment.author.id?h(e.comment.author.id):"Restrict user's comments"===t.name&&e.comment.author.id&&e.profileIdToAdminResourceAs?g():"Unrestrict user's comments"===t.name&&e.comment.author.id&&e.profileIdToAdminResourceAs?p(e.profileIdToAdminResourceAs,e.comment.author.id):"Report"===t.name?e.userIsAdmin?v(e.comment):w(e.comment):"Reply"===t.name&&e.onReply?.()},minWidth:96,dataTestId:"comment-menu"})}function eg(e){let t=[e_(eu.EDIT),e_(e.isThreadParent?eu.DELETE_THREAD:eu.DELETE)];return e.hideCopyLink||t.push(e_(eu.COPY_LINK)),r.createElement(ep,{comment:e.comment,parentRect:e.parentRect,items:t,onEdit:e.onEdit,onDelete:e.onDelete})}function ef(e){let t=[];return e.canReplyToComment&&t.push(e_(eu.REPLY)),e.hideCopyLink||t.push(e_(eu.COPY_LINK)),t.push(e_(e.author.is_restricted_by_current_user?eu.UNBLOCK_PROFILE_COMMENTING:eu.BLOCK_PROFILE_COMMENTING)),t.push(e_(eu.REPORT_COMMENT)),r.createElement(ep,{profileIdToAdminResourceAs:e.profileIdToAdminResourceAs,comment:e.comment,parentRect:e.parentRect,items:t,onDelete:e.onDelete,onReply:e.onReply,userIsAdmin:!0})}function eE(e){let t=[];return e.userExists&&t.push(e_(eu.REPORT_COMMENT)),e.hideCopyLink||t.unshift(e_(eu.COPY_LINK)),r.createElement(ep,{comment:e.comment,parentRect:e.parentRect,items:t})}function eh(e){var t;let a=(0,s.iZ)(),l=(0,n.d4)(e=>e.authedActiveCommunityProfile),c=(0,n.d4)(t=>t.communityHub.comments.commentsById[e.comment.id]),d=(0,n.d4)(e=>e.communityHub.comments.authorsById[c.author.id]),m=(t=o.ej.COMMUNITY,!!a&&t===o.ej.COMMUNITY&&!(0,i.cs)(l)&&c.author.profile_handle===a.community_profile_handle),u=l?.id===e.profileIdToAdminResourceAs;return m?r.createElement(eg,{comment:c,parentRect:e.parentRect,onEdit:()=>e.onEdit(c),onDelete:()=>e.onDelete(c),hideCopyLink:e.hideCopyLink,isThreadParent:e.isThreadParent}):e.profileIdToAdminResourceAs&&u?r.createElement(ef,{profileIdToAdminResourceAs:e.profileIdToAdminResourceAs,author:d,comment:c,parentRect:e.parentRect,onDelete:e.onDelete,hideCopyLink:e.hideCopyLink,canReplyToComment:!!e.onReply,onReply:()=>e.onReply?.(c)}):r.createElement(eE,{comment:c,parentRect:e.parentRect,userExists:!!a,hideCopyLink:e.hideCopyLink})}var ey=a(503457);let ev=(0,ey.kf)("lazy_create_comment_composer",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(7481),a.e(3630),a.e(8410)]).then(a.bind(a,815988))).CreateCommentComposer})}),eb=(0,ey.kf)("lazy_edit_comment_composer",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(7481),a.e(3630),a.e(8410)]).then(a.bind(a,439827))).EditCommentComposer})}),ew=(0,ey.kf)("lazy_reply_comment_composer",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(7481),a.e(3630),a.e(8410)]).then(a.bind(a,711379))).ReplyCommentComposer})});(0,ey.kf)("lazy_comment_editable_typeahead",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([a.e(2399),a.e(1398),a.e(8662),a.e(1876),a.e(3036),a.e(4195),a.e(441),a.e(8547),a.e(4586),a.e(7054),a.e(214),a.e(4920),a.e(3779),a.e(6739),a.e(7481),a.e(3630),a.e(8410)]).then(a.bind(a,815988))).CommentEditableTypeahead})});var eT=a(95779),eI=a(210105);function eN(e){let{comment:t,author:a,userIsAuthor:i,isAuthorAcceptedPublisher:l}=e,[s,d]=r.useState(!1),m=r.useRef(null),u=(0,n.d4)(e=>e.dropdownShown),_=(0,n.wA)(),[p,g]=r.useState(!1),[h,y]=r.useState(null),v=r.useCallback(()=>{u?.type===o.Ng&&_(x.oB())},[u,_]);r.useEffect(()=>(window.addEventListener("scroll",v,!1),()=>{window.removeEventListener("scroll",v,!1)}),[v]);let b=(0,E.J)();if(!t||!a)return r.createElement(r.Fragment,null);let w=async()=>{let a=await Q.fadeOut(t.id);_(C.Tu({commentId:t.id,commentType:e.commentType,onFinish:e=>{e?Q.fadeIn(t.id):Q.resetNextComment(a)}}))};if(p)return r.createElement(eb,{fallback:null,errorFallback:null,commentType:e.commentType,commentId:t.id,message:t.message,messageMeta:t.message_meta??[],onComplete:()=>{(0,c.sx)(N.E,{commentId:t?.id,message:t?.message,userId:a.primary_user_id,profileId:a.id,resourceType:e.resourceType,resourceId:e.resourceId,searchSessionId:b},{forwardToDatadog:!0}),g(!1)}});let T=e.selected&&!e.isCreatorReply,I=t.reply_count,S=!!(u&&u.type===o.Ng&&u.data.commentId===t.id),k=!!t.hidden_at&&!i,A=new W.xn({profileHandle:a.profile_handle}).to;return r.createElement("div",{className:M()(T?"comment_tile--tempSelectedCommentTile--eo1zi comment_tile--selectedCommentTile--9xoJJ comment_tile--commentTile--Y-2jW comment_tile--commentContainer--alB5v":"comment_tile--commentTile--Y-2jW comment_tile--commentContainer--alB5v",{"comment_tile--creatorReplySelectedParent--aVNCs comment_tile--creatorReply--OO0It":!!e.selected&&e.isCreatorReply,"comment_tile--creatorReply--OO0It":!e.selected&&e.isCreatorReply,"comment_tile--noSeparator--RL2vm":e.hideSeparator}),"data-comment-id":t.id,role:"button",tabIndex:0},r.createElement(F.N_,{className:"comment_tile--commentAvatarContainer--e8z35",to:A},r.createElement(G.Ro,{entity:a,size:32,className:"comment_tile--commentAvatar--5xfu2 community_hub_view--creatorInsetBorder--z2InY community_hub_view--creatorInsetBorderNoHover--27smC"})),r.createElement("div",{className:e.hideSeparator||T?"comment_tile--commentContentWrapperNoBorder--Poey3 comment_tile--commentContentWrapper--L2vv2":"comment_tile--commentContentWrapper--L2vv2"},r.createElement("div",{className:"comment_tile--commentContent--QUN--"},r.createElement("div",{className:"comment_tile--commentMetaAndOptions--Avk6k"},r.createElement("div",null,r.createElement(F.N_,{className:"comment_tile--commentAuthorLink--3Q-Ty ellipsis--ellipsis--Tjyfa",to:A},r.createElement("span",{className:"comment_tile--commentAuthor--X2tiN text--fontPos13--xW8hS text--_fontBase--QdLsd"},a.name),r.createElement("span",{className:"comment_tile--commentAuthorHandle--qrjUX comment_tile--commentTime--Zz1IX text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},`@${a.profile_handle}`)),l&&r.createElement(H,null),r.createElement("span",{className:"comment_tile--commentMetaDivider--pzekb text--fontPos13--xW8hS text--_fontBase--QdLsd"},"\xb7"),r.createElement(B.h1,{className:"comment_tile--commentTime--Zz1IX text--fontPos11--2LvXf text--_fontBase--QdLsd",date:t.created_at})),r.createElement("div",{className:"comment_tile--commentOptions--hNQQM"},k&&r.createElement(U.B,{className:"comment_tile--isHiddenIcon--isUzt",svg:eI.A}),r.createElement("div",{className:Y},r.createElement(q.K0,{svg:eT.A,ref:m,onClick:e=>{let a=m.current;u?v():a&&(y(a.getBoundingClientRect()),_(x.j7({type:o.Ng,data:{commentId:t.id}}))),e.stopPropagation()},className:S?"comment_tile--iconButtonSelected--CaL6y raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6":Y,"data-tooltip-type":j.Ib.TEXT,"data-tooltip":(0,f.t)("community.comments.comment_actions")})))),r.createElement("div",{className:k?"comment_tile--messageIsHidden--e-XiE comment_tile--commentMessage--W-vWb comment_tile--commentMessageText---N-OK text--fontPos13--xW8hS text--_fontBase--QdLsd":"comment_tile--commentMessage--W-vWb comment_tile--commentMessageText---N-OK text--fontPos13--xW8hS text--_fontBase--QdLsd"},r.createElement(X.HH,{messageMeta:t.message_meta??[],className:"comment_tile--commentMessageText---N-OK text--fontPos13--xW8hS text--_fontBase--QdLsd",showEditedIndicator:!!t.edited_at,commentId:t.id})),s&&r.createElement("div",{className:"comment_tile--replyComposerContainer--Cfzby"},r.createElement(ew,{fallback:null,errorFallback:null,commentType:e.commentType,parentId:t.id,resourceId:e.resourceId,resourceType:e.resourceType,onSuccessCallback:()=>d(!1),onComplete:()=>d(!1)})))),S&&h&&r.createElement(eh,{parentRect:h,comment:t,profileIdToAdminResourceAs:e.profileIdToAdminResourceAs,onEdit:()=>{g(!0)},onDelete:w,hideCopyLink:!!t.parent_id,isThreadParent:I>0,onReply:0===t.reply_count?()=>{d(!0)}:void 0}))}let ex=(0,n.Ng)((e,t)=>{let{comments:a}=e.communityHub,r=a.commentsById[t.id],n=t.replyId?a.commentsById[t.replyId]:void 0;if(!r)return{user:e.user||null};let i=a.authorsById[r.author.id],l=a&&a.selectedCommentId===r.id,o=n?a.authorsById[n.author.id]:void 0;return{user:e.user||null,comment:r,creatorReply:n,replyAuthor:o,author:i,userIsResponder:o?.id===e.user?.community_profile_id,userIsAuthor:i.id===e.user?.community_profile_id,selected:l}})(function(e){return r.createElement(r.Fragment,null,r.createElement(eN,{id:e.id,user:e.user,comment:e.comment,author:e.author,selected:e.selected,userIsAuthor:e.userIsAuthor,commentType:e.commentType,isAuthorAcceptedPublisher:e.isAuthorAcceptedPublisher,profileIdToAdminResourceAs:e.profileIdToAdminResourceAs,hideSeparator:e.hideSeparator||!!e.creatorReply,resourceType:e.resourceType,resourceId:e.resourceId}),!!e.replyId&&r.createElement(eN,{id:e.replyId,user:e.user,comment:e.creatorReply,author:e.replyAuthor,selected:e.selected,userIsAuthor:e.userIsResponder,commentType:e.commentType,isAuthorAcceptedPublisher:!0,profileIdToAdminResourceAs:e.profileIdToAdminResourceAs,hideSeparator:e.hideSeparator,isCreatorReply:!!e.replyId,resourceType:e.resourceType,resourceId:e.resourceId}))});function eC(){return r.createElement("svg",{width:"288",height:"200",viewBox:"0 0 288 200",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("rect",{width:"288",height:"200",fill:"var(--color-bg, white)"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M121.5 60.5C147.457 60.5 168.5 81.5426 168.5 107.5C168.5 133.457 147.457 154.5 121.5 154.5C113.522 154.5 106.013 152.514 99.4356 149.01L98.9861 148.77L77.5743 152.339L85.893 138.197L85.2249 137.387C78.5239 129.264 74.5 118.854 74.5 107.5C74.5 81.5426 95.5426 60.5 121.5 60.5ZM171.5 107.5C171.5 79.8858 149.114 57.5 121.5 57.5C93.8858 57.5 71.5 79.8858 71.5 107.5C71.5 119.197 75.5183 129.959 82.2484 138.476L71.7319 156.354L98.4789 151.896C105.371 155.477 113.201 157.5 121.5 157.5C149.114 157.5 171.5 135.114 171.5 107.5Z",fill:"var(--color-icon-secondary, #BBBBBB)"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M196.932 119.342C203.847 110.959 208 100.215 208 88.5C208 61.7142 186.286 40 159.5 40C132.714 40 111 61.7142 111 88.5C111 115.286 132.714 137 159.5 137C167.729 137 175.48 134.95 182.27 131.334L206.347 135.347L196.932 119.342Z",fill:"var(--color-bg, white)"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M153.901 38.8101C155.739 38.6052 157.608 38.5 159.5 38.5C161.392 38.5 163.261 38.6052 165.099 38.8101L164.767 41.7917C163.038 41.599 161.281 41.5 159.5 41.5C157.719 41.5 155.962 41.599 154.233 41.7917L153.901 38.8101ZM169.531 39.5067C173.248 40.2639 176.816 41.4337 180.184 42.9659L178.942 45.6966C175.777 44.2568 172.425 43.1578 168.932 42.4464L169.531 39.5067ZM138.816 42.9659C142.184 41.4337 145.752 40.2639 149.469 39.5067L150.068 42.4464C146.575 43.1578 143.223 44.2568 140.058 45.6966L138.816 42.9659ZM184.181 45.0062C187.446 46.863 190.481 49.0766 193.234 51.5939L191.209 53.8077C188.621 51.4405 185.767 49.3593 182.698 47.6141L184.181 45.0062ZM125.766 51.5939C128.519 49.0766 131.554 46.863 134.819 45.0062L136.302 47.6141C133.233 49.3593 130.379 51.4405 127.791 53.8077L125.766 51.5939ZM196.406 54.7662C198.923 57.5187 201.137 60.5541 202.994 63.8194L200.386 65.3023C198.641 62.2331 196.559 59.3792 194.192 56.7908L196.406 54.7662ZM116.006 63.8194C117.863 60.5541 120.077 57.5187 122.594 54.7662L124.808 56.7908C122.441 59.3792 120.359 62.2331 118.614 65.3023L116.006 63.8194ZM205.034 67.8159C206.566 71.1837 207.736 74.7516 208.493 78.4694L205.554 79.0681C204.842 75.5749 203.743 72.2228 202.303 69.0582L205.034 67.8159ZM110.507 78.4694C111.264 74.7516 112.434 71.1837 113.966 67.8159L116.697 69.0582C115.257 72.2228 114.158 75.5749 113.446 79.0681L110.507 78.4694ZM209.19 82.9007C209.395 84.7394 209.5 86.6077 209.5 88.5C209.5 90.5773 209.373 92.6257 209.127 94.6378L206.149 94.2732C206.381 92.3818 206.5 90.4552 206.5 88.5C206.5 86.719 206.401 84.9616 206.208 83.2331L209.19 82.9007ZM109.5 88.5C109.5 86.6077 109.605 84.7394 109.81 82.9007L112.792 83.2331C112.599 84.9616 112.5 86.719 112.5 88.5C112.5 90.281 112.599 92.0384 112.792 93.7669L109.81 94.0993C109.605 92.2606 109.5 90.3923 109.5 88.5ZM113.966 109.184C112.434 105.816 111.264 102.248 110.507 98.5306L113.446 97.9319C114.158 101.425 115.257 104.777 116.697 107.942L113.966 109.184ZM208.289 99.4872C207.378 103.549 205.973 107.424 204.14 111.045L201.464 109.69C203.186 106.287 204.506 102.647 205.361 98.8307L208.289 99.4872ZM122.594 122.234C120.077 119.481 117.863 116.446 116.006 113.181L118.614 111.698C120.359 114.767 122.441 117.621 124.808 120.209L122.594 122.234ZM198.752 119.476C199.804 118.144 200.79 116.758 201.705 115.321L199.174 113.71C198.136 115.34 197 116.902 195.775 118.387L195.107 119.197L199.002 125.818L201.588 124.297L198.752 119.476ZM134.819 131.994C131.554 130.137 128.519 127.923 125.766 125.406L127.791 123.192C130.379 125.559 133.233 127.641 136.302 129.386L134.819 131.994ZM204.277 128.87L209.268 137.354L201.801 136.11L202.294 133.15L203.426 133.339L201.692 130.391L204.277 128.87ZM182.014 129.77L186.816 130.571L186.323 133.53L182.521 132.896C181.385 133.487 180.224 134.034 179.039 134.538L177.865 131.777C179.128 131.241 180.361 130.651 181.564 130.01L182.014 129.77ZM198.361 135.536L189.762 134.103L190.255 131.144L198.854 132.577L198.361 135.536ZM149.469 137.493C145.752 136.736 142.184 135.566 138.816 134.034L140.058 131.303C143.223 132.743 146.575 133.842 150.068 134.554L149.469 137.493ZM175.78 135.789C173.059 136.726 170.231 137.434 167.32 137.892L166.855 134.928C169.59 134.498 172.247 133.833 174.804 132.953L175.78 135.789ZM159.5 138.5C157.608 138.5 155.739 138.395 153.901 138.19L154.233 135.208C155.962 135.401 157.719 135.5 159.5 135.5C160.881 135.5 162.248 135.44 163.598 135.324L163.856 138.313C162.42 138.437 160.967 138.5 159.5 138.5Z",fill:"var(--color-icon-secondary, #BBBBBB)"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M158 98H161L161 90H169V87L161 87L161 79H158L158 87L150 87V90H158L158 98Z",fill:"var(--color-icon-secondary, #BBBBBB)"}))}ex.displayName="CommentTile";let eS="comments_list--emptyStateWrapper--utBdd",ek="comments_list--emptyStateHeader--72NAJ text--fontPos13--xW8hS text--_fontBase--QdLsd";function eA(e){let t=(0,n.d4)(e=>e.communityHub.comments.commentsById),a=(0,n.d4)(e=>e.communityHub.comments.showResolved),s=(0,n.d4)(e=>(0,i.cs)(e.authedActiveCommunityProfile)),{parentCommentIds:c,replies:d}=function(e,t){let a=[],r={};return e.forEach(e=>{if(t[e]){let{parent_id:n}=t[e];n&&t[n]?r[n]=e:n||a.push(e)}}),{parentCommentIds:a,replies:r}}(e.comments,t),m=a?c:c.reduce((e,a)=>(t[a]?.resolved_at||e.push(a),e),[]),u=(0,h.Vm)(e.resource);if(0===m.length&&!e.hasSelectedComment&&e.resource.comments_setting!==o.Ni.ALL_DISABLED)return r.createElement(eR,{isTeamOrOrgProfileActive:s});let _=[];if((u===I.vt.PLUGIN||u===I.vt.WIDGET)&&e.resource?.versions&&e.resource.current_plugin_version_id){let a=e.resource,n=a.versions[a.current_plugin_version_id].id;m.forEach(i=>{let o=t[i],s=o?.resource_version_id,c=a.versions[s];if(s&&c){if(s!==n){let e=new Date(c.created_at).toLocaleDateString(navigator.language,{year:"numeric",month:"long",day:"numeric"}),t=s===n&&c?void 0:`Version ${c.version} \xb7 ${e}`,a=_.pop();a&&_.push(r.cloneElement(a,{hideSeparator:!0})),_.push(r.createElement("div",{key:`divider-${s}`,className:"comments_list--versionDivider--NHliU text--fontPos11--2LvXf text--_fontBase--QdLsd"},t)),n=s}_.push(r.createElement(ex,{key:i,id:i,replyId:d[i],isAuthorAcceptedPublisher:(0,l.PR)(o,e.resource),commentType:e.commentType,resourceType:u,resourceId:e.resource.id,profileIdToAdminResourceAs:e.profileIdToAdminResourceAs}))}})}else _=m.map(a=>{let n=t[a];return r.createElement(ex,{key:a,id:a,replyId:d[a],isAuthorAcceptedPublisher:(0,l.PR)(n,e.resource),commentType:e.commentType,resourceType:u,resourceId:e.resource.id,profileIdToAdminResourceAs:e.profileIdToAdminResourceAs})});return r.createElement(r.Fragment,null,_)}function eR({isTeamOrOrgProfileActive:e}){return e?r.createElement("div",{className:eS},r.createElement(eC,null),r.createElement("div",{className:ek},(0,f.tx)("community.comments.to_comment_switch_to_your_personal_profile"))):r.createElement("div",{className:eS},r.createElement(eC,null),r.createElement("div",{className:ek},(0,f.tx)("community.comments.your_kudos_and_feedback_are_welcome")),r.createElement("div",{className:"comments_list--emptyStateSubheader--L5hsL text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,f.tx)("community.comments.share_your_thoughts_using_the_comment_box_above"),r.createElement("br",null)))}var eL=a(975350);function eD(e){let t=(0,n.wA)(),a=e.className?e.className:e.isShowing?"new_comments_toast--newCommentsToast--LpAPa text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L":"new_comments_toast--newCommentsToastHidden--QFXlr new_comments_toast--newCommentsToast--LpAPa text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L";return r.createElement("div",{className:a},r.createElement("div",{className:"new_comments_toast--text--yQ1Nw"},(0,f.tx)("community.comments.new_comments")),r.createElement("div",{className:"new_comments_toast--cta---bSfb",onClick:a=>{a.stopPropagation(),t(eL.UU()),t(b._F()),e.onRefresh()}},(0,f.tx)("community.comments.refresh")))}let eP=!1;function eF(e){let t;let a=(0,n.wA)(),l=(0,s.iZ)(),[o,m]=(0,r.useState)(!1),[u,x]=(0,r.useState)(!1),C=(0,y.o5)(),[S,k]=(0,r.useState)(!0),A=r.useRef(null),L=(0,n.d4)(e=>"communityHub"===e.selectedView.view&&"hubFile"===e.selectedView.subView&&e.selectedView.fullscreenState&&(0,T.t0)(e.selectedView.fullscreenState)),D=(0,n.d4)(e=>e.communityHub.comments.activeFeedType),F=(0,n.d4)(e=>e.communityHub.comments.newCommentsQueue),O=(0,n.d4)(e=>e.communityHub.comments.feeds),{feed:M,pagination:B}=r.useMemo(()=>O[D]||{feed:[]},[O,D]),U=(0,n.d4)(e=>e.communityHub.comments.selectedCommentId),V=(0,n.d4)(e=>e.selectedView.commentThreadId),H=(0,n.d4)(e=>!!e.user?.community_profile_id),W=U||V,j=D===I.Qv.ALL?e.numCommentsForResource:O[D]?.totalNumberOfComments,{resource:G}=e,$=(0,h.Vm)(G),z=F.length>0,Y=()=>{if(eP)return;eP=!0,m(!0);let e={resourceId:G.id,resourceType:$,selectedCommentId:W,pagination:B,activeFeedType:D,numCommentsForResource:j,pageSizeOverride:C()?w.zn:w.VK};a(b.p4({...e,onSuccess:e=>{a(b.vr(e)),eP=!1,m(!1)},onError:()=>{eP=!1,m(!1)}}))},K=void 0===B&&(0,i.e5)(G);r.useEffect(()=>{K&&Y()},[D,K]);let Q=!!B,X=B?.selected_comment;r.useEffect(()=>{S&&X&&(A.current&&window.scroll({left:0,top:A.current.offsetTop-36,behavior:"smooth"}),k(!1))},[S,X]),r.useEffect(()=>{a(b.cO())},[G.id]);let q=()=>Q&&(0,d.u9)({pagination:B})&&Y(),J=M.filter(e=>e!==B?.selected_comment?.id);B?.selected_comment&&J.unshift(B?.selected_comment.id);let Z=(0,E.J)();return(0,i.e5)(G)?r.createElement(r.Fragment,null,r.createElement("div",{className:"comments_view--commentsViewWrapper--SURB9",ref:A},!e.commentingIsRestricted&&r.createElement(ev,{fallback:null,errorFallback:null,commentType:e.commentType,resourceType:$,resourceId:G.id,onSuccessCallback:e=>{(0,c.sx)(N.d,{commentId:e?.id,message:e?.message,userId:l?.id,profileId:l?.community_profile_id,resourceType:$,resourceId:G.id,searchSessionId:Z})}}),r.createElement("div",{className:"comments_view--commentsListHeader--3uRw8 text--fontPos11--2LvXf text--_fontBase--QdLsd"},r.createElement("div",{className:"comments_view--numCommentsForResource--J0QKb"},(t=j||0,(0,f.t)("community.comments.pluralize_comments",{numComments:t}))),!L&&!e.commentingIsRestricted&&r.createElement(P,{includeShowResolved:!1,isLoggedIn:H})),r.createElement(g.a,{onIntersectionChange:e=>{u||(x(!0),(0,c.sx)("Community Comments Section Impressed",{resourceType:$,resourceId:G.id}))}}),r.createElement(v.hJ,null,r.createElement(p.x,{isLoading:void 0===B,className:R},()=>r.createElement(_,{onScrollToBottom:q,showLoader:o&&(0,d.u9)({pagination:B})},r.createElement(eA,{comments:J,commentType:e.commentType,resource:G,profileIdToAdminResourceAs:e.profileIdToAdminResourceAs,hasSelectedComment:!!B?.selected_comment})))),r.createElement(v.XY,null,r.createElement(p.x,{isLoading:void 0===B,className:R},()=>r.createElement(r.Fragment,null,r.createElement(eA,{comments:J,commentType:e.commentType,resource:G,profileIdToAdminResourceAs:e.profileIdToAdminResourceAs}),(0,d.u9)({pagination:B})&&r.createElement("div",{className:"comments_view--mobileLoadMore--tqxIs text--fontPos13--xW8hS text--_fontBase--QdLsd",onClick:q},(0,f.tx)("community.comments.load_more_comments")))))),r.createElement("div",{className:"comments_view--notifications--ZuAh9"},r.createElement(eD,{onRefresh:()=>{let e=A.current?.offsetTop;e&&window.scrollY>e&&window.scroll({top:e,left:0,behavior:"smooth"})},isShowing:z}))):null}function eO({resource:e}){let t=(0,s.iZ)(),a=(0,n.d4)(t=>(0,l.MK)(t,e))>=l.Cw.ADMIN&&(i.cV(e)?.id||t?.community_profile_id)||null,c=(0,n.d4)(e=>e.authedActiveCommunityProfile);return r.createElement(eF,{commentType:o.ej.COMMUNITY,resource:e,numCommentsForResource:e.comment_count,profileIdToAdminResourceAs:a,commentingIsRestricted:!(0,i.LI)(t,e)||(0,i.cs)(c)})}},895587:(e,t,a)=>{a.d(t,{s:()=>g});var r=a(411855),n=a(188507),i=a(939863),l=a(227020),o=a(351226),s=a(837324),c=a(662275),d=a(988022),m=a(697551),u=a(860178),_=a(555328),p=a(498606);function g({resource:e,viewContext:t}){let a=(0,n.wA)(),g=(0,u.iZ)(),f=Object.values((0,n.d4)(e=>(0,m.Tm)(e))).filter(t=>(0,_.I0)(e)&&t.plugins_whitelist_enforced||(0,_.xQ)(e)&&t.widgets_whitelist_enforced),E=(e,t)=>{a((0,c.to)({type:(0,l.W)(),data:{extensionId:e.id,orgId:t,extensionType:(0,_.I0)(e)?"plugin":"widget",isAllowed:!1,source:"community"}}))};return r.createElement("button",{className:"approve_button--buttonContainer--lDvpx cta_button--buttonBase--xMT0c text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",onClick:()=>{if((0,d.Cu)({viewContext:t,resourceId:e.id,resourceType:(0,s.Vm)(e),allowlistOrgs:f.length},"approve-button-clicked"),1===f.length){E(e,f[0].id);return}if(!g)return;let r=f.map(e=>({orgId:e.id,workspaceName:e.name,user:g,userId:g?.id||""}));a((0,c.to)({type:o._,data:{payload:{extension:e,workspaces:r,onSelectWorkspace:t=>{E(e,t.orgId)},mode:"manage_allowlist"}}}))},"data-testid":"approve-button","data-onboarding-key":"approve-button","data-tooltip-type":p.Ib.TEXT},(0,i.tx)("community.plugins.approve_ellipsis"))}},443474:(e,t,a)=>{a.d(t,{b:()=>s});var r=a(411855),n=a(939863);let i=r.createElement("span",null,r.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("rect",{width:"16",height:"16",fill:"var(--color-background)"}),r.createElement("path",{d:"M1.8843 3.04791L2.23141 3.40779L1.8843 3.04791ZM7.12543 3.04791L7.47254 2.68802L7.12543 3.04791ZM1.8843 8.10293L2.23141 7.74304L2.23141 7.74304L1.8843 8.10293ZM2.75826 8.94585L3.10528 9.30582L3.47859 8.94594L3.10536 8.58597L2.75826 8.94585ZM2.75823 8.94588L2.41121 8.58591L2.0379 8.9458L2.41112 9.30577L2.75823 8.94588ZM7.99935 14.0009L7.65225 14.3608L7.99935 14.6956L8.34646 14.3608L7.99935 14.0009ZM14.114 8.10338L13.7669 7.74349L13.7669 7.74349L14.114 8.10338ZM14.114 3.04836L14.4611 2.68847L14.4611 2.68847L14.114 3.04836ZM8.87288 3.04836L8.52577 2.68847L8.52577 2.68847L8.87288 3.04836ZM7.99939 3.89083L7.65228 4.25072L7.99939 4.5855L8.34649 4.25072L7.99939 3.89083ZM2.23141 3.40779C3.48501 2.19871 5.52472 2.19871 6.77832 3.40779L7.47254 2.68802C5.83154 1.1053 3.17819 1.1053 1.53719 2.68802L2.23141 3.40779ZM2.23141 7.74304C0.987968 6.54376 0.987968 4.60708 2.23141 3.40779L1.5372 2.68802C-0.113961 4.28055 -0.113961 6.87029 1.5372 8.46281L2.23141 7.74304ZM3.10536 8.58597L2.23141 7.74304L1.5372 8.46281L2.41115 9.30574L3.10536 8.58597ZM3.10525 9.30585L3.10528 9.30582L2.41124 8.58588L2.41121 8.58591L3.10525 9.30585ZM8.34646 13.641L3.10533 8.586L2.41112 9.30577L7.65225 14.3608L8.34646 13.641ZM13.7669 7.74349L7.65225 13.641L8.34646 14.3608L14.4611 8.46326L13.7669 7.74349ZM13.7669 3.40824C15.0103 4.60753 15.0103 6.54421 13.7669 7.74349L14.4611 8.46326C16.1123 6.87074 16.1123 4.281 14.4611 2.68847L13.7669 3.40824ZM9.21998 3.40824C10.4736 2.19916 12.5133 2.19916 13.7669 3.40824L14.4611 2.68847C12.8201 1.10575 10.1668 1.10575 8.52577 2.68847L9.21998 3.40824ZM8.34649 4.25072L9.21998 3.40824L8.52577 2.68847L7.65228 3.53094L8.34649 4.25072ZM6.77832 3.40779L7.65228 4.25072L8.34649 3.53094L7.47254 2.68802L6.77832 3.40779Z",fill:"var(--color-icon)"}))),l=r.createElement("span",null,r.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("rect",{width:"16",height:"16",fill:"var(--color-background)"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.12543 3.04791C5.67813 1.652 3.3316 1.652 1.8843 3.04791C0.437004 4.44381 0.437004 6.70702 1.8843 8.10293L2.75826 8.94585L2.75823 8.94588L7.99935 14.0009L14.114 8.10338C15.5613 6.70747 15.5613 4.44426 14.114 3.04836C12.6667 1.65245 10.3202 1.65245 8.87288 3.04836L7.99939 3.89083L7.12543 3.04791Z",fill:"#F24822"}),r.createElement("path",{d:"M1.8843 3.04791L2.23141 3.40779L1.8843 3.04791ZM7.12543 3.04791L7.47254 2.68802L7.12543 3.04791ZM1.8843 8.10293L2.23141 7.74304L2.23141 7.74304L1.8843 8.10293ZM2.75826 8.94585L3.10528 9.30582L3.47859 8.94594L3.10536 8.58597L2.75826 8.94585ZM2.75823 8.94588L2.41121 8.58591L2.0379 8.9458L2.41112 9.30577L2.75823 8.94588ZM7.99935 14.0009L7.65225 14.3608L7.99935 14.6956L8.34646 14.3608L7.99935 14.0009ZM14.114 8.10338L13.7669 7.74349L13.7669 7.74349L14.114 8.10338ZM14.114 3.04836L14.4611 2.68847L14.4611 2.68847L14.114 3.04836ZM8.87288 3.04836L8.52577 2.68847L8.52577 2.68847L8.87288 3.04836ZM7.99939 3.89083L7.65228 4.25072L7.99939 4.5855L8.34649 4.25072L7.99939 3.89083ZM2.23141 3.40779C3.48501 2.19871 5.52472 2.19871 6.77832 3.40779L7.47254 2.68802C5.83154 1.1053 3.17819 1.1053 1.53719 2.68802L2.23141 3.40779ZM2.23141 7.74304C0.987968 6.54376 0.987968 4.60708 2.23141 3.40779L1.5372 2.68802C-0.113961 4.28055 -0.113961 6.87029 1.5372 8.46281L2.23141 7.74304ZM3.10536 8.58597L2.23141 7.74304L1.5372 8.46281L2.41115 9.30574L3.10536 8.58597ZM3.10525 9.30585L3.10528 9.30582L2.41124 8.58588L2.41121 8.58591L3.10525 9.30585ZM8.34646 13.641L3.10533 8.586L2.41112 9.30577L7.65225 14.3608L8.34646 13.641ZM13.7669 7.74349L7.65225 13.641L8.34646 14.3608L14.4611 8.46326L13.7669 7.74349ZM13.7669 3.40824C15.0103 4.60753 15.0103 6.54421 13.7669 7.74349L14.4611 8.46326C16.1123 6.87074 16.1123 4.281 14.4611 2.68847L13.7669 3.40824ZM9.21998 3.40824C10.4736 2.19916 12.5133 2.19916 13.7669 3.40824L14.4611 2.68847C12.8201 1.10575 10.1668 1.10575 8.52577 2.68847L9.21998 3.40824ZM8.34649 4.25072L9.21998 3.40824L8.52577 2.68847L7.65228 3.53094L8.34649 4.25072ZM6.77832 3.40779L7.65228 4.25072L8.34649 3.53094L7.47254 2.68802L6.77832 3.40779Z",fill:"#F24822"})));var o=a(498606);function s(e){let t=r.useRef(null);return e.disabled?r.createElement("button",{className:"base_like_button--buttonContainerDisabled--sOWAD base_like_button--buttonContainer--vfBIa cta_button--buttonBase--xMT0c text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",disabled:e.disabled},r.createElement("div",{className:"base_like_button--likeIconDisabled--dfrWS base_like_button--likeIcon--70nFu text--fontPos18--rYXJb text--_fontBase--QdLsd"},i)):r.createElement("button",{className:"base_like_button--buttonContainer--vfBIa cta_button--buttonBase--xMT0c text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",onClick:e.onClick,"data-tooltip":(0,n.t)("community.like"),"data-tooltip-type":o.Ib.TEXT,"data-testid":"like-button"},r.createElement("div",{className:"base_like_button--likeIcon--70nFu text--fontPos18--rYXJb text--_fontBase--QdLsd",ref:t},e.isResourceLiked?l:i))}},342646:(e,t,a)=>{a.d(t,{G:()=>p});var r=a(411855),n=a(188507),i=a(654923),l=a(466636),o=a(225266),s=a(782501),c=a(860178),d=a(820642),m=a(215822),u=a(555328),_=a(624618);function p({resource:e}){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.authedActiveCommunityProfile),p=(0,n.d4)(t=>(0,s.MK)(t,e)),g=s.Gl.includes(p)&&(e.community_publishers?.accepted||[]).length>1&&a?.primary_user_id,f=r.useCallback(()=>{(0,u.U)(e)?t((0,o.bb)({hub_file_id:e.id})):(0,u.xQ)(e)?t((0,o.bb)({widget_id:e.id})):t((0,o.bb)({plugin_id:e.id}))},[t,e]),E=(0,u.m3)(e),h=(0,i.I)(e),y=(0,c.iZ)(),v=(0,u.U)(e)?(0,d.a6)(e):(0,m.uF)(e);return r.createElement(r.Fragment,null,g&&r.createElement(_.d,{onClick:f,className:"metadata_additional_actions_logged_in--link--Hgvm- text--fontPos13--xW8hS text--_fontBase--QdLsd"}),E&&(0,l.QQ)(h)&&r.createElement(_.NY,{resource:e,payment:h}),E&&y&&(0,l.QQ)(h)&&(0,l.C)(h)&&r.createElement(_.EV,{user:y,name:v.name,monetizedResource:e.monetized_resource_metadata}))}},258520:(e,t,a)=>{a.d(t,{U:()=>G});var r=a(411855),n=a(188507),i=a(776250),l=a(22332),o=a(966712),s=a(939863),c=a(611886),d=a(320063),m=a(860601),u=a(67833),_=a(574176),p=a(762638),g=a(809840),f=a(351226),E=a(662275),h=a(151283),y=a(860178),v=a(237870),b=a(488578),w=a(215460);let T="use_preset_options_modal--presetOptionsModal__optionText--BPEmi",I="use_preset_options_modal--presetOptionsModal__chevron--dF5v3";var N=a(816679),x=a(250167);let C=(0,v.Ju)(function({hubFile:e}){let t=(0,n.wA)(),a=(0,y.iZ)();(0,d.h)(()=>{i.az.trackDefinedEvent("preset_libraries.preset_options_modal_displayed",{userId:a?.id,hubFileId:e.id,partnerType:(0,h.X)(e.id)})});let l=r.useCallback(()=>{t(E.Ce())},[t]),v=r.useCallback(()=>{l(),i.az.trackDefinedEvent("preset_libraries.preset_options_modal_option_clicked",{userId:a?.id,hubFileId:e.id,partnerType:(0,h.X)(e.id),option:"cancel"})},[l,e,a]),C=r.useCallback(()=>{let r=c.Q4(e=>{t((0,E.to)({type:f._,data:{payload:e}}))});l(),t(r(e)),i.az.trackDefinedEvent("preset_libraries.preset_options_modal_option_clicked",{userId:a?.id,hubFileId:e.id,partnerType:(0,h.X)(e.id),option:"show_in_figma"})},[t,l,e,a]),S=r.useCallback(()=>{let r=c.gE(e=>{t((0,E.to)({type:f._,data:{payload:e}}))});l(),t(r(e)),i.az.trackDefinedEvent("preset_libraries.preset_options_modal_option_clicked",{userId:a?.id,hubFileId:e.id,partnerType:(0,h.X)(e.id),option:"make_a_copy"})},[t,l,e,a]);return r.createElement(b.Nb,{hide:m.lQ,disableClickOutsideToHide:!0,className:"use_preset_options_modal--presetOptionsModal--MPCAv"},r.createElement("div",{className:"use_preset_options_modal--presetOptionsModal__header--7Ul9l"},r.createElement(g.E,{fontWeight:"medium",fontSize:20},(0,s.tx)("community.preset_modal.header"))),r.createElement("div",{className:"use_preset_options_modal--presetOptionsModal__description--GD8wZ"},r.createElement(g.E,{fontSize:13},(0,s.tx)("community.preset_modal.description"))),r.createElement("div",{className:w.sw},r.createElement("button",{className:w.tW,onClick:C},r.createElement(u.oS,{type:u.y1.DESIGN,size:u.LE.MEDIUM,className:p.cx.pl12.pr12.$}),r.createElement("div",{className:T},r.createElement(g.E,{fontSize:13},(0,o.kc)().cmty_preset_modal_revised_copy?(0,s.tx)("community.preset_modal.use_ui_kit_in_a_new_file"):(0,s.tx)("community.preset_modal.show_in_figma"))),r.createElement(_.B,{className:I,svg:N.A})),r.createElement("button",{className:w.tW,onClick:S},r.createElement(_.B,{svg:x.A,className:"use_preset_options_modal--presetOptionsModal__copyIcon--OFXiM"}),r.createElement("div",{className:T},r.createElement(g.E,{fontSize:13},(0,o.kc)().cmty_preset_modal_revised_copy?(0,s.tx)("community.preset_modal.make_a_copy_of_this_file"):(0,s.tx)("community.preset_modal.make_a_copy"))),r.createElement(_.B,{className:I,svg:N.A}))),r.createElement("button",{className:"use_preset_options_modal--presetOptionsModal__cancel--vne9o text--fontPos13--xW8hS text--_fontBase--QdLsd",onClick:v},(0,s.t)("community.try.pick_workspace.cancel")))},"USE_PRESET_OPTIONS_MODAL_TYPE",v.ZU.YES);var S=a(342),k=a(654923),A=a(466636),R=a(545941),L=a(107877),D=a(101505),P=a(672517),F=a(697551),O=a(941448),M=a(830445),B=a(99506),U=a(137459),V=a(498606),H=a(966537),W=a(964675),j=a(152462);function G({hubFile:e,enableWideButtonForStickyFooter:t}){let a=r.createRef(),d=(0,n.wA)(),m=(0,n.d4)(e=>(0,F.cs)(e.authedActiveCommunityProfile)),u=(0,n.d4)(e=>e.userFlags).apple_eula_accepted,_=(0,k.I)(e),p=(0,O.IE)(e),g=e.viewer_mode===B.y4.WHITEBOARD,h=(0,S.R)(d),y=(0,l.N)(`(max-width: ${L.YW}px)`),v=g?(0,s.tx)("community.duplicate.open_in_figjam"):(0,s.tx)("community.duplicate.open_in_figma"),b=r.useCallback(()=>{let t=()=>{if((0,o.kc)().dse_preset_libraries&&(0,o.kc)().presets_on_cmty&&(0,M.TX)(e.id)&&h&&!y)d((0,E.to)({type:C,data:{hubFile:e}}));else{let t=c.gE(e=>{(0,i.sx)("try_it_out_drafts_picker_menu_opened",p),d((0,E.to)({type:f._,data:{payload:e}}))});d(t(e))}};(0,R.mA)(e)&&!u?d(E.to({type:H.F,data:{hubFileId:e.id,onUseHubFile:t}})):t()},[d,e,p,u,h,y]);if(m||(0,R.lT)(e)){let t;return(0,R.lT)(e)?t=(0,s.t)("community.resource.admin_blocked_resource_banner.this_resource_is_blocked"):m&&(t=(0,s.t)("community.duplicate.to_duplicate_switch_to_your_personal_profile")),r.createElement("div",{"data-tooltip-type":V.Ib.TEXT,"data-tooltip":t,"data-tooltip-show-immediately":!0},r.createElement("div",{className:j.nu},r.createElement("div",{className:j.uD},v)))}return(({buttonText:e,onClick:n})=>r.createElement(P.fu,{name:"Duplicate button",properties:{trackingDescriptor:D.c.HUB_FILE_DUPLICATE_BUTTON,...p}},r.createElement("div",{ref:a},r.createElement(W.H,{buttonText:e,onClick:n,useNoIconStyle:!0,editorType:g?U.LE.FIGJAM:U.LE.FIGMA,enableWideButtonForStickyFooter:t}))))((0,A.QQ)(_)?{buttonText:(0,s.tx)("community.duplicate.open"),onClick:b}:{buttonText:v,onClick:b})}},964675:(e,t,a)=>{a.d(t,{H:()=>c});var r=a(411855),n=a(629019),i=a.n(n),l=a(672517),o=a(137459),s=a(152462);function c({buttonText:e,onClick:t,useNoIconStyle:a,editorType:n,enableWideButtonForStickyFooter:c,dataTestId:d}){let m=function(e){switch(e){case o.LE.FIGJAM:return"whiteboard";case o.LE.SLIDES:return"piper";default:return"design"}}(n);return r.createElement(l.$z,{className:i()({[s.tt]:a,[s.Vi]:!a,[s.uw]:c}),onClick:t,dataTestId:d||"community-duplicate-button","data-editor-theme":m},r.createElement("div",{className:s.uD},e))}},226900:(e,t,a)=>{a.d(t,{z:()=>n});var r=a(411855);function n(e){return r.createElement("div",{className:"metadata_section--metadataSection--3wssk ellipsis--ellipsis--Tjyfa"},e.title&&r.createElement("div",{className:"metadata_section--subheader--Zk7ID"},e.title),r.createElement("div",{className:"metadata_section--metadataSectionText--7ruPx text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.children))}},10588:(e,t,a)=>{a.d(t,{l:()=>b});var r=a(411855),n=a(188507),i=a(776250),l=a(22332),o=a(939863),s=a(611886),c=a(281297),d=a(964675),m=a(351226),u=a(342),_=a(662275),p=a(107877),g=a(101505),f=a(672517),E=a(941448),h=a(137459),y=a(498606),v=a(152462);function b({resource:e,enableWideButtonForStickyFooter:t}){let a=(0,E.IE)(e),b=(0,n.wA)(),w=(0,l.N)(`(max-width: ${p.YW}px)`),T=(0,r.useCallback)(()=>{if(w){b((0,_.to)({type:c.s,data:{dispatch:b,editorType:h.LE.SLIDES}}));return}let t=s.u5(e=>{(0,i.sx)("try_it_out_drafts_picker_menu_opened",a),b((0,_.to)({type:m._,data:{payload:e}}))});b(t(e))},[b,e,a,w]),I=(0,u.v)(b),N=(0,o.tx)("community.use_slide_template"),x=r.createElement("div",{"data-testid":"slide-template-use-button",className:v.nu},r.createElement("div",{className:v.uD},N));if(!I){let e=(0,o.t)("community.use_slide_template.disabled_tooltip");return r.createElement(f.fu,{name:"slide_template_use_button",properties:{trackingDescriptor:g.c.SLIDE_TEMPLATE_USE_BUTTON,...a,isEnabled:!1}},r.createElement("div",{"data-tooltip-type":y.Ib.TEXT,"data-tooltip":e,"data-tooltip-show-immediately":!0},x))}return r.createElement(f.fu,{name:"slide_template_use_button",properties:{trackingDescriptor:g.c.SLIDE_TEMPLATE_USE_BUTTON,...a,isEnabled:!0}},r.createElement(d.H,{buttonText:N,onClick:T,useNoIconStyle:!0,editorType:h.LE.SLIDES,enableWideButtonForStickyFooter:t,dataTestId:"slide-template-use-button"}))}},568424:(e,t,a)=>{a.d(t,{_:()=>d,u:()=>m});var r=a(411855),n=a(296210),i=a.n(n),l=a(981952),o=a(939863),s=a(107877);let c="truncated_description_view--blueLink--v3wsX blue_link--blueLink--9rlnd";function d({description:e}){let t=r.useRef(null);return r.useEffect(()=>{if(!t.current)return;let a=document.createElement("div");a.innerHTML=i().sanitize(e);let r=s.Ep.map(e=>`:not(${e})`).join("");for(let e of a.querySelectorAll(r))e.parentNode?.removeChild(e);t.current.innerHTML=a.innerHTML},[t,e]),r.createElement("div",{ref:t})}function m({description:e,hideDivider:t=!1}){let a=r.useRef(null),[n,i]=r.useState(!1),[m,u]=r.useState(!1),_=(0,l.R)(s.YW)?s.dz:s.Un;return r.useEffect(()=>{a.current&&a.current.getBoundingClientRect().height>_&&(i(!0),u(!0))},[_]),r.createElement(r.Fragment,null,r.createElement("div",{style:n?{maxHeight:`${_}px`}:{},className:n?"truncated_description_view--truncatedDescription--H3ST8 truncated_description_view--description--7qZxm text--fontPos14--OL9Hp text--_fontBase--QdLsd":"truncated_description_view--description--7qZxm text--fontPos14--OL9Hp text--_fontBase--QdLsd",ref:a},r.createElement(d,{description:e}),!n&&m&&r.createElement("div",{className:c,onClick:()=>{i(!0)},role:"button",tabIndex:0},(0,o.tx)("community.detail_view.show_less"))),n&&r.createElement("div",{className:"truncated_description_view--readMoreWrapper--4ruCR text--fontPos14--OL9Hp text--_fontBase--QdLsd"},r.createElement("div",{className:c,onClick:()=>{i(!1)},role:"button",tabIndex:0},(0,o.tx)("community.detail_view.read_more"))),!t&&r.createElement("div",{className:"truncated_description_view--divider--RK37w"}))}},897088:(e,t,a)=>{a.d(t,{N:()=>n,b:()=>r});let r=12,n=10},342:(e,t,a)=>{a.d(t,{R:()=>g,v:()=>f});var r=a(411855),n=a(966712);if(443==a.j)var i=a(374626);var l=a(586459),o=a(776621),s=a(989329),c=a(298527),d=a(6974),m=a(935308),u=a(860178),_=a(984968);function p(e){let t=(0,n.kc)().ps_benchmark,a=(0,i.md)(d.g),s=(0,u.iZ)();return r.useEffect(()=>{a===l.r.INIT&&t&&(0,m.nm)()(e).catch(e=>{(0,o.x1)("Error loading plans for authed users",e,{reportErrorToSentry:!0})})},[e,t,a]),r.useMemo(()=>{let e=[],r=[];if(!s||!t||a===l.r.LOADING||a===l.r.INIT)return{teams:e,orgs:r};let n=a.plansByUserId[s.id];return n?.map(t=>{if("team"===t.plan_type){let r=a.teams.find(e=>e.id===t.plan_id);r&&e.push(r)}if("org"===t.plan_type){let e=a.orgs.find(e=>e.id===t.plan_id);e&&r.push(e)}}),{teams:e,orgs:r}},[a,s,t])}function g(e){let t=(0,u.iZ)(),a=(0,s.P9)()||null,n=(0,_.ol)(),{teams:i,orgs:l}=p(e);return r.useMemo(()=>!!t&&(i.length||l.length?Object.values(i).some(e=>(0,c.MJ)(null,e))||Object.values(l).some(e=>(0,c.MJ)(e,null)):(0,c.MJ)(a,n)),[t,i,l,a,n])}function f(e){let t=(0,u.iZ)(),a=(0,s.P9)(),{teams:n,orgs:i}=p(e);return r.useMemo(()=>!!t&&(n.length||i.length?n.length>0||i.some(e=>!e.is_slides_disabled):!a?.is_slides_disabled),[t,n,i,a])}},20130:(e,t,a)=>{a.d(t,{i:()=>E});var r=a(411855),n=a(188507),i=a(776250),l=a(939863),o=a(662275),s=a(115826),c=a(697551),d=a(611978),m=a(860178),u=a(555328),_=a(368361),p=a(746806),g=a(63666);let f="community_universal_publish_button--publishContextAction--l-h6g action--root--aRLIQ chevron--chevronContainer--0MO2x";function E(){let e=(0,n.wA)(),t="CommunityUniversalPublishButtonTooltipKey",a=(0,m.Pc)(),E=(0,n.d4)(e=>!e.currentUserOrgId||!!(0,c.Tm)(e)[e.currentUserOrgId]),[h,y]=r.useState(!1),v=r.useRef(),b=(0,d._6)();return E?r.createElement("div",{className:f},r.createElement("div",{className:"subView"in b&&("hubFile"===b.subView||"plugin"===b.subView||"widget"===b.subView)?"community_universal_publish_button--publishButton__DARK--TM73r community_universal_publish_button--publishButton--YumhB":"community_universal_publish_button--publishButton--YumhB",role:"button",tabIndex:0,onClick:()=>{(0,i.sx)("community_publish_modal",{user:a.id,step:s.M.OPENED}),e(o.to({type:_.R,data:{source:u.Zm.NAVBAR}}))}},(0,l.tx)("navbar.navbar.publish_button_label"))):r.createElement("div",{className:f,"data-onboarding-key":t,onMouseEnter:()=>{v.current&&clearTimeout(v.current),y(!0)},onMouseLeave:()=>{v.current=setTimeout(()=>y(!1),300)}},r.createElement("div",{className:"community_universal_publish_button--publishButtonDisabled--b7SqN community_universal_publish_button--publishButton--YumhB",role:"button",tabIndex:0},(0,l.tx)("navbar.navbar.publish_button_label")),h&&r.createElement(g.NJ,{targetKey:t,width:264,className:"community_universal_publish_button--disabledPublishButtonTooltip--uZ-YL pointer_modal--pointerModal--wrpFz text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",shouldCenterArrow:p.EL.FALLBACK,backgroundColor:"var(--color-bg-tooltip, #000)"},r.createElement("div",null,(0,l.tx)("navbar.navbar.disabled_publish_button_label"))))}},759822:(e,t,a)=>{a.d(t,{u4:()=>d,$$:()=>m});var r=a(411855),n=a(629019),i=a.n(n);let l="lazy_input--lazyInput--uH0Ln";class o extends r.PureComponent{constructor(e){super(e),this.procrastinating=!1,this.procrastinationTimer=null,this.onLazyUpdate=()=>{this.procrastinating=!1,this.updateIfNotLazy(this.state.requestedValue)},this.onChange=e=>{this.procrastinate(),this.setState({value:e.target.value}),this.props.onChange(e)},this.state={value:this.props.value}}componentDidMount(){this.props.autoFocus&&this.props.innerRef?.current&&this.props.innerRef.current.focus()}UNSAFE_componentWillReceiveProps(e){this.updateIfNotLazy(e.value)}componentWillUnmount(){this.procrastinationTimer&&(clearTimeout(this.procrastinationTimer),this.procrastinating=!1)}updateIfNotLazy(e){this.procrastinating?this.setState({requestedValue:e}):this.state.value!==e&&this.setState({value:e,requestedValue:void 0})}procrastinate(){this.procrastinating=!0,this.procrastinationTimer&&clearTimeout(this.procrastinationTimer),this.procrastinationTimer=setTimeout(this.onLazyUpdate,this.props.delay)}getProps(){let e={...this.props};return delete e.delay,delete e.innerRef,e.value=this.state.value,e.onChange&&(e.onChange=this.onChange),null==e.value&&(e.value=void 0),e.className?e.className=`${e.className} ${l}`:e.className=l,e}render(){return r.createElement("input",{...this.getProps(),ref:this.props.innerRef,dir:"auto"})}}o.displayName="LazyInput",o.defaultProps={type:"text",delay:1e3};let s=r.forwardRef((e,t)=>r.createElement(o,{...e,innerRef:t}));var c=a(3453);class d extends r.Component{constructor(){super(...arguments),this.onKeyDown=e=>{this.props.onKeyDown&&this.props.onKeyDown(e),27===e.keyCode&&e.target.blur()},this.onClick=e=>{this.props.onClick&&this.props.onClick(e)}}render(){let e={...this.props};e.className=`${this.props.defaultClass} ${this.props.className||""}`;let t=this.props.dataTestId;return delete e.defaultClass,delete e.dataTestId,this.props.onClick&&(e.onClick=this.onClick),r.createElement("button",{onKeyDown:this.onKeyDown,...e,"data-testid":t},this.props.children)}}d.displayName="ButtonBase";class m extends r.Component{render(){let{fullWidth:e,...t}=this.props;return r.createElement(d,{defaultClass:i()(c.xZ,e&&c.Ij),...t})}}m.displayName="ButtonPrimary";class u extends r.Component{render(){let e=this.props;return r.createElement(d,{defaultClass:c.HM,type:"button",...e})}}u.displayName="ButtonSecondary",r.forwardRef(function({className:e,...t},a){return r.createElement(s,{className:i()(c._Z,e),...t,ref:a})});class _ extends r.PureComponent{constructor(e){super(e),this.documentKeyDown=e=>{9===e.keyCode&&this.setState({showFocus:!0})},this.documentMouseDown=()=>{this.setState({showFocus:!1})},this.onFocus=e=>{this.state.showFocus||e.target.blur()},this.classNameForInput=()=>{let e=`${c.kv} ${this.props.className||""}`;return this.state.showFocus&&(e+=` ${c.hP}`),e},this.state={showFocus:!1}}componentDidMount(){document.addEventListener("keydown",this.documentKeyDown),document.addEventListener("mousedown",this.documentMouseDown)}componentWillUnmount(){document.removeEventListener("keydown",this.documentKeyDown),document.removeEventListener("mousedown",this.documentMouseDown)}render(){let e=this.props.classOverride||this.classNameForInput(),t={...this.props,className:e};return delete t.classOverride,r.createElement("input",{type:"checkbox",onFocus:this.onFocus,...t})}}_.displayName="Checkbox"},952540:(e,t,a)=>{a.d(t,{j:()=>m});var r=a(776250),n=a(517333),i=a(737947),l=a(27087),o=a(980820),s=a(677664),c=a(320741),d=a(583894);let m=(0,o.nF)(async(e,t,{loadingKey:a})=>{let o=t.user.stripe_account_status===d.P5.STARTED_ONBOARDING?"stripe_onboarding_continue":"stripe_onboarding_start";(0,r.sx)(o,{userId:t.user.id,entrypoint:t.selectedView.subView});try{let r=l.Ay.post("/api/community/seller/onboard",{accepted_seller_tos:!0,is_desktop:!!n.eD,first_name:t.firstName,last_name:t.lastName,address:t.address,vat_id:t.vatId});(0,c.N)(r,e,a);let o=await r;if(!o?.data?.meta){t.callback(!1);return}let d=o.data.meta;n.eD?e.dispatch((0,s.RK)({rawInput:d})):i.Ay.unsafeRedirect(d),setTimeout(()=>{t.callback(!0)},1e3)}catch(e){t.callback(!1)}})},657544:(e,t,a)=>{a.d(t,{J:()=>r,o:()=>n});let r="https://play.google.com/store/apps/details?id=com.figma.mirror",n="https://apps.apple.com/us/app/figma-mirror/id1152747299#"},843309:(e,t,a)=>{a.d(t,{wn:()=>R,Ix:()=>k,dl:()=>L,Op:()=>A});var r=a(411855),n=a(776250),i=a(157663),l=a(966712),o=a(776621),s=a(304783),c=a(27087),d=a(939863),m=a(622139);function u({defaultCountry:e,initialAddress:t}={}){let[a,n]=(0,r.useState)({...(0,m.EB)(e),...t??{}}),i=async()=>{try{await c.Ay.post("/api/validate_address",{address:a})}catch(e){return(0,d.Jv)(e)||e.message}return null};return{address:a,updateAddress:e=>{n(t=>({...t,...e}))},trimAddress:()=>{let e;for(e in a)a[e]=a[e].trim()},validateAddress:i}}var _=a(195971),p=a(820113),g=a(452353);let f={API_CONNECTION_ERROR:"api_connection_error",API_ERROR:"api_error",AUTHENTICATION_ERROR:"authentication_error",CARD_ERROR:"card_error",INVALID_REQUEST_ERROR:"invalid_request_error",RATE_LIMIT_ERROR:"rate_limit_error",VALIDATION_ERROR:"validation_error"},E=Object.values(f);function h(e){return!!e&&"object"==typeof e&&E.includes(e.type)}function y(e){return h(e)&&e.type===f.CARD_ERROR}function v(e){return h(e)&&e.type===f.VALIDATION_ERROR}function b(e){return h(e)&&"setup_intent_authentication_failure"===e.code}var w=(e=>(e.NETSUITE_ITEM_ID_ORG_DESIGN_DEPRECATED="2011",e.NETSUITE_ITEM_ID_ORG_FIGJAM_DEPRECATED="2635",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_DEPRECATED="2636",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_DEPRECATED="2637",e.NETSUITE_ITEM_ID_ORG_DESIGN_JPY_DEPRECATED="3092",e.NETSUITE_ITEM_ID_ORG_FIGJAM_JPY_DEPRECATED="3082",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_JPY_DEPRECATED="3071",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_JPY_DEPRECATED="3075",e.NETSUITE_ITEM_ID_ORG_DESIGN_EUR_DEPRECATED="3090",e.NETSUITE_ITEM_ID_ORG_FIGJAM_EUR_DEPRECATED="3084",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_EUR_DEPRECATED="3073",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_EUR_DEPRECATED="3077",e.NETSUITE_ITEM_ID_ORG_DESIGN_GBP_DEPRECATED="3091",e.NETSUITE_ITEM_ID_ORG_FIGJAM_GBP_DEPRECATED="3083",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_GBP_DEPRECATED="3072",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_GBP_DEPRECATED="3076",e.NETSUITE_ITEM_ID_ORG_DESIGN_CAD_DEPRECATED="3089",e.NETSUITE_ITEM_ID_ORG_FIGJAM_CAD_DEPRECATED="3085",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_CAD_DEPRECATED="3074",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_CAD_DEPRECATED="3078",e.NETSUITE_ITEM_ID_ORG_DESIGN="190686",e.NETSUITE_ITEM_ID_ORG_FIGJAM="190681",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN="190657",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM="190669",e.NETSUITE_ITEM_ID_ORG_DESIGN_JPY="190685",e.NETSUITE_ITEM_ID_ORG_FIGJAM_JPY="190680",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_JPY="190656",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_JPY="190668",e.NETSUITE_ITEM_ID_ORG_DESIGN_EUR="190683",e.NETSUITE_ITEM_ID_ORG_FIGJAM_EUR="190678",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_EUR="190654",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_EUR="190665",e.NETSUITE_ITEM_ID_ORG_DESIGN_GBP="190684",e.NETSUITE_ITEM_ID_ORG_FIGJAM_GBP="190679",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_GBP="190655",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_GBP="190667",e.NETSUITE_ITEM_ID_ORG_DESIGN_CAD="190682",e.NETSUITE_ITEM_ID_ORG_FIGJAM_CAD="190677",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_CAD="190653",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_CAD="190665",e))(w||{}),T=a(831429),I=a(845213),N=a(479296),x=a(168039),C=a(621216);function S(e,t,a){let r=a[e];return r&&!r.match(/rgba|color/)?r:("dark"===t?{colorBg:"#2c2c2c",colorBgSelected:"#4a5878",colorBorder:"#444",colorBorderBrand:"#105cad",colorBorderDanger:"#963323",colorBorderSelected:"#0c8ce9",colorIcon:"#fff",colorIconDanger:"#f24822",colorIconSecondary:"rgba(255, 255, 255, 0.7)",colorText:"#fff",colorTextBrand:"#7cc4f8",colorTextDanger:"#fca397",colorTextDisabled:"rgba(255, 255, 255, 0.4)",colorTextSecondary:"rgba(255, 255, 255, 0.7)"}:{colorBg:"#fff",colorBgSelected:"#e5f4ff",colorBorder:"#e6e6e6",colorBorderBrand:"#bde3ff",colorBorderDanger:"#ffc7c2",colorBorderSelected:"#0d99ff",colorIcon:"#191919",colorIconDanger:"#e03e1a",colorIconSecondary:"rgba(0, 0, 0, 0.5)",colorText:"rgba(0, 0, 0, 0.9)",colorTextBrand:"#007be5",colorTextDanger:"#dc3412",colorTextDisabled:"rgba(0, 0, 0, .3)",colorTextSecondary:"rgba(0, 0, 0, .5)"})[e]}let k="stripe-payment-element",A=(0,N.D)(e=>{let{address:t,updateAddress:a,trimAddress:c,validateAddress:f}=u({defaultCountry:e.defaultCountry,initialAddress:e.initialBillingAddress}),{address:E,updateAddress:w,trimAddress:N}=u({defaultCountry:e.defaultCountry,initialAddress:e.initialShippingAddress}),[A,R]=(0,r.useState)(null),[L,P]=(0,r.useState)(e.initialVatGstId??""),[F,O]=(0,r.useState)(e.initialRegionalVatGstId??""),[M,B]=(0,r.useState)(e.initialCustomerLegalName??""),[U,V]=(0,r.useState)(e.initialNameOnPaymentMethod??""),H=(0,r.useRef)(null),W=(0,l.Ay)().user_data,j=function(){let e=(0,x.yM)(),t=(0,x.DP)();return{loader:"never",fonts:[{family:"Inter",src:"url(https://static.figma.com/webfont/1/Inter-Regular.woff2?v=3.10)",weight:"400"}],appearance:{labels:"floating",variables:{fontFamily:C.sq,fontSizeBase:"13px",borderRadius:"3px",spacingGridRow:"0px",colorBackground:S("colorBg",t,e),colorText:S("colorText",t,e),colorTextPlaceholder:S("colorTextSecondary",t,e),colorDanger:S("colorTextDanger",t,e),colorIcon:S("colorIcon",t,e),colorIconCardError:S("colorIconDanger",t,e),colorIconCardCvcError:S("colorIconDanger",t,e),colorIconTab:S("colorIconSecondary",t,e),colorIconTabHover:S("colorIconSecondary",t,e),colorIconTabSelected:S("colorIconSecondary",t,e)},rules:{".Input":{padding:"0 16px",marginTop:"6px",marginBottom:"10px",lineHeight:"28px",boxShadow:"none",borderColor:S("colorBorder",t,e)},".Input:focus":{border:`1px solid ${S("colorBorderSelected",t,e)}`,boxShadow:`0 0 0 1px ${S("colorBorderSelected",t,e)}`},".Input--invalid, .Input--invalid:focus":{color:S("colorText",t,e),border:`1px solid ${S("colorBorderDanger",t,e)}`,boxShadow:`0 0 0 1px ${S("colorBorderDanger",t,e)}`},".Label":{transition:"none"},".Label--invalid":{color:S("colorTextDanger",t,e)},".Label--floating":{color:S("colorTextSecondary",t,e),opacity:1,margin:"5px 0 2px",fontSize:"9px"},".Label--resting":{color:S("colorTextSecondary",t,e)},".Tab":{padding:"12px",marginBottom:"10px",borderColor:S("colorBorder",t,e),color:S("colorTextDisabled",t,e),boxShadow:"none",transition:"none"},".Tab:hover":{backgroundColor:S("colorBgSelected",t,e),borderColor:S("colorBorderBrand",t,e),color:S("colorTextDisabled",t,e)},".Tab:focus, .Tab:active, .Tab--selected, .Tab--selected:hover,, .Tab--selected:focus, .Tab--selected:active":{backgroundColor:S("colorBgSelected",t,e),border:`1px solid ${S("colorBorderSelected",t,e)}`,boxShadow:`0 0 0 1px ${S("colorBorderSelected",t,e)}`,color:S("colorTextBrand",t,e)},".TabLabel":{paddingTop:"4px",lineHeight:1.5,letterSpacing:"0.055px",fontWeight:500}}}}}(),G=function(e){return{layout:{type:"tabs",defaultCollapsed:!1},fields:{billingDetails:{address:"never"}},terms:{auBecsDebit:"never",bancontact:"never",card:"never",ideal:"never",sepaDebit:"never",sofort:"never",usBankAccount:"never"},wallets:{applePay:"never",googlePay:"never"},defaultValues:{billingDetails:{name:e?.name,email:e?.email}}}}(W),[$,z]=(0,r.useState)(void 0);async function Y(){let t=await D(e.setupIntentParams);return(0,n.sx)("setup_intent_creation_attempted",X(),{forwardToDatadog:!0}),t}async function K(){if(H.current)return H.current;try{let[t,a]=await Promise.all([(0,g.eV)(),Y()]),r=t.elements({clientSecret:a.clientSecret,currency:e.currency,...j});return H.current=r,r}catch(e){(0,n.sx)("setup_intent_creation_failed",X(),{forwardToDatadog:!0}),Q({error:e,code:"uninitialized-stripe-elements-error",message:(0,d.t)("payments.errors.error_loading_payment_form")})}}function Q({error:e,code:t,message:a,extra:r={}}){R({code:t,message:a}),"currency-validation-error"===t||y(e)||v(e)||b(e)||(0,o.$D)(s.e.BILLING,Error(`[Billing] ${"string"==typeof e?e:e.code??"StripeError"}`),t=>{let a="object"==typeof e?{stripe_error_details:(0,o.V5)((0,g.pV)(e)),...r}:r;return t.setExtras(a),h(e)&&(t.setTag("stripe_error_type",e.type),y(e)&&t.setLevel("warning")),t})}function X(){return{...e.customerInfo,paymentFlowSource:e.paymentFlowSource,currency:e.currency}}async function q(){if(e.canSeeBillingAddressExp&&!U)return R({code:"name-on-payment-method-required",message:"Name on payment method is required"}),!0;if(!(0,m.$V)(E)&&!M||M&&(0,m.$V)(E))return R({code:"legal-name-and-shipping-address-required",message:"You must provide both legal name and shipping address"}),!0;if(e.canSeeBillingAddressExp)try{await I.$.validateAddresses({billingAddress:t,shippingAddress:E,teamId:e.customerInfo.teamId,isCheckout:e.isCheckout})}catch(e){return R({code:"address-validation-error",message:(0,d.Jv)(e)||e.message}),!0}else{let e=await f();if(e)return R({code:"address-validation-error",message:e}),!0}if(L&&!await (0,T.V)(L,t.country,()=>{},e=>{R({code:"vat-gst-id-verification-error",message:e})})||F&&!await (0,T.V)(F,t.country,()=>{},e=>{R({code:"vat-gst-id-verification-error",message:e})},t.region))return!0;if(e.canSeeBillingAddressExp){if(e.currency)try{await I.$.validateCurrency({teamId:e.customerInfo.teamId,currency:e.currency,billingAddress:t,shippingAddress:E,isCheckout:e.isCheckout})}catch(a){return Q({error:"Currency/Address Mismatch",code:"currency-validation-error",message:(0,d.t)("payments.errors.currency_mismatch_with_country_error",{selected_currency:e.currency.toUpperCase()}),extra:{country:t.country,currency:e.currency}}),!0}else if(e.shouldCheckIpCurrency)try{await I.$.validateCurrency({teamId:e.customerInfo.teamId,currency:(0,p.LN)(),billingAddress:t,shippingAddress:E,isCheckout:e.isCheckout})}catch(a){return Q({error:`Currency & IP address mismatch error: ${JSON.stringify(e.customerInfo)}, country: ${t.country}, currency: ${(0,p.LN)()}`,code:"currency-validation-error",message:(0,d.t)("payments.errors.currency_ip_mismatch_error")}),!0}}else{if(e.currency&&!(0,p.bu)(e.currency,t.country))return Q({error:"Currency/Address Mismatch",code:"currency-validation-error",message:(0,d.t)("payments.errors.currency_mismatch_error",{selected_currency:e.currency.toUpperCase()}),extra:{country:t.country,currency:e.currency}}),!0;if(e.shouldCheckIpCurrency&&(0,p.ub)()!==t.country)return Q({error:`Currency & IP address mismatch error: ${JSON.stringify(e.customerInfo)}, country: ${t.country}, currency: ${(0,p.LN)()}`,code:"currency-validation-error",message:(0,d.t)("payments.errors.currency_ip_mismatch_error")}),!0}return!1}return(0,r.useEffect)(()=>{let t=H.current;t&&t.update({currency:e.currency})},[e.currency]),{createPaymentElement:async(e={})=>{let t=await K();if(!t){Q({error:"Failed to get stripe elements",code:"uninitialized-stripe-elements-error",message:(0,d.t)("payments.errors.error_loading_payment_form")});return}let a=t.getElement("payment")??t.create("payment",G);a.on("ready",t=>{let a=t.value?.type;(0,n.sx)("Payment Form Loaded",{...X(),paymentMethod:a,availableCurrencies:(0,p.B9)()}),z(a),e.ready?.(t)}),a.on("change",t=>{let a=t.value?.type;(0,n.sx)("Choose Payment Method Type",{...X(),paymentMethod:a}),z(a),e.change?.(t)}),a.mount(`#${k}`)},unmountPaymentElement:async()=>{let e=await K();e?.getElement("payment")?.unmount()},savePayment:async()=>{if(R(null),await q())return;if(!H.current){Q({error:"Cannot save payment without Stripe elements",code:"confirm-setup-error",message:(0,d.t)("payments.errors.confirm_setup_error")});return}c(),N();let a=()=>document.querySelectorAll("[name*=privateStripeFrame]").length,r=a(),l=setInterval(()=>{let t=!1;if(r!==a()&&((0,n.sx)("Stripe Authentication Modal"),clearInterval(l),t=!0),W){let a=(0,_.lX)({teamId:e.customerInfo.teamId,userId:W.id});if(a){let e={...a,is3DS:t};(0,_.dT)(W.id,e)}}},1e3);(0,n.sx)("Add payment method",{...X(),paymentMethod:$},{forwardToDatadog:!0});let o=e.canSeeBillingAddressExp&&!(0,m.$V)(E)?{shipping_line1:E.line1||null,shipping_line2:E.line2||null,shipping_country:e.canSeeBillingAddressExp&&E.country||null,shipping_city:E.city||null,shipping_state:E.region||null,shipping_postal_code:E.postal_code||null}:null,s=await (0,g.eV)(),{error:u}=await s.confirmSetup({elements:H.current,confirmParams:{return_url:function({customerInfo:{teamId:e,orgId:t},currency:a,billingPeriod:r,teamName:n,userId:l,isCheckout:o}){let s,c;let d=new URLSearchParams;if(n&&d.append("team_name",n),r&&d.append("billing_period",`${r}`),a&&d.append("selected_currency",a),l&&d.append("fuid",l),o&&d.append("is_checkout",o.toString()),e)s="team",c=e;else if(t)s="org",c=t;else{if(null==e&&void 0!==e)return`https://${window.location.host}/team/validate_payment_method?${d.toString()}`;i.k.error("No valid ID was passed")}return`https://${window.location.host}/${s}/${c}/set_payment_method?${d.toString()}`}({customerInfo:e.customerInfo,currency:e.currency,billingPeriod:e.billingPeriod,teamName:e.teamName,userId:W?.id,isCheckout:e.isCheckout}),payment_method_data:{billing_details:{name:U,address:{line1:t.line1,line2:t.line2,country:t.country,city:t.city,state:t.region,postal_code:t.postal_code}},metadata:{vat_gst_id:L,regional_vat_gst_id:F||null,...o,customer_legal_name:M||null}}}});if(clearInterval(l),u){let e=(0,d.t)("payments.errors.confirm_setup_error");Q({error:u,code:"confirm-setup-error",message:y(u)||v(u)||b(u)?u.message??e:e})}},billingAddress:t,updateBillingAddress:a,shippingAddress:E,updateShippingAddress:w,customerLegalName:M,setCustomerLegalName:B,nameOnPaymentMethod:U,setNameOnPaymentMethod:V,vatGstId:L,setVatGstId:P,regionalVatGstId:F,setRegionalVatGstId:O,paymentMethodType:$,error:A}});var R=(e=>(e.PRO_UPGRADE="pro_upgrade",e.PRO_CHANGE_PAYMENT="pro_change_payment",e))(R||{}),L=(e=>(e.ADDRESS_VALIDATION_ERROR="address-validation-error",e.CONFIRM_SETUP_ERROR="confirm-setup-error",e.CURRENCY_VALIDATION_ERROR="currency-validation-error",e.UNINITIALIZED_STRIPE_ELEMENTS_ERROR="uninitialized-stripe-elements-error",e.VAT_GST_ID_VERIFICATION_ERROR="vat-gst-id-verification-error",e.NAME_ON_PAYMENT_METHOD_REQUIRED="name-on-payment-method-required",e.LEGAL_NAME_AND_SHIPPING_ADDRESS_REQUIRED="legal-name-and-shipping-address-required",e))(L||{});async function D({redirect_url:e,error_redirect_url:t,success_message:a,subtotal_estimate:r,currency:n}){let{data:{meta:{client_secret:i}}}=await c.Ay.post("/api/subscriptions-2018-11-08/setup_intent",{redirect_url:e,error_redirect_url:t,subtotal_estimate:r,currency:n,...a?{success_message:a}:{}});return{clientSecret:i}}},6988:(e,t,a)=>{a.d(t,{x:()=>u});var r=a(411855),n=a(188507),i=a(946689),l=a(762638),o=a(939863),s=a(738269),c=a(662275),d=a(789586),m=a(622139);function u(e){return"org"===e.variant?r.createElement(_,{...e}):r.createElement(p,{...e})}function _(e){let t=e.canSeeBillingAddressExp&&e.billingAddress,a=e.canSeeBillingAddressExp&&e.shippingAddress&&!(0,m.$V)(e.shippingAddress);return r.createElement("div",null,r.createElement(g,{subtitle:(0,o.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.details":"org_self_serve.review_step.organization_details")}),r.createElement(f,{header:(0,o.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.company_legal_name":"org_self_serve.review_step.company_name"),value:e.legalName}),r.createElement(f,{header:(0,o.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.display_name":"org_self_serve.review_step.company_display_name"),value:e.displayName}),!e.canSeeBillingAddressExp&&r.createElement(f,{header:(0,o.tx)("org_self_serve.review_step.domain"),value:e.domain}),!e.canSeeBillingAddressExp&&e.totalTeams>0&&r.createElement(f,{header:(0,o.tx)("org_self_serve.review_step.teams"),value:e.totalTeams.toString()}),e.canSeeBillingAddressExp&&r.createElement(f,{header:(0,o.tx)("org_self_serve.review_step.billing_email"),value:e.userEmail}),e.canSeeBillingAddressExp&&r.createElement(i.Ph,{onClick:e.navigateToEditOrganizationDetails,trackingEventName:"Edit organization details - checkout flow",trusted:!0},(0,o.tx)("org_self_serve.review_step.edit_organization")),t&&r.createElement(f,{header:(0,o.tx)("org_self_serve.review_step.billing_address"),value:E(e.billingAddress)}),a&&r.createElement(f,{header:(0,o.tx)("org_self_serve.review_step.shipping_address"),value:E(e.shippingAddress)}),e.canSeeBillingAddressExp&&r.createElement(i.Ph,{onClick:e.navigateToEditPaymentDetails,trackingEventName:"Edit payment details - checkout flow",trusted:!0},(0,o.tx)("org_self_serve.review_step.edit_payment")))}function p(e){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.selectedView),l=e.canSeeBillingAddressExp&&e.billingAddress,u=e.canSeeBillingAddressExp&&e.shippingAddress&&!(0,m.$V)(e.shippingAddress);return r.createElement("div",null,r.createElement(g,{subtitle:(0,o.tx)("pro_cart.review.details")}),r.createElement(f,{header:(0,o.tx)("pro_cart.review.team_name"),value:e.displayName}),r.createElement(f,{header:(0,o.tx)("pro_cart.review.company_name"),value:e.legalName}),l&&r.createElement(f,{header:(0,o.tx)("pro_cart.review.billing_address"),value:E(e.billingAddress)}),u&&r.createElement(f,{header:(0,o.tx)("pro_cart.review.shipping_address"),value:E(e.shippingAddress)}),r.createElement(i.Ph,{onClick:e.canSeeBillingAddressExp?()=>{t(s.$T({...a,paymentStep:m.tn.PAYMENT_AND_ADDRESS}))}:()=>{t((0,c.to)({type:d.L,data:{modalTitle:(0,o.t)("pro_cart.review.edit_details_modal_header"),displayName:e.displayName,legalName:e.legalName,updateNameImmediately:!1,canSeeBillingAddressExp:e.canSeeBillingAddressExp}}))},trackingEventName:"Edit team details - checkout flow",trusted:!0},(0,o.tx)(e.canSeeBillingAddressExp?"pro_cart.review.edit_details":"pro_cart.review.edit_all_details")))}function g({subtitle:e}){return r.createElement("div",{className:l.cx.font15.fontMedium.lh24.colorText.$},e)}function f({header:e,value:t}){return r.createElement("div",{className:l.cx.flex.flexColumn.mt16.$},r.createElement("p",{className:l.cx.font11.lh16.spacingWide.colorText.$},e),r.createElement("p",{className:l.cx.font13.lh24.fontMedium.colorText.breakWord.mb16.$},t))}function E(e){return[e?.line1,e?.line2,e?.city,e?.region,e?.country,e?.postal_code].filter(function(e){return e}).join(", ")}},66957:(e,t,a)=>{a.d(t,{i:()=>d,m:()=>c});var r=a(411855),n=a(946689),i=a(939863),l=a(175290),o=a(809840),s=a(622139);function c(e){return r.createElement(r.Fragment,null,r.createElement(l.Y,{direction:"horizontal",horizontalAlignItems:"space-between","data-testid":"sidebar-subtotal-cost-row",height:"hug-contents"},r.createElement(o.E,{"data-testid":"sidebar-subtotal-summary-main-text",fontWeight:"regular",fontSize:13},(0,i.tx)("pro_cart.info.subtotal")),r.createElement("span",{"data-testid":"sidebar-subtotal-summary-price-section"},r.createElement(o.E,{"data-testid":"sidebar-subtotal-summary-price-section-price-text",fontWeight:"regular",fontSize:13,children:e.formattedSubtotal}))),r.createElement(o.E,{fontWeight:"regular",color:"tertiary",fontSize:11},(0,i.tx)("checkout.tax_disclaimer"))," ",r.createElement(o.E,{fontWeight:"medium",color:"tertiary",fontSize:11},(0,i.tx)("checkout.review_in_tax_disclaimer")))}function d({numberOfDesignEditors:e,designSubtotal:t,numberOfFigjamEditors:a,figjamSubtotal:c,formattedSubtotal:d,billingPeriod:m}){return r.createElement(r.Fragment,null,r.createElement(l.Y,{direction:"horizontal",horizontalAlignItems:"space-between","data-testid":"sidebar-design-subtotal-cost-row",height:"hug-contents"},r.createElement(o.E,{"data-testid":"sidebar-design-subtotal-summary-main-text",fontWeight:"regular",fontSize:13},(0,i.tx)("pro_cart.sidebar.exp_sticker_shock.design_editors",{numEditors:e})),r.createElement("span",{"data-testid":"sidebar-design-subtotal-summary-price-section"},r.createElement(o.E,{"data-testid":"sidebar-design-subtotal-summary-price-section-price-text",fontWeight:"regular",fontSize:13,children:t}))),r.createElement(n.Kz,{multiple:2}),r.createElement(l.Y,{direction:"horizontal",horizontalAlignItems:"space-between","data-testid":"sidebar-whiteboard-subtotal-cost-row",height:"hug-contents"},r.createElement(o.E,{"data-testid":"sidebar-whiteboard-subtotal-summary-main-text",fontWeight:"regular",fontSize:13},(0,i.tx)("pro_cart.sidebar.exp_sticker_shock.figjam_editors",{numEditors:a})),r.createElement("span",{"data-testid":"sidebar-whiteboard-subtotal-summary-price-section"},r.createElement(o.E,{"data-testid":"sidebar-whiteboard-subtotal-summary-price-section-price-text",fontWeight:"regular",fontSize:13,children:c}))),r.createElement(n.Kz,{multiple:2}),r.createElement(l.Y,{direction:"horizontal",horizontalAlignItems:"space-between","data-testid":"sidebar-subtotal-cost-row",height:"hug-contents"},r.createElement(o.E,{"data-testid":"sidebar-subtotal-summary-main-text",fontWeight:"medium",fontSize:13},(0,i.tx)(m===s.tY.ANNUAL?"pro_cart.sidebar.exp_sticker_shock.subtotal_per_year":"pro_cart.sidebar.exp_sticker_shock.subtotal_per_month")),r.createElement("span",{"data-testid":"sidebar-subtotal-summary-price-section"},r.createElement(o.E,{"data-testid":"sidebar-subtotal-summary-price-section-price-text",fontWeight:"medium",fontSize:13,children:d}))),r.createElement(o.E,{fontWeight:"regular",color:"tertiary",fontSize:11},(0,i.tx)("checkout.tax_disclaimer"))," ",r.createElement(o.E,{fontWeight:"medium",color:"tertiary",fontSize:11},(0,i.tx)("checkout.review_in_tax_disclaimer")))}},941448:(e,t,a)=>{a.d(t,{Ay:()=>c,IE:()=>d});var r=a(411855),n=a(749949),i=a(837324),l=a(107877),o=a(555328),s=a(143678);function c(e){let t=(0,o.m3)(e);return(0,o.U)(e)?{name:s.e0.COMMUNITY_HUB_FILE,properties:m(e)}:(0,o.xQ)(e)?{name:s.e0.COMMUNITY_HUB_WIDGET,properties:{widgetId:e.id,isMonetized:t}}:{name:s.e0.COMMUNITY_HUB_PLUGIN,properties:{pluginId:e.id,isMonetized:t}}}function d(e){let t=(0,n.J)();return r.useMemo(()=>({...m(e),searchSessionId:t}),[e,t])}function m(e){return{hubFileId:e.id,viewerMode:e.viewer_mode,editorType:(0,i.JJ)(e.viewer_mode),isMonetized:(0,o.m3)(e),isMobileView:window.innerWidth<=l.YW}}},323667:(e,t,a)=>{a.d(t,{E:()=>n,d:()=>r});let r="community_comment_creation",n="community_comment_edit"},936682:(e,t,a)=>{a.d(t,{p:()=>n});var r=a(27087);let n=new class{async pinFile({resourceType:e,resourceId:t,fileKey:a,description:n,shouldUpdatePermissions:i}){await r.Ay.post(`/api/pinned_files/${e}/${t}`,{file_key:a,description:n,should_update_permissions:i})}async updatePin({pinnedFileId:e,description:t}){await r.Ay.put(`/api/pinned_files/${e}`,{description:t})}async deletePin({pinnedFileId:e}){await r.Ay.del(`/api/pinned_files/${e}`)}}},840083:(e,t,a)=>{a.d(t,{G:()=>_,Q:()=>u});var r=a(411855),n=a(629019),i=a.n(n),l=a(966712),o=a(374626),s=a(192437),c=a(259927),d=a(977230),m=a(726732),u=(e=>(e.FILE_BROWSER="file_browser",e))(u||{});function _({entryPoint:e}){return r.createElement(s.tH,{boundaryKey:"figment-debugger",fallback:r.createElement("div",null)},r.createElement(p,{entryPoint:e}))}function p({entryPoint:e}){let[t,a]=(0,o.fp)(d.eE);return(0,r.useEffect)(()=>{a(!!(0,m.wh)())},[]),t&&(0,l.kc)().figment_debugger?r.createElement("div",{className:i()("file_browser"===e?"figment_debugger--fileBrowserContainer--KNMPr figment_debugger--container--4qsMx":"figment_debugger--container--4qsMx",c.s4,c.Dm)},r.createElement(g,null)):null}function g(){let[e,t]=(0,o.fp)(d.a4),[a,n]=(0,r.useState)([]),i=(0,r.useRef)(null),l=i.current&&i.current.value.length>0,s=l?a:e;return r.createElement("div",{className:"figment_debugger--mainWrapper--Tty8t",tabIndex:0,"data-fullscreen-intercept":!0},r.createElement(f,null,r.createElement("input",{ref:i,placeholder:"\u{1F50E} Event name",className:"figment_debugger--searchBar--uECKp",onInput:t=>{let a=t.target.value.toLowerCase();a.length<3&&n([]),n(e.filter(e=>e.requestJson.event.toLowerCase().includes(a)))}})),r.createElement(f,null,r.createElement("button",{onClick:()=>{t("clear")}},"[clear]")),l&&r.createElement(f,null,"Showing "+s.length+" of "+e.length+" most recent events"),s.map(e=>r.createElement(E,{key:e.requestJson.figment_debugger_uuid,req:e})))}function f(e){return r.createElement("div",{className:"figment_debugger--sectionWrapper--Zr0-r","data-fullscreen-intercept":!0},e.children)}function E({req:e}){let[t,a]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),l=e.requestJson,o=(0,r.useMemo)(()=>t&&null!=l.properties?Object.entries(l.properties).map(([e,t])=>r.createElement("div",{key:e},e,": ",JSON.stringify(t))):[],[l,t]);return r.createElement(r.Fragment,null,r.createElement("div",{className:"figment_debugger--logrow--dxWpW",tabIndex:0,role:"button",onClick:()=>{a(!t),i(!1)},"data-fullscreen-intercept":!0},r.createElement("span",null,t?"\uFF0D":"\uFF0B"),"\xa0",r.createElement("span",null,e.networkState===d.tM.SUCCESS?"\u{1F49A}":e.networkState===d.tM.FAILURE?"\u{1F494}":"\u{1F9E1}"),"\xa0",r.createElement("span",{className:"figment_debugger--timestamp--BaHtN"},l.sentAt.slice(11,16)),"\xa0",l.event),t&&r.createElement("div",{className:"figment_debugger--propertiesWrapper--hZGnc"},r.createElement("div",{className:"figment_debugger--propertiesButtonsRow--ZL1rH"},r.createElement("button",{onClick:()=>{navigator.clipboard.writeText(JSON.stringify(e.requestJson.properties)),i(!0)}},"[",n?"copied":"copy","]")),o))}},688734:(e,t,a)=>{a.d(t,{H:()=>c});var r=a(411855),n=a(946689),i=a(939863),l=a(237870),o=a(488578),s=a(596049);let c=(0,l.Ju)(function(e){return r.createElement(o.Rw,{confirmationTitle:e.confirmationTitle,confirmText:e.confirmButtonText,onConfirm:e.onBlock,destructive:!0},r.createElement("div",null,r.createElement("p",{className:s._q},(0,i.tx)("community.comments.this_will_remove_their_comments_from_all_your_community_files_and_plugins_it_also_prevents_them_from_leaving_comments_on_your_resources_or_mentioning_you_in_the_future")),r.createElement("p",{className:s._q},(0,i.tx)("community.comments.link_about_managing_restricted_commenters",{link:r.createElement(n.CY,{href:"https://help.figma.com/hc/articles/1500002628062",target:"_blank",trusted:!0},(0,i.tx)("community.comments.learn_more"))}))))},"CommentConfirmBlockModal")},354438:(e,t,a)=>{a.d(t,{H:()=>_});var r=a(411855),n=a(188507);a(966712);var i=a(946689),l=a(574176),o=a(939863),s=a(662275),c=a(265355),d=a(727475),m=a(514931);class u extends r.Component{constructor(){super(...arguments),this.getBannerText=()=>{let e={strongText:"",ctaPreText:""},t=(0,o.t)("community.banner.a_space_for_figma_users_to_share_things_they_create"),a=(0,o.t)("community.banner.community_is_a_space_for_figma_users_to_share_things_they_create");return e={strongText:(0,o.t)("community.banner.this_is_the_figma_community"),ctaPreText:t},this.props.profile?(this.props.user?.community_profile_handle?this.props.profile.id===this.props.user?.community_profile_id?e.strongText=(0,o.t)("community.banner.this_is_your_figma_community_profile"):(e.strongText="",e.ctaPreText=""):e.strongText=(0,o.t)("community.banner.this_is_a_figma_community_profile"),e.ctaPreText=a):this.props.selectedView&&"communityHub"===this.props.selectedView.view&&("hubFile"===this.props.selectedView.subView?(e.strongText=(0,o.t)("community.banner.this_is_a_figma_community_file"),e.ctaPreText=a):"plugin"===this.props.selectedView.subView?(e.strongText=(0,o.t)("community.banner.this_is_a_figma_community_plugin"),e.ctaPreText=a):"widget"===this.props.selectedView.subView&&(e.strongText=(0,o.t)("community.banner.this_is_a_figma_community_widget"),e.ctaPreText=a)),this.props.user?(this.props.user.community_profile_handle?this.props.selectedView&&"communityHub"===this.props.selectedView.view&&this.props.selectedView?.subView==="plugin"&&(e.showPluginDocsCta=!0):e.showProfileCta=!0,this.props.selectedView?.view==="communityHub"&&this.props.selectedView?.subView==="landing"||(e.ctaPreText="")):e.showAccountCta=!0,e},this.onProfileCreateClick=e=>{e.stopPropagation(),e.preventDefault(),this.props.user&&this.props.dispatch(s.to({type:c.S3,data:{userId:this.props.user.id}}))}}render(){let{strongText:e,ctaPreText:t,showPluginDocsCta:a,showProfileCta:n,showAccountCta:s}=this.getBannerText();return e||t||a||n||s?r.createElement("div",{className:this.props.className||""},r.createElement("div",{className:d.cI},r.createElement("div",{className:d.zc},r.createElement(l.B,{svg:m.A,className:d.q3})),r.createElement("span",null,r.createElement("span",{className:d.bv},e," "),r.createElement("span",null,t," "),n&&r.createElement(r.Fragment,null,(0,o.tx)("community.banner.to_follow_creators_and_like_resources",{link:r.createElement(i.N_,{onClick:this.onProfileCreateClick,className:d.nf,trusted:!0},(0,o.t)("community.banner.create_your_own_profile"),"\xa0\u2192"," ")})),s&&r.createElement(i.N_,{href:"https://www.figma.com/signup",target:"_blank",className:d.nf,trusted:!0},(0,o.t)("community.banner.get_started_with_a_free_account"),"\xa0\u2192"," "),a&&r.createElement(r.Fragment,null,(0,o.tx)("community.banner.to_create_your_own_plugin",{link:r.createElement(i.N_,{href:"https://www.figma.com/plugin-docs",target:"_blank",className:d.nf,trusted:!0},(0,o.t)("community.banner.visit_the_docs"),"\xa0\u2192"," ")}))))):null}}u.displayName="CommunityBetaPromoBannerInner";let _=(0,n.Ng)((e,t)=>({selectedView:e.selectedView,user:e.user}))(u)},892123:(e,t,a)=>{a.d(t,{Q:()=>v,o:()=>r});var r,n=a(411855),i=a(188507),l=a(939863),o=a(443474),s=a(749949),c=a(837324),d=a(410424),m=a(853799),u=a(662275),_=a(107877),p=a(988022),g=a(697551),f=a(860178),E=a(555328),h=a(498606),y=a(332086);function v(e){let{resource:t,viewContext:a}=e,s=(0,i.d4)(e=>e.authedActiveCommunityProfile),d=(0,g.cs)(s),m=(0,c.Bl)(t.id,(0,c.Vm)(t)),u=!!m.data?.[0],_=r.useLikeActions(t,!!m.data?.[0],m.data?.[1]||null,a);return d?n.createElement("div",{"data-tooltip-type":h.Ib.TEXT,"data-tooltip":(0,l.t)("community.likes.to_like_switch_to_your_personal_profile"),"data-tooltip-show-immediately":!0},n.createElement(o.b,{isResourceLiked:!1,disabled:!0})):n.createElement(o.b,{onClick:_(),isResourceLiked:u})}(r||(r={})).useLikeActions=function(e,t,a,r){let n=(0,i.wA)(),l=(0,f.iZ)(),o=(0,s.J)(),c=()=>{(0,p.Cu)(b()),(0,E.U)(e)?n(d.zm({hubFileId:e.id})):(0,E.xQ)(e)?n(m.C({id:e.id,resourceType:E.vt.WIDGET})):n(m.C({id:e.id,resourceType:E.vt.PLUGIN}))},g=e=>{if(e.stopPropagation(),l){if(!l.community_profile_id){n(u.to({type:y.G$,data:{userId:l.id,variations:[y.FF.OPT_IN],onFinish:()=>c()}}));return}c()}},h=t=>{if(t.stopPropagation(),!l)throw Error(`Tried to unlike a ${v} as a signed out user`);(0,p.Cu)(b()),(0,E.U)(e)?n(d.Qi({hubFileId:e.id,likeId:a||void 0})):(0,E.xQ)(e)?n(m.$({id:e.id,resourceType:E.vt.WIDGET,likeId:a||void 0})):n(m.$({id:e.id,resourceType:E.vt.PLUGIN,likeId:a||void 0}))},v=(0,E.U)(e)?"hub file":(0,E.xQ)(e)?"widget":"plugin",b=()=>({action:(0,E.U)(e)?t?_.s0.HUB_FILE_UNLIKE:_.s0.HUB_FILE_LIKE:(0,E.xQ)(e)?t?_.s0.WIDGET_UNLIKE:_.s0.WIDGET_LIKE:t?_.s0.PLUGIN_UNLIKE:_.s0.PLUGIN_LIKE,pluginId:e.id,profileId:e.publisher.id,viewContext:r,searchSessionId:o});return function(){return t?e=>h(e):e=>g(e)}}},966537:(e,t,a)=>{a.d(t,{F:()=>_});var r=a(411855),n=a(188507),i=a(776250),l=a(611886),o=a(351226),s=a(749949),c=a(662275),d=a(289104),m=a(237870),u=a(517127);let _=(0,m.Ju)(function({hubFileId:e,onUseHubFile:t}){let a=(0,d.HI)(e),m=(0,s.J)(),_=(0,n.wA)();return a?r.createElement(u.x,{onAgree:()=>{if(t)_(c.AS()),t();else{let e=l.gE(e=>{(0,i.sx)("try_it_out_drafts_picker_menu_opened",{hubFileId:a.id,searchSessionId:m}),_((0,c.to)({type:o._,data:{payload:e}}))});_(c.AS()),_(e({id:a.id,viewer_mode:a.viewerMode,monetized_resource_metadata:a.monetizedResourceMetadataId?{id:a.monetizedResourceMetadataId}:void 0}))}}}):null},"APPLE_EULA_MODAL_ON_USE_HUBFILE_TYPE",m.ZU.YES)},607121:(e,t,a)=>{a.d(t,{s:()=>w});var r=a(411855),n=a(188507),i=a(768137),l=a(799569),o=a(946689),s=a(493323),c=a(881388),d=a(939863),m=a(952540),u=a(6024),_=a(611978),p=a(860178),g=a(593803),f=a(267931),E=a(622139),h=a(237870),y=a(488578),v=a(978436),b=a(173067);let w=(0,h.Ju)(function(e){let t=(0,n.wA)(),a=(0,p.iZ)(),h=(0,_._6)(),w=(0,f.H)(),[T,I]=r.useState(""),[N,x]=r.useState(""),[C,S]=r.useState((0,E.EB)()),[k,A]=r.useState(""),[R,L]=r.useState(!0),[D,P]=r.useState(!1);return(0,u.G)(),r.createElement(y.aF,{className:"collect_tax_info_modal--container--F6VXQ"},r.createElement(l.s_,{dispatch:t}),r.createElement("div",{className:"collect_tax_info_modal--title--wFmJh text--fontPos20--Bcz97 text--_fontBase--QdLsd"},(0,d.tx)("community.seller.collect_tax_info_modal.title")),r.createElement("div",{className:"collect_tax_info_modal--body--M1wrr text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,d.tx)("community.seller.collect_tax_info_modal.body")),r.createElement("div",null,r.createElement(o.Lf,{value:T,htmlName:"firstName",label:(0,d.t)("community.seller.collect_tax_info_modal.first_name"),onChange:e=>{I(e.target.value)},trackingFieldName:"First name",dataTestId:"first-name"}),r.createElement(o.Lf,{value:N,htmlName:"lastName",label:(0,d.t)("community.seller.collect_tax_info_modal.last_name"),onChange:e=>{x(e.target.value)},trackingFieldName:"Last name",dataTestId:"last-name"}),r.createElement(v.X,{updateAddress:S,address:C,countryCodesOverride:g.qE,dontSeeYourCountryLink:"https://help.figma.com/hc/articles/12067637274519-About-selling-Community-resources#What_countries_are_supported?"}),r.createElement(b.A,{onChange:A,country:C.country,setIsVatIdValid:L,vatId:k,isCommunityCheckout:!0})),r.createElement(i.$$,{className:"collect_tax_info_modal--button--ZOQrQ text--fontPos13--xW8hS text--_fontBase--QdLsd",onClick:()=>{if(!a)return;if(!T){t(c.s.error((0,d.t)("community.seller.collect_tax_info_modal.enter_a_first_name")));return}if(!N){t(c.s.error((0,d.t)("community.seller.collect_tax_info_modal.enter_a_last_name")));return}let{line1:r,city:n,country:i,region:l,postal_code:o}=C;if(!r||!n||!i||!o||"US"===i&&!l){t(c.s.error((0,d.t)("community.seller.collect_tax_info_modal.enter_a_valid_address")));return}if(k&&!R){t(c.s.error((0,d.t)("community.seller.collect_tax_info_modal.enter_a_valid_vat_id")));return}P(!0),t(m.j({user:a,callback:t=>{e.setupStripeCallback(t),P(!1),t&&w()},selectedView:h,firstName:T,lastName:N,address:C,vatId:k}))}},r.createElement("div",{className:"collect_tax_info_modal--buttonContent--Nsj1d"},D&&r.createElement("div",{className:"collect_tax_info_modal--loadingIcon--iCbii"},r.createElement(s.kt,{shouldMatchTextColor:!0})),(0,d.tx)("community.seller.collect_tax_info_modal.continue_to_stripe"))))},"CommunityCollectTaxInfoModal")},624618:(e,t,a)=>{a.d(t,{EV:()=>w,NY:()=>T,d:()=>N,dx:()=>b,vR:()=>y});var r=a(411855),n=a(188507),i=a(91408),l=a(946689);a(455057);var o=a(939863);a(226900);var s=a(709595),c=a(662275);a(782501);var d=a(269167),m=a(860178);a(99506);var u=a(596607),_=a(555328),p=a(178787);a(354438);var g=a(877655);a(580999);var f=a(350913),E=a(860168),h=a(183846);function y(e){return r.createElement("div",{className:h.Xk},r.createElement("p",null,e.label),r.createElement(l.nR,{onClick:e.onClickDecline,className:h.LL},(0,o.tx)("community.detail_view.decline")),r.createElement(l.$$,{onClick:e.onClickAccept,className:h.LL},(0,o.tx)("community.detail_view.accept")))}(0,i.hG)(E.dOH);class v extends r.PureComponent{constructor(){super(...arguments),this.getSubjectBodyForResource=()=>(0,_.U)(this.props.resource)?{resourceSubject:(0,o.t)("community.reporting.reporting_an_inappropriate_file"),resourceBody:(0,o.t)("community.reporting.i_want_to_report_this_file_for_violating_the_community_guidelines_resource_url",{resourceUrl:(0,f.cU)(this.props.resource.id)})}:(0,_.xQ)(this.props.resource)?{resourceSubject:(0,o.t)("community.reporting.reporting_an_inappropriate_widget"),resourceBody:(0,o.t)("community.reporting.i_want_to_report_this_widget_for_violating_the_community_guidelines_resource_url",{resourceUrl:(0,f.ox)(this.props.resource.id)})}:{resourceSubject:(0,o.t)("community.reporting.reporting_an_inappropriate_plugin"),resourceBody:(0,o.t)("community.reporting.i_want_to_report_this_plugin_for_violating_the_plugin_guidelines_resource_url",{resourceUrl:(0,f.ab)(this.props.resource.id)})}}render(){let{resourceSubject:e,resourceBody:t}=this.getSubjectBodyForResource(),a=t;return a=`${a}${this.props.user?`
${(0,o.t)("community.reporting.my_figma_user_id_is_user_id",{userId:this.props.user.id})}`:""}
${(0,o.t)("community.reporting.add_your_description_here")}`,r.createElement(l.N_,{href:`mailto:content-reviews@figma.com?subject=${encodeURIComponent(e)}&body=${encodeURIComponent(a)}`,className:h.iZ,trusted:!0},(0,o.tx)("community.detail_view.report_resource"))}}function b(){let e=(0,m.iZ)();return e?r.createElement(l.Ph,{className:h._1,trackingEventName:"Detail View - Report Resource",onClick:()=>{(0,s.jt)(e)},trusted:!0},(0,o.tx)("community.detail_view.report_resource")):null}function w(e){let{user:t,name:a,monetizedResource:i}=e,s=(0,n.wA)();return r.createElement(l.Ph,{className:h._1,trackingEventName:"Detail View - Request Refund",onClick:()=>{s((0,c.to)({type:g.bX,data:{user:t,name:a,monetizedResource:i}}))},trusted:!0},(0,o.tx)("community.buyer.request_refund"))}function T(e){let t=(0,d.R$)(e.resource),a="Detail View - View Order Details",n=(0,o.t)("community.buyer.view_order_details");return(0,p.Uv)(e.resource.monetized_resource_metadata)&&(a="Detail View - Manage Subscription",n=(0,o.t)("community.buyer.manage_subscription")),r.createElement(l.Ph,{className:h._1,onClick:()=>t(),trackingEventName:a,trusted:!0},n)}(0,n.Ng)(e=>({hasOrgs:(0,u.Yj)(e),teams:Object.keys(e.teams).map(t=>e.teams[t]),user:e.user}))(v);var I=(e=>(e[e.PROMO=0]="PROMO",e[e.PAID=1]="PAID",e))(I||{});function N(e){return r.createElement(l.N_,{className:e.className,onClick:e.onClick,trusted:!0},(0,o.tx)("community.detail_view.remove_myself_as_creator"))}},355025:(e,t,a)=>{a.d(t,{K:()=>o});var r=a(411855),n=a(966712);if(443==a.j)var i=a(374626);var l=a(515823);function o(){let e=(0,i.md)(l._),[t,a]=r.useState(!1);return r.useLayoutEffect(()=>{e&&a(!0)},[e]),!!(0,n.kc)().mfa_for_guests&&t}},929018:(e,t,a)=>{a.d(t,{H:()=>v});var r=a(411855),n=a(188507),i=a(776250),l=a(737947),o=a(915440),s=a(711525),c=a(768137),d=a(946689),m=a(322611),u=a(762638),_=a(939863),p=a(662275),g=a(279453),f=a(802026),E=a(558867),h=a(211789),y=a(15344);function v({isInFileBrowser:e=!1,org:t,switchAccountsSection:a,fileKey:v}){let b=(0,n.wA)(),w=(0,o.Rs)(g.M9q,{orgId:t.id}),T="loaded"===w.status,I=T?w.data.currentUser.baseOrgUser?.isMfaRestricted:void 0,N=!0===(0,s.oA)(I),x=T&&w.data.currentUser.baseOrgUser?.org?.mfaRequired===f.CT.GUESTS,C=(0,o.Rs)(g.NSA,{fileKey:v??""},{enabled:!!v}),S="loaded"===C.status&&C.data.file?.canRead;function k(){return r.createElement("div",{className:u.cx.pb16.$},r.createElement(E.Ro,{entity:t,size:64}))}return x&&(!N||S)?r.createElement("div",{className:u.cx.zIndex0.$},r.createElement(m.u,{headerImage:r.createElement(k,null),headerText:(0,_.t)("mfa_required_modal.mfa_enabled.title"),secondaryText:e?(0,_.t)("mfa_required_modal.mfa_enabled.subtile_for_file_browser"):(0,_.t)("mfa_required_modal.mfa_enabled.subtile"),unblockFileBrowserSidebar:e},r.createElement(c.vd,{className:y.lI,type:"submit",onClick:()=>{l.Ay.reload("User set up MFA. Reloading to reflect changes.")}},(0,_.tx)("mfa_required_modal.mfa_enabled.reload")))):r.createElement("div",{className:u.cx.zIndex0.$},r.createElement(m.u,{headerImage:r.createElement(k,null),headerText:(0,_.t)("mfa_required_modal.title",{orgName:t.name}),secondaryText:(0,_.t)("mfa_required_modal.subtitle",{orgName:t.name}),unblockFileBrowserSidebar:e},r.createElement(c.vd,{className:y.lI,type:"submit",onClick:()=>{(0,i.sx)("Two-factor setup started"),b((0,p.to)({type:h.J}))}},(0,_.tx)("mfa_required_modal.cta")),r.createElement(d.CY,{className:y.CU,target:"_blank",href:"https://help.figma.com/hc/en-us/articles/360039817634-Enable-two-factor-authentication-2FA",trusted:!0},(0,_.tx)("general.learn_more")),a))}},5313:(e,t,a)=>{a.d(t,{q:()=>_});var r=a(411855),n=a(188507),i=a(737947),l=a(457215),o=a(476932),s=a(939863),c=a(553015),d=a(662275),m=a(672517),u=a(212957);let _=(0,a(237870).Ju)(function({teamId:e,trackingProperties:t,hasSecondaryBtn:a=!0}){let _=(0,r.useMemo)(()=>(0,l.To)(),[]),p=(0,n.wA)(),g=()=>{p(d.Ce())},f=a?r.createElement(c.V,{onClick:()=>{i.Ay.redirect("/pricing","_blank")}},(0,s.t)("pro_onboarding.pro_feature_modal.compare_plans")):null;return r.createElement(m.fu,{name:"Pro Features Modal",properties:t??u.S.getTrackingProperties(e)},r.createElement(o.n,{..._,dismissModal:g,clickPrimaryBtn:g,secondaryBtn:f,showPricing:!1,panelTitleSize:o.I.LARGE,cardsClickable:!0}))},"ProFeaturesModal")},512077:(e,t,a)=>{a.d(t,{F:()=>y});var r=a(411855),n=a(320063),i=a(946689),l=a(455057),o=a(493323),s=a(574176),c=a(939863),d=a(278733),m=a(865618),u=a(843309),_=a(117480),p=a(452353),g=a(622139),f=a(978436),E=a(173067),h=a(265871);function y({createPaymentElement:e,unmountPaymentElement:t,billingAddress:a,updateBillingAddress:y,legalCompanyName:v,updateLegalCompanyName:b,nameOnPaymentMethod:w,updateNameOnPaymentMethod:T,shippingAddress:I,updateShippingAddress:N,error:x,paymentMethodType:C,paymentElementEventHandlers:S,vatGstId:k,onVatGstIdChange:A,regionalVatGstId:R,onRegionalVatGstIdChange:L,isCommunityCheckout:D,isCheckout:P,canSeeBillingAddressExp:F}){let[O,M]=(0,r.useState)(!1),[B,U]=r.useState(!!I&&!(0,g.$V)(I)&&!!v);return(0,n.h)(()=>((async function(){await e({ready:e=>{M(!0),S?.ready?.(e)},change:S?.change})})(),()=>{t()})),x?.code===u.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR?r.createElement("div",{className:"stripe_payment_and_address--errorContainer--vjs9-"},r.createElement(s.B,{svg:h.A,className:"stripe_payment_and_address--errorIcon--vMQyn"}),r.createElement("p",{className:"stripe_payment_and_address--errorMessage--eZnrd"},x.message)):r.createElement("div",{className:"stripe_payment_and_address--container--1Xdbp"},x&&r.createElement("div",{className:"stripe_payment_and_address--error--z-IbH"},r.createElement(l._,{color:l.S.ERROR,text:x.message})),r.createElement("div",{id:u.Ix}),O?r.createElement("div",{style:d.sx.add({marginTop:"7px"}).if(C&&p.d2.includes(C),{marginTop:"15px"}).$},F&&T&&r.createElement(i.Lf,{value:w||"",htmlName:"name_on_card",label:(0,c.t)("pro_cart.payment.name_on_payment_method_label"),placeholder:(0,c.t)("pro_cart.payment.name_on_payment_method"),onChange:e=>{T(e.target.value.trim())},autoCompleteName:"name on payment method",trackingFieldName:"Name On Payment Method",dataTestId:"name-on-payment-method"}),r.createElement(f.X,{address:a,updateAddress:y,canSeeBillingAddressExp:F,isBillingAddress:!0}),!!A&&r.createElement(E.A,{onChange:A,country:a.country,vatId:k,isCommunityCheckout:D}),!!L&&r.createElement(E.A,{onChange:L,country:a.country,region:a.region,vatId:R,isCommunityCheckout:D,variant:"regional"}),C===p.lB.SEPA&&r.createElement("p",{className:"stripe_payment_and_address--mandateText--hH8C3"},(0,c.tx)("pro_cart.payment.sepa_direct_debit_mandate")),P&&F&&r.createElement("div",{className:"stripe_payment_and_address--paymentDetailsCheckbox--34fJx"},r.createElement(m.S,{checked:B,onChange:e=>{U(e.currentTarget.checked),!e.currentTarget.checked&&(b&&b(""),N&&N((0,g.EB)()))}}),r.createElement("p",null,(0,c.tx)("pro_cart.payment.different_legal_name_or_shipping_address"))),B&&r.createElement(_.E,{canSeeBillingAddressExp:F,shippingAddress:I,updateShippingAddress:N,legalCompanyName:v,updateLegalCompanyName:b})):r.createElement("div",{className:"stripe_payment_and_address--spinnerContainer--hg5Vy"},r.createElement(o.kt,null)))}},37153:(e,t,a)=>{a.d(t,{R:()=>y});var r=a(411855),n=a(629019),i=a.n(n),l=a(776250),o=a(563706),s=a(286640),c=a(946689),d=a(939863),m=a(657544),u=a(101505),_=a(672517);let p="mobile_download_prompt--mobilePromptTitle--7Tgsn text--fontPos13--xW8hS text--_fontBase--QdLsd",g="mobile_download_prompt--mobilePromptOption--TbF2D",f="mobile_download_prompt--mobilePromptOptionTitle--mMUYW text--fontPos13--xW8hS text--_fontBase--QdLsd",E="mobile_download_prompt--mobilePromptOptionImage--Cp9zK",h="mobile_download_prompt_dismissed";function y(e){let{isCompact:t}=e,a=o.aR?m.o:m.J,n=(0,s.UG)(),p=!t&&!!e.renderBlockingPrompt,[y,w]=r.useState(!p),[T,I]=r.useState(!p);r.useEffect(()=>{null===n.get(h)&&(w(!1),I(!1))},[n,p]);let N=()=>{p||(w(!0),(0,l.sx)("mobile_web_mobile_app_download_prompt_dismissed",{userId:e.userIdForTracking}),setTimeout(()=>{I(!0)},300),n.set(h,!0))};return null!==n.get(h)?null:r.createElement(_.fu,{name:"Mobile Download Prompt"},r.createElement("div",{className:i()({"mobile_download_prompt--overlay--OzW6J":!0,"mobile_download_prompt--overlayClosed--2FWpY":y,"mobile_download_prompt--overlayAnimateEnd--dBvI0":T}),style:{transitionDuration:"300ms"},onClick:N},r.createElement("div",{className:i()("mobile_download_prompt--mobilePromptContainer--FKz5e","mobile_download_prompt--mobileDownloadPromptContainer--FaI33",{"mobile_download_prompt--mobileDownloadPromptContainerClosed--DHusv":y,"mobile_download_prompt--mobileDownloadPromptContainerFullHeightBlocking--B100f":p}),onClick:e=>{e.stopPropagation()}},r.createElement("div",{className:i()("mobile_download_prompt--mobilePromptDescriptionContainer--1PhoH",{"mobile_download_prompt--fullHeightPrompt--U6KWw":p})},t?r.createElement(b,null):r.createElement(v,{renderBlockingPrompt:p??!1})),r.createElement("hr",{className:i()({"mobile_download_prompt--mobilePromptHR--UpOqS":!0,"mobile_download_prompt--fullWidthHR--B-2i1":p})}),r.createElement("div",{className:g},r.createElement("img",{className:E,src:"https://static.figma.com/uploads/249f0f055b922ecef6bffc592a8420e7e6eddcea",alt:(0,d.t)("file_browser.mobile_prompt.app_image_alt")}),r.createElement("div",null,r.createElement("h3",{className:f},(0,d.tx)("file_browser.mobile_prompt.app_title")),r.createElement("p",{className:"mobile_download_prompt--mobilePromptOptionDescription--APlZp text--fontPos11--2LvXf text--_fontBase--QdLsd"},p?(0,d.tx)("file_browser.mobile_prompt.app_description_new"):(0,d.tx)("file_browser.mobile_prompt.app_description"))),r.createElement(c.pY,{trackingProperties:{userId:e.userIdForTracking,appLink:a,trackingDescriptor:u.c.MOBILE_WEB_MOBILE_APP_DOWNLOAD_PROMPT_CLICKED},href:a,className:"mobile_download_prompt--downloadActionButton--lOsEh"},(0,d.tx)("file_browser.mobile_prompt.app_action"))),!p&&r.createElement("div",{className:g},r.createElement("img",{className:E,src:"https://static.figma.com/uploads/741698fed49afa5e8f3becdd906e66d32c8e7fae",alt:(0,d.t)("file_browser.mobile_prompt.browser_image_alt")}),r.createElement("div",null,r.createElement("h3",{className:f},(0,d.tx)("file_browser.mobile_prompt.browser_title"))),r.createElement(c.p6,{onClick:()=>N(),className:"mobile_download_prompt--continueActionButton--7yKGD"},(0,d.tx)("file_browser.mobile_prompt.browser_action"))))))}function v(e){return r.createElement(r.Fragment,null,r.createElement("img",{className:"mobile_download_prompt--mobilePromptImage--U2Yqj",src:"https://static.figma.com/uploads/5f1dc37f397dbddf711d3d950bee5dd46c07fc72",alt:(0,d.t)("file_browser.mobile_prompt.image_alt")}),r.createElement("div",{className:"mobile_download_prompt--mobilePromptTitleContainer--o8VIK"},r.createElement("h2",{className:p},e.renderBlockingPrompt?(0,d.tx)("file_browser.mobile_prompt.modal_title_blocking"):(0,d.tx)("file_browser.mobile_prompt.modal_title")),r.createElement("p",{className:"mobile_download_prompt--mobilePromptSubTitle--GFR67 text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.renderBlockingPrompt?(0,d.tx)("file_browser.mobile_prompt.modal_body_blocking"):(0,d.tx)("file_browser.mobile_prompt.modal_body"))))}function b(){return r.createElement(r.Fragment,null,r.createElement("h2",{className:p},(0,d.tx)("file_browser.mobile_prompt.modal_title_compact")))}},324666:(e,t,a)=>{function r(){return null}a.d(t,{GO:()=>p,H5:()=>n,Mr:()=>h,Qc:()=>s,eg:()=>_,g9:()=>y,go:()=>o,i_:()=>v,j8:()=>g,kD:()=>i,l:()=>u,li:()=>m,lt:()=>l,mh:()=>E,oT:()=>f,rC:()=>c,rf:()=>d});let n=r,i=r,l=r,o=r,s=r,c=r,d=r,m=r,u=r,_=r,p=r,g=r,f=r,E=r,h=r,y=r,v=r},67048:(e,t,a)=>{a.d(t,{G:()=>c});var r=a(411855),n=a(629019),i=a.n(n),l=a(498480),o=a(762638),s=a(939863);function c({location:e,overrideText:t,hoverStyleClassName:a}){return r.createElement(l.Ex,{className:i()(o.cx.font11.fontNormal.h16.px4.b1.bRadius5.mr0.hFitContent.if("MODAL"===e||"FILE_BROWSER_BAR"===e||"SLIDES_REWRITE_MODAL"===e,o.cx.colorTextSecondary.colorBorder).if("SUMMARIZE_NUDGE"===e,o.cx.colorTextOnbrand.colorBorderBrand).if("SUMMARIZE_NUDGE_DISABLED"===e,o.cx.colorTextOnbrand.colorBorderDisabled).if("INLINE_TOOLBAR"===e,o.cx.colorTextMenuSecondary.colorBorderMenu).if("SLIDES_REWRITE_MODAL"===e,o.cx.textBodySmall).$,a),color:l.zE.INVERT,subtle:!0,text:t??(0,s.t)("whiteboard.ai_modal.beta_badge")})}}}]);

//# debugId=e6c839fb-c6cf-5afe-94ae-7d5055402c1a

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/b9ca3f22607a27e58de5ca1a93537aea203af769/file_browser-d5a5b80c7aa98970.min.js.map