"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="41eaa549-f8bc-5221-a646-f5c273c10b6d")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[1841],{231522:(e,t,a)=>{a.d(t,{Ac:()=>B,Bo:()=>I,E0:()=>A,EU:()=>E,F:()=>ee,F0:()=>X,Fb:()=>u,Gn:()=>O,HX:()=>R,HY:()=>h,Hl:()=>D,Ie:()=>p,Jr:()=>i,Ks:()=>l,LC:()=>M,N6:()=>s,Nd:()=>n,PT:()=>x,P_:()=>w,Pr:()=>z,Ps:()=>H,QB:()=>S,S:()=>et,Su:()=>g,TV:()=>P,W:()=>C,Wu:()=>L,Yw:()=>U,ZD:()=>Y,Zy:()=>Q,ab:()=>v,aq:()=>j,b0:()=>o,dX:()=>V,db:()=>f,eA:()=>J,fK:()=>$,h7:()=>F,hy:()=>q,iY:()=>es,im:()=>r,kv:()=>y,ni:()=>T,of:()=>K,p7:()=>c,pV:()=>b,q9:()=>G,qS:()=>er,re:()=>_,sD:()=>m,sH:()=>ea,uD:()=>N,uz:()=>d,vK:()=>k,vg:()=>W,x:()=>Z});let r="team_upgrade_v2--teamUpgrade---rASs",s="team_upgrade_v2--breadCrumbsMenuContainer--dvekb",n="team_upgrade_v2--cancelMenuItem--2RsWk",d="team_upgrade_v2--checkoutStepContainer--a0yBO",i="team_upgrade_v2--checkoutPageContent--HATl6",p="team_upgrade_v2--checkoutSidebarContainer--utUoC",u="team_upgrade_v2--stepTitle--4NAuW",o="team_upgrade_v2--stepSubtitle--YyFvT",m="team_upgrade_v2--adjustEditorsBody--jqZkR",_="team_upgrade_v2--adjustEditorsSection--S7GmH",c="team_upgrade_v2--teamWithAvatarHandle--cPZzE",l="team_upgrade_v2--adjustEditorsRow--kbqDx",g="team_upgrade_v2--adjustEditorsRowStart--Vse1R team_upgrade_v2--adjustEditorsRow--kbqDx",b="team_upgrade_v2--greyDivider--wKQUb",h="team_upgrade_v2--columnTitle--btKvn",v="team_upgrade_v2--editorColumn--vx6Sp",S="team_upgrade_v2--editorInfo--CSCyJ",E="team_upgrade_v2--normalGreyText--hzcfc",T="team_upgrade_v2--truncateEditorColumnText--GS8AU",C="team_upgrade_v2--editorEmail--mF8D- team_upgrade_v2--normalGreyText--hzcfc team_upgrade_v2--truncateEditorColumnText--GS8AU",A="team_upgrade_v2--checkboxColumn--Ocx0d",y="team_upgrade_v2--checkbox--UA9TI",D="team_upgrade_v2--plusSvg--Y1zMt",N="team_upgrade_v2--textLink--t33F3",w="team_upgrade_v2--paymentStripeContainer--UkrEB",f="team_upgrade_v2--reviewStepBody--bWjBO",R="team_upgrade_v2--reviewStepBodyWithBusinessDetails--1YrJl",x="team_upgrade_v2--reviewStepBusinessDetails--fcmPK",I="team_upgrade_v2--reviewStepSummary--ruxM5",k="team_upgrade_v2--banner--mJW7s",O="team_upgrade_v2--reviewStepCheckbox--3Q69b",P="team_upgrade_v2--reviewStepUpgradeTitle--QJfMJ",M="team_upgrade_v2--sidebarTitle--MY3Uh",B="team_upgrade_v2--sidebarOption--dHDz0",L="team_upgrade_v2--sidebarOptionLabel--IUNHx",U="team_upgrade_v2--sidebarOptionLabelWithAnnualSavings--861RA",F="team_upgrade_v2--sidebarCurrencyContainer--VMPEp",H="team_upgrade_v2--teamName--n59vL",Y="team_upgrade_v2--billingCycleHeader--8laVr",j="team_upgrade_v2--radioRow--tznVj",K="team_upgrade_v2--strikethrough--jI4mc",q="team_upgrade_v2--greyStrikethrough--Jbgox team_upgrade_v2--strikethrough--jI4mc",W="team_upgrade_v2--editorCostRow--KJrC6",G="team_upgrade_v2--calculationRow--PKA-7",V="team_upgrade_v2--planComparison--XjxhG",J="team_upgrade_v2--createTeamButton--F2nsr",X="team_upgrade_v2--createTeamNameInput--BvH1V",z="team_upgrade_v2--createTeamIcon--27Mtz",Q="team_upgrade_v2--createTeamTextInput--qXTZr",Z="team_upgrade_v2--createTeamUpgradeExisting--Vjzv8",$="team_upgrade_v2--cartButton--dj1gp",ee="team_upgrade_v2--centered--HXt6c",et="team_upgrade_v2--loadingSpinner--qI2xc publish_modal--spinner--7DaqW",ea="team_upgrade_v2--numeric--eSa4E",er="team_upgrade_v2--badge--hwxQy",es="team_upgrade_v2--infoSection--HIqIK"},55992:(e,t,a)=>{a.d(t,{kR:()=>C,vU:()=>A});var r=a(411855),s=a(188507),n=a(935283),d=a(966712),i=a(48793),p=a(939863),u=a(738269),o=a(507877),m=a(101505),_=a(672517),c=a(195971),l=a(860178),g=a(257512),b=a(622139),h=a(637590),v=a(231522);function S(e){return r.createElement(_.$z,{type:"button",className:v.Nd,trackingProperties:{trackingDescriptor:m.c.CANCEL},onClick:e.onClick},(0,p.tx)("pro_cart.breadcrumbs.cancel"))}var E=(e=>(e[e.PLAN_COMPARISON=0]="PLAN_COMPARISON",e[e.CREATE_TEAM=1]="CREATE_TEAM",e[e.ADD_COLLABORATORS=2]="ADD_COLLABORATORS",e[e.ADJUST_EDITORS=3]="ADJUST_EDITORS",e[e.SET_EDITORS=4]="SET_EDITORS",e[e.PAYMENT_AND_ADDRESS=5]="PAYMENT_AND_ADDRESS",e[e.CONFIRM_PAY=6]="CONFIRM_PAY",e))(E||{});function T(e,t,a,r){let s=t===b.tY.STUDENT,d=[];switch(e){case h.SC.CREATE_AND_UPGRADE:d.push(0),d.push(1),s?d.push(4):a||(d.push(4),d.push(5)),d.push(6);break;case h.SC.UPGRADE_EXISTING_TEAM:r===h.Sc.TEAM?(d.push(3),s||d.push(5)):s?(d.push(0),d.push(3)):a?d.push(0):(d.push(0),d.push(4),d.push(5)),d.push(6);break;case h.SC.CREATE:d.push(1),d.push(2),d.push(0),r===h.Sc.TEAM&&(s?d.push(4):a||(d.push(4),d.push(5)),d.push(6));break;default:(0,n.xb)(e)}return d.map(e=>(function(e){switch(e){case 0:return{step:b.tn.PLAN_COMPARISON,text:(0,p.t)("pro_cart.breadcrumbs.choose_plan")};case 1:return{step:b.tn.CREATE_TEAM,text:(0,p.t)("pro_cart.breadcrumbs.create_team")};case 2:return{step:b.tn.ADD_COLLABORATORS,text:(0,p.t)("pro_cart.breadcrumbs.add_team_members")};case 3:return{step:b.tn.CHOOSE_PLAN,text:(0,p.t)("pro_cart.breadcrumbs.adjust_editors.seat_rename")};case 4:return{step:b.tn.CHOOSE_PLAN,text:(0,p.t)("pro_cart.breadcrumbs.set_editors.seat_rename")};case 5:return{step:b.tn.PAYMENT_AND_ADDRESS,text:(0,p.t)("pro_cart.breadcrumbs.payment_information")};case 6:return{step:b.tn.CONFIRM_PAY,text:(0,p.t)("pro_cart.breadcrumbs.review")}}})(e))}function C(e,t,a,r,s,n){let d=T(t,a,r,s).map(e=>e.step),i=d.indexOf(e);return n=n||d[0],-1===i?n:d[i+1]}function A(e){let{selectedView:t}=e,{teamId:a,paymentStep:n,teamFlowType:p}=t,m=(0,s.wA)(),_=(0,s.d4)(e=>e.payment.billingPeriod),E=l.iZ()?.id,C=T(p,_,(0,s.d4)(e=>e.payment.promo),e.selectedView.planType||h.Sc.UNDETERMINED),A=C.findIndex(e=>e.step===n);return r.createElement("div",{className:v.N6},r.createElement(S,{onClick:()=>{((0,d.sj)(),(0,g.Mt)(m),(0,h.h5)(p)&&null===a&&(0,c.Al)(E),(0,d.kc)().ps_benchmark&&E)?a&&(!t.previousView||"fullscreen"!==t.previousView.view)?m(o._l({workspace:{userId:E,teamId:a,orgId:null},view:{view:"recentFiles"}})):m(u.$T(t.previousView||{view:"recentFiles"})):m(u.$T(t.previousView||(a?{view:"team",teamId:a}:{view:"recentFiles"}))),t.callbackOnClose?.()}}),C.map((e,a)=>r.createElement(i.On,{key:e.text,selected:n===e.step,number:a+1,text:e.text,canClick:a<A,lightText:!0,onClick:()=>{m(u.$T({...t,paymentStep:e.step,billingPeriod:_===b.tY.UNSPECIFIED?void 0:_,planType:(0,h.ck)(p,e.step)?h.Sc.UNDETERMINED:t.planType,teamFlowType:(0,h.jX)(p)&&e.step===b.tn.PLAN_COMPARISON?h.SC.CREATE_AND_UPGRADE:t.teamFlowType}))}})))}},195971:(e,t,a)=>{a.d(t,{Al:()=>h,dT:()=>b,kt:()=>l,lX:()=>c,nt:()=>E,pI:()=>g});var r=a(411855),s=a(188507),n=a(531664),d=a(358145),i=a(286640),p=a(99506),u=a(479296),o=a(860178),m=a(243987);let _=e=>`SAVED_CART::${e}`;function c({teamId:e,userId:t}){if(!t)return null;let a=S(t);return a?.teamId===e?a:null}let l=443==a.j?["","",""]:null;function g({loadingPaidEditors:e,teamId:t,teamName:a,setTeamName:i,collaborators:u,setCollaborators:_}){let c=(0,o.iZ)(),g=(0,s.d4)(e=>(t?e.teamUserByTeamId[t]:{})||{}),h=(0,s.d4)(e=>e.payment.numDesignEditors),v=(0,s.d4)(e=>e.payment.numWhiteboardEditors),E=(0,s.d4)(e=>e.payment.editorStatusChanges),T=(0,d.ZC)(e),C=(0,m.BR)(g,c),A=(0,m.O1)(h,(0,m.Ky)(C,E,p._Y.DESIGN)),y=(0,m.O1)(v,(0,m.Ky)(C,E,p._Y.WHITEBOARD)),D=(0,r.useCallback)(()=>{let e=S(c?.id);if(!e)return null;let{createdAt:t,updatedAt:a,...r}=e;return r},[c?.id]);(0,r.useEffect)(()=>{let r=D(),s=null!==t||a?a:r?.newTeamName,d=null===t&&!u||(0,n.c2)(u,l)?r?.newCollaborators??l:u,p={teamId:t,editorStatusChanges:E,numEmptyDesignSeats:A,numEmptyWhiteboardSeats:y,newTeamName:s,newCollaborators:d,is3DS:r?.is3DS};!e&&c&&((0,n.he)(r,p)||b(c.id,p),T&&(i&&s!==a&&i(s||""),_&&!(0,n.c2)(u,d)&&_(d||l)))},[e,T,c,t,E,A,y,D,a,i,u,_])}let b=(0,u.D)((e,t)=>{try{let a=new Date().toISOString(),r={...t,createdAt:a,updatedAt:a};i.TQ()?.setItem(_(e),v(r))}catch(e){console.error("Failed to save cart state to Local Storage")}});function h(e){if(e)try{i.TQ()?.removeItem(_(e))}catch(e){}}let v=e=>JSON.stringify(e),S=e=>{if(!e)return null;try{let t=i.TQ()?.getItem(_(e));if(t)return JSON.parse(t);return null}catch(e){return null}};function E(e,t){let a=t.map(e=>e.id),r=e=>e?.filter(e=>a.includes(e))??[];return{upgrade:{design:r(e.upgrade.design),slides:r(e.upgrade.slides),sites:r(e.upgrade.sites),whiteboard:r(e.upgrade.whiteboard),cooper:r(e.upgrade.cooper)},downgrade:{design:r(e.downgrade.design),slides:r(e.downgrade.slides),sites:r(e.downgrade.sites),whiteboard:r(e.downgrade.whiteboard),cooper:r(e.upgrade.cooper)}}}},257512:(e,t,a)=>{a.d(t,{$7:()=>A,Mt:()=>N,Ud:()=>y});var r=a(411855),s=a(188507),n=a(776250),d=a(367253),i=a(358145),p=a(966712),u=a(27087),o=a(881388),m=a(939863),_=a(738269),c=a(182976),l=a(995852),g=a(229403),b=a(99506),h=a(622139),v=a(479296),S=a(195971),E=a(860178),T=a(336599),C=a(243987);function A(){let e=(0,s.wA)(),t=(0,s.d4)(e=>e.payment);function a(a){e(l.Az({numWhiteboardEditors:t.numWhiteboardEditors+a}))}function r(a){e(l.js({numDesignEditors:t.numDesignEditors+a}))}return{increment:function(e,t){(0,d.nD)(t)||("whiteboard"===e?a(1):r(1))},decrement:function(e,t){(0,d.nD)(t)||("whiteboard"===e?a(-1):r(-1))}}}let y=(0,v.D)(({teamId:e,canSeeBillingAddressExp:t})=>{let a=(0,s.wA)(),c=(0,s.d4)(e=>e.loadingState),v=(0,s.d4)(t=>e?t.teamUserByTeamId[e]:null),A=(0,s.d4)(e=>e.selectedView),y=(0,E.iZ)(),[w,f]=(0,r.useState)(!0),R=(0,i.ZC)(e),x=g.Xw.loadingKeyForPayload({teamId:e}),I=(0,T.GH)(c,x),k=(0,p.DC)();(0,r.useEffect)(()=>{a(g.Xw({teamId:e}))},[a,e]);let O=function(){let e=(0,s.wA)();return(0,r.useCallback)(t=>{(0,n.sx)("Loaded Saved Cart State",{teamId:t.teamId,lastSavedAt:t.updatedAt}),e(l.eK(t))},[e])}();return(0,r.useEffect)(()=>{async function r(t){try{let r=await u.Ay.post("/api/subscriptions/teams/calculate_estimate",{...t,team_id:e});a(l.i({taxes:r.data.meta.estimate}))}catch(e){a(o.s.error((0,m.t)("payments.errors.estimate_calculation_error"))),a(_.$T({...A,paymentStep:h.tn.PAYMENT_AND_ADDRESS}))}f(!1)}if(void 0===R||R===e||w||(N(a),f(!0)),(!e||I)&&w){let n=(0,C.BR)(v,y),i=Object.entries(n).map(([e,t])=>{if((0,d.nD)(t.email||""))return e}).filter(e=>!!e);a(l.M2({figmaEmailTeamUsers:i}));let p=(0,S.lX)({teamId:e,userId:y?.id});if(p){p.editorStatusChanges=(0,S.nt)(p.editorStatusChanges,n);let d=(0,C.Ky)(n,p.editorStatusChanges,b._Y.DESIGN),u=(0,C.Ky)(n,p.editorStatusChanges,b._Y.WHITEBOARD),o=d+p.numEmptyDesignSeats,m=u+p.numEmptyWhiteboardSeats;if(O({numDesignEditors:o,numWhiteboardEditors:m,editorStatusChanges:p.editorStatusChanges,teamId:e,updatedAt:p.updatedAt}),k){var s;let e=(s=k.billing_period,h.tY[h.tY[s]]),n=t?{billing_address:k.billing_address,shipping_address:k.shipping_address||k.billing_address}:null;a(l.Lo({billingPeriod:e})),a(l.$h({vatGstId:k.vat_gst_id})),a(l.yy({legalName:k.customer_legal_name||k.company_name,displayName:k.display_name})),a(l.Ef({regionalVatGstId:k.regional_vat_gst_id})),r({address:k.address,editor_status_changes:p.editorStatusChanges,figma_email_team_users:i,selected_currency:k.currency,annual_quantity:(0,C.fD)(e,o),monthly_quantity:(0,C.Rq)(e,o),annual_whiteboard_quantity:(0,C.fD)(e,m),monthly_whiteboard_quantity:(0,C.Rq)(e,m),vat_gst_id:k.vat_gst_id,regional_vat_gst_id:k.regional_vat_gst_id,...n})}else f(!1)}else f(!1)}},[a,I,v,R,e,y,w,k,A,O,t]),(0,r.useEffect)(()=>()=>{e&&D(a,e)},[a,e]),w}),D=(0,v.D)((e,t)=>{let a=g.Xw.loadingKeyForPayload({teamId:t});e(c.yH({key:a}))});function N(e){e(l.Je({editorStatusChanges:{upgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[]},downgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[]}}})),e(l.js({numDesignEditors:0})),e(l.Az({numWhiteboardEditors:0}))}},848044:(e,t,a)=>{a.d(t,{I:()=>s});var r=a(411855);class s extends r.Component{render(){return r.createElement("div",{className:"persisted_error--container--ls5K4",style:{marginTop:this.props.marginTop??32}},r.createElement("div",{className:"persisted_error--sideBar--C-abH"}),r.createElement("div",{className:"persisted_error--message--EiciR"},this.props.message))}}},48793:(e,t,a)=>{a.d(t,{On:()=>n,Kh:()=>p,JR:()=>i});var r=a(411855),s=a(935283);class n extends r.PureComponent{render(){(0,s.KF)(Number.isInteger(this.props.number),"breadcrumb step must be an integer"),(0,s.KF)(this.props.number>=1&&this.props.number<=20,"breadcrumb step is out of expected range");let e="";return this.props.selected?(e+="step_breadcrumb--stepSelected--aaq-4 step_breadcrumb--step--h0dTR",this.props.lightText&&(e+=" step_breadcrumb--whiteText--TeOgy")):(e+="step_breadcrumb--step--h0dTR",this.props.lightText&&(e+=" step_breadcrumb--greyText--Xid8Q")),this.props.canClick&&(this.props.lightText?e+=" step_breadcrumb--stepClickableLight--e7tX-":e+=" step_breadcrumb--stepClickable--t001q step_breadcrumb--step--h0dTR step_breadcrumb--stepClickable-on-hover---oTm4"),r.createElement("div",{"data-testid":this.props.number+this.props.text,className:e,onClick:()=>this.props.canClick&&this.props.onClick&&this.props.onClick()},r.createElement("span",{className:"step_breadcrumb--stepNumber--0A5tz"},String.fromCharCode(9311+this.props.number)),this.props.text)}}n.displayName="StepBreadcrumb";class d extends r.PureComponent{render(){return r.createElement("div",{className:"step_breadcrumb--stepBreadcrumbSpacer--baFNr"})}}d.displayName="StepBreadcrumbSpacer";class i extends r.PureComponent{render(){return r.createElement("div",{className:`step_breadcrumb--stepTitle--kyggE text--fontPos22--4H4Fc text--_fontBase--QdLsd ${this.props.className||""}`},this.props.children)}}i.displayName="StepTitle";class p extends r.PureComponent{render(){return r.createElement("div",{className:"step_breadcrumb--stepInstructions--gjSRc text--fontPos14--OL9Hp text--_fontBase--QdLsd",...this.props})}}p.displayName="StepInstructions"}}]);

//# debugId=41eaa549-f8bc-5221-a646-f5c273c10b6d

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/19bd83f52d6ebaf59dc2c210b7fccd8e73973f29/1841-704f834b8211fed8.min.js.map